/*
 GeneXus 16.0.0.127463*/
(function(c,g){if("object"===typeof exports&&exports)g(exports);else{var k={};g(k);"function"===typeof define&&define.amd?define(k):c.Mustache=k}})(this,function(c){function g(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function k(a){this.tail=this.string=a;this.pos=0}function j(a,b){this.view=a||{};this.parent=b;this._cache={}}function a(){this.clearCache()}function b(a,d,f,l){for(var j="",g,k,n=0,t=a.length;n<t;++n)switch(g=a[n],k=g[1],g[0]){case "#":k=f.lookup(k);if("object"===typeof k)if(q(k))for(var m=
0,p=k.length;m<p;++m)j+=b(g[4],d,f.push(k[m]),l);else k&&(j+=b(g[4],d,f.push(k),l));else"function"===typeof k?(g=null==l?null:l.slice(g[3],g[5]),k=k.call(f.view,g,function(a){return d.render(a,f)}),null!=k&&(j+=k)):k&&(j+=b(g[4],d,f,l));break;case "^":k=f.lookup(k);if(!k||q(k)&&0===k.length)j+=b(g[4],d,f,l);break;case ">":k=d.getPartial(k);"function"===typeof k&&(j+=k(f));break;case "&":k=f.lookup(k);null!=k&&(j+=k);break;case "name":k=f.lookup(k);null!=k&&(j+=c.escape(k));break;case "text":j+=k}return j}
function d(a){return[RegExp(g(a[0])+"\\s*"),RegExp("\\s*"+g(a[1]))]}var f=/\s*/,l=/\s+/,n=/\S/,t=/\s*=/,o=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/,m=RegExp.prototype.test,s=Object.prototype.toString,q=Array.isArray||function(a){return"[object Array]"===s.call(a)},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};k.prototype.eos=function(){return""===this.tail};k.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(this.tail=this.tail.substring(a[0].length),this.pos+=
a[0].length,a[0]):""};k.prototype.scanUntil=function(a){var b=this.tail.search(a);switch(b){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,b),this.tail=this.tail.substring(b),this.pos+=b}return a};j.make=function(a){return a instanceof j?a:new j(a)};j.prototype.push=function(a){return new j(a,this)};j.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."==a)b=this.view;else for(var d=this;d;){if(0<a.indexOf("."))for(var b=
d.view,f=a.split("."),l=0;b&&l<f.length;)b=b[f[l++]];else b=d.view[a];if(null!=b)break;d=d.parent}this._cache[a]=b}"function"===typeof b&&(b=b.call(this.view));return b};a.prototype.clearCache=function(){this._cache={};this._partialCache={}};a.prototype.compile=function(a,b){var d=this._cache[a];d||(d=c.parse(a,b),d=this._cache[a]=this.compileTokens(d,a));return d};a.prototype.compilePartial=function(a,b,d){b=this.compile(b,d);return this._partialCache[a]=b};a.prototype.getPartial=function(a){!(a in
this._partialCache)&&this._loadPartial&&this.compilePartial(a,this._loadPartial(a));return this._partialCache[a]};a.prototype.compileTokens=function(a,d){var f=this;return function(l,c){if(c)if("function"===typeof c)f._loadPartial=c;else for(var g in c)f.compilePartial(g,c[g]);return b(a,f,j.make(l),d)}};a.prototype.render=function(a,b,d){return this.compile(a)(b,d)};c.name="mustache.js";c.version="0.7.2";c.tags=["{{","}}"];c.Scanner=k;c.Context=j;c.Writer=a;c.parse=function(a,b){a=a||"";b=b||c.tags;
"string"===typeof b&&(b=b.split(l));if(2!==b.length)throw Error("Invalid tags: "+b.join(", "));for(var j=d(b),q=new k(a),s=[],r=[],u=[],C=!1,A=!1,B,y,D,K;!q.eos();){B=q.pos;if(D=q.scanUntil(j[0])){K=0;for(var M=D.length;K<M;++K)if(y=D.charAt(K),m.call(n,y)?A=!0:u.push(r.length),r.push(["text",y,B,B+1]),B+=1,"\n"==y){if(C&&!A)for(;u.length;)delete r[u.pop()];else u=[];A=C=!1}}if(!q.scan(j[0]))break;C=!0;y=q.scan(p)||"name";q.scan(f);"="===y?(D=q.scanUntil(t),q.scan(t),q.scanUntil(j[1])):"{"===y?(D=
q.scanUntil(RegExp("\\s*"+g("}"+b[1]))),q.scan(o),q.scanUntil(j[1]),y="&"):D=q.scanUntil(j[1]);if(!q.scan(j[1]))throw Error("Unclosed tag at "+q.pos);K=[y,D,B,q.pos];r.push(K);if("#"===y||"^"===y)s.push(K);else if("/"===y){if(0===s.length)throw Error('Unopened section "'+D+'" at '+B);y=s.pop();if(y[1]!==D)throw Error('Unclosed section "'+y[1]+'" at '+B);}else if("name"===y||"{"===y||"&"===y)A=!0;else if("="===y){b=D.split(l);if(2!==b.length)throw Error("Invalid tags at "+B+": "+b.join(", "));j=d(b)}}if(y=
s.pop())throw Error('Unclosed section "'+y[1]+'" at '+q.pos);for(var j=r,q=[],L,r=0,u=j.length;r<u;++r)if(s=j[r])"text"===s[0]&&L&&"text"===L[0]?(L[1]+=s[1],L[3]=s[3]):(L=s,q.push(s));L=q;q=j=[];s=[];u=0;for(C=L.length;u<C;++u)switch(r=L[u],r[0]){case "#":case "^":s.push(r);q.push(r);q=r[4]=[];break;case "/":s.pop()[5]=r[2];q=0<s.length?s[s.length-1][4]:j;break;default:q.push(r)}return j};c.escape=function(a){return(""+a).replace(/[&<>"'\/]/g,function(a){return r[a]})};var u=new a;c.clearCache=function(){return u.clearCache()};
c.compile=function(a,b){return u.compile(a,b)};c.compilePartial=function(a,b,d){return u.compilePartial(a,b,d)};c.compileTokens=function(a,b){return u.compileTokens(a,b)};c.render=function(a,b,d){return u.render(a,b,d)};c.to_html=function(a,b,d,f){a=c.render(a,b,d);if("function"===typeof f)f(a);else return a}});
var gx=function(c){var g=/^(?:gx\.O\.)(.+)$/,k=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,j=function(){return!1};return{$:c.noConflict(),O:null,pO:null,languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",datepickerImage:null,clientImages:{},blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,msg:{},
NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:j,trueFn:function(){return!0},define:function(a,b,d){for(var f=0,l=window||this,a=a.split("."),c=a.length,f=0;f<c-1;f++)"undefined"==typeof l[a[f]]&&(l[a[f]]={}),l=l[a[f]];l[a[c-1]]=d;b||(l[a[c-1]].prototype=new gx.GxObject)},setParentObj:function(a){gx.pO=a;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=gx.pO.OnSessionTimeout},createParentObj:function(a){var b;gx.spa.started||(a instanceof gx.GxObject||(b=new a),b&&this.setParentObj(b));
return b},setExecutableComponent:function(a){gx.fx.obs.addObserver("gx.onready",this,function(){null==gx.pO&&(gx.setParentObj(gx.createComponent(a,"")),gx.fn.objectOnload(void 0,!0))},{single:!0})},setMasterPage:function(a){null!=gx.pO&&(gx.pO.MasterPage=a)},createMasterPage:function(a){var b;gx.spa.started||(a instanceof gx.GxObject||(b=new a),b&&this.setMasterPage(b));return b},addComponent:function(a,b){null!=gx.pO&&gx.pO.setWebComponent(a,b)},createComponent:function(a,b,d){var f=null,l,a=gx.lang.getType(a);
null!=a&&(a.prototype=new gx.GxObject,l=gx.csv.cmpCtx,gx.csv.cmpCtx=b,f=new a(b),d&&f.setContainer(d),gx.csv.cmpCtx=l,f.serviceUrl=gx.fn.getControlValue(f.CmpContext+"_CMPPGM"));return f},getObj:function(a,b){return""==a?!0==b?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxObyCtx:function(a,b){var d;void 0!=a&&(d=gx.getObj(a,b))&&gx.setGxO(a,b);return gx.O},parentGridRow:function(a,b){var d=gx.fn.currentGridRowImpl(a);return d=(d=b.getGridById(a,d))&&d.parentGrid?gx.fn.currentGridRow(d.parentGrid.gridId):
void 0},setGxO:function(){var a,b;1==arguments.length&&"object"==typeof arguments[0]?gx.O=arguments[0]:(a=arguments[0],b=arguments[1],gx.O=this.getObj(a,b)||gx.pO);gx.csv.cmpCtx=gx.O.CmpContext;return gx.O},setVar:function(a,b){gx.O.setVariable(a,b)},getVar:function(a){return gx.O.getVariable(a)},prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var b=g,b=b.exec(a);null!=b&&b[1]?a=b[1]:(b=k,b=b.exec(a),null!=b&&b[1]&&(a=b[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?
a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=a},setTimeFormat:function(a){gx.timeFormat=a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=a},setDecimalPoint:function(a){gx.decimalPoint=a},setThousandSeparator:function(a){gx.thousandSeparator=a},applyPicture:function(a,b){if(!gx.lang.emptyObject(a)&&!gx.lang.emptyObject(a.pic)&&!gx.lang.emptyObject(a.type))try{switch(a.type){case "int":case "decimal":return gx.num.formatNumber(b,
a.dec,a.pic,a.len,a.sign,!0);case "char":return b;default:return b}}catch(d){}return b},setStaticDirectory:function(a){gx.staticDirectory=a;if(""==gx.staticDirectory)gx.staticDirectory="/";else{var b=gx.staticDirectory.length,a="/"!=gx.staticDirectory.charAt(0),b="/"!=gx.staticDirectory.charAt(b-1);gx.staticDirectory=(a?"/":"")+gx.staticDirectory+(b?"/":"")}},getThemeElement:function(){return gx.dom.byId("gxtheme_css_reference")},updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");if(a&&a!=this.theme&&
(this.theme=a,(a=gx.getThemeElement())&&0>a.href.search(this.theme+".css")))a.href=a.href.replace(/[^/]*.css/,this.theme+".css")},setTheme:function(a){var b=gx.util.browser,d=b.isIE(),b=b.ieVersion(),f=gx.dom.fixes;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{gx.HTML5&&f.html5(a);if(void 0===a){d&&(c(document.documentElement).addClass("ie"),c(document.documentElement).addClass("ie"+b),gx.runtimeTemplates&&!Modernizr.flexbox&&c(document.documentElement).addClass("gx-align-fallback"));
if(d&&10==b){var l=document.createElement("style");l.innerHTML="input::-ms-clear {display: none;}";document.body.appendChild(l)}f.setPopupMinWidth()}f.fixTableResets(a)}catch(j){gx.dbg.logEx(j,"gxapi.js","setTheme")}},SetOld:function(a,b,d){var f=b,a=gx.fn.controlGridId(a);0<a&&(f=b+"_"+gx.fn.currentGridRow(a));gx.fn.setHidden(f,gx.getVar(d))},Old:function(a,b){try{var d=b,f=gx.fn.controlGridId(a);0<f&&(d=b+"_"+gx.fn.currentGridRow(f));var l=gx.fn.getHidden(d);"undefined"==typeof l&&""!=gx.O.CmpContext&&
(l=gx.fn.getHidden(gx.O.CmpContext+d));return l}catch(c){gx.dbg.logEx(c,"gxapi.js","Old")}return""},OldInteger:function(a,b){var d=parseInt(gx.Old(a,b),10);return isNaN(d)?0:d},OldDecimal:function(a,b){var d=gx.num.parseFloat(gx.Old(a,b),gx.thousandSeparator,gx.decimalPoint);return isNaN(d)?0:d},OldDate:function(a,b){return(new gx.date.gxdate(gx.Old(a,b),"Y4MD")).getStringWithFmt(gx.dateFormat)},OldDateTime:function(a,b){var d=new gx.date.gxdate(gx.Old(a,b),"Y4MD");return d.getStringWithFmt(gx.dateFormat)+
" "+d.getTimeString(!0,!0)},typedOld:function(a,b,d){switch(d){case "int":return this.OldInteger(a,b);case "decimal":return this.OldDecimal(a,b,!0);case "date":return this.OldDate(a,b);case "dtime":return this.OldDateTime(a,b);default:return this.Old(a,b)}},isInputEnabled:function(a){return a&&gx.evt.lastEvt==a?!0:!(gx.evt.processing&&!gx.csv.validating||gx.spa.isNavigating())},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",
phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,isDotNet:function(){return this.net},isRuby:j,isJava:function(){return!this.net}},dom:{_form:null,_avoidLeaksDiv:null,id:function(a){return void 0==a.id||""==a.id?a.name:a.id},byId:function(a,b){return"string"===typeof a?(b=b||document,b.getElementById(a)):a},byName:function(a){return a?document.getElementsByName(a):[]},byTag:function(a,b){b=b||document;return b.getElementsByTagName(a)},byClass:function(a,
b,d){return!b&&(d=document||d,d.getElementsByClassName)?d.getElementsByClassName(a):c((b||"")+"."+a,d).toArray()},bySelector:function(a){return c(a).toArray()},el:function(a,b,d){if(a){if("string"===typeof a){var f=this.byId(a);if(null!=f||!d&&(f=this.byId("span_"+a),null!=f))return f;if(b)return null;f=this.byName(a);return null!=f&&0<f.length?(f[0].id||(f[0].id=a),f[0]):null}return a}return null},matchesSelector:function(){var a;return function(b,d){var f,b=gx.dom.byId(b);f=b.matches||b.matchesSelector||
b.msMatchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.oMatchesSelector;void 0===a&&(a=gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion());return a||!f?c(b).is(d):f?f.call(b,d):!1}}(),hasAttribute:function(a,b){return a.hasAttribute?a.hasAttribute(b):void 0!==a[b]},hasClass:function(a,b){var d=gx.dom.el(a,!0);if(d)return b&&-1!=(" "+d.className+" ").indexOf(" "+b+" ")},addPrefixClass:function(a,b){if(a){var d=c(a);a.className&&!d.attr("data-gx-unprefixed-class")&&(d.attr("data-gx-unprefixed-class",
a.className),d=a.className.split(" "),d.splice(0,0,""),a.className+=d.join(" "+b))}},removePrefixClass:function(a,b){if(a){var d=c(a);if(0<=a.className.search(RegExp("(^|\\s)"+b))){var f=d.attr("data-gx-unprefixed-class");d.removeAttr("data-gx-unprefixed-class");a.className=f||a.className.substring(b.length)}}},addClass:function(a,b){var d=gx.dom.el(a,!0);d&&(b&&!this.hasClass(a,b))&&(d.className=d.className+(d.className?" ":"")+b)},classReCache:{},removeClass:function(a,b){var d=gx.dom.el(a,!0);
if(d&&this.hasClass(a,b)){var f=this.classReCache[b];f||(f=RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)","g"),this.classReCache[b]=f);d.className=d.className.replace(f," ")}},hasTransition:function(a){if(a&&Modernizr.csstransitions){var b=gx.util.browser,d="transitionDuration";b.isIE()&&(d="msTransitionDuration");b.isWebkit()?d="webkitTransitionDuration":b.isFirefox()?d="MozTransitionDuration":b.isOpera()&&(d="OTransitionDuration");a=parseFloat(gx.dom.getComputedStyle(a)[d],10);return 0!==a&&!isNaN(a)}return!1},
hasAnimation:function(a){if(a&&Modernizr.csstransitions){var b=gx.util.browser,d="animationName";b.isIE()&&(d="msAnimationName");b.isWebkit()?d="webkitAnimationName":b.isFirefox()?d="MozAnimationName":b.isOpera()&&(d="OAnimationName");return(a=gx.dom.getComputedStyle(a)[d])&&"none"!=a}return!1},isMultimediaElement:function(a){return"SPAN"==a.tagName&&(gx.dom.hasClass(a,"gx-video-placeholder")||gx.dom.hasClass(a,"gx-audio-placeholder")||gx.dom.hasClass(a,"gx-download-placeholder"))},purgeElement:function(a,
b){var d=b||a.attributes,f,l,c;if(d){l=d.length;for(f=0;f<l;f+=1)c=d[f].name||d[f],"function"===typeof a[c]&&(a[c]=null)}},purge:function(a,b){b||this.purgeElement(a);var d=a.childNodes;if(d)for(var f=0,l=d.length;f<l;f++)gx.dom.purge(d[f],!1)},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isOldIE()},form:function(){null==this._form&&(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){if(!document.all)for(var a=
this.form().elements,b=a.length,d=0;d<b;d++)a[d].gxIndex=d},setAttribute:function(a,b,d){var f=function(){try{var f=gx.dom.byName(a);if(null!=f&&0<f.length)for(var c=f.length,j=0;j<c;j++)f[j].setAttribute(b,d);else j=gx.dom.byId(a),null!=j&&j.setAttribute(b,d)}catch(g){gx.dbg.logEx(g,"gxapi.js","setAttribute")}};"loading"==document.gxReadyState?gx.fx.obs.addObserver("gx.onload",this,f,{single:!0}):f.apply(this)},createInput:function(a,b){var d=document.createElement("input");d.type=b;d.id=a;d.name=
a;gx.dom.form().appendChild(d);return d},hasSelectedFile:function(){var a=c('input[type="file"]'),b=a.length;if(!b)return!1;for(var d=0;d<b;d++)if(!gx.lang.emptyObject(a[d].value))return!0;return!1},hasSubmitControl:function(){var a=this.byTag("input"),b=a.length;if(!b)return!1;for(var d=0;d<b;d++){var f=a[d].getAttribute("type");if("submit"==f||"image"==f)return!0}return!1},scripts:function(a){var b=document.scripts;b||(b=document.getElementsByTagName("script"));if("undefined"!=typeof b){for(var d=
[],f=b.length,l=0;l<f;l++)if(!(a&&null!=b[l].getAttribute("data-gx-external-script"))){var c=b[l].attributes.src;c&&c.value&&(c=c.value,"//:"!=c&&d.push(c))}return d}return[]},styles:function(){var a=document.styleSheets;if("undefined"!=typeof a){for(var b=[],d=a.length,f=0;f<d;f++){var l=a[f].href;gx.lang.emptyObject(l)||b.push(l)}return b}return[]},getComputedStyle:function(a){try{return"#document"==a.nodeName?null:"function"==typeof window.getComputedStyle?window.getComputedStyle(a):"undefined"!=
typeof a.currentStyle?a.currentStyle:a.style}catch(b){return gx.dbg.logEx(b,"gxapi.js","getComputedStyle"),null}},getStyle:function(a,b){var d="";try{var d="function"==typeof window.getComputedStyle?window.getComputedStyle(a,null)[b]:"undefined"!=typeof a.currentStyle?a.currentStyle[b]:a.style[b],f=parseInt(d);isNaN(f)||(d=f)}catch(l){gx.dbg.logEx(l,"gxapi.js","getStyle")}return d},CSS_URL_REGEXP:/url\(["\']?(?!(?:https?:|\/))([^"\)]+)["\']?\)/ig,CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,cssRules:null,
cacheStyleSheet:function(a,b){var d,f=a.href?a.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,l;this.cssRules||(this.cssRules=[]);try{if(l=a.cssRules||a.rules)for(var c=0,j=l.length;c<j;c++)d=l[c].cssText,b&&(d=d.replace(this.CSS_URL_REGEXP,'url("'+f+'$1")')),this.cssRules.push(d)}catch(g){}},getCssRules:function(a,b){var d=document.styleSheets;if(null===this.cssRules||a){this.cssRules=[];for(var f=0,l=d.length;f<l;f++)try{d[f].disabled||this.cacheStyleSheet(d[f],b)}catch(c){}}return this.cssRules},
setStyleElement:function(a,b,d){try{a.innerHTML=(d?a.innerHTML:"")+b}catch(f){a.styleSheet.cssText=(d?a.styleSheet.cssText:"")+b}},isButton:function(a){return void 0!=a&&null!=a?"submit"==a.type||"button"==a.type:!1},isRadio:function(a){return a&&"INPUT"==a.tagName&&"radio"==a.type},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,tel:!0,month:!0,week:!0},isEditControl:function(a){return a&&"INPUT"==a.tagName?this.editControls[a.type]||
!1:!1},isTextControl:function(a){return a&&"INPUT"===a.tagName&&"text"===a.type},isDateControl:function(a){return"date"==a.type||"datetime"==a.type||"datetime-local"==a.type},isButtonLike:function(a){return this.isButton(a)||gx.dom.hasAttribute(a,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR)?!0:a&&"INPUT"===a.nodeName?"file"===a.type||("image"===a.type||"checkbox"===a.type)&&"function"==typeof a.onclick:!1},iFrameDoc:function(a){try{if(a.contentDocument)return a.contentDocument;if(a.contentWindow)return a.contentWindow.document}catch(b){}return null},
forEachChild:function(a,b,d){if(a&&a.childNodes&&"function"==typeof d)for(var f=a.childNodes.length,l=0;l<f&&!1!==d.call(b,a.childNodes[l]);l++);},isTextWithLink:function(a){return null!=a&&"A"==a.tagName&&(a.childNodes&&0<a.childNodes.length)&&this.innerChildIsText(a.firstChild)?!0:!1},isChildNode:function(a,b){a.frameElement&&(a=a.frameElement);if(a==b)return!0;for(;a.parentNode;){if(a==b||a.parentNode==b)return!0;a=a.parentNode}return!1},NodeLevel:function(a){for(var b=0;a.parentNode;)(a.id||a.name)&&
b++,a=a.parentNode;return b},findParentByTagName:function(a,b,d){a=a.parentNode;b=b.toUpperCase();for(i=0;a&&!(d&&i==d);){i++;if(a.tagName==b)return a;a=a.parentNode}},innerChildIsText:function(a){for(;null!=a;){if(a.nodeName&&"#text"==a.nodeName)return!0;a=a.firstChild}return!1},allChildrenAreText:function(a){for(a=a.firstChild;a;){var b=a.nodeName.toLowerCase();if("#text"!==b&&"pre"!==b&&null!=a.offsetParent)return!1;a=a.nextSibling}return!0},position:function(a){a=c(a).offset();return{x:Math.floor(a.left),
y:Math.floor(a.top)}},dimensions:function(a){a=c(a);return{w:a.outerWidth(),h:a.outerHeight()}},windowDimensions:function(a){var b=a.documentElement,d=a.body;if(b&&b.scrollHeight){var a=Math.max(b.scrollHeight,d.scrollHeight),f=Math.max(b.scrollWidth,d.scrollWidth),l=Math.max(b.clientHeight,d.clientHeight),b=Math.max(b.clientWidth,d.clientWidth);return{scrollWidth:f,scrollHeight:a,clientHeight:l,clientWidth:b}}return{scrollWidth:d.scrollWidth,scrollHeight:d.scrollHeight,clientHeight:d.clientHeight,
clientWidth:d.clientWidth}},documentScroll:function(a){a=a||document;return{scrollTop:a.documentElement.scrollTop||a.body.scrollTop,scrollLeft:a.documentElement.scrollLeft||a.body.scrollLeft}},documentScrollable:function(a){var a=a||document,b={x:!1,y:!1},a=gx.dom.windowDimensions(a);a.scrollHeight>a.clientHeight&&(b.x=!0);a.scrollWidth>a.clientWidth&&(b.x=!0);return b},autofitIFrame:function(a){var a=gx.evt.source(window.event||a),b=window.frames[a.name].document;if(b&&!(""!=a.width||""!=a.height)){var d=
gx.dom.windowDimensions(b),b=d.scrollWidth?d.scrollWidth+10:null,d=d.scrollHeight?d.scrollHeight+10:null;b&&d&&(a.style.width=b+"px",a.style.height=d+"px")}},fitToParent:function(a){if(!gx.util.browser.isIE()&&a&&a.childNodes){for(var b=null,d=a.childNodes.length,f=0;f<d;f++){var l=a.childNodes[f];if("TABLE"==l.nodeName){b=l;break}}if(null!=b&&(-1!=b.style.width.indexOf("%")&&(a.style.width=gx.dom.addUnits(b.style.width)),-1!=b.style.height.indexOf("%")))a.style.height=gx.dom.addUnits(b.style.height)}},
redrawControl:function(a){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(a,a.outerHTML):setTimeout(function(){gx.html.setOuterHtml(a,a.outerHTML)},100)},setCaretPosition:function(a,b){if(null!=a)if(a.createTextRange){var d=a.createTextRange();d.move("character",b);d.select()}else a.selectionStart?(a.focus(),a.setSelectionRange(b,b)):a.focus()},replaceAtCaretPosition:function(a,b){var d=a.selectionStart,f=a.selectionEnd;document.selection?(d=document.selection.createRange().getBookmark(),
a.selection=a.createTextRange(),a.selection.moveToBookmark(d),a.selectLeft=a.createTextRange(),a.selectLeft.collapse(!0),a.selectLeft.setEndPoint("EndToStart",a.selection),d=a.selectLeft.text.length+1,f=a.selectLeft.text.length+(0==a.selection.text.length?1:a.selection.text.length)):(d=a.selectionStart,f=a.selectionEnd);a.setRangeText?a.setRangeText(b,d,f,"end"):(a.value=a.value.substr(0,d)+b+a.value.substr(d,a.value.length),gx.dom.setCaretPosition(a,d+b.length))},spanValue:function(a){var b=a.nodeValue;
gx.lang.emptyObject(b)&&(b=a.innerText||a.textContent);gx.lang.emptyObject(b)&&(b="");return b},removeControlSafe:function(a){this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV"));this._avoidLeaksDiv.appendChild(a);gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv);this._avoidLeaksDiv.innerHTML=""},removeControl:function(a){if(null==document.createRange)a.removeNode(!0);else{var b=document.createRange();a&&(b.selectNode(a),b.deleteContents())}},comboBoxToObj:function(a,b){try{var d=
{s:"",v:[]};if(!a)return d;if("SELECT"==a.tagName){d.s=a.value;for(var f=a.options.length,l=0;l<f;l++){var j=c(a.options[l]);d.v.push([j.val(),j.text()])}}else"SPAN"==a.tagName&&(l=gx.fn.getControlValue_span(a),d.v.push([b,l]),d.s=b);return d}catch(g){gx.dbg.logEx(g,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s|ch|rem|vh|vw|vmin|vmax|q)$/i,addUnits:function(a,b){return""===a||"auto"==a?a:void 0===a?"":"number"==typeof a||!this.unitPattern.test(a)?a+(b||"px"):
a},getActiveElement:function(){var a=null;try{a=document.activeElement}catch(b){}return a},getCaretOffset:function(a){return a&&"INPUT"===a.tagName&&"text"===a.type&&"undefined"!==typeof a.selectionStart?{s:a.selectionStart,e:a.selectionEnd}:{s:0,e:0}},setCaretOffset:function(a,b){a&&("INPUT"==a.tagName&&"text"==a.type&&a.setSelectionRange)&&a.setSelectionRange(b.s,b.e)},write:function(a,b){b=b||document;b.write(a)},writeError:function(a,b,d,f){gx.dbg.write(a);f=f||document;f.head.innerHTML="";f.body.innerHTML=
a},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASKED_CLASS:"gx-masked",isMaskElement:function(a){return this.hasClass(a,this.MASK_CLASS)},mask:function(a){a=this.el(a);if(!this.hasClass(a,this.MASK_RELATIVE_CLASS)){var b,d=gx.util.browser,f=d.ieVersion(),l=6==f||d.isIE&&d.isCompatMode(),j=!!a.style.setExpression;(!c(a).is("body")||"static"!=this.getComputedStyle(a).position)&&this.addClass(a,this.MASK_RELATIVE_CLASS);b=document.createElement("div");b.className=
this.MASK_CLASS;if("TABLE"==a.tagName){var g=c(b),k=c(a);g.width(k.width());g.insertAfter(k);g.parent().addClass(this.MASK_RELATIVE_CLASS)}else a.appendChild(b);this.addClass(a,this.MASKED_CLASS);if(l&&j)try{b.style.setExpression("height","this.parentNode."+(a==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(p){}else if(a=this.getComputedStyle(a).height,d.isIE&&(7!=d.ieVersion||d.isCompatMode())&&"auto"==a)b.style.height=a;if(d.isIE()&&(7>=f||d.isCompatMode()))c(b),(d=this.getComputedStyle(b).opacity)&&
c(b).css("opacity",d);return b}},unmask:function(a){var a=this.el(a),b;if("TABLE"==a.tagName){var d=a.nextSibling;d&&("DIV"==d.tagName&&this.hasClass(d,this.MASK_CLASS))&&(b=d)}else for(var d=0,f=a.childNodes.length;d<f;d++)if("DIV"==a.childNodes[d].tagName&&this.hasClass(a.childNodes[d],this.MASK_CLASS)){b=a.childNodes[d];break}b&&!b.removed?(b.removed=!0,b.style.clearExpression&&(b.style.clearExpression("width"),b.style.clearExpression("height")),this.removeClass(a,this.MASKED_CLASS),d=gx.dom.hasTransition(b)?
gx.dom.TRANSITION_END_EVENT:gx.dom.hasAnimation(b)?gx.dom.ANIMATION_END_EVENT:!1,f=function(){if(a.tagName=="TABLE"){if(b.parentNode){gx.dom.removeClass(b.parentNode,this.MASK_RELATIVE_CLASS);b.parentNode.removeChild(b)}}else b.parentNode==a&&a.removeChild(b);gx.dom.removeClass(a,this.MASK_RELATIVE_CLASS)}.closure(this),d?gx.evt.attach(b,d,f,!1,{single:!0,useCapture:!0,timeout:300}):f(),this.addClass(b,this.UNMASK_CLASS)):(this.removeClass(a,this.MASKED_CLASS),this.removeClass(a,this.MASK_RELATIVE_CLASS))},
replaceWithFx:function(a,b,d){var d=d||{},f=d.enteringClass||"entering",l=d.leavingClass||"leaving",c=d.enterDurationClass||"enter-fx-duration",j=d.leaveDurationClass||"leave-fx-duration",g=d.transitioningClass||"transitioning",k=d.transitionTimeout||1500,m=function(a){return 0<a.childNodes.length&&(gx.dom.hasAnimation(a)||gx.dom.hasTransition(a))&&!gx.dom.hasClass(a.parentNode,g)},s=function(a){return gx.dom.hasAnimation(a)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(a)?gx.dom.TRANSITION_END_EVENT:
!1};"BODY"==a.tagName&&(gx.dom.addClass(a,a.className+"-fx"),a.style.position="static");"BODY"==b.tagName&&gx.dom.addClass(b,b.className+"-fx");var q=a.parentNode,r=m(a),u=m(b);useParallelFx="BODY"!=a.tagName;if(r||u){var m=document.createElement("iframe"),v=document.createElement("div"),x,z,w=this.getComputedStyle(a),H=w.width,w=w.height,E,J,C=s(a),A=s(b),B,y,D,K,M,L=0,s=0;gx.dom.addClass(q,g);if("BODY"!=a.tagName&&"BODY"!=b.tagName)if(r){m.setAttribute("scrolling","no");m.setAttribute("frameborder",
"0");m.style.width=gx.dom.addUnits(window.innerWidth);m.style.height=gx.dom.addUnits(window.innerHeight);m.style.display="none";v.appendChild(m);v.style.width=H;v.style.height=w;v.style.overflow="hidden";gx.spa.dettachContent(a);a.insertBefore(v,a.firstChild);v=m.contentDocument;try{v.open(),v.write(this.getDocTypeDeclaration(document)),v.write("<html>"),v.write("<head></head>"),v.write("<body><div></div></body>"),v.write("</html>"),v.close()}catch(X){gx.dbg.logEx(X,"gxapi.js","replaceWithFx"),x=
v.createElement("div"),v.body.appendChild(x)}v.documentElement&&(v.documentElement.className="gx-fx-iframe");v.body.style.margin="0";v.body.className=gx.dom.form().className;v.head.appendChild(document.createElement("style"));x=v.styleSheets[0];z=gx.dom.getCssRules(!0,!0);E=0;for(J=z.length;E<J;E++)try{x.insertRule(z[E],s),s++}catch(O){gx.dbg.write("Warning: CSS Stylesheet rule not loaded:"+z[E])}v.body.firstChild.style.width=H;for(v.body.firstChild.style.height=w;a.childNodes[1];)v.body.firstChild.appendChild(a.childNodes[1]);
m.style.display="block"}else u&&(a.style.display="none");gx.dom.addClass(b,f);gx.dom.addClass(b,c);gx.dom.addClass(a,j);!1!==d.domAdd&&q.appendChild(b);j=function(){D=function(){if(L===2){gx.dom.removeClass(q,g);if(useParallelFx){d.transitionEndCallback&&(b=d.transitionEndCallback(a,b));d.domRemove!==false&&a.parentNode==q&&q.removeChild(a)}gx.dom.removeClass(b,c)}else if(!useParallelFx){d.transitionEndCallback&&(b=d.transitionEndCallback(a,b));gx.dom.removeClass(b,f);u&&(M=setTimeout(y,k))}};if(r){B=
function(){clearTimeout(K);L++;d.leavingTransCallback&&d.leavingTransCallback(a,b);D()};gx.evt.attach(a,C,B,false,{single:true,useCapture:true})}else{L++;D()}if(u){y=function(){if(L>=2)gx.evt.detach(b,A,y);else{clearTimeout(M);L++;d.enteringTransCallback&&d.enteringTransCallback(a,b);D()}};gx.evt.attach(b,A,y,false,{single:true,useCapture:true})}else{L++;D()}setTimeout(function(){gx.dom.addClass(a,l);if(useParallelFx){gx.dom.removeClass(b,f);u&&(M=setTimeout(y,k))}r&&(K=setTimeout(B,k))},100)};d.beforeTransitionStart?
!0!==d.beforeTransitionStart(j)&&j():j()}else!1!==d.domRemove&&q.removeChild(a),!1!==d.domAdd&&(a.parentNode==q?q.replaceChild(b,a):q.appendChild(b)),d.beforeTransitionStart&&d.beforeTransitionStart(),d.leavingTransCallback&&d.leavingTransCallback(a,b),d.enteringTransCallback&&d.enteringTransCallback(a,b),d.transitionEndCallback&&(b=d.transitionEndCallback(a,b))},getDocTypeDeclaration:function(a){a=a||document;a=a.doctype;parts=["!DOCTYPE"];if(!a)return"";parts.push(a.name||"html");a.publicId&&(parts.push("PUBLIC"),
parts.push('"'+a.publicId+'"'));a.systemId&&parts.push('"'+a.systemId+'"');return"<"+parts.join(" ")+">"},createShadowRoot:function(a){a=this.el(a);return a.createShadowRoot?a.createShadowRoot():a.webkitCreateShadowRoot?a.webkitCreateShadowRoot():!1},fixes:function(){var a=RegExp("gx-tab-padding-fix-\\d+","ig"),b=RegExp("gx-tab-spacing-fix-\\d+","ig"),d={},f={},l,j,g,k={center:{marginLeft:"auto",marginRight:"auto",className:"gx-center-align",alignment:"center"},right:{marginLeft:"auto",marginRight:0,
className:"gx-right-align",alignment:"right"},left:{marginLeft:0,marginRight:"auto",className:"gx-left-align",alignment:"left"}};return{getFixesStyleElement:function(){var a=c("#gx-dom-fixes")[0],b;a||(a=document.createElement("style"),a.id="gx-dom-fixes",b=gx.getThemeElement(),c("head")[0].insertBefore(a,b),gx.util.browser.isIE()&&c(b).insertAfter(a));return a},html5:function(a){var b=gx.util.browser,d=b.isIE(),f=[],l;c("TABLE",a||document.body).each(function(){var a=c(this);a.attr({align:a.data("align")})});
if(!a){if(!g){for(l in k)gx.lang.apply(k[l],{wcClassName:gx.GxObject.WEBCOMPONENT_CLASS_NAME,wcBodyClassName:gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME,contHolderClassName:"gx-content-placeholder",contHolderBodyClassName:"gx-ct-body",elements:[{el:"p"},{el:"table"},{el:"div"},{el:"fieldset",last:!0}]});g=Mustache.compile(".{{className}} {text-align:{{alignment}};}{{#elements}}.{{className}} > {{el}},.{{className}} > div.{{contHolderClassName}} > div.{{contHolderBodyClassName}} > {{el}}, .{{className}} > div.{{wcClassName}} > div.{{wcBodyClassName}} > {{el}}{{^last}},{{/last}}{{/elements}}{margin-left:{{marginLeft}};margin-right:{{marginRight}};}")}for(l in k)f.push(g(k[l]));
l=this.getFixesStyleElement();gx.dom.setStyleElement(l,f.join(""),!0)}if(d||b.isOpera())c("td[data-align]",a||document.body).each(function(){var a=c(this),b=a.attr("data-align").toLowerCase(),d=k[b].className,f=a.attr("class")||"";f&&(f=" "+f);a.attr("align",b);a.hasClass(d)||a.attr("class",d+f);a.children("div."+k[b].contHolderClassName).children("div."+k[b].contHolderBodyClassName).addClass(d);a.children("div."+k[b].wcClassName).children("div."+k[b].wcBodyClassName).addClass(d)})},setPopupMinWidth:function(){var a=
gx.popup.getPopup();if(a){if(gx.runtimeTemplates){var b=this.getPopupMinWidth();c(document.documentElement).css("min-width",gx.dom.addUnits(b));c(document.documentElement).addClass("gx-popup-document")}(a.autoresize||void 0===a.autoresize)&&c(document.documentElement).css("height","auto")}},getPopupMinWidth:function(){var a=gx.popup.getPopup(),b=d;if(a&&(b=a.width,a.autoresize||void 0===a.autoresize)){var d=600,a=c(a.window).width(),b=800;1200<=a&&(b=900);768<=a&&992>a&&(b=d);768>a&&(b=a-20)}return b},
fixTableResets:function(g){var k=[],t=[],q=this.getFixesStyleElement();l||(l=Mustache.compile("{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}"));j||(j=Mustache.compile("{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}"));c("table[data-cellpadding], table[data-cellspacing]",g||document.body).each(function(){var l=this.getAttribute("data-cellpadding");void 0!==l&&(d[l]||(d[l]=l,k.push(l)),c("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className=
"gx-tab-padding-fix-"+l+" "+this.className.replace(a,"")}));var j=this.getAttribute("data-cellspacing");void 0!==j&&(f[j]||(f[j]=j,t.push(j)),this.className="gx-tab-spacing-fix-"+j+" "+this.className.replace(b,""))});gx.dom.setStyleElement(q,l(k)+j(t),!0)},createLegacyNotification:function(){c("div#gx_ajax_notification").length||c('<div id="gx_ajax_notification" style="display:none;"></div>').appendTo(document.body)}}}(),_init:function(){Function.prototype.closure=function(a,b,d){var f=gx.util.browser;
if(f.isIE()&&8>f.ieVersion()){window.__objs||(window.__objs=[],window.__funs=[],window.__args=[]);var l=this,c=a.__objId;c||(__objs[c=a.__objId=__objs.length]=a);var j=l.__funId;j||(__funs[j=l.__funId=__funs.length]=l);b||(b=[]);var g=b.__argsId;g||(__args[g=b.__argsId=__args.length]=b);b=l=a=null;return function(){if(__funs){var a=__args[g];if(d===true){a=Array.prototype.slice.call(arguments,0);a=a.concat(__args[g])}a.length==0&&arguments.length>0&&(a=arguments);a=__funs[j].apply(__objs[c],a);if(__objs)try{delete __objs[c].__objId}catch(b){__objs[c].__objId=
null}__funs&&delete __funs[j].__funId;__args&&delete __args[g].__argsId;return a}}}l=this;return function(){var f=b||arguments;!0===d&&(f=Array.prototype.slice.call(arguments,0),f=f.concat(b));return l.apply(a||window,f)}};gx.evt.on_ready(this,function(){var a,b,d=gx.util.browser;if(d.isWebkit()){var f=[];if(document.querySelectorAll)f=document.querySelectorAll("input[type='hidden']");else{var l=gx.dom.byTag("input");a=0;for(b=l.length;a<b;a++)"hidden"==l[a].getAttribute("type")&&f.push(l[a])}a=0;
for(b=f.length;a<b;a++)f[a].setAttribute("autocomplete","off")}c('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")});if(d.isChrome()){d=document.querySelectorAll("select");a=0;for(b=d.length;a<b;a++)if(!d[a].value&&(f=d[a].querySelectorAll("option[selected]"))&&f.length)d[a].value=f[0].value}c('input[type="file"]').on("click",function(){gx.fx.obs.notify("gx.validation")})});this.TRANSITION_END_EVENT=gx.util.browser.isWebkit()?"webkitTransitionEnd":gx.util.browser.isOpera()?
"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?"webkitAnimationEnd":gx.util.browser.isOpera()?"oAnimationEnd":"animationend"},_deinit:function(){this._form=null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)},element_in_scroll:function(a,b){var d=c(b)[0].offsetTop-c(a)[0].offsetTop-c(a).scrollTop();return a&&c(b)[0]?d<c(a).height():
!1}},util:{contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",
pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},isKnownContentType:function(a){for(var b in this.contentTypes)if(this.contentTypes[b]==a)return!0;return!1},getContentTypeFromExt:function(a){var b=a.lastIndexOf(".");-1!=b&&(a=a.substring(b+1));return a?this.getContentType(a):""},getContentType:function(a){if(gx.lang.emptyObject(a))return"text/html";a=a.toLowerCase();a=gx.text.trim(a);if(this.isKnownContentType(a))return a;var b=a.lastIndexOf(".");
-1!=b&&(a=a.substring(b+1));a=this.contentTypes[a];return gx.lang.emptyObject(a)?"text/html":a},getFileName:function(a){var b=a.lastIndexOf("/"),d=a.lastIndexOf("\\"),b=b>d?b:d,d=a.lastIndexOf(".");if(!a)return a;if(0>d||b>d)d=a.length;return a.substring(b+1,d)},getFileType:function(a){var b=a.lastIndexOf("/"),d=a.lastIndexOf("\\"),f=a.lastIndexOf(".");return 0>f||f<b||f<d?"":a.substring(f+1)},getWindowInfo:function(){var a="",b=!0,d=!1;try{if(d=window.location!=window.parent.location?!0:!1)try{b=
window.frameElement.id||window.top.document.body,a=window.name}catch(f){b=!1}}catch(l){}return{insideIframe:d,canAccessFrame:b,frameId:a}},browser:function(){var a=navigator.userAgent,b=/; rv.([0-9]+)/,d;return{w3c:!0,ie5:!0,ie:-1!=a.indexOf("MSIE")||-1!=a.indexOf("Trident"),edge:-1!=a.indexOf("Edge"),ff:-1!=a.indexOf("Firefox"),winCE:-1!=a.indexOf("Windows CE"),iphone:-1!=a.indexOf("iPhone"),ipad:-1!=a.indexOf("iPad"),ipod:-1!=a.indexOf("iPod"),blackBerry:-1!=a.indexOf("BlackBerry"),operaMini:-1!=
a.indexOf("Opera Mini"),opera:-1!=a.indexOf("Opera"),chrome:-1!=a.indexOf("Chrome"),android:-1!=a.indexOf("Android"),webkit:-1!=a.search(/webkit/ig),safari:-1!=a.indexOf("Safari"),isIE:function(){return this.ie||this.edge},isEdge:function(){return this.edge},isSafari:function(){return this.safari},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},isAndroid:function(){return this.android},
isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()||this.isAndroid()},isCompatMode:function(){return"BackCompat"==document.compatMode},isOldIE:function(a){return gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=(a||8)},ieVersion:function(){d||(d=function(){var d;if(this.ie)try{var l=
a.indexOf("MSIE");if(0<=l){var c=a.indexOf(";",l),j=a.substring(l+5,c);return parseFloat(j,10)}d=a.match(b);if(1<d.length)return parseFloat(d[1],10)}catch(g){gx.dbg.logEx(g,"gxapi.js","ieVersion")}else if(this.edge&&(d=a.match(/ Edge\/([0-9]+)\./),1<d.length))return parseFloat(d[1],10);return-1}.call(this));return d},chromeVersion:function(){if(this.isChrome()){var b=a.match(/Chrome\/([0-9]+)/);if(1<b.length)return parseFloat(b[1],10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&
("undefined"!==typeof Range&&!Range.prototype.createContextualFragment)&&(Range.prototype.createContextualFragment=function(a){var b=document.createDocumentFragment(),d=document.createElement("div");b.appendChild(d);d.outerHTML=a;return b});"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ie5=this.ie&&document.getElementById&&document.all?!0:!1);this.setupIE()}}}(),
addOnce:function(a,b,d){void 0==a[d]&&(a[d]=b)},inArray:function(a,b){if(null==a||!gx.lang.isArray(b))return!1;if("function"==typeof b.indexOf)return-1!=b.indexOf(a);for(var d=b.length,f=0;f<d;f++)if(b[f]==a)return!0;return!1},pushOnce:function(a,b){gx.util.inArray(a,b)||b.push(a)},lastArray:function(a){return 0<a.length?a[a.length-1]:null},noParmsUrl:function(a){var b=a.indexOf("?");-1!=b&&(a=a.substring(0,b));return a},resolveUrl:function(a){return!a?a:gx.ajax.isabsoluteurl(a)?a:gx.ajax.isRelativeToHost(a)?
0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())?gx.util.resourceUrl(gx.basePath+a,!1):a:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1)},resourceUrl:function(){var a;return function(b,d){a||(a=RegExp(gx.basePath+"(/|$)","i"));if("undefined"==typeof b)return"";if(-1!=b.indexOf("://")||"."==b.charAt(0))return b;var f="/"!=gx.basePath.charAt(gx.basePath.length-1),l=""==gx.basePath?0:b.search(a);if(0==l&&!d)return("/"==b.charAt(0)?"":"/")+b;if(-1!=l||d){var c="",c=-1!=l&&0<gx.basePath.length?
gx.text.replaceAll(b.substring(l+gx.basePath.length),"\\","/"):b;if("/"==b.charAt(0))return location.protocol+"//"+location.host+b;l=0<gx.basePath.length&&"/"!=gx.basePath.charAt(0);f=f&&"/"!=c.charAt(0);return location.protocol+"//"+location.host+(l?"/":"")+gx.basePath+(f?"/":"")+c}return b}}(),sameAppUrl:function(a){a=new this.Url(a);return a.isRelative()?!0:a.isSameApp(location.href)},removeBaseUrl:function(a){var b,d="/"!=gx.staticDirectory.charAt(gx.staticDirectory.length-1);b="/"==gx.staticDirectory.charAt(0)?
0==gx.basePath.length?gx.staticDirectory.substring(1):gx.staticDirectory:"/"+gx.staticDirectory;b=RegExp("(?:/)?(?:"+gx.basePath+b+(d?"/":"")+")?((?:[\\S]*))").exec(a);null!=b&&b[1]&&(a=b[1]);return a},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&6>=gx.util.browser.ieVersion()?"gx_blank.html":"about:blank"},Url:function(){var a=/^(([^\:\/\?#]+)\:)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,b=/^(([^@]+)@)?([^\:]+)(:(.+))?$/,d=function(d){this.url=d;
this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};this.isSameApp=function(a){a=new gx.util.Url(a);return this.protocol==a.protocol&&this.host==a.host};(function(d,f){var c=a,c=c.exec(f),j=!gx.lang.emptyObject(c);if(j&&(d.protocol=c[2]?c[2]:"",j=c[4]?c[4]:"",d.path=c[5]?c[5]:"",d.query=c[7]?c[7]:"",d.hash=c[9]?c[9]:"",c=b,c=c.exec(j),j=!gx.lang.emptyObject(c)))d.user=c[2]?c[2]:"",d.host=c[3]?c[3]:"",d.port=
c[5]?c[5]:""})(this,d)};d.parseWithAnchor=function(a){var b=document.createElement("a");b.href=a;!b.protocol&&gx.util.browser.isIE()&&(b.href=b.href);return b};return d}(),regExp:{isMatch:function(a,b){return null!==RegExp(b).exec(a)},replace:function(a,b,d){return a.replace(b,d)},split:function(a,b){return a.split(b)},matches:function(a,b){var d=RegExp(b).exec(a);return null!==d?d:[]}},autoRefresh:{arTimer:null,getProps:function(){var a=gx.fn.getHidden("_GxRefreshTimeout");null!=a&&(a=gx.json.evalJSON(a),
a.Time=parseInt(a.Time));return a},install:function(){var a=this.getProps();null!=a&&(this.create(),"focus"==a.Type&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(null==this.arTimer){var a=this.getProps();null!=a&&(this.arTimer=setTimeout(function(){gx.http.reload()},1E3*a.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(a){var b="";if(-1!=a.indexOf("&"))for(var d=
a.length,f=0;f<d-1;f++)if("&"==a[f]&&"&"!=a[f+1]){b+=a[f+1];break}return b},accessKeyCaption:function(a){var b="";if(-1==a.indexOf("&"))return a;for(var d=a.length,f=0;f<d-1;f++)if("&"==a[f]&&"&"!=a[f+1]){b+=a.substring(f+1);break}else b+=a[f];return b},invalidFunc:function(a){throw"gxInvalidFunc: "+a;},urlValue:function(a){var b=a;"string"!=typeof b&&(b=gx.fn.getControlValueInt(a));return encodeURIComponent(b)},help:function(a){open(a,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},
_init:function(){this.browser._init()}},guid:{generate:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})}},lang:{inherits:function(a,b,d){var f=a.prototype;a.prototype=new b;for(var l in f)"undefined"==typeof a.prototype[l]&&(a.prototype[l]=f[l]);"undefined"==typeof a.prototype.base&&(a.prototype.base=b);!0===d&&(a.prototype.constructor=function(){b.prototype.constructor.apply(this,arguments);f.constructor.apply(this,
arguments)})},apply:function(a,b){if(a&&b&&"object"===typeof b)for(var d in b)a[d]=b[d];return a},instanceOf:function(a,b){if(null==a||null==b)return!1;if(a instanceof b||b==String&&"string"==typeof a||b==Number&&("number"==typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||b==Array&&"array"==typeof a||b==Function&&"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||"array"==typeof a)return!1;for(var d=a.base;"undefined"!=typeof d;){if(d==b)return!0;
d=d.base}return!1},clone:function(a){var b={},d;for(d in a)b[d]=a[d];return b},isDateType:function(a){return"date"==a||"dtime"==a},isNumericType:function(a){return"int"==a||"decimal"==a},isBooleanType:function(a){return"boolean"==a||"bool"==a},isCharacterType:function(a){return"char"==a||"svchar"==a||"bits"==a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},booleanValue:function(a){return!0==a||!1==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==
typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&(""==a||"false"==a.toLowerCase()||"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},arrayToSource:function(a){if(null!=a.toSource)return a.toSource();for(var b="[",d=a.length,f=d-1,l=0;l<d;l++)b+=this.objectToSource(a[l]),l<f&&(b+=",");return b+"]"},objectToSource:function(a){if(this.isArray(a))return this.arrayToSource(a);if("object"==typeof a){var b="{",d="",f;for(f in a){var l=
f;""==l?l="''":"string"==typeof l&&(l="'"+l+"'");b+=d;b="object"==typeof a[f]?b+(l+":"+this.objectToSource(a[f])):"string"==typeof a[f]?b+(l+":'"+this.encodeValue(a[f])+"'"):b+(l+":"+a[f]);d=","}return b+"}"}return"'"+this.encodeValue(a.toString())+"'"},emptyNum:function(a){return a&&0===a||!a},emptyObj:function(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},emptyObject:function(a){return void 0===a||null==a||""==a||"number"==typeof a&&isNaN(a)?!0:!1},supEval:function(a,b){var d=
null,d=b instanceof String||"string"==typeof b?a[b]:b;return function(){return d.apply(a,arguments)}},getType:function(a){var b=null;try{for(var d=0,f=window,l=a.split("."),c=l.length,d=0;d<c;d++)f[l[d]]&&(f=f[l[d]]);f&&f!=window&&(b=f)}catch(j){gx.dbg.logEx(j,"gxapi.js","getType")}return b},doEval:function(a,b){b=b||window;return b.execScript?b.execScript(a):eval.call?eval.call(b,a):eval(a)},doCall:function(){try{for(var a=arguments[0],b=[],d=arguments.length,f=1;f<d;f++)b.push(arguments[f]);return a.apply(this,
b)}catch(l){gx.dbg.logEx(l,"gxapi.js","doCall")}},doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,b,d,f){a=a.closure(b,d);f=setTimeout(a,f);return{f:a,t:f}},requestAnimationFrame:function(a,b){a=b?a.closure(b):a;window.requestAnimationFrame?window.requestAnimationFrame(a):window.setTimeout(a,10)},encodeValue:function(a){return gx.text.charReplace(a,['"',"'","\r","\n"],["\\042","\\047","\\015","\\012"])},decodeValue:function(a){a=gx.text.replaceAll(a,"\\042",'"');return gx.text.replaceAll(a,
"\\015\\012","\r\n")},htmlDecode:function(){var a=document.createElement("div");return function(b){b&&"string"===typeof b&&(b=escape(b).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),a.innerHTML=b,b=c(a).text(),c(a).text(""));return unescape(b)}}(),arrayUnique:function(a){for(var a=a.concat(),b=0;b<a.length;++b)for(var d=b+1;d<a.length;++d)a[b]===a[d]&&a.splice(d--,1);return a},objToArray:function(){var a=function(a){return[a]};return function(b){return c.map(b,a)}}()},cache:function(){var a=
!1;return{exceptionsRegEx:!1,remoteFiles:{},inlineCode:{},isCacheable:function(a){return!this.exceptionsRegEx?!0:!!a&&-1==a.search(this.exceptionsRegEx)},addRemoteFile:function(a){this.isCacheable(a)&&(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0)},addLoadedFile:function(a){this.isCacheable(a)&&(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0)},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFiles:function(a){var d;if(a)for(d in this.remoteFiles)a.exec(d)&&
(this.remoteFiles[d]=!1)},removeRemoteFile:function(a){a=gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,!0)]=!1},fileLoaded:function(a){a=gx.util.noParmsUrl(a);return this.remoteFiles[gx.util.resourceUrl(a,!0)]?!0:!1},updateStyles:function(a,d){for(var f=[],l=a.length,c=0;c<l;c++){var j=a[c];if(!gx.lang.emptyObject(j)){for(var g=!1,k=d.length,m=0;m<k;m++)if(j==d[m]){g=!0;break}g||f.push(j)}}g=gx.staticDirectory;"/"==g.charAt(0)&&(g=g.substring(1));l=f.length;for(c=0;c<l;c++)j=f[c],"/"!=
j.charAt(0)&&(j=g+j),this.removeRemoteFile(j)},addInlineCode:function(a){this.inlineCode[a]=!0},deleteInlineCode:function(a){delete this.inlineCode[a]},codeLoaded:function(a){return this.inlineCode[a]?!0:!1},_init:function(){if(!a){a=!0;var b=gx.staticDirectory;"/"==b.charAt(0)&&(b=b.substring(1));for(var d=gx.dom.scripts(!0),f=d.length,l=0;l<f;l++){var c=d[l];gx.lang.emptyObject(c)||("/"!=c.charAt(0)&&!gx.ajax.isabsoluteurl(c)&&(c=b+c),this.addRemoteFile(c))}d=gx.dom.styles();f=d.length;for(l=0;l<
f;l++)c=d[l],gx.lang.emptyObject(c)||("/"!=c.charAt(0)&&!gx.ajax.isabsoluteurl(c)&&(c=b+c),this.addRemoteFile(c))}}}}(),evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,hooks:[],controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!0,userReady:!1,skipPromptCtrl:!0,touchTimer:null,eachKeyAutorefreshType:function(a){return!gx.lang.isNumericType(a)&&!gx.lang.isDateType(a)},
addHook:function(a,b,d){this.hooks.push({c:a,e:b,f:d})},waitGridRefresh:function(a){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(a):a.call()},notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var a=gx.evt.refreshGridCallback.pop();"function"==typeof a&&a.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var a=this.hooks.length,b=0;b<a;b++){var d=this.hooks[b];
try{this.detach(d.c,d.e,d.f),d.c=null,d.f=null}catch(f){gx.dbg.logEx(f,"gxapi.js","clearHooks")}this.hooks[b]=null}this.hooks=[]},source:function(a){return a.target||a.currentTarget||a.srcElement},createEvent:function(a,b,d,f){var l,b=void 0===b?!0:b,d=void 0===d?!0:d,f=f||{};window.CustomEvent?l=new CustomEvent(a,{bubbles:b,cancelable:d,detail:f}):(l=document.createEvent("CustomEvent"),l.initCustomEvent(a,b,d,f));return l},dispatch:function(a,b){return a.dispatchEvent?a.dispatchEvent(b):a.fireEvent("on"+
b.type,b)},fireEvent:function(a,b){gx.evt.dispatch(a,gx.evt.createEvent(b))},attach:function(a,b,d,f,l){l=l||{};if("string"==typeof b){var c=d;f&&(c=d.closure(f));if(l.single){var j=c,g=!1,k,c=function(){g||(k&&clearTimeout(k),gx.evt.detach(a,b,j,l),j.apply(this,arguments),g=!0)};l.timeout&&(k=setTimeout(c,l.timeout))}a.addEventListener?a.addEventListener(b,c,l.useCapture||!1):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c;this.addHook(a,b,c)}else if(gx.lang.isArray(b))for(var c=0,m=b.length;c<
m;c++)this.attach(a,b[c],d,f,l)},detach:function(a,b,d,f){try{if(f=f||{},"string"==typeof b)a.removeEventListener?a.removeEventListener(b,d,f.useCapture||!1):a.detachEvent?a.detachEvent("on"+b,d):a["on"+b]=null;else if(gx.lang.isArray(b))for(var l=0,c=b.length;l<c;l++)this.detach(a,b[l],d,f)}catch(j){gx.dbg.logEx(j,"gxapi.js","detach")}},stopPropagation:function(a){a&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0)},cancel:function(a,b){if(b&&gx.util.browser.isIE()&&typeof("undefined"!=
a.keyCode))try{a.keyCode=0}catch(d){}"undefined"==typeof a.preventDefault?(a.cancelBubble=b,a.returnValue=!b):b&&(a.preventDefault(),a.stopPropagation())},checkCtrlFocus:function(a){try{if(gx.evt.fixWebKitOnFocus()&&"button"==a.type&&gx.fn.isAccepted(a)&&void 0!=a.onfocus)a.onfocus()}catch(b){gx.dbg.logEx(b,"gxapi.js","checkCtrlFocus")}},doClick:function(a,b){if(gx.isInputEnabled()){var d=gx.evt.source(b);if("button"!=d.type&&"submit"!=d.type&&(d=gx.dom.el(a),gx.fn.isAccepted(d))){if(void 0!=d.onfocus)d.onfocus();
if(void 0!=d.onclick)d.onclick();"INPUT"==d.nodeName&&"submit"==d.type&&gx.dom.form().submit()}}},executeOnblur:function(a){var b=gx.csv.lastId,d=gx.O.focusControl;gx.O.focusControl=a;this.onblur(a,gx.O.focusControl);gx.O.focusControl=d;gx.csv.lastId=b},onblur:function(a,b){if(gx.O&&!0!==gx.csv.IgnoreBlur){var d=gx.fn.controlRowId(a);gx.csv.lastId=b;try{var f=gx.fn.validStruct(b);f&&null!=f.gxgrid&&f.gxgrid.updateControlValue(f,!1,d);var l=gx.csv.lastControl;if(l){var c=l.getAttribute("maxlength");
0<c&&l.value.length>c&&(l.value=l.value.substring(0,c));if(f&&"bits"==f.type&&0==f.ro){var j=gx.fn.getControlGridRef(f.fld,f.gxgrid?f.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>l.id.indexOf(f.fld)&&(l=j);var g=gx.html.multimediaUpload.getContainer(j);gx.html.multimediaUpload.refreshPreviewImg(g,l)}}}catch(k){gx.dbg.logEx(k,"gxapi.js","onblur")}}},onfocus:function(){var a=function(){gx.fx.obs.notify("gx.onbeforefocus",arguments);gx.evt.onfocus_impl.apply(gx.evt,arguments);gx.fx.obs.notify("gx.onafterfocus")};
!0===gx.evt.is_button_mouse_event||gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onfocus_impl:function(a,b,d,f,l,c,j){try{gx.grid.clearActiveGrid();if(gx.spa.isNavigating())return!1;gx.evt.setReady(!1);if(!gx.fn.checkPopupFocus(a))return gx.evt.setReady(!0),!1;var g=!1;gx.csv.cmpCtx!=d&&(g=!0,gx.O.fromValid=0);gx.setGxO(d,f);g&&gx.fn.changeCmpContext();gx.fn.initOld(a);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=
gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(k){gx.dbg.logEx(k,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=a;(0==c||""!=l)&&gx.fn.setCurrentGridRow(c,l);gx.fx.installSuggest(a);var m=!1;if(gx.csv.lastGrid!=c){gx.csv.lastRow[c]=null;if(!j){if(gx.csv.lastGrid<c){var s=gx.fn.firstGridControl(c);gx.O.fromValid>s&&(gx.O.fromValid=s)}gx.csv.lastGrid=c}m=!0}gx.O.focusControl=b;if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(a)}catch(q){gx.dbg.logEx(q,"gxapi.js","onfocus")}if(gx.csv.disableFocus)return gx.csv.disableFocus=
!1,gx.evt.setReady(!0),!0;try{var r=gx.fn.getControlValue("Mode");if("DLT"==r||"DSP"==r||gx.O.isTransaction()&&gx.dom.isButton(a)&&!gx.evt.isEnterEvtCtrl(a)&&!gx.evt.isCheckEvtCtrl(a)&&!j)return gx.evt.setReady(!0),!0}catch(u){gx.dbg.logEx(u,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&a.gxdisabled&&null!=gx.csv.lastControl){cn=gx.fn.getControlIndex(a)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0),!0;gx.fn.setFocus(gx.csv.lastControl);
gx.evt.setReady(!0);return!0}if(gx.csv.invalidForcedCtrl)return gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.id),gx.csv.invalidForcedCtrl=null,gx.evt.setReady(!0),!0;if(null!=gx.csv.invalidControl&&(gx.csv.invalidControl!=a&&gx.O.focusControl>=gx.csv.invalidId)&&gx.csv.invalidControl==a)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,!1).done(function(a){if(a){gx.csv.invalidControl=null;gx.evt.setReady(true)}}),!0;j?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=
gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0!=gx.csv.lastRow[c]&&(gx.csv.lastRow[c]!=l&&!m)&&gx.O.fromValid==gx.O.toValid&&(gx.csv.lastId=gx.O.fromValid);var v=gx.fn.controlIds();0<v.length&&gx.O.fromValid<v[0]&&(gx.O.fromValid=v[0]);gx.lang.emptyObject(gx.csv.lastRow[c])&&0!=c&&(gx.csv.rowChanged=!0,gx.csv.lastRow[c]=l);var x=gx.O,z=gx.csv.lastId,
w=gx.fn.validStruct(z,x);if(w)var H=gx.csv.lastRow[w.grid];gx.csv.checkRowChange(z,m,x,H).done(function(b){var d=false,f=false,j=function(){gx.csv.invalidControl==null&&(a.nodeName=="SELECT"?(!gx.util.browser.isIE()||gx.util.browser.ieVersion()>=7)&&gx.fn.setSelection(a):(!gx.util.browser.isSafari()||gx.dom.isTextControl(a)&&a.selectionEnd===0)&&gx.fn.setSelection(a));gx.csv.disableFocusCondition();gx.evt.setReady(true)};if(!gx.lang.emptyObject(H)&&!gx.lang.emptyObject(l)&&H.length>l.length){d=H.substring(H.length-
l.length);d=parseInt(d)<parseInt(l)}if(gx.csv.backwardGridValidation){!gx.lang.emptyObject(H)&&(!gx.lang.emptyObject(l)&&H.length==l.length&&parseInt(H)>parseInt(l))&&(f=x.focusControl>gx.fn.firstGridControl(c));!gx.lang.emptyObject(H)&&(!gx.lang.emptyObject(l)&&H.length==l.length&&parseInt(H)<parseInt(l))&&(f=x.focusControl<z&&x.focusControl>gx.fn.firstGridControl(c))}if(b&&gx.csv.invalidControl==null&&f){x.fromValid=gx.fn.firstGridControl(c);gx.csv.validControls(x.fromValid,x.focusControl,true,
gx.O)}else if((!b||m)&&(x.focusControl>=z||d)){if(gx.fn.lastMainLevelCtrlId(z,c))if((b=gx.fn.getControlRefById(z))&&b.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)===1)x.fromValid=z+1;gx.csv.validateAll(x).done(j)}else{x.toValid=x.focusControl;j()}});if(c&&l){var E=gx.O.getGridById(c,l);E&&E.allowSelection&&E.setSelection(parseInt(l,10)-1)}}catch(J){gx.dbg.logEx(J,"gxapi.js","onfocus")}return!1},userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(a){gx.dbg.logEx(a,"gxapi.js",
"userOnload")}},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(a,b,d){gx.pO.MasterPage&&a.req.setRequestHeader(d,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,b,d,f,l,c){gx.reinit(!c)},oncontentreplace:function(a,b,d,f,l,c,j,g){var a=gx.lang.getType(f),c=(c=c==j?c:j)?gx.lang.getType(c.toLowerCase()):
!1,k=gx.ajax.getJsonResponse();k&&gx.fn.setJsonHiddens(null,k.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);g?gx.setMasterPage(l):c&&gx.setMasterPage(new c);gx.ajax.clearJsonResponse();k?gx.ajax.setJsonResponse({response:k,isPostBack:!1,afterCmpLoaded:function(){g&&(l.restoreTargetComponents(),l.restoreExoEventHandlers());gx.objectLoad(k.gxGrids,k.gxHiddens).done(function(){gx.pO.SetStandaloneVars()})},gxObject:gx.O}):gx.objectLoad()}}});gx.livePrevWS._init()})},onready:function(a){if(gx.lang.emptyObject(a))if("complete"==
document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},250);else if(gx.util.browser.isIE()&&"complete"==document.readyState)gx.evt.onload()},on_ready:function(a,b){gx.fx.obs.addObserver("gx.onload",a,b)},onunload:function(a){gx.objectUnload(a);gx.spa.stop()},onclick:function(a){var b={event:a};gx.fx.obs.notify("gx.onclick",[b]);b.cancel||(gx.evt.setReady(!1),gx.isInputEnabled(a)||gx.evt.cancel(a,!0),gx.evt.mouse.update(a),setTimeout(function(){gx.fx.ctx.notify()},10),
gx.evt.setReady(!0))},ontouchstart:function(a){a=gx.evt.onmousedown.closure(this,[a]);gx.dom.documentScrollable().x||gx.dom.documentScrollable().y?gx.evt.touchTimer=window.setTimeout(a,150):a()},onmousedown:function(a){var b=window.event||a,d=gx.evt.source(b);if(d&&8>=gx.util.browser.ieVersion()&&c(d).is("shape"))return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(d);gx.evt.mouse.update(a);a=gx.fx.dnd;a.deleteClonControl();d=a.getSource(b);!gx.dom.isMaskElement(b.target)&&null!=d&&(gx.evt.cancel(b,
!0),gx.setGxO(d.obj),a.drag(d.obj,d.types,d.hdl))},onmousemove:function(a){gx.evt.mouse.update(a);var b=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()){var d=gx.popup.ext;d.movepopup();if(null!=d.currIDb||null!=d.currRS)return!1}null!=b.obj&&(a=window.event||a,gx.evt.cancel(a,!0),null!=gx.fx.dnd.getTarget(a,b.obj.gxDragTypes)&&b.over(),b.moveControl(b.dragCtrl))},onmouseup:function(a){window.clearTimeout(gx.evt.touchTimer);gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(a);var b=gx.fx.dnd;
if(null!=b.dragCtrl){var d=window.event||a,d=b.getTarget(d,b.obj.gxDragTypes);null!=d?(b.deleteClonControl(),gx.setGxO(d.obj),b.drop(b.dropCtrl,d.obj,d.hdl)):b.restoreControl();d=window.event||a;gx.evt.cancel(d,!0)}b.out();b.dragCtrl=null;b.obj=null;gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(a){gx.evt.mouse.update(a);var b=window.event||a;(gx.util.browser.isOldIE()||!gx.fx.dom.delayedDispatch(a))&&gx.fx.dom.raiseEvent("dblclick",b)},onwindowblur:function(){gx.fx.dnd.deleteClonControl()},
checkMaxLength:function(a,b,d){var d=window.event||d,f=gx.util.browser.isIE(),l=d.keyCode;if(f){if("keydown"==d.type&&229==l)return a.value.length<=b?a.ImeKey=!0:!1;if("keyup"==d.type&&8==l&&a.ImeKey&&a.value.length+1>=b)return a.value=a.value.substring(0,a.value.length-1),a.ImeKey=!1,!0}if("keyup"==d.type||f)return a.value.length+1<=b||8==l||9==l||46==l||35<=l&&40>=l},fireControlValueChange:function(a,b,d){var f=c.Deferred();if(!a||!b)return f.resolve();var l=a.getValidStructFld(b);return l&&l.evt_cvc?
(gx.evt.startValidation(l.gxgrid),gx.evt.stopPropagation(d),a[l.evt_cvc].call(a).always(function(){gx.fx.delayedValidation=!0;gx.evt.endValidation(l.gxGrid,!0)})):c.Deferred().resolve()},fireControlValueChanging:function(a,b){var d=c.Deferred();if(!a||!b)return d.resolve();var f=a.getValidStructFld(b);return f&&f.evt_cvcing&&!f.gxsgprm?(gx.evt.startValidation(f.gxgrid),"function"==typeof f.c2v&&f.c2v(),"function"==typeof f.v2bc&&f.v2bc.call(a),a[f.evt_cvcing].call(a).always(function(){gx.evt.endValidation(f.gxGrid,
!0)})):d.resolve()},oncontrolvaluechanging:function(a){var b=a.keyCode;8!=b&&32>b||(33<=b&&46>b||112<=b&&123>=b)||(a=gx.evt.source(a))&&gx.evt.fireControlValueChanging(gx.O,a)},onkeypress:function(a,b,d){if((null!=a||window.event)&&!(null!=a&&window.event)){var a=null==a?window.event:a,f=13===a.keyCode;27==a.keyCode&&gx.evt.shouldIgnoreEscKey()&&gx.evt.cancel(a,!0);var l=gx.fn,j=gx.util.browser,b={event:a,hasEnter:b,skipOnEnter:d,cancel:!1};if(27==a.keyCode&&gx.popup.ispopup())l.closeWindow();else if(gx.fx.obs.notify("gx.keypress",
[b]),!b.cancel){13==a.keyCode&&!gx.isInputEnabled()&&this.cancel(a,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(a))return this.cancel(a,!0),!1;this.lastKey=a.keyCode;this.shiftPressed=a.shiftKey;var g=a.ctrlKey,b=gx.evt.source(a)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.evt.validKeypressForCtrl(b,a)||this.cancel(a,!0);gx.csv.invalidateCtrl(b,a);if(!this.isEnterEvtCtrl(b)||!this.isTriggerKey(a)||!this.cancelAndRefresh(a))if(this.checkFuncKey(a,b),(32==a.charCode||
32==a.keyCode||13==a.keyCode&&!d)&&gx.dom.hasClass(b,"gx_newrow")&&c(b).find("span").click(),f&&d||!gx.grid.handleKeyPressEvt(a))switch(a.keyCode){case 13:if(f=this.triggersEvt(b),d){if(l.enterHasFocus())break;if(this.shiftPressed&&"TEXTAREA"==b.nodeName&&j.isIE())break;g&&"TEXTAREA"==b.nodeName?gx.dom.replaceAtCaretPosition(b,"\n"):(j.isIE()&&"file"!=b.type?(gx.evt.isEnterEvtCtrl(b)&&gx.O.executeEnterEvent(a,b),a.keyCode=9,this.lastKey=a.keyCode,11<=j.ieVersion()&&(a.preventDefault(),l.setFocus(l.searchFocus(l.getControlIndex(b)+
1,!0)))):(b.value&&(j.isIE()&&"SELECT"!=b.tagName)&&(j=b.value,b.value="",b.value=j),l.skipFocus(d),this.cancel(a,!0)),this.enter=!1)}else f||gx.O.executeEnterEvent(a,b)}}}},onkeyup:function(a){var a=window.event?window.event:a,b=gx.evt.source(a),d=b.getAttribute("maxlength"),f="undefined"==typeof b.value?"":b.value;if(""==b.type&&9==this.lastKey||this.autoSkip&&""!=b.type&&!this.isControlKey(this.lastKey)&&f.length>=d){if(!this.skipPromptCtrl)return;if(gx.dom.isTextWithLink(b)){if(a=b.id||("A"==
b.tagName&&b.parentNode?b.parentNode.id:""))a=gx.O.getValidStructId(a),gx.evt.onfocus(b,a,"",!1,"",0);return}b=b.getAttribute("gxfocusable");if(null!=b&&"1"==b)return;b=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl);if(-1==b)return!0;b=gx.fn.searchFocus(this.shiftPressed?b-1:b+1,!this.shiftPressed);gx.fn.setFocus(b)}gx.grid.handleKeyUpEvt(a)},shouldIgnoreEscKey:function(){var a=gx.popup.getPopup();return gx.evt.processing||a&&"opening"==a.state},validKeypressForCtrl:function(a,
b){var d=gx.O.getValidStructFld(a);if(d){var f=d.type,l=a.value;if("int"==f||"decimal"==f){f=null!==a.selectionStart&&void 0!==a.selectionStart?a.selectionEnd-a.selectionStart:window.getSelection?window.getSelection().toString().length:void 0;if(void 0===f)return!0;dec=d.dec||0;len=d.len-(0<dec?dec+1:0);picinputs=0;if(!isNaN(Number(b.key)))return digits=l.split("").filter(function(a){return"0"<=a&&"9">=a}).length,picinputs=len+(-1==l.indexOf(gx.decimalPoint)?0:dec),digits-f<picinputs}}return!0},setEventRow:function(a,
b){var d=gx.fn.rowGridId(b),f=gx.fn.controlRowId(b)||gx.fn.currentGridRowImpl(d)||"0001";null!=d&&null!=f&&(void 0!=b.gxGridName&&gx.fn.setHidden(a.CmpContext+b.gxGridName.toUpperCase()+"_ROW",f),gx.csv.lastEvtRow=f,gx.evt.setCurrentGridRows(d,f))},ctrlOnchange:function(a,b,d,f){gx.csv.pkDirty=d;"UPD"==a.value?"1"==b.value?(d?null!=f&&(f.value=gx.getMessage("GXM_captionadd")):null!=f&&(f.value=gx.getMessage("GXM_captionupdate")),b.value="0"):d&&null!=f&&(f.value=gx.getMessage("GXM_captionadd")):"INS"==
a.value&&"1"==b.value&&(null!=f&&(f.value=gx.getMessage("GXM_captionadd")),b.value="0")},onchange:function(){var a=function(){gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onchange_impl:function(a,b,d){gx.evt.setReady(!1);gx.evt.lastControl=a;var f=gx.fn.getControlValue("radio"==a.type?a.name:gx.dom.id(a));if(gx.evt.fixWebKitOnFocus()&&"radio"==a.type)a.onfocus();var l=
gx.O.getValidStructFld(a),c=!1,j=function(){delete gx.fx.delayedValidation;gx.evt.execUsrOnchange(a);gx.evt.setReady(!0);var b=gx.util.browser.isWebkit()&&("radio"==a.type||"checkbox"==a.type||"file"==a.type),f=!1;if(c&&l&&(gx.fn.lastMainLevelCtrlId(gx.O.focusControl,l.grid)||l.gxsgprm))f=b=!0;d&&(f=!1);if(b&&a.onblur)a.onblur();f&&("undefined"==typeof a.GXFormatError||!1==a.GXFormatError)&&gx.csv.validControls(gx.O.focusControl,gx.O.focusControl+1,!0,gx.O);gx.fx.obs.notify("gx.validation")};if(gx.csv.controlValueHasChanged(a,
f,l)){c=!0;gx.fn.setControlValue("IsModified","1");gx.fn.setControlValue("IsConfirmed","0");gx.csv.invalidateGXCtrl(a);var g=!0,k=gx.O;l&&("function"==typeof l.c2v&&l.c2v(),"function"==typeof l.v2bc&&l.v2bc.call(gx.O));var m=function(){if(a.type=="select-one"||a.type=="checkbox"||a.type=="radio"){g=false;gx.evt.setReady(false);gx.csv.validate(a,l.id||gx.O.focusControl,true,gx.O).done(function(b){if(b&&gx.csv.invalidControl==a)gx.csv.invalidControl=null;gx.evt.execOnchange(a,b);gx.evt.setReady(true)}).fail(function(){gx.evt.setReady(true)})}d||
gx.fn.setControlOldValue(a,f);g&&gx.evt.execOnchange(a,false)};gx.evt.fireControlValueChange(k,a,b).always(function(){m.call(this);j.call(this)}.closure(this))}else j.call(this)},execOnchange:function(a,b,d){var f="";if(a.attributes["data-gxoch1"])try{f+=a.attributes["data-gxoch1"].value+";"}catch(l){gx.dbg.logEx(l,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(a)&&a.attributes["data-gxoch2"])try{f+=a.attributes["data-gxoch2"].value+";"}catch(c){gx.dbg.logEx(c,"gxapi.js","execOnchange")}try{""!=f&&
eval(f)}catch(j){gx.dbg.logEx(j,"gxapi.js","execOnchange")}b||gx.fn.setControlGxValid(a,"0");d||(a.setAttribute("gxctrlchanged","1"),gx.fn.setControlValue("IsModified","1"));gx.fn.setControlValue("IsConfirmed","0")},execUsrOnchange:function(a){var b="";try{b=a.attributes["data-gxoch0"].value}catch(d){return!0}return(new Function(b)).call(a)},jsEvent:function(a){if(!gx.isInputEnabled())return!1;a=a.getAttribute?a.getAttribute("data-jsevent")||a.getAttribute("jsevent"):a.jsevent;return!gx.lang.emptyObject(a)?
eval(a):!0},isEnterEvtCtrl:function(a){if(gx.O.EnterCtrl){var b=gx.dom.id(a);!b&&"A"==a.tagName&&(b=a.parentNode.id);b&&0==b.indexOf("span_")&&(b=b.substring(5));if(!b)return!1;for(var d=gx.O.EnterCtrl,a=gx.fn.rowGridId(a),f=0,l=d.length;f<l;f++){var c=gx.csv.ctxControlId(d[f]);if(a&&-1!=b.search(RegExp(".*"+c+"_[0-9]{4}$"))||c==b)return!0}}return!1},isCheckEvtCtrl:function(a){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){var a=gx.dom.id(a),b;for(b in gx.O.CheckCtrl)if(gx.O.CheckCtrl[b]==a||gx.O.CmpContext+
gx.O.CheckCtrl[b]==a)return!0}return!1},isTriggerKey:function(a){for(var b=this.triggerKeys.length,d=0;d<b;d++)if(a.keyCode==this.triggerKeys[d]||a.charCode==this.triggerKeys[d])return!0;return!1},isControlKey:function(a){for(var b=this.controlKeys.length,d=0;d<b;d++)if(a==this.controlKeys[d])return!0;return!1},invalidDSPKey:function(a){var b=a.keyCode-111;a.shiftKey&&(b+=12);return this.keyListeners[b]&&"ENTER"==this.keyListeners[b][gx.O.CmpContext]||13==a.keyCode?!0:!1},addKeyListener:function(a,
b,d){1==b&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[b]&&(this.keyListeners[b]=[]);this.keyListeners[b][a]=d},setEvtName:function(a){gx.fn.setHidden("_EventName",a)},cancelAndRefresh:function(a){var b=gx.O;return b&&b.conditionsChanged?(this.cancel(a,!0),b.autoRefresh||this.resetGridsPagingVarsIfConditionsChanged(b.Grids||[]),b.executeServerEvent("RFR",!1),!0):!1},resetGridsPagingVarsIfConditionsChanged:function(a){var b=!1;c.each(a,function(a,f){f.conditionsChanged&&f.conditionsChanged()&&
(f.setPagingVars(0,0),b=!0)});return b},setGridEvt:function(a,b){if(gx.isInputEnabled()&&!gx.lang.emptyObject(a)){if(gx.lang.emptyObject(b)){var d=gx.fn.getGridObj(a);d&&(b=gx.fn.getHidden(gx.O.CmpContext+d.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",a);gx.fn.setHidden("_EventRowId",b);b&&gx.fn.setCurrentGridRow(a,b)}},checkFuncKey:function(a,b){var d=this.lastKey-111;a.shiftKey&&(d+=12);if(0<d&&24>=d&&void 0!=this.keyListeners[d]){var f=this.keyListeners[d][gx.O.CmpContext];if("undefined"!=
typeof f)this.execFnKeyEvt(a,gx.O,f,b);else for(var c in this.keyListeners[d])if(f=this.keyListeners[d][c],"undefined"!=typeof f){var j=gx.getObj(c,!1);if(null!=j){this.execFnKeyEvt(a,j,f,b);break}}}},execFnKeyEvt:function(a,b,d,f){if(!gx.evt.processing&&!gx.spa.isNavigating())if(this.cancel(a,!0),"PROMPT"==d){if((a=b.getValidStructFld(f))&&a.attachedCtrls)for(var d=a.attachedCtrls,c=0,j=d.length;c<j;c++)if((f=d[c])&&f.info&&f.info.isPrompt){var g=d[c].id;"function"==typeof b.promptKeyHandlers[g]&&
(f=0<a.grid?"_"+gx.fn.currentGridRowImpl(a.grid):"",f=gx.dom.el(b.CmpContext+g+f),b.promptKeyHandlers[g].call(b,f))}}else b.isTransaction()&&"SELECT"==d?(b=gx.dom.byId(b.CmpContext+"BTN_SELECT"))&&"function"==typeof b.click&&b.click():b.executeEvent(d,!1)},keyModifiesValue:function(a){a=window.event?a.keyCode:a.which;return 32<=a&&127>=a||229==a?!0:!1},triggersEvt:function(a){if(!gx.lang.emptyObject(a)){if(a==gx.evt.dummyCtrl||"A"===a.nodeName||"TEXTAREA"===a.nodeName)return!0;if("INPUT"===a.nodeName){if("button"===
a.type||"image"===a.type)return!0}else if("IMG"===a.tagName&&gx.dom.hasAttribute(a,gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR))return!0}return!1},setProcessing:function(a,b){if(("undefined"==typeof b||b)&&!gx.evt.redirecting)gx.evt.processing=a,gx.evt.setReady(!gx.evt.processing)},startValidation:function(a,b){if(a||b)gx.csv.validatingGrid=a,gx.csv.validating=!0},endValidation:function(a,b){if(!a||a===gx.csv.validatingGrid)gx.csv.validatingGrid=null,gx.csv.validating=!1,b||gx.fx.obs.notify("gx.onaftervalidate")},
setReady:function(a){gx.evt.userReadyCnt+=a?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;gx.evt.userReady=0==gx.evt.userReadyCnt;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0)},EVT_ROW_ID_REGEXP:/\.(([0-9]{4})+)$/,setCurrentGridRows:function(a,b){for(;0<a&&b&&b.length&&4<=b.length;){var d=b.substr(0,4),f=b.substr(4);gx.fn.setCurrentGridRow(a,d);if(d=gx.O.getGridById(a,f))d=d.parentGrid;a=d?d.gridId:0;b=b.substr(4,b.length)}},execEvt:function(a,b,d,f,c,j,g,k,p,m){gx.dbg.logPerf("execEvt");
gx.ajax.saveFormForAutoComplete();if(m||!gx.lang.emptyObject(d)&&gx.isInputEnabled()&&gx.ajax.isFormEnabled()){var s=gx.setGxObyCtx(a,b),q=c,r=this.EVT_ROW_ID_REGEXP.exec(d),u=r&&1<r.length?r[1]:null;r&&2<r.length&&gx.evt.setCurrentGridRows(q,u);u||(u=gx.fn.currentGridRowImpl(q));if(m||!s||!s.inputHasFormatErrors(d,c,u)){if(gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(f)&&f!=gx.csv.lastControl&&void 0!=f.onfocus)f.onfocus();gx.fx.obs.notify("gx.validation");gx.setGxObyCtx(a,b);g&&(gx.evt.srvCommand=
!0,f&&(q=gx.fn.rowGridId(f),u=gx.fn.controlRowId(f),!gx.lang.emptyObject(q)&&!gx.lang.emptyObject(u)&&(gx.csv.lastGrid=q,gx.fn.setCurrentGridRow(q,u))));if(0<gx.csv.lastId&&!gx.csv.validatingAll&&(a=gx.O.getValidStruct(gx.csv.lastId),(gx.evt.isEnterEvtCtrl(f)&&0<f.id?gx.O.getValidStructId(f.id):gx.O.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(f)||a&&a.isuc)||gx.evt.enter))gx.csv.validatingAll=!0,gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll(),gx.csv.validatingAll=
!1;this.setEvtName(d,f);this.lastEvent=d;!g&&(gx.grid.drawAtServer||f&&"INPUT"==f.nodeName&&"submit"==f.type)?this.execEvtSubmit(d,f):(gx.evt.setProcessing(!0),f=function(){gx.ajax.doPost(gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),j,k,p)},gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(d,gx.O,q,u,!0,void 0,k).done(p).fail(f):f())}}},execEvtSubmit:function(a,b){if(gx.isInputEnabled()){gx.evt.setProcessing(!0);gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,b]);gx.fn.objectOnpost();gx.http.saveState();
gx.fn.forceEnableControls(!1);var d=gx.dom.form(),f=gx.popup.getPopup();if(null!=f){var c=d.action,f=f.window.gx.popup.lvl;if(-1!=f){var j=-1!=c.indexOf("?")?",":"?",j=j+encodeURIComponent("gxPopupLevel="+f+";");d.action=c+j}}d.submit()}},execCliEvt:function(a,b,d,f,c,j){if(gx.isInputEnabled()&&gx.ajax.isFormEnabled()){gx.fx.obs.notify("gx.validation");var j=void 0!=j?j:[],g=gx.getObj(a,b),k;if(null!=g&&(gx.setGxO(a,b),"string"==typeof f&&(""!=f&&4<arguments.length)&&(k=g.getGrid(f),k.instanciateRow(c),
k=k.gridId),!g.inputHasFormatErrors(g.getServerEventName(d),k,c))){var p=g.isServerEvent(d);gx.evt.setProcessing(!0,!p);g.execC2VFunctions();var m=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing(false,!gx.csv.validating&&!p)});g.conditionsChanged?g.executeServerEvent("RFR",true):gx.fx.obs.notify("gx.onafterevent",[])},s=function(){g[d](j);m()};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(g.getServerEventName(d),g,k,c,!1,j).done(m).fail(s):s()}}},fixWebKitOnFocus:function(){var a=
gx.util.browser;return a.isWebkit()&&!a.isChrome()||a.isChrome()&&30>a.chromeVersion()?!0:!1},dispatcherTimeout:100,dispatcher:function(){var a=function(a){for(var d=[],f=0;f<a.length;f++)a[f+1]&&a[f].eventName===a[f+1].eventName||d.push(a[f]);return d};return{dispatchedEvents:{},getContextKey:function(a,d,f){return a.CmpContext+a.ServerClass+(d||"")+(f||"")},getEventParmsMetadata:function(a,d,f){return d.EvtParms[a]["input"==f?0:1]},eventDepends:function(a,d,f){for(var d=this.getEventParmsMetadata(d,
f,"output"),a=this.getEventParmsMetadata(a,f,"input"),c,j=0,g=d.length;j<g;j++)for(var f=gx.ajax.resolveParmKey(d[j]),k=0,p=a.length;k<p;k++)if(c=gx.ajax.resolveParmKey(a[k]),f==c)return!0;return!1},beforeDispatch:function(a){var d=gx.ajax.getSecurityToken(a);d&&(a.InternalParms[d.id]=d.value)},dispatch:function(a,d,f,l,j,g,k){var j=void 0===j||j,p=c.Deferred(),m=d.cleanEventName(a),s=d.getClientEventName(a);this.beforeDispatch(d);if(!d.EvtParms[m])return p.reject(),p.promise();var q=this.getContextKey(d,
f,l),r=this.dispatchedEvents[q],a={eventName:m,dirtyEventName:a,clientSideEventName:s,serverSide:j,deferred:p,arguments:g,disableForm:k};r?r.events.push(a):(r={gxO:d,grid:f,row:l,events:[a]},this.dispatchedEvents[q]=r,setTimeout(this.dispatchTimeoutCallback.closure(this,[q]),gx.evt.dispatcherTimeout));return p.promise()},dispatchTimeoutCallback:function(b){var d=this.dispatchedEvents[b],f=d.gxO,c=d.grid,j=d.row,g=[],k=[],p,m,s=[],q,r={};delete this.dispatchedEvents[b];for(var b=0,u=d.events.length;b<
u;b++)if(p=d.events[b],p.serverSide)k.push(p);else{m=!0;for(var v=0;v<b;v++)if(this.eventDepends(p.eventName,d.events[v].eventName,f)){m=!1;break}m?g.push(p):k.push(p)}d=g.concat(k);d=a(d);g=!1;b=0;for(u=d.length;b<u;b++)r[d[b].eventName]=d[b].deferred,g&&d[b].serverSide?q.addMethod(d[b].eventName):(q=new gx.ajax.message(d[b].eventName,f,c,j,d[b].serverSide,d[b].disableForm),d[b].serverSide||(q.callback=f[d[b].clientSideEventName].closure(f,d[b].evtArguments||[])),s.push(q)),g=d[b].serverSide;var x=
function(a,b,d){for(var f=0,c=a.methods.length;f<c;f++){var l=r[a.methods[f]];l&&(b?l.resolve(d):l.reject(d))}};runCount=0;var z=function(){if(runCount<s.length){var a=s[runCount++],b=runCount==s.length;a.call().done(function(){x(a,!0,b);z()}).fail(function(){x(a,!1,b)})}};z()}}}(),mouse:{x:-1,y:-1,update:function(a){try{gx.lang.emptyObject(a.touches)?gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=a.pageX,
this.y=a.pageY):0<a.touches.length&&(this.x=a.touches[0].pageX,this.y=a.touches[0].pageY)}catch(b){gx.dbg.logEx(b,"gxapi.js","mouse update")}}},_init:function(){document.gxReadyState="loading";if(gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()))this.attach(document,"readystatechange",this.onready);else if(9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||
gx.util.browser.isOperaMini())this.attach(document,"DOMContentLoaded",this.onload);else if(gx.util.browser.isBlackBerry())this.attach(window,"load",this.onload);else this.onready(null);this.attach(document,["touchstart"],this.ontouchstart);this.attach(document,"mousedown",this.onmousedown);this.attach(document,["mousemove","touchmove"],this.onmousemove);this.attach(document,["mouseup","touchend"],this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);
this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},_deinit:function(){this.lastEvent=this.lastControl=null;this.dummyCtrl={};this.keyListeners={};this.hooks=[]}},csv:{GX_OLD_VALUE_ATTRIBUTE:"data-gxOldValue",GX_VALID_ATTRIBUTE:"data-gxvalid",pkDirty:!1,validating:!1,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,
lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,validatingGrid:null,instanciatedRowGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",oneAtAtime:!0,gxFormatErrors:[],validateAll:function(a){var b=c.Deferred(),a=a||gx.O;this.validControls(a.fromValid,a.toValid,!1,a).done(function(){try{if((null==this.invalidControl||
!gx.csv.stopOnError)&&(!this.rowChanged||this.targetRowIsMod(this.toValid)))a.fromValid=a.toValid}catch(d){gx.dbg.logEx(d,"gxapi.js","validateAll")}b.resolve()}.closure(this));return b.promise()},validControls:function(a,b,d,f,l){var j=c.Deferred(),g=[],k=0,p=0,m=0,s=gx.csv.fullGridValidation&&1<=b-a&&gx.O.isTransaction(),q=function(a,b){if(gx.csv.stopOnError)if(-1!=b){var d=gx.fn.validStruct(b,f),d=gx.fn.getControlGridRef(d.fld,d.grid);gx.csv.disableFocus=!0;gx.fn.isAccepted(d,f)?gx.fn.setFocus(d):
gx.fn.setFocus(gx.evt.lastControl)}else!gx.dom.isButton(gx.csv.lastControl)&&null!=gx.csv.validActivatedControl&&gx.fn.setFocus(gx.csv.validActivatedControl)};try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=0;if(b>a){if(s&&(validStruct=gx.fn.validStruct(a),void 0!=validStruct&&void 0!=validStruct.lvl&&(k=validStruct.lvl),validStruct=gx.fn.validStruct(b),void 0!=validStruct&&void 0!=validStruct.lvl))p=validStruct.lvl;for(var r=a;r<b;r++)if(g.push(this.validControl(r,
d,f,null,l)),s&&(r>a&&r<b)&&(validStruct=gx.fn.validStruct(r),void 0!=validStruct&&void 0!=validStruct.lvl&&(m=validStruct.lvl,m!=k&&m!=p&&validStruct&&validStruct.grid))){var u=gx.fn.getGridObj(validStruct.grid),v=u.grid.rows.length,x=gx.fn.currentGridRowImpl(validStruct.grid),z=gx.fn.lastGridControl(validStruct.grid);if(r==z)for(var w=gx.fn.firstGridControl(validStruct.grid),H=0;H<v;H++){var E=u.grid.rows[H],J=E.gxDeleted(),C=E.gxExists(),A=E.gxIsMod();if(!J&&(C||A)&&E.gxId!=x)for(var B=w;B<=z;B++)g.push(this.validControl(B,
d,f,E.gxId))}}if(0<g.length)return gx.evt.setProcessing(!0),c.when.apply(c,g).done(function(){for(var a=!0,b=-1,d=0,f=arguments.length;d<f;d++){var c=arguments[d].ret;if(a&&!c){b=arguments[d].ctrl;a=!1;break}}q(a,b);gx.evt.setProcessing(!1);j.resolve(a)}),j.promise()}q(!0,-1);j.resolve(!0)}catch(y){gx.dbg.logEx(y,"gxapi.js","validControls")}return j.promise()},validControl:function(a,b,d,f,l){var j=c.Deferred(),d=d||gx.O,g=gx.fn.validStruct(a,d);if(void 0!=g){0!=g.grid&&(f=f?f:gx.fn.currentGridRowImpl(g.grid),
gx.lang.emptyObject(f)||gx.fn.setCurrentGridRow(g.grid,f));!0==g.isuc?g.uc.execC2VFunctions():"function"==typeof g.c2v&&g.c2v();"function"==typeof g.v2bc&&g.v2bc.call(d);try{if(0==g.lvl||0!=g.grid&&gx.fn.gridRowIsMod(g.lvl,gx.fn.currentGridRow(g.grid))||!d.isTransaction()){var k=null;if(k=!0==g.isuc?g.uc.getRealControl():gx.fn.getControlGridRef(g.fld,g.grid))return this.validate(k,a,b,d,l).done(function(b){try{var d=false,f=true,c=-1;g.grid!=0&&(d=gx.fn.rowIsRemoved(g.grid,gx.fn.currentGridRow(g.grid)));
if(!b&&!d){gx.csv.invalidControl=k;gx.csv.invalidId=a;f=false;c=a}gx.csv.lastId=a;if(gx.fn.isAccepted(k)==false){gx.evt.executeOnblur(a);if(k.getAttribute("data-gxhiddenonchange")!=k.value){k.setAttribute("data-gxhiddenonchange",k.value);gx.evt.execOnchange(k,false,true)}}}catch(l){gx.dbg.logEx(l,"gxapi.js","validControl - callback")}j.resolve({ret:f,ctrl:c});return j.promise()}),j.promise()}}catch(p){gx.dbg.logEx(p,"gxapi.js","validControl")}}j.resolve({ret:!0,ctrl:-1});return j.promise()},validate:function(a,
b,d,f,l){var j=c.Deferred(),f=f||gx.O;gx.csv.anyError=!1;var g=gx.fn.validStruct(b,f);if(void 0==g)return j.resolve(!0),j.promise();gx.csv.refreshVars(g,f);if(null==g.fnc&&null==g.isvalid){if("SELECT"!=a.tagName&&"checkbox"!=a.type&&!gx.evt.eachKeyAutorefreshType(g.type)&&!gx.lang.emptyObject(g.rgrid))for(var k=g.rgrid.length,b=0;b<k;b++)g.rgrid[b].filterVarChanged();j.resolve(!0);return j.promise()}try{if(-1!=b&&(d||"1"!=a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE))){gx.csv.currentId=b;gx.evt.startValidation(g.gxgrid,
!0);gx.csv.refreshVars(g);d=!1;d=!0==g.isuc?g.fnc.call(g.uc):null!=g.fnc?g.fnc.call(f):!0;1==f.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=a),gx.csv.anyError=!0,f.AnyError=0);!0==gx.csv.anyError&&(d=!gx.csv.anyError);if(!1==d)return gx.evt.endValidation(),j.resolve(!1),j.promise();gx.csv.refreshControls(g,f);gx.csv.invalidateDeps(b,f);if(!gx.lang.emptyObject(g.rgrid)&&!gx.lang.emptyObject(g.hc)){k=g.rgrid.length;for(b=0;b<k;b++)g.rgrid[b].filterVarChanged()}var p=
gx.fn.isAccepted(a,f),b=function(){j.resolve(true);try{if(!l){var b=gx.dom.byId(a.id);p&&!l?gx.fn.setControlGxValid(b,"1"):gx.fn.setControlGxValid(b,"0")}gx.evt.endValidation()}catch(d){gx.dbg.logEx(d,"gxapi.js","validate")}};if(null!=g.isvalid&&p&&"1"!=a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&!l){var m=g.gxgrid?g.gxgrid:null;if(gx.pO.supportAjaxEvents){var s=g.isvalid,q=g.gxgrid?g.gxgrid.gridId:!1,r=q?gx.fn.currentGridRowImpl(q):"",u=f.isServerEvent(s);s?gx.evt.dispatcher.dispatch(f.getServerEventName(s),
f,q,r,u).done(b).fail(b):(f[g.isvalid](),b())}else{var v=gx.csv.instanciatedRowGrid;gx.csv.instanciatedRowGrid=m;f[g.isvalid]();gx.csv.instanciatedRowGrid=v;b()}}else b()}}catch(x){gx.dbg.logEx(x,"gxapi.js","validate")}j.resolve(!0);return j.promise()},invalidateForm:function(){if(1!=gx.O.AnyError)for(var a=gx.fn.controlIds(),b=a.length,d=0;d<b;d++){var f=gx.fn.validStruct(a[d]);f&&(f.fld&&!f.isuc)&&this.invalidateGXCtrl(gx.fn.getControlGridRef(f.fld,f.grid))}},invalidateGXCtrl:function(a){a&&1==
a.getAttribute(gx.csv.GX_VALID_ATTRIBUTE)&&gx.csv.controlValueHasChanged(a)&&gx.fn.setControlGxValid(a,"0")},invalidateCtrl:function(a,b){try{this.invalidateGXCtrl(a);var d=gx.fn.validStruct(gx.O.focusControl);if(d&&0!=d.grid&&gx.evt.keyModifiesValue(b)){var f=gx.fn.controlRowId(a)||gx.fn.currentGridRowImpl(d.grid)||"0001";d.gxgrid.setRowModified(f)}}catch(c){gx.dbg.logEx(c,"gxapi.js","invalidateCtrl")}},invalidateDeps:function(a,b){for(var d=gx.fn.controlIds(),f=d.length,c=0;c<f;c++){var j=d[c];
if(j>a)for(var j=gx.fn.validStruct(j,b),g=j.ip?j.ip.length:0,k=0;k<g;k++)if(j.ip[k]==a)if(0==j.grid){var p=gx.fn.getControlGridRef(j.fld,j.grid);p&&gx.fn.setControlGxValid(p,"0")}else{var m=gx.fn.getGridObj(j.grid);if(m)for(var s=m.grid.rows.length,q=0;q<s;q++){var p=m.grid.rows[q],r=p.gxDeleted(),u=p.gxExists();!r&&u&&(m.setRowModified(p.gxId),(p=gx.fn.getControlRef(j.fld+"_"+p.gxId))&&gx.fn.setControlGxValid(p,"0"))}}}},controlValueHasChanged:function(a,b,d){if(!a)return!1;"undefined"===typeof b&&
(b=a.value);return gx.applyPicture(d,a.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE))!==gx.applyPicture(d,b)},setFormatError:function(a,b){a.id&&(b||"undefined"==typeof b?(this.gxFormatErrors[a.id]=!0,a.GXFormatError=!0):(delete this.gxFormatErrors[a.id],a.GXFormatError=!1))},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var a=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&
gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid));var b=gx.fn.validStruct(gx.O.focusControl);if(b&&b.nac&&!0==b.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var d=gx.fn.searchFocusFwd(cn);null!=d&&gx.fn.setFocus(d);gx.setVar("Gx_mode",a);return!0}gx.setVar("Gx_mode",a)}catch(f){}return!1},loadScreen:function(){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,
null,!0))}catch(a){gx.dbg.logEx(a,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,ctxControlId:function(a,b){var d;if((d=b||gx.O)&&d.IsMasterPage&&0!=a.indexOf("MP")){var f=this.CTRL_ROW_INDEX_REGEXP.exec(a);if(f&&1<f.length)return d=f[1],f=2<f.length?"_"+f[2]:"",d+(-1===d.indexOf("_MPAGE")?"_MPAGE":"")+f}return(d=(b?b.CmpContext:this.cmpCtx)||"")&&0==a.indexOf(d)||0<=a.search(gx.GxObject.CONTROL_CMP_REGEX)?a:d+a},isProperty:function(a){return a instanceof Array&&2==a.length||
"object"==typeof a&&"undefined"!=typeof a[0]&&"undefined"!=typeof a[1]?!0:!1},checkRowChange:function(a,b,d,f){var j=c.Deferred();try{var g=gx.fn.validStruct(a,d);if("undefined"!=typeof g){var k=g.grid;if(0!=k){var o=gx.fn.currentGridRowImpl(k);if(o&&(o!=f||b)&&1<o.length&&f&&1<f.length){gx.csv.rowChanged=!0;var p=d.Gx_BScreen;d.Gx_BScreen=1;gx.csv.validGridRowChange(k,o,d,f).done(function(a){a&&(a=d.getGridById(k,f))&&a.instanciateRow(o);d.Gx_BScreen=p;j.resolve(!0)})}else j.resolve(!1);void 0!=
o&&gx.fn.setCurrentGridRow(k,o)}else j.resolve(!1)}else j.resolve(!1)}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","checkRowChange")}return j.promise()},validGridRow:function(a,b){void 0!=b&&gx.fn.setCurrentGridRow(a,b);var d=gx.fn.firstGridControl(a),f=gx.fn.lastGridControl(a);gx.csv.validControls(d,f+1,!0,gx.O)},validGridRowChange:function(a,b,d,f){var j=c.Deferred();void 0!=f&&gx.fn.setCurrentGridRow(a,f);var g=gx.fn.firstGridControl(a,d),k=gx.fn.lastGridControl(a,d),f=!gx.lang.emptyObject(f)&&!gx.lang.emptyObject(b)&&
f.length==b.length&&parseInt(f)>parseInt(b);gx.csv.validControls(g,k+1,!0,d,f).done(function(d){(d||!gx.csv.stopOnError)&&gx.csv.changeGridRow(a,g,b);j.resolve(d)});return j.promise()},changeGridRow:function(a,b,d){gx.csv.lastId=b;gx.O.fromValid>b&&(gx.O.fromValid=b);gx.csv.lastRow[a]=d;Gx_BScreen=1},targetRowIsMod:function(a){return(a=gx.fn.validStruct(a))?gx.fn.gridRowIsMod(a.lvl,gx.fn.currentGridRow(a.grid)):!1},refreshVars:function(a,b){for(var d=a.ip?a.ip.length:0,f=0;f<d;f++)try{"function"==
typeof gx.fn.validStruct(a.ip[f],b).c2v&&gx.fn.validStruct(a.ip[f],b).c2v()}catch(c){gx.dbg.logEx(c,"gxapi.js","refreshVars")}},refreshControls:function(a,b){for(var d=a.op?a.op.length:0,f=0;f<d;f++)try{var c=gx.fn.validStruct(a.op[f],b);gx.fn.v2c(c);var j=null;(j=0==c.grid?gx.dom.el(gx.csv.ctxControlId(c.fld)):gx.fn.getControlGridRef(c.fld,c.grid))&&gx.fn.setControlGxValid(j,"0")}catch(g){gx.dbg.logEx(g,"gxapi.js","refreshControls")}d=a.ucs?a.ucs.length:0;for(f=0;f<d;f++)try{gx.fn.validStruct(a.ucs[f],
b).uc.execV2CFunctions(!0)}catch(k){gx.dbg.logEx(k,"gxapi.js","refreshControls")}},setValidValues:function(a,b,d){var f=[];if(1<d.length-b.length){var c=gx.json.evalJSON(d[d.length-1]);for(h in c)gx.fn.setHidden(h,c[h]);f=gx.json.evalJSON(d[d.length-2])}c={};a={fields:a,msgs:f};gx.O.cmpCtx?c[gx.O.cmpCtx]=a:c.MAIN=a;gx.fn.setErrorViewer(c);if(!gx.O.AnyError)for(var j=!1,a=b.length,c=0;c<a;c++){var g=b[c],f=d[c];if(this.isProperty(g)){var k=gx.fn.vStructForVar(g[0])||gx.O.getValidStructFld(g[0]);null!=
k&&gx.fn.setCtrlProperty(k.fld,g[1],f)}else if(k=gx.fn.validStruct(this.currentId),!gx.lang.emptyObject(k)&&!gx.lang.emptyObject(k.hc)&&(k.hc==g?(gx.O[k.hc]=f,gx.fn.setHidden(this.cmpCtx+"GXH_"+k.fld,f)):k.hd==g&&(gx.O[k.hd]=f)),k=gx.fn.vStructForVarWId(g,this.currentId),gx.lang.emptyObject(k)){k=gx.fn.vStructForHC(g);if(null!=k){var p="";0!=k.grid&&(p="_"+gx.fn.currentGridRow(k.grid));gx.fn.setHidden(this.cmpCtx+"GXHC"+k.fld+p,f)}k=gx.fn.gridObjFromGxO(g);void 0!=k?(j=!0,k.loadGrid({rowProps:f})):
gx.fn.saveLvlOldParm(g,f)&&(gx.setVar(g,f),gx.fn.setGridHidden(g,f))}else if(g=gx.fn.screen_CtrlRef(k.fld),!gx.lang.emptyObject(g)&&f instanceof Object&&("SELECT"==g.tagName?(-1!=g.selectedIndex&&gx.fn.invalidEmptyValue(f)&&(f.s=g.options[g.selectedIndex].value),p=gx.dom.id(g),gx.fn.loadComboBox(p,f.v),gx.fn.setComboBoxValue(p,f.s)):gx.lang.emptyObject(f.s)||(f.s=gx.fn.trimSelectValue(f.s,k.type)),p=gx.fn.selectedDescription(f,k.type),f=gx.lang.emptyObject(f.s)&&!gx.lang.emptyObject(g.value)?g.value:
"SPAN"==g.tagName&&!gx.lang.emptyObject(f.s)&&!gx.lang.emptyObject(p)?p:f.s,gx.fn.setControlValue_span_safe(this.cmpCtx+k.fld,f,0)),k.v2v)k.v2v(f),gx.fn.v2c(k,f,"bits"==k.type)}gx.O.refreshOlds();gx.fn.enableDisableDelete();j&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.gxFormatErrors=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=this.userFocus=this.lastActiveControl=
this.lastControl=null}},json:{_nonSerializables:[],setNonSerializable:function(a){this.isNonSerializable(a)||this._nonSerializables.push(a)},isNonSerializable:function(a){for(var b=this._nonSerializables.length,d=0;d<b;d++)if(this._nonSerializables[d]==a)return!0;return!1},evalJSON:function(a,b){try{return window.JSON&&!b?void 0===a?a:JSON.parse(a):eval("("+a+")")}catch(d){gx.dbg.logEx(d,"gxapi.js","evalJSON")}return a},evalValidJSON:function(a){return eval("("+a+")")},serializeJson:function(a,b){if(b&&
window.JSON)return JSON.stringify(a);var d=this.objToJson(a);if(null===d)d=this.arrayToJson(a);else return d;if(null===d){if("function"==typeof a)return null;var d=[],f;for(f in a)if(b||!this.isNonSerializable(f)){var c=this.objToJson(f,!0);if(null!==c){var j=this.serializeJson(a[f]);"string"==typeof j&&d.push(c+":"+j)}}return"{"+d.join(",")+"}"}return d},objToJson:function(a,b){var d=typeof a;if(b){if(!gx.lang.emptyObject(a)){if("string"==d)return gx.text.escapeString(a);if("number"==d)return'"'+
a+'"';if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return'"'+a.toString()+'"'}}else{if("undefined"==d)return d;if("string"==d)return gx.text.escapeString(a);if("number"==d||"boolean"==d)return a.toString();if("undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)return'"'+a.toString()+'"';if(null===a)return"null";if("function"==typeof a.json&&(d=a.json(),a!==d))return this.serializeJson(d)}return null},arrayToJson:function(a){if("function"!=typeof a&&"number"==
typeof a.length){for(var b=[],d=a.length,f=0;f<d;f++){var c=this.serializeJson(a[f]);"string"!=typeof c&&(c="undefined");b.push(c)}return"["+b.join(",")+"]"}return null},objFromJson:function(a,b,d){try{var f=this.evalValidJSON(b);if(a instanceof Array&&f instanceof Array)for(;a.length>f.length;)a.shift();else for(var c in a)"function"!=typeof a[c]&&delete a[c];for(c in f)a[c]=f[c];return!0}catch(j){return gx.dbg.logEx(j,"gxapi.js","objFromJson"),d&&d.push({Id:"FromJson Error",Description:gx.dbg.exTxt(j),
Type:0}),!1}}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()},logDebug:function(a){this.enabled&&this.write(a)},logMsg:function(a){(this.enabled||window.console)&&this.write(a)},logEx:function(a,b,d){if(this.enabled||window.console){var f="";if(a&&a instanceof Error)f="["+a.name+": "+this.exTxt(a),f=f+(b?", file: "+b:"")+((d?", func: "+d:"")+"]"),a.fileName&&(f+=" FileName:"+
a.fileName),a.lineNumber&&(f+=" ln:"+a.lineNumber);else try{f=""+a}catch(c){f="[Unknown Error]"}this.write(f,!0,a)}},exTxt:function(a){return!a?"Unknown Error":a.message?a.message:a.description?a.description:a.toString()},write:function(a,b,d){if(this.enabled)try{null==this.dbgWin&&(this.dbgWin=window.open("","debug","scrollbars=1,height=900,width=900")),gx.dom.write(a+"<BR>",this.dbgWin.document)}catch(f){}window.console&&(b?d&&d.stack?console.error(d,d.stack):console.error(a):console.log(a));b&&
window.ga&&ga("send","exception",{exDescription:a,exFatal:b})},writeT:function(a){var b=new Date,d=b.getTime(),f=this.lastTime;0<this.lastTime&&(f=(d-this.lastTime)/1E3);this.lastTime=d;a=b.toString()+" (+"+f+"seg): "+a;this.write(a)},logPerf:function(a,b){if(this.performance)if(void 0===this.hshTimes[a])this.hshTimes[a]=(new Date).getTime();else{var d=((new Date).getTime()-this.hshTimes[a])/1E3;delete this.hshTimes[a];0<d&&this.performanceLog.push((void 0==b?a:b)+":("+d+"seg)")}},printPerformanceLog:function(){if(this.performance){for(msg in this.performanceLog)"string"==
typeof this.performanceLog[msg]&&(this.outputFunc&&this.outputFunc(this.performanceLog[msg]),this.write(this.performanceLog[msg]));this.performanceLog=[]}}},http:function(){return{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},validJsonResponse:function(a,b){return"{"!=
b[0]&&200==a.status&&0!=a.getResponseHeader("Content-Type").toLowerCase().indexOf("application/json")?(gx.dbg.logEx('Unexpected AJAX respose format "'+a.getResponseHeader("Content-Type")+'"; Reloading page'),gx.http.reload(!0),!1):!0},saveHidden:function(a,b,d){null!=gx.dom.el(a,!1,!0,!0)?gx.fn.setControlValue_impl(a,b):d&&(gx.dom.createInput(a,"hidden"),gx.fn.setControlValue_impl(a,b))},clearMultipartHidden:function(){this.saveHidden("GXAjaxMultipart","",!1)},clearState:function(){this.viewState=
null;this.viewStateLoaded=!1;c(gx.dom.el("GXState")).val("{}")},loadState:function(){gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;var a=gx.dom.el("GXState");if(a){var b=a=a.value;this.useBase64State&&(b=gx.base64.decode(a));this.viewState=gx.json.evalJSON(b);this.viewStateLoaded=!0}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(a){if(this.viewState){var b=gx.json.serializeJson(this.viewState,a),a=b;this.useBase64State&&(a=gx.base64.encode(b));b=gx.dom.el("GXState");
null==b?gx.dom.createInput("GXState","hidden"):this.oldState=b.value;gx.fn.setControlValue_impl("GXState",a);this.useStateSignature&&(gx.http.setStateHsh(a),gx.http.setHsh())}},setStateHsh:function(a){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");a=gx.MD5.getHsh(a);gx.fn.setControlValue_impl("GXHSH12",a)},setHsh:function(){for(var a=gx.pO.WebComponents.length,b=0;b<a;b++)gx.http.setObjectHsh(gx.pO.WebComponents[b]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(a){var b=a.getControlIdsh();
if(null!=b){var d="";a.IsComponent&&null!=a.CmpContext&&(d=a.CmpContext);for(var f="",c=0;c<b.length;c++)if((validStruct=a.getValidStruct(b[c]))&&"function"==typeof validStruct.val)var j=gx.fn.getControlValue_impl(d+validStruct.fld),f="checkbox"==validStruct.ctrltype&&""==gx.text.trim(j)?f+validStruct.val():f+j;gx.http.createHsh(d+"GXHSH11",f)}},createHsh:function(a,b){null==gx.dom.el(a)&&gx.dom.createInput(a,"hidden");var d=gx.MD5.getHsh(b);gx.fn.setControlValue_impl(a,d)},refreshState:function(){null!=
this.oldState&&(gx.dom.el("GXState").value=this.oldState,this.oldState=null)},getCookie:function(a){for(var a=a+"=",b=document.cookie.split(";"),d=b.length,f=0;f<d;f++){for(var c=b[f];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(a))return c.substring(a.length,c.length)}return null},setCookie:function(a,b,d,f){f=f?";path="+f+";":"";d=d||1;d=new Date((new Date).getTime()+864E5*d);document.cookie=a+"="+escape(b)+"; expires="+d.toGMTString()+f;return this.getCookie(a)==b},checkResponseStatus:function(a){return a.status==
this.STATUS_FORBIDDEN?!1:a.status==this.STATUS_SESSION_TO?(gx.http.reloadOnTimeout(),!0):this.isBadResponse(a)?(gx.ajax.enableForm(),gx.util.alert.showError(gx.getMessage("GXM_NetworkError").replace("%1",a.status)),!0):a.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.warn&&gx.http.reloadOnTimeout(),!0):!1},isSessionTimeoutError:function(a,b){return!gx.gen.isDotNet()&&(b&&a&&gx.pO.AjaxSecurity)&&
a.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==b.name&&2147500037==b.result||"Error"==b.name&&-2146697209==b.number||"NETWORK_ERR"==b.name&&101==b.code)?!0:!1},reloadOnTimeout:function(){if((gx.pO.fullAjax||gx.pO.AjaxSecurity)&&confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(a){""==document.location.hash?this.redirect(location.href,!1,a):document.location.reload()},redirect:function(a,b,d,f){f=f||gx.O;gx.evt.setProcessing(!0);
var c=gx.popup.getPopup();if(null!=c&&gx.util.sameAppUrl(a)&&(c=c.window.gx.popup.lvl,-1!=c))var j=-1!=a.indexOf("?")?",":"?",j=j+encodeURIComponent("gxPopupLevel="+c+";"),a=a+j;gx.ajax.isabsoluteurl(a)||(a=gx.ajax.absoluteurl(a));b?gx.evt.redirecting=!0:setTimeout(function(){gx.pO!=f?f.endFeedback():gx.ajax.enableForm();gx.evt.setProcessing(!1)},200);gx.spa.started&&!d?(gx.spa.redirect(a),gx.pO!=f?f.endFeedback():gx.ajax.enableForm()):location.href=a},getRequest:function(){var a=null;window.XMLHttpRequest&&
(a=new XMLHttpRequest);if(!a)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(d){}}return a},postDataFormat:{HTTP:0,JSON:1},getPostData:function(a,b){var b=b||gx.http.postDataFormat.HTTP,d=b==gx.http.postDataFormat.HTTP?[]:{};if(a.reqData)d=a.reqData;else for(var f=a.formNode,f="Form"==f.tagName?f.elements:c("input[type!=file],textarea,select"),j=f.length,g=0;g<j;g++){var k=gx.http.elementPostData(f[g],b);null!=k&&(b==gx.http.postDataFormat.HTTP?
d.push(k):d[k[0]]=k[1])}gx.lang.isArray(d)&&b==gx.http.postDataFormat.HTTP&&(d=d.join("&")+"&");return d},elementPostData:function(a,b){if(gx.json.isNonSerializable(a.name)||"FIELDSET"==a.tagName)return null;var d="";if("select-multiple"==a.type)for(var f=a.options.length,c=0;c<f;c++)a.options[c].selected&&(d=a.options[c].value);else if("radio"==a.type||"checkbox"==a.type)if(a.checked)d=a.value;else{if("radio"==a.type)return null}else d="image"===a.type?a.src:this.element_gxvalue(a);return b==gx.http.postDataFormat.HTTP?
encodeURIComponent(a.name)+"="+encodeURIComponent(d):[a.name,d]},element_gxvalue:function(a){return a.gxtype&&"dtime"==a.gxtype.type?(dt=new gx.date.gxdate(a.value,gx.dateFormat),dt.HasTimePart=0<a.gxtype.dec,dt.HasDatePart=0<a.gxtype.len,gx.date.dttoc(dt,a.gxtype.len,a.gxtype.dec)):a.value},doHandleRequest:function(a,b){a.readyState==this.STATE_DONE&&(gx.evt.setReady(!1),gx.evt.setProcessing(!1,!gx.csv.validating),a.status==this.STATUS_OK||b.handleAllStatusCodes?this.doCallHandler(a,b):gx.http.checkResponseStatus(a)||
gx.lang.doCallTimeout(gx.dom.writeError,document,[a.responseText,gx.getMessage("GXM_runtimeappsrv"),a.status],50),b.always&&b.always.call(b.obj||window,a,b),window.gx&&(gx.evt.setReady(!0),gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog()))},onRequestError:function(a,b){b.error&&b.error.call(b.obj||window,a,b);b.always&&b.always.call(b.obj||window,a,b);gx.evt.setProcessing(!1,!gx.csv.validating);a.readyState==this.STATE_DONE?gx.http.checkResponseStatus(a):this.isBadResponse(a)&&
gx.http.reloadOnTimeout()},isBadResponse:function(a){return a.status==this.STATE_UNSENT&&gx.lang.emptyObject(a.responseText)?!0:!1},doCall:function(a){gx.util.alert.hide();!a.handler&&"function"==typeof a.load&&(a.handler=a.load);"boolean"!=typeof a.sync&&(a.sync=!1);a.method||(a.method="POST");if(a.multipart&&"POST"==a.method)this.doMultipartPost(a);else{var b=this.getRequest();if(null!=b){if("function"==typeof a.handler&&!a.sync){var d=gx.http.doHandleRequest.closure(this,[b,a]),f=gx.http.onRequestError.closure(this,
[b,a]);gx.util.browser.isIE()&&9>=gx.util.browser.ieVersion()?b.onreadystatechange=d:(b.onload=d,b.onerror=f)}d=null;"POST"==a.method&&(d=gx.http.getPostData(a));f=!1!==a.avoidCache?this.uncache(a.url):a.url;b.open(a.method,f,!a.sync);!1!==a.ajaxHeader&&b.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==a.method&&b.setRequestHeader("Content-Type",a.contentType?a.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&(gx.AjaxSecurity&&gx.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&
b.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);this.setSecurityToken(b,a.gxO);a.beforeSend&&a.beforeSend.call(a.obj||window,b);try{b.send(d)}catch(c){gx.dbg.logEx(c,"gxapi.js","doCall")}"function"==typeof a.handler&&a.sync&&gx.http.doHandleRequest(b,a);return b}}return null},doCallHandler:function(a,b){b.obj?b.handler.call(b.obj,null,a.responseText,a):b.handler(null,a.responseText,a);if(window.gx&&"function"===typeof b.onReady)b.onReady()},doMultipartPost:function(a){gx.http.saveState(!0);
this.getPostIFrame().gxPostInfo=a;var b=a.formNode;a.oldAction=b.getAttribute("action");b.setAttribute("action",a.url);a.oldTarget=b.getAttribute("target");b.setAttribute("target",this.iframeName);a.reqData&&(gx.http.saveHidden("GXAjaxMultipart",a.reqData,!0),this.setSecurityToken(null,a.gxO));b.submit()},setSecurityToken:function(a,b){var d=gx.ajax.getSecurityToken(b);d&&(gx.dom.hasSelectedFile()?gx.http.saveHidden("X-GXAUTH-TOKEN",d.value,!0):a.setRequestHeader("X-GXAUTH-TOKEN",d.value))},useReadyStateEvent:function(){return gx.util.browser.isIE()&&
11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":"load"},getPostIFrame:function(){var a=this.iframeName,b=gx.dom.byId(a);b&&b.frameElement&&(b=b.frameElement);b||(b=document.createElement("div"),b.innerHTML='<iframe id="'+a+'" name="'+a+'" src="about:blank">',document.body.appendChild(b),b=b.firstChild,document.body.appendChild(b),window[a]=b,b.name=a,b.setAttribute("name",a),b.id=a,b.style.position="absolute",b.style.left="0px",b.style.top=
"0px",b.style.height="1px",b.style.width="1px",b.style.visibility="hidden");gx.evt.attach(b,this.iFrameloadEventName(),gx.http.iframeOnload);return b},iFrameJsonResponse:function(a){return c(a).find("input[data-response-content-type='application/json']").val()},iframeOnload:function(){var a=gx.dom.byId(gx.http.iframeName);if(!(gx.http.useReadyStateEvent()&&"complete"!=a.readyState)&&(gx.evt.setProcessing(!1,!gx.csv.validating),a||(a=window.frames[gx.http.iframeName]),a&&a.frameElement&&(a=a.frameElement),
a)){gx.http.useReadyStateEvent()&&(a.src="about:blank",gx.evt.detach(a,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var b=a.gxPostInfo,d=b.formNode;d.setAttribute("action",b.oldAction);d.setAttribute("target",b.oldTarget);if(a=a.contentDocument?a.contentDocument:a.contentWindow.document){var d=a.body,f=gx.http.iFrameJsonResponse(d),c=!gx.lang.emptyObject(f);c||(c=gx.dom.allChildrenAreText(d))&&(f=gx.http.multipartResponse(d));if(c){a=gx.base64.decode(f);gx.http.clearMultipartHidden();b.handler(null,
a,b);if(window.gx&&"function"===typeof b.onReady)b.onReady();b.always&&b.always.call(b.obj||window,null,b)}else document.write(a.documentElement.innerHTML)}}},multipartResponse:function(a){try{for(var b=a.childNodes[0];"#text"!=b.nodeName;)b=b.childNodes[0];var d=b.nodeValue;if(!gx.util.browser.isIE())for(b=b.nextSibling;b;)null!=b.offsetParent&&(d+=b.nodeValue),b=b.nextSibling;return d}catch(f){return gx.dbg.logEx(f,"gxapi.js","multipartResponse"),""}},uncache:function(a){var b=(new Date).getTime(),
d=a.indexOf("?");return a+(0<d?d<a.length-1?",":"":"?")+"gx-no-cache="+b},callBackend_simple:function(a,b,d,f,c,j,g,k){gx.http.callBackend_impl(void 0,a,b,gx.http.modes.none,d,f,c,j,g,k)},callBackend:function(a,b,d,f,c,j,g,k,p,m,s){gx.http.callBackend_impl(a,b,f,c,j,g,k,p,m,s)},callBackend_impl:function(a,b,d,f,c,j,g,k,p,m){var s=this.getRequest(),m=m||{};if(s){try{var q=gx.O;c||q.startFeedback();j="undefined"!=typeof j?j:"GET";g="undefined"!=typeof g?g:null;p="undefined"!=typeof p?p:!1;k||(b=this.uncache(b));
s.open(j,b,p);s.setRequestHeader(gx.ajax.reqHeader,"2");for(var r in m)s.setRequestHeader(r,m[r]);try{"POST"==j?s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):gx.sec.secToken&&(gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&s.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken)}catch(u){gx.dbg.logEx(u,"gxapi.js","callBackend_impl: gx.O cannot be null")}s.send(g);c||q.endFeedback();this.lastStatus=s.status;this.lastResponse=s.responseText}catch(v){window.status=
"GXAjax HTTP error: "+v.message}window.status="";if(s.readyState!=this.STATE_DONE||s.status!=this.STATUS_OK)gx.http.checkResponseStatus(s)||(window.status="GXAjax HTTP error: ("+s.status+") - "+s.statusText,gx.dbg.logEx(s.responseText));else if(f!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(f==this.modes.full)this.handleFull(this.lastResponse);else if(f==this.modes.call)return this.handleCall(this.lastResponse,a);return this.handleRetVal(this.lastResponse,
a,d)}catch(x){gx.dbg.logEx(x,"gxapi.js","callBackend")}}else window.status="GXAjax HTTP error: (bad response format)"}},handleFull:function(a){gx.http.postHandler(null,a,{status:200,responseText:""})},handleCall:function(a,b){if(b){var d=c.parseJSON(a);if(gx.lang.isArray(d))return b(d);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}},handleRetVal:function(a,b,d){var f=gx.json.evalJSON(a),j=f[0];this.lastStatus=f[1];void 0==this.lastStatus&&(this.lastStatus=
0);if(b&&(d||null==this.lastStatus||0==this.lastStatus)){d=c.parseJSON(a);if(gx.lang.isArray(d))return b(d);gx.dbg.logEx(e,"gxapi.js","handleCall: Unexpected server response format (Expected array): "+a)}else return j},postHandler:function(a,b,d,f){try{if(gx.evt.enter=!1,gx.csv.lastEvtResponse=null,200>d.status||299<d.status)gx.dom.writeError(d.responseText,gx.getMessage("GXM_runtimeappsrv"),d.status);else if(gx.http.validJsonResponse(d,b)){var c=gx.json.evalJSON(b);null==c?gx.dom.writeError(b.toString(),
gx.getMessage("GXM_runtimeappsrv"),d.status):(gx.http.refreshState(),gx.csv.lastEvtResponse=c,gx.fn.forceEnableControls(!0),gx.ajax.setPostResponse(c,gx.O,f).done(function(a){a||gx.fx.obs.notify("gx.onafterevent",[c])}))}}catch(j){gx.dbg.logEx(j,"gxapi.js","postHandler")}},encodeUriSegment:function(a){return encodeURIComponent(a).replace(/%20/g,"+")},formatLink:function(a,b){a=gx.ajax.objectUrl(a);if(b&&0<b.length)for(var a=a+"?",d=b.length,f=0;f<d;f++)0<f&&(a+=","),a+=gx.http.encodeUriSegment("function"==
typeof b[f].getUrlVal?b[f].getUrlVal():b[f]);return a},loadScripts:function(a,b,d,f){"undefined"==typeof d&&(d=0);d>=a.length?b():gx.http.loadScript(a[d],function(a,b,d){gx.http.loadScripts(a,b,d+1,f)}.closure(this,[a,b,d]),f)},loadScript:function(a,b,d){var f=b,j=!1,g;"string"!==typeof a&&(g=a.callback,j=a.isExternal,a=a.url,f=function(){g&&g();b()});var k=gx.dom.byTag("head")[0],o,p=c("script[src='"+a+"']"),m=!0;0<p.length&&!d&&(j?p.remove():(o=p.get(0),m=!1));d=function(a){var b=function(){a();
o.removeAttribute("data-gx-loading-script")};if(typeof a=="function")o.addEventListener?gx.evt.attach(o,["load","error"],b,{userCapture:false}):o.onreadystatechange=function(){(o.readyState=="loaded"||o.readyState=="complete")&&b()}};o?null!==o.getAttribute("data-gx-loading-script")?d(f):f():(o=document.createElement("script"),o.type="text/javascript",o.src=a,j&&o.setAttribute("data-gx-external-script",""),d(f),m&&(k.appendChild(o),o.setAttribute("data-gx-loading-script","")))},loadStyle:function(a,
b,d,f){if(f=f?gx.dom.byId(f):null)f.href=a;else{var j=gx.dom.byTag("head")[0],f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.href=a;"function"==typeof b&&(f.onload=b);d?(a=gx.getThemeElement(),c(f).insertBefore(a),gx.util.browser.isIE()&&c(a).insertAfter(f)):j.appendChild(f)}},loadStyles:function(){var a=gx.fn.getHidden("GX_STYLE_FILES");if(!gx.lang.emptyObject(a))for(var b=0;b<a.length;b++){var d=a[b];(new gx.util.Url(d)).isRelative()&&(d=gx.util.resourceUrl(gx.basePath+
gx.staticDirectory+d,!1));gx.cache.fileLoaded(d)||(gx.cache.addRemoteFile(d),this.loadStyle(d,null,0<=d.indexOf("bootstrap.css")))}},doCommands:function(){var a=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(a)||gx.ajax.dispatchCommands(a)}}}(),stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},storage:function(a){this._store=window.sessionStorage;this._prefix=
a;this.supported=!1;this.set_string=function(a,b){this.supported&&(this._store[this._prefix+a]=b)};this.get_string=function(a){return this.supported?this._store[this._prefix+a]:null};this.set=function(a,b){this.set_string(a,gx.json.serializeJson(b))};this.get=function(a){return(a=this.get_string(a))?gx.json.evalJSON(a):null};this.remove=function(a){this.supported&&this._store.removeItem(this._prefix+a)};if("undefined"!=typeof window.sessionStorage)try{window.sessionStorage.setItem("storage.test",
!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(b){gx.http.setCookie("GXLocalStorageSupport","false",1)}},_setBasePath:function(){for(var a=gx.dom.scripts(),b=null,d=0,f=a.length;d<f;d++)if(0<=a[d].indexOf("gxgral.js")||0<=a[d].indexOf("gxapiSD.js")){b=a[d];break}a="";if(!gx.ajax.isRelativeToHost(b)||gx.ajax.isabsoluteurl(b))d=location.pathname.lastIndexOf("/"),a=1<d?location.pathname.substring(1,d):"";else{var b=b.split("/"),c=location.pathname.split("/");b.splice(b.length-
1,1);c.splice(c.length-1,1);d=0;for(f=c.length;d<f;d++)if(c[d]==b[d]||void 0===b[d])a=a+(""==a?"":"/")+c[d];else break}gx.basePath=a},objectLoad:function(a,b){var d=c.Deferred(),f=gx.dom.fixes;if(!gx.evt.execLoad)return d.resolve(),d.promise();void 0===gx.runtimeTemplates&&(gx.runtimeTemplates=0<c("div[data-abstract-form]").length);var j=!0;gx.sec.loadKey();gx.setTheme();gx.fx.obs.addObserver("webcom.render",this,function(a){if(a=a.getContainer()){gx.setTheme(a);if(!j){gx.pendingCmps=gx.pendingCmps||
0;gx.pendingCmps=gx.pendingCmps+1;gx.plugdesign.applyTemplateObject({selector:"#"+a.id,deferred:true}).then(function(){if(typeof gx.pendingCmps!="undefined"){gx.pendingCmps=gx.pendingCmps-1;gx.pendingCmps===0&&gx.fx.obs.notify("webcom.all_rendered")}})}}});gx.fx.obs.addObserver("grid.onafterrender",this,function(a,b){b||f.fixTableResets(a.container)});delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"unload",gx.evt.onunload);gx.fn.setFocusInit();f.createLegacyNotification();
gx.cache._init();gx.fn.installComponents(!0,b);gx.http.loadStyles();a&&gx.fn.loadJsonGrids(a,!1);gx.plugdesign.init().done(function(){if(typeof gx.StorageTimeZone!="undefined"&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var a=jstz.determine().name();!gx.lang.emptyObject(a)&&(gx.http.getCookie("GxTZOffset")!=a&&gx.http.setCookie("GxTZOffset",a,365,"/")&&gx.config.timezone.reload)&&gx.http.reload()}gx.fn.objectOnload();gx.fx.obs.notify("gx.onready");document.gxReadyState="complete";gx.util.autoRefresh.install();
gx.fn.setOpacity("reset","body");gx.evt.setProcessing(false);gx.fx.obs.notify("gx.onload");gx.evt.userOnload();gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();gx.evt.setReady(true);gx.evt.userReadyCnt=0;j=false;d.resolve()});return d.promise()},objectUnload:function(a){gx.fx.obs.notify("gx.onunload");gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.obs.removeAll();gx.util.autoRefresh.destroy();gx.fn.objectOnUnload(a);gx.plugdesign.deinit();gx._deinit();c(document).off("keydown keypress keyup")},
_init:function(){gx.lang.apply(this,{oldValues:[],oldKeyValues:[],newRows:[],suggestControls:{},disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],theme:""});gx.dbg._init();gx.dom._init();gx.base64._init();gx.sec._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.popup._init();gx.geolocation._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);
gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus","onchange"],b=gx.dom.form().elements,d=0,f=b.length;d<f;d++)gx.dom.purgeElement(b[d],a);b=gx.dom.byTag("span");d=0;for(f=b.length;d<f;d++)gx.dom.purgeElement(b[d],a);b=gx.dom.byTag("img");d=0;for(f=b.length;d<f;d++)gx.dom.purgeElement(b[d],a)}gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.printing._deinit();gx.core.audio._deinit();gx.O=null;gx.pO=null},reinit:function(a){gx.pO.clean(a);gx.objectUnload(a);
gx._init()}}}(jQuery);gx.config={popup:{ignoreCmdsOnCancel:!1},websocket:{},timezone:{reload:!0},evt:{dblclick:{delay:450}}};var GlobalEvents=function(){return{executeMethod:function(c,g){gx.fx.obs.notify(c,g);try{window.top&&(window.top!==window&&window.top.gx)&&window.top.gx.fx.obs.notify(c,g)}catch(k){}}}}(jQuery);
gx.util.browser.isIE()&&function(){function c(c,k){var k=k||{bubbles:!1,cancelable:!1,detail:void 0},j=document.createEvent("CustomEvent");j.initCustomEvent(c,k.bubbles,k.cancelable,k.detail);return j}if("function"===typeof window.CustomEvent)return!1;c.prototype=window.Event.prototype;window.CustomEvent=c}();
gx.plugdesign=function(c){var g={},k=!1,j,a,b=1,d={},f={},l=function(a,b){return function(d){var f=a[d.property],c;f&&(c=f[d.control.id]);!c&&f&&(c=f[d.control.name]);c&&(f=!0===c.fn.call(c.template,d.control,d.value),b&&(d.cancel=f))}};return{init:function(){gx.plugdesign.initialized=!0;gx.fx.obs.addObserver("gx.plugdesign.onafterapplytemplate",this,gx.plugdesign.fixBootstrapGridLayout.closure(this));gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);
gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);return gx.plugdesign.applyTemplateObject()},deinit:function(){gx.fx.obs.deleteObserver("gx.control.onbeforepropertychange",this,gx.plugdesign.onBeforePropertyChange);gx.fx.obs.deleteObserver("gx.control.onafterpropertychange",this,gx.plugdesign.onAfterPropertyChange);gx.plugdesign.initialized=!1;delete gx.runtimeTemplates},onBeforePropertyChange:l(d,!0),onAfterPropertyChange:l(f,!1),registerTemplate:function(a){g[a.name]=
a},getDOMContext:function(a,b,d,f,j){var g,k,l,b={};b.text=c(a).text();g=0;for(l=a.attributes.length;g<l;g++)k=a.attributes[g],b[k.name]=k.value;b.el=a;d&&(b.outerHTML=a.outerHTML);f&&(b.innerHTML=a.innerHTML);j&&(b=j.call(this,b,a)||b);return b},assingUserAPI:function(a,b){b.fnc_isRO=a.fnc_isRO},getElements:function(a,b,d){a="function"==typeof a.selector?a.selector(!b?"":b):b&&!a.global?c(b).find(a.selector):c(a.selector);return d?a.not(d):a},applyTemplateOnElement:function(a,b,j){var k=c.Deferred();
gx.lang.requestAnimationFrame(function(){if("string"==typeof a&&(a=g[a],!a))return;if(!0!==j||this.getElements(a).is(b)){var c=gx.plugdesign.getDOMContext(b,c,a.outerHTML,a.innerHTML,a.setContext);a.apply(b,c);a.initialize&&a.initialize(c);if(a.listeners){var l=a.listeners,q,c="function"==typeof l.control?l.control(c):l.control;if(l.before)for(q in l.before)l.before.hasOwnProperty(q)&&(d[q]||(d[q]={}),d[q][c]={id:c,fn:l.before[q],template:a});if(l.after)for(q in l.after)l.after.hasOwnProperty(q)&&
(f[q]||(f[q]={}),f[q][c]={id:c,fn:l.after[q],template:a})}k.resolve()}}.closure(this));return k},applyTemplateSelection:function(a,b,d,f){var j=c.Deferred(),g=[],k="data-gx-tpl-applied-"+a.name,l=this.getElements(a,b,d,f);!0!==a.onDemandInvoke&&!a.reDraw&&(l=l.not("["+k+"]"));l.each(function(b,d){if(d)if("function"==typeof a.reDraw)if(void 0!==c(d).attr(k)){var f;f=gx.plugdesign.getDOMContext(d,f,!1,!1,a.setContext);a.reDraw(f)}else g.push(gx.plugdesign.applyTemplateOnElement(a,d));else g.push(gx.plugdesign.applyTemplateOnElement(a,
d))});c.when.apply(c,g).done(function(){a.outerHTML&&(l=this.getElements(a,b,d,f));l.attr(k,"");j.resolve()}.closure(this));return j},applyClassMapOnElement:function(a,b){var d;d=gx.plugdesign.getDOMContext(b,d,!1,!1,a.setContext);a.first?b.className=a.cssClass+" "+(b.className||"").replace(a.cssClass,""):gx.dom.addClass(b,a.cssClass);a.initialize&&a.initialize(d)},applyClassSelection:function(a,b,d,f){var c=function(b){"Class"==b.property&&gx.dom.matchesSelector(b.control,a.selector)&&gx.plugdesign.applyClassMapOnElement(a,
b.control)};this.getElements(a,b,d,f).each(function(b,d){d&&(gx.plugdesign.applyClassMapOnElement(a,d),gx.plugdesign.assingUserAPI(a,d),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,c,{unique:!1}))})},controlValueChanged:function(a,b){a&&gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:a,property:"Value",value:b}])},applyControlValue:function(a,b){gx.fn.setControlValue(a.id,b);gx.html.onchange(a,b)},applyTemplates:function(a,d,f,j,k){var k=k||{},l=c.Deferred();if(0===
a.length)return l.resolve();a=c.map(a,function(a){var l=c.Deferred();"string"==typeof a?a=g[a]:(a.name=a.name||"auto-generated-"+b++,a=new gx.plugdesign.Template(a));if(!j||"function"==typeof j&&j(a)){var n=function(){gx.plugdesign.applyTemplateSelection(a,d,f,k).done(function(){l.resolve()})};!0===k.deferred?gx.lang.requestAnimationFrame(n):(n(),l.resolve())}else l.resolve();return l});!0===k.deferred?c.when.apply(c,a).done(function(){l.resolve()}):l.resolve();return l},applyClassMaps:function(a,
b,d,f,j){var g=c.Deferred(),k=function(a,f){gx.plugdesign.applyClassSelection(f,b,d,j)},l=function(){a=c.grep(a,f||gx.trueFn);c.each(a,k);g.resolve()};!0===j.deferred?gx.lang.requestAnimationFrame(l):l();return g},applyTemplateObject:function(b){var b=b||{},d=b.selector,f=b.excluded,g=b.templateSelector,l=b.classMapSelector,s=c.Deferred(),q,r,u=c.Deferred(),g=g||function(a){return!0!==a.onDemandInvoke};if(!gx.runtimeTemplates||!gx.plugdesign.initialized)return s.resolve().promise();if(k)r=this.applyTemplates(j,
d,f,g,b),q=this.applyClassMaps(a,d,f,l,b),s.resolve();else{var v=gx.plugdesign.definition;v.css&&c.each(v.css,function(a,b){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b+"?"+gx.gxBuild,!1),!1,!0)});var x=[];v.js&&c.each(v.js,function(a,b){x.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b+"?"+gx.gxBuild,!1))});var z=jQuery;jQuery=gx.$;gx.http.loadScripts(x,function(){k=!0;j=v.templates||[];a=v.class_maps||[];r=this.applyTemplates(j,d,f,g,b);q=this.applyClassMaps(a,
d,f,void 0,b);jQuery=z;s.resolve()}.closure(this))}c.when.apply(c,[s,r,q]).done(function(){gx.fx.obs.notify("gx.plugdesign.onafterapplytemplate",[b]);u.resolve()});return u.promise()},fixBootstrapGridLayout:function(){0===c(".container-fluid, .container").length&&c(".row").first().parent().toggleClass("container-fluid",!0)},Template:function(){var a=function(a){var b,d=[],a=a||{};if(a.name){if(a.selector){if(a.listeners){var f=a.listeners;if(!f.control&&(f.before||f.after)){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",
!0);return}}this.preProcessTemplate=function(){var a=this.template,b=/\{\{\$(\w+)\$\}\}/g,f,c=0;for(d=[];null!==(f=b.exec(a));)d[c]=f[1],a=a.replace(f[0],'<span id="hook_'+c+'"></span>'),c++;return a};this.postProcessTemplate=function(a){var b,f,j,g;if(d){b=0;for(f=d.length;b<f;b++)j=a[d[b]],g=c("#hook_"+b),j&&g.after(j),g.remove()}};this.apply=function(a,d){var f,j=gx.util.browser.isIE();!b&&this.template&&(b=Mustache.compile(this.preProcessTemplate()));if(b){f=b(d);if("inner"==this.applyTo){if(j)for(;a.firstChild;)a.removeChild(a.firstChild);
a.innerHTML=f}else a.parentNode&&!j?a.outerHTML=f:c(a).replaceWith(f);this.postProcessTemplate(d)}};gx.lang.apply(this,a);return this}gx.dbg.write("A selector must be specified",!0)}else gx.dbg.write("A name must be specified",!0)};a.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,onDemandInvoke:!1,setContext:gx.emptyFn,initialize:gx.emptyFn,listeners:{}};return a}()}}(gx.$);
gx.plugdesign.definition={css:[],js:[],templates:"labels atts-vars readonly-atts-vars checkbox radio-button prompt prompt-trigger datepicker geolocation multimedia-upload navbar navbar-textblock-link navbar-textblock-text textarea-auto-expand image usercontrol errorviewer password-atts-vars".split(" "),class_maps:[{selector:".control-group",cssClass:"form-group"},{selector:'.gx-attribute > input:not(.GeoLocOption):not([type="image"]), .gx-attribute > select, .gx-attribute > textarea',cssClass:"form-control",
first:!0},{selector:".gx-attribute > .input-group > input, .gx-attribute > .input-group > select, .gx-attribute > .input-group > textarea, .gx-attribute > .dp_container input",cssClass:"form-control",first:!0},{selector:"form",cssClass:"form-horizontal"},{selector:"div.gx-standard-grid > table",cssClass:"table-responsive",global:!0,first:!0},{selector:'.gx-button input, input[type="button"], .gx-grid-paging-bar button',cssClass:"btn btn-default",first:!0},{selector:'.gx-navbar .gx-button input, .gx-navbar input[type="button"]',
cssClass:"navbar-btn"},{selector:".BtnEnter",cssClass:"btn-primary",first:!0},{selector:".BtnDelete",cssClass:"btn-danger",first:!0},{selector:".Container",cssClass:"container",first:!0},{selector:"#MAINTABLE_MPAGE.PromptMainTable:not(.ContainerFluid)",cssClass:"ContainerFluid"},{selector:".ContainerFluid",cssClass:"container-fluid",first:!0},{selector:".ReadonlyResponsiveImageAttribute, .ResponsiveImage",cssClass:"img-responsive",first:!0},{selector:".BtnTextBlock > a",cssClass:"btn btn-default",
first:!0}]};
gx.html=function(c){var g=/<style[^>]*>([\s\S]*?)<\/style>/i,k=RegExp("<style[^>]*>([\\s\\S]*?)</style>","ig"),j=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,a=RegExp("<link ([^>]*rel=['\"]?stylesheet['\"]?[^>]*)>","ig"),b=/<script[^>]*>[\s\S]*?(<script[^>]*>[\s\S]*?<.?\/script>)/i,d=/<script([^>]*)>([\s\S]*?)<\/script>/i,f=/data-gx-external-script/;HREF_ELEMENT_ATT_REGEX=/href=(['"]?)([^'">]*)\1/i;ID_ELEMENT_ATT_REGEX=/id=(['"]?)([^'">]*)\1/i;SRC_ELEMENT_ATT_REGEX_1=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i;SRC_ELEMENT_ATT_REGEX_2=
/src=(['"]?)([^"']*)\1/i;INPUT_GXSTATE_REGEX=/<div><input type="hidden" name="GXState" value="{.*}"><\/div>/g;return{encodeCaseFormat:function(a,b,d){b==gx.html.controls.formats.TEXT?a=gx.html.encode(a,!1,d):b==gx.html.controls.formats.TEXT_W_SPACES&&(a=gx.html.encode(a,!0,d));return a},encode:function(a,b,d){var f=["<",">","&"],c=["&lt;","&gt;","&amp;"];b&&(f.push(" "),c.push("&nbsp;"));d&&(f.push("\n"),c.push("<br/>"));return gx.text.charReplace(a,f,c)},getHidden:function(a,b){return'<input type="hidden" id="'+
a+'" name="'+a+'" value="'+b+'">'},viewportWidth:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientWidth,document.body.clientWidth):document.body.clientWidth},viewportHeight:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(b,f){(void 0===f||f)&&(b=b.replace(k,""));for(var b=b.replace(a,""),c=[];c;)if(c=b.match(d)){var j=this.nestedScripts(c,
b);0<j&&(c=RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+j+"}"),"i"),c=b.match(c));(j=c.lastIndex)||(j=c.index+c[0].length);b=b.substring(0,c.index)+b.substring(j)}else break;return b},setOuterHtml:function(a,b){a.outerHTML=b},setInnerHtml:function(a,b,d,f,j){var g=gx.dom.styles(),k=gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME;gx.dom.shouldPurge()&&gx.dom.purge(a,!0);var q=c(a).children("."+k).get(0);!q&&f&&(q=document.createElement("div"),
gx.dom.addClass(q,k),gx.dom.addClass(q,"Form-fx"),a.appendChild(q));f&&gx.pO.fullAjax&&q&&gx.dom.hasClass(q,k)&&!gx.dom.hasClass(a,"transitioning")?(a=document.createElement("div"),a.innerHTML=this.cleanHtmlRefs(b,j),gx.dom.replaceWithFx(q,a.children[0])):c(a).html(this.cleanHtmlRefs(b,j));gx.util.browser.isIE()&&gx.cache.updateStyles(g,gx.dom.styles());!0==d&&this.processCode(b,!1)},setInnerText:function(a,b,d,f){var j=c(a);null!=a.nodeValue?a.nodeValue=b:!gx.util.browser.isChrome()&&null!=a.innerText?
a.innerText=b:gx.util.browser.isFirefox()||gx.util.browser.isChrome()?j.html(gx.html.encodeCaseFormat(b,d,f)):"TEXT"==a.tagName&&null!=a.innerHTML?j.html(b):j.html("<text>"+b+"</text>")},nodesFromText:function(a){var b=document.createElement("div");b.style.visibility="hidden";b.style.display="none";document.body.appendChild(b);gx.dom.shouldPurge()&&gx.dom.purge(b,!0);b.innerHTML=a;for(var a=[],d=b.childNodes.length,f=0;f<d;f++)a.push(b.childNodes[f].cloneNode(!0));gx.dom.removeControlSafe(b);return a},
onTypeAvailable:function(a,b,d){try{eval(a),d instanceof Array?b.apply(this,d):b()}catch(f){setTimeout(function(){gx.html.onTypeAvailable(a,b,d)},250)}},processCSS:function(a){if(""!=a){var b=document.createElement("style");b.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(b);b.styleSheet?b.styleSheet.cssText=a:(a=document.createTextNode(a),b.appendChild(a))}},nestedScripts:function(a,f){for(var c=a[0].match(b),j=f,g=0;c;)j=j.replace(c[1],""),g++,c=(a=j.match(d))?
a[0].match(b):null;return g},processCode:function(a,b,c,k,p,m,s){var q=a,r=[],u=!1,v=[],x=[],z=[],w="",H=[],w=[];if(""!=a){if(void 0===m||m)for(;w;){if(w=a.match(g))(m=w.lastIndex)||(m=w.index+w[0].length),a=a.substring(m);else break;z.push(w[1])}a=q;for(w=[];w;){if(w=a.match(j))(m=w.lastIndex)||(m=w.index+w[0].length),a=a.substring(m);else break;m=w[1].match(HREF_ELEMENT_ATT_REGEX);idAttr=w[1].match(ID_ELEMENT_ATT_REGEX);m&&!gx.cache.fileLoaded(m[2])&&(x.push({href:m[2],id:idAttr&&2<idAttr.length?
idAttr[2]:null}),gx.cache.addRemoteFile(m[2]))}a=q.replace(INPUT_GXSTATE_REGEX,"");for(w=[];w;){if(w=a.match(d))q=this.nestedScripts(w,a),0<q&&(w=RegExp("<script([^>]*)>(([\\s\\S]*?<script[^>]*>[\\s\\S]*?<.?/script>[\\s\\S]*?){X})<.?/script>".replace("{X}","{"+q+"}"),"i"),w=a.match(w)),(m=w.lastIndex)||(m=w.index+w[0].length),a=a.substring(m);else break;if(void 0!=w[1]&&""!=w[1])if(m=w[1].match(SRC_ELEMENT_ATT_REGEX_1),q=!!w[1].match(f),null==m&&(m=w[1].match(SRC_ELEMENT_ATT_REGEX_2)),m&&!gx.cache.fileLoaded(m[2])){var E=
m[2];gx.lang.emptyObject(m[3])||(E+="?"+m[3]);r.push({url:E,isExternal:q,callback:q?void 0:function(a){return function(){gx.cache.addRemoteFile(a)}}(m[2],q)})}else m&&gx.cache.fileLoaded(m[2])?u=!0:!m&&w[2]&&v.push(w[2]);else w[2]&&v.push(w[2])}if(!0!=b){w=v.join(";");""!=w&&gx.lang.doEval(w);if("function"==typeof c)gx.http.loadScripts(r,function(a,b){b instanceof Array?a.apply(this,b):a()}.closure(this,[c,k]),void 0,s);else{b={method:"GET",useCash:!0};b.load=function(a,b){gx.lang.supEval(this,H.push(b))}.closure(this);
b.mimetype="text/plain";b.sync=!0;for(var J=r.length,a=0;a<J;a++)b.url=r[a],gx.http.doCall(b)}w=H.join("");""!=w&&gx.lang.doEval(w);r=document.getElementsByTagName("style");scrQty=x.length;for(a=0;a<scrQty;a++){b=!1;s=r.length;for(v=0;v<s;v++)if(r[a]&&x[a].href==(r[v].styleSheet&&r[v].styleSheet.cssText?r[v].styleSheet.cssText:r[v].innerHTML))b=!0;b||((b=gx.dom.byId(x[a].id))?b.href=x[a].href:gx.http.loadStyle(x[a].href,gx.emptyFn,!1,x[a].id))}w=z.join("");gx.html.processCSS(w);if(0==J&&"function"==
typeof c)if(u&&p)gx.html.onTypeAvailable(p,c,k);else k instanceof Array?c.apply(this,k):c()}}},getFieldLabel:function(a,b){var d,f=a.id;"INPUT"==a.tagName||"SELECT"==a.tagName||"TEXTAREA"==a.tagName?d=a.id:"SPAN"==a.tagName?(d=c(a).attr("data-gx-enabled-id"),!d&&0===f.indexOf("span_")&&(d=f.substring(5))):gx.dom.hasClass(a,gx.uc.gxCssClass)&&(d=gx.uc.CtrlId(a.id));gx.dom.hasClass(a,gx.html.multimediaUpload.gxCssClass)&&(d=gx.html.multimediaUpload.CtrlId(a.id));if(d)return c("label[for='"+d+"']",b).get(0)},
multimediaUpload:{gxCssClass:"gx-multimedia-upload",getInputFileEl:function(a){return c("#"+a+"[type='file']")[0]},CtrlId:function(a){return a.replace(/_ct$/,"")},resolveFileName:function(a,b){return a||b||""},onOptionChange:function(a){var a=this.getElements(a),b=a.fileField,d=a.uriField;a.uriOption.checked?(gx.dom.removeClass(b,"field-selected"),gx.dom.addClass(d,"field-selected")):(gx.dom.removeClass(d,"field-selected"),gx.dom.addClass(b,"field-selected"))},imageLoadHandler:function(a,b){var d=
function(a){var b="IMG"==a.tagName?"src":"href";return!a[b]||a[b]==document.location.href||"/"==a[b].charAt(a[b].length-1)};gx.dom.removeClass(b,"gx-multimedia-unknown");gx.dom.removeClass(b,"gx-multimedia-download");!a||d(a)?gx.dom.addClass(b,"gx-multimedia-empty"):gx.dom.removeClass(b,"gx-multimedia-empty");d(a)&&(b&&!d(b))&&(gx.dom.removeClass(b,"gx-multimedia-empty"),("IMG"!==a.tagName||d(a))&&gx.dom.addClass(b,"gx-multimedia-download"));if(gx.util.browser.isIE()&&a&&"IMG"==a.tagName){var d=c(a),
f=parseInt(d.css("maxWidth")),j=parseInt(d.css("maxHeight"));f<a.width&&(d.css("height",gx.dom.addUnits(f*a.height/a.width)),d.css("width",gx.dom.addUnits(f)));j<a.height&&(d.css("width",gx.dom.addUnits(j*a.width/a.height)),d.css("height",gx.dom.addUnits(j)))}},dialogCloseHandler:function(a,b){var d=this.getElements(a);b.style.display="none";a.appendChild(b);d.uriOption.checked?this.refreshPreviewImg(a,d.uriField):this.refreshPreviewImg(a,d.fileField);d.action.focus();gx.fx.obs.deleteObserver("gx.keypress",
this,this.keypressHandler)},prevImgClickHandler:function(a,b){var a=a||event,d=gx.evt.source(a);0<c(d).closest(".gx-multimedia-empty").length&&this.actionClickHandler(a,b)},actionClickHandler:function(a,b){var d=gx.html.multimediaUpload.isModal,a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var f=this.getElements(b),j=f.button;f.fieldsCt.style.display="block";var g=130,k=500,q=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&(b.style.position="static",f.fileField.style.marginTop=
"0",f.uriField.style.marginTop="0",g=230);gx.runtimeTemplates&&(q=!1,c(window).width()<k&&(k=c(window).width()-20,g=170));d=gx.popup.openDialog({parentElement:b,w:k,h:g,contentHtml:f.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,resizable:q,isModal:void 0===d||d,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[b,f.fieldsCt,j])}});f.fileOption.focus();gx.evt.attach(j,"click",d.close,d,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},clearActionHandler:function(a,
b){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var d=this.getElements(b);d.uriField.value="";d.fileField.value="";d.uriOption.checked=!1;d.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[b]);this.clearPreviewImg(b);this.imageLoadHandler(d.previewImg,d.previewLink)},keypressHandler:function(a){13==a.event.keyCode&&(a.cancel=!0,gx.popup.currentPopup.close())},tapHandler:function(a){this.getElements(a).action.focus()},getElements:function(a){var a=gx.dom.byId(a),b=c(a),
a=b.find(".change-action")[0],d=b.find(".clear-action")[0],f=null,j=c(d).next()[0],b=b.find(".fields-ct");"A"==j.tagName?(f=j,j=j.firstChild):"IMG"!=j.tagName&&(j=null);return{previewLink:f,action:a,clearAction:d,previewImg:j,fieldsCt:b[0],uriField:b.find("input[type='text']")[0],fileField:b.find("input[type='file']")[0],uriOption:b.find("input[type='radio'][value='uri']")[0],fileOption:b.find("input[type='radio'][value='file']")[0],button:b.find("input[type='button']")[0]}},getContainer:function(a){for(a=
gx.dom.byId(a);a;){if(gx.dom.hasClass(a,gx.html.multimediaUpload.gxCssClass))return a;a=a.parentNode}return null},setPreviewImage:function(a,b){var a=gx.dom.byId(a),d=this.getElements(a);0>gx.util.Url.parseWithAnchor(b).protocol.search(/^https?:/)&&d.uriOption.checked||(this.clearPreviewImg(a),d.previewImg&&gx.text.startsWith(gx.util.getContentTypeFromExt(b),"image")&&("IMG"==d.previewImg.tagName&&(d.previewImg.src=b),this.imageLoadHandler(d.previewImg,d.previewLink)))},setPreviewLink:function(a,
b){var a=gx.dom.byId(a),d=this.getElements(a);d.previewLink&&(b&&d.previewLink)&&(d.previewLink.href=b);this.imageLoadHandler(d.previewImg,d.previewLink)},clearPreviewImg:function(a){a=gx.dom.byId(a);if((a=this.getElements(a))&&a.previewImg&&a.previewLink)a.previewImg.src="",a.previewLink.href=""},refreshPreviewImg:function(a,b){var a=gx.dom.byId(a),d=this.getElements(a);if(d.previewImg&&"INPUT"==b.tagName){if(b==d.fileField){var f;if(b.files&&(f=b.files[0]))if(f.type.match(/image.*/)){var c=new FileReader;
c.onload=function(a,b,d){b.src=a.target.result;d.href=a.target.result}.closure(this,[d.previewImg,d.previewLink],!0);c.readAsDataURL(f)}else{d.previewLink.href="#";d.previewLink.className="gx-multimedia-download";this.clearPreviewImg(a);return}b.gxctrldeleted&&this.clearPreviewImg(a)}else b==d.uriField&&(d.previewImg.src=b.value,d.previewLink.href=b.value);this.imageLoadHandler(d.previewImg,d.previewLink)}},setType:function(a,b){var a=gx.dom.byId(a),d=this.getElements(a);d.fileOption.checked=b;d.uriOption.checked=
!b;b&&(d.uriField.value="");this.onOptionChange(a)},getOptionValue:function(a){a=gx.dom.byId(a);return this.getElements(a).fileOption.checked?"file":"uri"},createControl:function(a){a=gx.dom.byId(a);if(!a._created){a._created=!0;var b=this.getElements(a);gx.dom.addClass(b.fileField,"field-selected");b.action.setAttribute("gxfocusable","1");var d=document.createElement("input");d.type="button";d.className="BtnEnter";d.value=gx.getMessage("GXM_uploadconfirmoption");b.fieldsCt.appendChild(d);var d=this.imageLoadHandler.closure(this,
[b.previewImg,b.previewLink]),f=this.onOptionChange.closure(this,[a]);d();b.previewImg&&gx.evt.attach(b.previewImg,"load",d);f();gx.evt.attach(b.uriOption,"click",f);gx.evt.attach(b.fileOption,"click",f);gx.evt.attach(b.action,"click",this.actionClickHandler.closure(this,[a],!0));gx.evt.attach(b.previewImg.parentNode,"click",this.prevImgClickHandler.closure(this,[a],!0));gx.evt.attach(b.clearAction,"click",this.clearActionHandler.closure(this,[a],!0));gx.evt.attach(a,"touchstart",this.tapHandler.closure(this,
[a]))}}},controls:function(){var a={},b={label:'<label class="gx-label {{className}} control-label" {{additionalAtts}} for="{{relatedElement}}">{{caption}}</label>',radio:['<span class="{{className}}" style="{{style}}">',"{{#values}}",'<label for="{{itemId}}"><input type="radio" id="{{itemId}}" name="{{id}}" value="{{itemValue}}" title="{{title}}"data-gxoch0="{{data-gxoch0}}"{{#isSelected}} checked{{/isSelected}}{{#isDisabled}} disabled{{/isDisabled}}{{{extraAttributes}}}>{{itemDesc}}</label>',"{{/values}}",
"</span>"]},d=function(d,f){var c;a[d]||(c=gx.lang.isArray(b[d])?b[d].join(""):b[d],a[d]=Mustache.compile(c));return a[d](f)},f=/\"/g;return{applyTemplate:d,types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25,label:26,divEnd:27,formGroup:28,formGroupEnd:29},
formats:{TEXT:0,HTML:1,RAW_HTML:2,TEXT_W_SPACES:3},isMultiSelection:function(a){return"combo"==a||"dyncombo"==a||"listbx"==a||"dynlistbx"==a?!0:!1},eventJSCode:function(a,b,d,f,c){var j="";if(4==a&&d)j=d;else if(1==a)j="gx.fn.closeWindow();";else if(7==a)a="",f&&c&&(a=",'"+f.gridName+"','"+c.gxId+"'"),j="gx.evt.execCliEvt("+b+a+",this);";else if(6==a||5==a)j="gx.evt.execEvt("+b+",this,"+f.gridId+");";return j},startAnchor:function(a,b,d,f,c,j,g){var g=g?' class="'+g+'"':"",k=gx.GxObject,l=" "+k.GX_EVENT_DATA_ATTR+
'="'+b+'"';scriptAttribute="";4===b&&(scriptAttribute=" "+k.GX_EVENT_CODE_DATA_ATTR+'="'+b+'"');f?d?a.append('<a href="#"'+l+" "+k.GX_EVENT_CONDITION_DATA_ATTR+'="'+f+'"'+scriptAttribute+g+">"):a.append('<a href="#"'+l+scriptAttribute+g+">"):d?a.append('<a href="#"'+l+scriptAttribute+g+">"):c&&(a.append('<a href="'+c+'"'),""!=j&&a.append(' target="'+j+'"'),a.append(g+">"))},endAnchor:function(a,b,d,f){(b||d||f)&&a.append("</a>")},onJSEvent_impl:function(a,b,d){var f=[];""!=d&&f.push('jsevent="'+d+
'" ');f.push(a+'="if( ');""!=b?f.push("gx.evt.jsEvent(this)) {"+b+'} else return false;"'):f.push('!gx.evt.jsEvent(this)) return false;"');return f.join("")},onJSEvent:function(a,b,d,f){a.append(" ");a.append(this.onJSEvent_impl(b,d,f))},htmlControl:function(a,b,d,c,j){this.id=a||"";this.width=b||0;this.widthUnit="px";this.height=d||0;this.heightUnit="px";this.cssClass=c||"";this.style=this.ownCssClass=this.roClass="";this.title=j||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=
!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link="";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=null;this.gridRow=this.gridId="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){this.buffer.clear();this._getHtml();return this.buffer.toString()};this.append=function(a){return this.buffer.append(a)};this.tagAtt=function(a,b){b=b.toString();b=0<=b.indexOf('"')?b.replace(f,"&quot;"):b;return this.buffer.append(" "+a+'="'+b+'"')};this.persistValue=function(){var a=
this.getVStruct();!gx.lang.emptyNum(this.column.gxId)&&a&&(this._persistValue?this._persistValue():a.v2v&&a.v2v(this.value))};this.setIndividualProp=function(a,b){this[a]="enabled"==a||"visible"==a||"isPassword"==a||"autoComplete"==a||"hasJsLink"==a?gx.lang.gxBoolean(b):b};this.setGridData=function(a){this.grid=a.grid;this.row=a.row;this.gridId=a.gridId;this.gridRow=a.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}};this.getVStruct=
function(){return this.grid.parentObject.GXValidFnc[this.column.gxId]};this.getEventContext=function(){var a=this.grid.parentObject;return gx.json.serializeJson([a.CmpContext,a.IsMasterPage])}},singleLineEdit:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=!1;this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s,r,t,p,o,O,R,I,N,Q,P,F,G,S,T,U,V,W,Y,Z,aa,ba,da,ca){this.id=a;this.inputType=R;this.step=I;this.title=g;this.placeholder=
k;this.width=N;this.widthUnit=Q;this.height=17==P?0:P;this.heightUnit=F;this.maxLength=G;this.visible=0!=p;this.enabled=0!=o;this.rtEnabled=0!=O;this.isPassword=0!=S;this.format=T;this.link=c;this.linkTarget=j;this.style=q;this.cssClass=m;this.roClass=s;this.columnClass=r;this.columnHeaderClass=t;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);if(da&&(this.rtEnabled||this.enabled))b=ca;this.formattedValue=!gx.lang.emptyObject(b)?gx.html.encodeCaseFormat(b,T):gx.applyPicture(this.vStruct,
gx.html.encodeCaseFormat(ca||"",T));this.extraAttributes=d;this.jsScrCode=n;this.usrOnclick=l;this.eventName=f;this.parentId=U;this.hasTheme=V;this.autoComplete=0!=W;this.autoCorrection=0!=Y;this.value=ca||"";this.domainName=aa};this._getHtml=function(){var a="",b="",d=this.getVStruct();0==this.width&&(this.width=this.colSize?this.colSize:this.maxLength,this.widthUnit="chr");0<this.width&&("chr"==this.widthUnit?a=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+
";");0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+";");b=this.style;this.style+=!this.visible?";display:none;":"";if(this.rtEnabled||this.enabled){if(this.dataType==gx.types.date||this.dataType==gx.types.dateTime)this.append("<div"),this.tagAtt("id",this.id+"_dp_container"),""!=this.column.align&&this.tagAtt("data-align",this.column.align),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),
this.append(">");!this.row.ownerGrid.isFreestyle&&(void 0===this.column.titleformat||this.column.titleformat==gx.html.controls.formats.TEXT)&&this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>");this.append("<input");if(!0==this.isPassword)this.tagAtt("type","password");else{this.tagAtt("type",this.inputType);if(this.step&&("number"==this.inputType||"range"==this.inputType)){this.tagAtt("step",this.step);var f=Math.pow(10,this.maxLength)-1;this.tagAtt("min",-1*
f);this.tagAtt("max",f);"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"')}this.dataType==gx.types.geolocation&&(this.extraAttributes+=" data-gx-geolocation")}this.tagAtt("id",this.id);this.tagAtt("name",this.id);this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue);this.append(a);""!=this.title&&this.tagAtt("title",this.title);""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder);this.autoComplete||this.tagAtt("autocomplete",
"off");this.tagAtt("spellcheck",this.autoCorrection.toString());"date"!=this.inputType&&("datetime"!=this.inputType&&"datetime-local"!=this.inputType)&&this.tagAtt("maxlength",this.maxLength);""!=this.cssClass&&this.tagAtt("class",this.cssClass);a=this.style;""!=this.column.align&&(a+=";text-align:"+this.column.align);f=!this.enabled&&this.rtEnabled?";display:none;":"";a+=f;""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);this.append(">");this.dataType==gx.types.date||this.dataType==
gx.types.dateTime?(a=this.grid.parentObject.getValidStructFld(this.id),void 0!=a.dp&&(0==a.dp.f&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+"_dp_trigger"),f=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+f),this.append(">")),this.append("</div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)}if(!this.enabled){f=
"";this.rtEnabled||this.grid.addHiddenControl(this.id,this.dataType==gx.types.date||this.dataType==gx.types.dateTime?this.formattedValue:this.value);f=this.hasTheme?0==this.parentId?""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass:""!=this.roClass&&0!=this.roClass.indexOf("Readonly")?"Readonly"+this.roClass:this.roClass:this.cssClass;a="";this.format!=gx.html.controls.formats.RAW_HTML&&(b+=!this.visible?";display:none;":"",this.append("<span"),this.append(this.extraAttributes),
""!=f&&this.tagAtt("class",f),""!=b&&this.tagAtt("style",b),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.tagAtt("data-gx-enabled-id",this.id),gx.fn.controlFiresEvent(d)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,d.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext())),this.append(">"),a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,this.jsScrCode,a,
this.usrOnclick,this.link,this.linkTarget));if(this.isPassword){b=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength);for(d=0;d<b;d++)this.append("*")}else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link),this.append("</span>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},multipleLineEdit:function(a,
b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s,r,t,p,o,O,R,I,N,Q,P,F,G,S){this.id=a;this.visible=0!=c;this.enabled=0!=j;this.rtEnabled=0!=g;this.width=k;this.widthUnit=l;this.height=n;this.heightUnit=m;this.style=q;this.cssClass=s;this.columnClass=r;this.columnHeaderClass=t;this.maxLength=p;this.extraAttributes=d;this.autoresize=0!=o;this.format=f;this.link=b;this.linkTarget=R;this.placeholder=I;this.value=S||"";
this.autoCorrection=0!=N;this.domainName=P;this.maxTextLines=O;this.jsScrCode=G};this._getHtml=function(){var a=this.getVStruct();this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.rtEnabled||this.enabled)!this.row.ownerGrid.isFreestyle&&(void 0===this.column.titleformat||this.column.titleformat==gx.html.controls.formats.TEXT)&&this.append('<label for="'+this.id+'" style="display:none">'+this.column.title+"</label>"),this.append("<textarea"),""!=this.placeholder&&
this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",this.width):this.style=this.style+";width: "+this.width+this.widthUnit,1<this.maxTextLines&&this.tagAtt("data-gx-text-maxlines",this.maxTextLines),"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",this.maxLength),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+
this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),this.append(this.value),this.append("</textarea>");if(!this.enabled){var b=!this.visible?"display:none;":"";this.autoresize||(b+='overflow="hidden";');this.rtEnabled||this.grid.addHiddenControl(this.id,
this.value);""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")&&(this.cssClass="Readonly"+this.cssClass);this.append("<span ");this.append(this.extraAttributes);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=b&&this.tagAtt("style",b);""!=this.title&&this.tagAtt("title",this.title);this.tagAtt("id","span_"+this.id);a.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");gx.html.controls.startAnchor(this,
this.jsScrCode,!!a.evt,"",this.link,this.linkTarget);this.append(gx.html.encodeCaseFormat(this.value,this.format,!0));gx.html.controls.endAnchor(this,!!a.evt,"",this.link);gx.html.controls.specificDomainCtrls(this);this.append("</span>")}}},blob:function(a,b,d,f,c,j,g){this.base(a,b,d,f,c);this.type=gx.html.controls.types.blob;this.display=j||0;this.contentType=g||"text/html";this.parameters=this.url="";this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s,r,t,p,u,o,v,Q,P,F,G,S,T,U,V,W,Y,Z){this.id=
a;this.value=b;this.contentType=d||"text/html";this.linkTarget=c;this.parameters=j;this.display=g;this.visible=0!=l;this.enabled=0!=k;this.alt=n;this.title=m;this.borderWidth=q;this.autoresize=0!=s;this.width=r;this.widthUnit=t;this.height=p;this.heightUnit=u;this.vSpace=o;this.hSpace=v;this.jsScrCode=Q;this.usrOnclick=P;this.eventName=F;this.style=G;this.cssClass=S;this.columnClass=T;this.columnHeaderClass=U;this.extraAttributes=V;this.extraDisplayAttributes=W;this.jsDynCode=Y;this.url=gx.util.resolveUrl(Z)};
this._getHtml=function(){var a="";this.style+=this.visible?"":";display:none;";this.append('<div class="gx-tbldsp-container"');this.tagAtt("border",0);this.tagAtt("data-cellpadding",0);this.tagAtt("data-cellspacing",0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");this.tagAtt("title",gx.lang.emptyObject(this.title)?this.id:this.title);this.append("><div>");var b=-1!=this.contentType.toLowerCase().indexOf("image/");if(0==this.display){if(b){this.append("<img");this.tagAtt("alt",
this.alt);if(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))this.url=gx.ajax.getImageUrl(gx,"blankImage");this.tagAtt("src",this.url)}else this.append("<object"),this.tagAtt("type",this.contentType),""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url);this.tagAtt("id","Object_"+this.id);this.style+="display:block;";0!=this.width&&!this.autoresize&&(this.style=this.style+"width:"+this.width+this.widthUnit+";");0!=this.height&&!this.autoresize&&(this.style=
this.style+"height:"+this.height+this.heightUnit+";");this.tagAtt("style",this.style);a=""!=this.cssClass?"BlobContent"+this.cssClass:this.cssClass;!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+a);this.tagAtt("class",a);this.append(this.extraDisplayAttributes);this.append(">");b?this.append("</img>"):(this.append(this.parameters),this.append("</object>"))}else 1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+
"display:block;":this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),""!=this.linkTarget&&this.tagAtt("target",this.linkTarget),this.append("><img"),this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("></a>"));this.append("</div><div>");if(this.enabled){var d="";gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data");a=gx.dom.byId(this.id);this.grid&&this.grid.parentObject.isTransaction()&&
a&&this.value===a.value?(b=this.id+"_hook",this.append("<div"),this.tagAtt("id",b),this.append(">"),this.append("</div>"),this.grid.addControlToReuse({el:a,hookId:b})):(this.append("<input"),this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(d+="display:none;"),0!=this.width&&(d=d+"width:"+this.width+";"),this.tagAtt("style",d),this.tagAtt("value",this.value),a=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,!this.enabled&&(""!=this.cssClass&&
0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+a),this.tagAtt("class",a),b&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">"))}this.append("</div></div>")}},radio:function(a,b,f,j,g){this.base(a,b,f,j,g);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s,r,t,p){this.possibleValues=a.v||[];this.id=b;this.title=d;this.visible=0!=f;this.enabled=0!=c;this.columns=j;this.orientation=
g;this.style=k;this.cssClass=l;this.columnClass=n;this.columnHeaderClass=m;this.jsScrCode=q;this.usrOnclick=s;this.eventName=r;this.extraAttributes=t;this.value=p};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));var a="gx-radio-button ";1==this.orientation&&(a+="gx-radio-button-vertical ");var a=!this.enabled&&""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?a+("Readonly"+this.cssClass):a+this.cssClass,b=gx.html.controls.eventJSCode(this.jsScrCode,
this.eventName,null,this.grid,this.row);this.style+=this.visible?"":";display:none;";this.append(d("radio",{id:this.id,className:a,style:this.style,title:this.title,isDisabled:!this.enabled,extraAttributes:this.extraAttributes,gxoch0:gx.html.controls.onJSEvent_impl("data-gxoch0",b,this.usrOnclick),values:c.map(this.possibleValues,function(a,b){return{itemId:this.id+"_"+b,itemValue:a[0],itemDesc:a[1],isSelected:gx.text.trim(this.value.toString())==gx.text.trim(a[0].toString())}}.closure(this))}))}},
comboBox:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.comboBox;this.rows=1;this.possibleValues=[];this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s,r,t,p,o,O,R,I,N,Q,P,F){this.possibleValues=a.v||[];this.id=b;this.title=k;this.visible=0!=l;this.enabled=0!=n;this.rtEnabled=0!=m;this.rows=d;this.format=q;this.width=s;this.widthUnit=r;this.height=t;this.heightUnit=p;this.style=o;this.cssClass=O;this.columnClass=R;this.columnHeaderClass=I;this.formattedValue=Q;this.jsScrCode=
c;this.usrOnclick=f;this.eventName=j;this.extraAttributes=N;this.value=F};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);var a=this.style+" ;overflow:hidden;";this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.enabled||this.rtEnabled){var b=gx.html.controls.eventJSCode(this.jsScrCode,
this.eventName,null,this.grid,this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"data-gxoch0",b,this.usrOnclick);
this.append(">");for(var b=this.possibleValues.length,d=0;d<b;d++){var f=this.possibleValues[d];this.append("<option");this.tagAtt("value",f[0]);gx.text.trim(f[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected");this.append(">");this.append(f[1]);this.append("</option>")}this.append("</select>")}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);b="";b=""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:
this.cssClass;a+=!this.visible?";display:none;":"";this.append("<span ");this.tagAtt("id","span_"+this.id);""!=this.title&&this.tagAtt("title",this.title);""!=b&&this.tagAtt("class",b);""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);this.append(">");b=this.possibleValues.length;for(d=0;d<b;d++)if(f=this.possibleValues[d],gx.text.trim(f[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(f[1]);break}this.append("</span>")}}},listBox:function(a,b,d,f,
c,j){this.base(a,b,d,f,c);this.type=gx.html.controls.types.listBox;this.rows=j},checkBox:function(a,b,d,f,c,j,g,k){this.base(a,b,d,f,c);this.type=gx.html.controls.types.checkBox;this.caption=j||"";this.checkedValue=g;this.uncheckedValue=k;this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s){this.id=a;this.title=b;this.visible=0!=f;this.enabled=0!=c;this.checkedValue=j;this.caption=g;this.style=k;this.cssClass=l;this.columnClass=n;this.columnHeaderClass=m;this.extraAttributes=q;this.value=s;this.labelCaption=
d};this._getHtml=function(){var a=this.getVStruct();this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),this.checkedValue=gx.text.trim(this.checkedValue.toString()));var b=this.cssClass;!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(b="Readonly"+this.cssClass);this.style+=this.visible?"":";display:none;";this.append("<label");this.tagAtt("for",this.id);""!=b&&this.tagAtt("class",b);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");
this.tagAtt("id",this.id);this.tagAtt("type","checkbox");this.tagAtt("name",this.id);this.value.toString()==this.checkedValue.toString()?(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",this.uncheckedValue);""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);gx.fn.controlFiresEvent(a)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,
this.getEventContext()));this.append(">");this.append(this.caption);this.append("</label>")}},imageReadOnly:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s,r,t,p,o,O,R,I,N,Q,P,F,G,S,T,U,V,W){this.id=a;this.accessKey=f;this.visible=0!=j;this.enabled=0!=g;this.alt=k;this.title=l;this.borderWidth=n;this.autoresize=0!=m;this.width=q;this.widthUnit=s;this.height=r;this.heightUnit=t;this.vSpace=p;this.hSpace=
o;this.link=b;this.linkTarget=d;this.jsScrCode=O;this.usrOnclick=R;this.eventName=I;this.style=N;this.cssClass=Q;this.columnClass=P;this.columnHeaderClass=F;this.align=G;this.extraAttributes=S;this.useMap=T;this.jsDynCode=U;this.imgSrcSet=V;this.value=this.imageUrl=W};this._getHtml=function(){var a=this.getVStruct();this.grid.addHiddenControl(this.id,this.imageUrl);""!=this.eventName&&gx.text.endsWith(this.eventName,".'")&&(this.eventName=this.eventName.replace(".'","."+this.gridRow+"'"));var b=gx.util.accessKey(this.title);
this.title=gx.util.accessKeyCaption(this.title);""!=b&&(this.accessKey=b);this.style+=this.visible?"":";display:none;";b=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);this.enabled&&""!=this.link&&gx.html.controls.startAnchor(this,this.jsScrCode,b,this.usrOnclick,this.link,this.linkTarget,"gx-image-link");this.append("<img");this.tagAtt("src",this.value);this.imgSrcSet&&this.tagAtt("srcset",this.imgSrcSet);this.enabled||(this.cssClass=(this.cssClass||
"")+" gx-disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);""!=this.align&&this.tagAtt("align",this.align);if(""==this.cssClass||0<this.borderWidth)this.tagAtt("border",this.borderWidth),""!=this.cssClass&&(this.style=this.style+";border-width: "+this.borderWidth);this.tagAtt("alt",this.alt||this.title);""!=this.title&&this.tagAtt("title",this.title);0<
this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);""!=this.useMap&&this.tagAtt("usemap",this.useMap);this.extraAttributes&&this.append(this.extraAttributes);a.evt&&(this.tagAtt("tabindex","0"),this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_DATA_ATTR,""),
this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()),this.usrOnclick&&this.tagAtt(gx.GxObject.GX_EVENT_CONDITION_DATA_ATTR,this.usrOnclick));this.append(">");this.enabled&&(""!=this.link&&""==b)&&gx.html.controls.endAnchor(this,b,this.usrOnclick,this.link)};this._persistValue=function(){var a=this.getVStruct();a.v2v&&a.v2v(this.imageUrl)}},multimedia:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.multimedia;this.setProperties=function(a,b,d,f,c,j,g,
k,l,n,m,q,s,r,t,p,o,O,R,I,N,Q,P){this.id=a;this.text=b;this.display=0!=d;this.visible=0!=f;this.enabled=0!=c;this.autoresize=0!=j;this.width=g;this.widthUnit=k;this.height=l;this.heightUnit=n;this.jsScrCode=m;this.usrOnclick=q;this.eventName=s;this.style=r;this.cssClass=t;this.columnClass=p;this.columnHeaderClass=o;this.extraInputAttributes=O;this.jsDynCode=I;this.readOnly=0!=N;this.isBlob=gx.lang.gxBoolean(Q);this.multimediaUrl=P;this.value=gx.util.resolveUrl(P)};this.startMultimediaUploadControl=
function(a,b,d,f){return['<div id="',a,'_ct" class="',gx.html.multimediaUpload.gxCssClass,'" style="',(f||"")+(b?"":"display:none;"),'">'].join("")};this.endMultimediaUploadControl=function(a,b,d,f,c,j,g,k,l,n,m,q,s,r,t,p){d=[];f=gx.html.multimediaUpload.getInputFileEl(this.id);c="checked";j="";g=a.match(/([\w]+)(_\d{4})$/);g=g[1]+"_GXI"+g[2];if(t||void 0===t)c="",j="checked",b="";t=['<div id="',a,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',a,'Option" type="radio" value="file" ',
j,"/>",gx.getMessage("GXM_uploadfileoption"),"</label>",'<label class="option">','<input name="',a,'Option" type="radio" value="uri" ',c,"/>",gx.getMessage("GXM_uploadurioption"),"</label>",'<input type="text" class="field ',m,'" id="',g,'" name="',g,'" value="',b,'" ',s," />"];d.push(t.join(""));t=f?['<div id="',a,'_hook"></div>']:['<input type="file" class="field ',m,'" id="',a,'" name="',a,'" accept="',p,'" ',s,"/>"];d.push(t.join(""));t=["</div>","</div>"];d.push(t.join(""));return d.join("")};
this.getPreviewHtml=function(){var a=this.cssClass?"Readonly"+this.cssClass:"",b=this.value,d=b?' href="'+b+'"':"",f=this.readOnly||!this.enabled,c=f?this.id:"",j="",f=f?" gx-multimedia-ro":"",j=gx.text.startsWith(gx.util.getContentTypeFromExt(b),"image")?["<a",' class="',f,'"',' target ="_blank"',d,">",'<img id = "Object_',this.id,'" class = "',a,'" alt = "',this.alt,'" src = "',b,'" />','<span id="',c,'" class="',this.placeHolderClass,'"></span>',"</a>"]:["<a",b?" download":"",' class="',f,'"',
' target = "_blank"',d,">",'<span id = "',c,'" class = "',a," ",this.placeHolderClass,'" title = "',gx.getMessage("GXM_multimediaalttext"),'"></span>',"</a>"];return j.join("")};this._getHtml=function(){!this.readOnly&&this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"></a>')):
this.grid.addHiddenControl(this.id,this.multimediaUrl);this.append(this.getPreviewHtml());if(!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,
hookId:this.id+"_hook"})}};this._persistValue=function(){var a=this.getVStruct();a.v2v&&a.v2v(this.multimediaUrl)}},image:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.image;this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s,r,t,p,o,O,R,I,N,Q,P,F,G,S,T,U,V,W,Y,Z,aa,ba){this.id=a;this.accessKey=f;this.visible=0!=j;this.enabled=0!=g;this.alt=k;this.title=l;this.borderWidth=
n;this.autoresize=0!=m;this.width=q;this.widthUnit=s;this.height=r;this.heightUnit=t;this.vSpace=p;this.hSpace=o;this.link=b;this.linkTarget=d;this.jsScrCode=O;this.usrOnclick=R;this.eventName=I;this.style=N;this.cssClass=Q;this.columnClass=P;this.columnHeaderClass=F;this.align=G;this.extraInputAttributes=S;this.extraImageAttributes=T;this.useMap=U;this.jsDynCode=V;this.readOnly=0!=W;this.isBlob=gx.lang.gxBoolean(Y);this.isAttribute=gx.lang.gxBoolean(Z);this.imgSrcSet=aa;this.multimediaUrl=ba;this.value=
gx.util.resolveUrl(ba);this.themeName=c;this.className=Z&&Q?"Readonly"+Q:Q;a=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(a);this.innerImage.column=this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.heightUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,
this.usrOnclick,this.eventName,this.style,this.className,this.columnClass,this.columnHeaderClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.imgSrcSet,this.value)};this.getPreviewHtml=function(){return['<a target="_blank"',this.readOnly||!this.enabled?' class="gx-multimedia-ro"':"",'><img id="Object_',this.id,'" class="',this.cssClass?"Readonly"+this.cssClass:"",'" alt="',this.alt,'" src="',this.value,'" /><span class="',this.placeHolderClass,'"></span></a>'].join("")};this._getHtml=
function(){if(this.readOnly||!this.enabled)this.buffer=this.innerImage.buffer,this.updateinnerImageProperties(),this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>");this.append('<a gxfocusable="1" href="" class="action clear-action"></a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,
this.value,this.title,this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}}},video:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass=
"gx-video-placeholder"},audio:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},file:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.audio;this.placeHolderClass="gx-download-placeholder"},textBlock:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.textBlock;this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s){this.id=a;this.visible=0!=n;this.enabled=
0!=m;this.format=q;this.title=l;this.link=b;this.linkTarget=d;this.jsScrCode=k;this.usrOnclick=f;this.eventName=c;this.extraAttributes=j;this.cssClass=g;this.value=gx.text.replaceAll(s,"�","'")};this._getHtml=function(){var a,b=this.getVStruct();this.format!=gx.html.controls.formats.RAW_HTML&&(this.format==gx.html.controls.formats.HTML?(a=(this.visible?";display:inline;":";display:none;")+this.extraAttributes,this.append("<div ")):(a=(this.visible?"":";display:none;")+this.extraAttributes,this.append("<span ")),
this.tagAtt("id",this.id),""!=this.cssClass&&this.tagAtt("class",this.cssClass),this.tagAtt("data-gxformat",this.format),""!=a&&this.tagAtt("style",a),""!=this.title&&this.tagAtt("title",this.title),gx.fn.controlFiresEvent(b)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,b.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext())),this.append(">"));a="";this.enabled?(a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,
this.jsScrCode,a,this.usrOnclick,this.link,this.linkTarget)):a="";this.append(gx.html.encodeCaseFormat(this.value,this.format));this.enabled&&gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("</div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("</span>");this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1)}},label:function(a,b,f,c,j){this.base(a,b,f,c,j);this.type=gx.html.controls.types.label;
this.setProperties=function(a,b,d,f){this.referencedEl=a;this.labelCaption=b;this.labelClass=d;this.addAttributes=0===f?"data-gx-sr-only":""};this._getHtml=function(){this.append(d("label",{caption:this.labelCaption,className:this.labelClass,additionalAtts:this.addAttributes,relatedElement:this.referencedEl}))}},button:function(a,b,d,f,c,j){this.base(a,b,d,f,c);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=j||"rounded";this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,
s,r,t,p){this.reset=t;this.id=a;this.title=c;this.accessKey=j;this.style=g;this.cssClass=k;this.visible=0!=l;this.enabled=0!=n;this.buttonStyle=m;this.jsScrCode=f;this.usrOnclick=d;this.eventName=q+(5==this.jsScrCode?"+'"+this.gridRow+"'":"");this.extraAttributes=s;this.jsCode=b;this.jsDynCode=r;this.caption=p};this._getHtml=function(){this.style+=this.visible?"":";display:none;";var a="BaseRBtn R"+this.cssClass;"rounded"==this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick",
"gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",this.style),this.tagAtt("class",a),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");a="button";1==this.reset?a="submit":0==this.reset&&(a="reset");this.tagAtt("type",a);a=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==a&&(a=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));""!=a&&(this.accessKey=
a);this.tagAtt("name",this.id);this.tagAtt("id",this.id);this.tagAtt("value",this.caption);""!=this.title&&this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("gxevent",this.eventName);this.enabled||this.append(" disabled");a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);a=this.jsCode+a;gx.html.controls.onJSEvent(this,
"onclick",a+"return false;",this.usrOnclick);this.append(this.extraAttributes);this.append(">");"rounded"==this.buttonStyle&&this.append("</span></span></span></span>")}},grid:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.grid;this.containerName="";this.setProperties=function(a){this.containerName=a;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.append("></div>")}},
userControl:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(a,b){this.id=this.containerName=a;this.visible=0!=b};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.uc.gxCssClass);this.append("></div>");this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.userControlContainer;
this.containerName=this.parentName="";this.setProperties=function(a,b){this.parentName=a;this.containerName=b;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style","display:none;");this.tagAtt("class","gx_usercontrol_child");this.append(">")}},webComponent:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.webComponent;this.content=this.controlName="";this.setProperties=function(a){this.controlName=
a;var b=this.grid.parentObject.getComponentData(this.controlName),a=b.Prefix,d=this.grid.gxComponentContext+"gxHTMLWrp"+a+this.gridRow,f=gx.dom.byId(d),c="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+a+this.gridRow);if(null!=f)b=d+"_hook",this.grid.addComponentToDraw({create:!1,existingEl:b,el:d,p:this.grid.gxComponentContext+a+this.gridRow}),d=b;else if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)&&!gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents))if(f=gx.csv.lastEvtResponse.gxComponents[d],
gx.lang.emptyObject(f))c="";else{var c=gx.html.cleanHtmlRefs(f),j=gx.fn.getHidden(this.grid.gxComponentContext+a+this.gridRow);j||(j=b.GXClass);gx.lang.emptyObject(j)||this.grid.addComponentToDraw({load:!0,n:j.toLowerCase(),p:this.grid.gxComponentContext+a+this.gridRow,c:f})}this.id=d;this.content=c};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);this.append(">");this.append(this.content);this.append("</div>")}},embeddedPage:function(a,
b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m){this.id=a;this.value=b;this.visible=0!=d;this.width=f;this.widthUnit=c;this.height=j;this.heightUnit=g;this.borderStyle=k;this.align=l;this.title=n;this.scrollbars=m};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",
this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",this.width+this.widthUnit);""!=this.title&&this.tagAtt("title",this.title);""!=this.id&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">");this.append("</iframe>")}},table:function(a,
b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m,q,s,r,t,p,o){this.id=a;this.visible=0!=b;this.cssClass=d;this.background=f;this.backColor=c;this.borderColor=j;this.align=g;this.title=k;this.borderWidth=l;this.cellPadding=n;this.cellSpacing=m;this.height=q;this.width=s;this.rules=r;this.heightUnit=t;this.widthUnit=p;this.style="";this.header=o};this._getHtml=function(){var a=this.getVStruct();
this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+"background-image: url("+this.background+");");if(""!=this.backColor){var b=parseInt(this.backColor),b=isNaN(b)?this.backColor:gx.color.html(b).Html;this.style=this.style+"background-color: "+b+";"}""!=this.borderColor&&(b=parseInt(this.borderColor),b=isNaN(b)?this.borderColor:gx.color.html(b).Html,this.style=this.style+"border-color: "+
b+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+";");""!=this.width&&(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&this.tagAtt("border",this.borderWidth);""!==this.cellSpacing&&this.tagAtt("data-cellspacing",this.cellSpacing);""!==this.cellPadding&&this.tagAtt("data-cellpadding",
this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);a.evt&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");""!=this.header&&(this.append("<caption>"),this.append(this.header),this.append("</caption>"))}},row:function(a,
b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.row;this.verticalAlign=this.align=this.borderColor=this.backColor="";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(a,b,d){b&&(this.cssClass=this.ownCssClass?b+(this.ownCssClass?" "+this.ownCssClass:""):b);this.style=d};this._getHtml=function(){this.append("<tr");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+
this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.cell;this.rowSpan=this.colSpan=
this.verticalAlign=this.align=this.borderColor=this.backColor=this.background=this.style="";this.setProperties=function(a,b){this.background=a;b&&""!=b&&0<b.indexOf("style=")&&(this.style=b.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",
this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},
responsiveRow:function(a,b,d,f,c){this.base(a,b,d,f,c);this._getHtml=function(){this.append("<div");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("data-gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",
this.style);this.tagAtt("class","row "+(this.cssClass||""));""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},responsiveCell:function(a,b,d,f,c){this.base(a,b,d,f,c);this._getHtml=function(){this.append("<div");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+=
"background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("data-cell-valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(a,b,d,f,c){this.base(a,b,d,f,
c);this.type=gx.html.controls.types.group;this.caption="";this.setProperties=function(a,b,d,f,c,j,g,k,l){this.id=a;this.caption=b;this.visible=0!=d;this.width=f;this.widthUnit=c;this.height=j;this.heightUnit=g;this.cssClass=k;this.extraAtts=l};this._getHtml=function(){this.append("<fieldset");this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var a="-moz-border-radius:3pt;";"0"!=this.width&&(a+="width: "+this.width+this.widthUnit+";");"0"!=
this.height&&(a+="height: "+this.height+this.heightUnit+";");this.visible||(a+="display:none;");this.tagAtt("style",a);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">");this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("</legend>")}},div:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.div;this.setProperties=function(a,b,d,f,c,j,g,k,l,n,m){this.id=a;this.visible=
0!=b;this.width=d;this.widthUnit=f;this.height=c;this.heightUnit=j;this.cssClass=g;this.align=k;this.vAlign=l;this.extraAtts=n;this.extraStyle=m};this._getHtml=function(){var a=this.getVStruct(),b=this.align&&"left"!=this.align.toLowerCase(),d=this.vAlign&&"top"!=this.vAlign.toLowerCase(),f=this.visible?"":";display:none;";""!=this.height&&(f=f+"height: "+this.height+this.heightUnit+";");""!=this.width&&(f=f+"width: "+this.width+this.widthUnit+";");f+=this.extraStyle;this.append("<div");this.id&&
this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=f&&this.tagAtt("style",f);""!=this.extraAtts&&this.append(this.extraAtts);b&&this.tagAtt("data-align",this.align.toLowerCase());d&&this.tagAtt("data-valign",this.vAlign.toLowerCase());gx.fn.controlFiresEvent(a)&&(this.tagAtt(gx.GxObject.GX_EVENT_CONTROL_DATA_ATTR,a.fld),this.tagAtt(gx.GxObject.GX_EVENT_CONTEXT_DATA_ATTR,this.getEventContext()));this.append(">");(b||d)&&this.append('<div data-align-outer=""><div data-align-inner="">')}},
divEnd:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.divEnd;this.setProperties=function(a,b){this.align=a;this.vAlign=b};this._getHtml=function(){var a=this.align&&"left"!=this.align.toLowerCase(),b=this.vAlign&&"top"!=this.vAlign.toLowerCase();(a||b)&&this.append("</div></div>");this.append("</div>")}},formGroup:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.formGroup;this.setProperties=function(a){this.captionPosition=a};this._getHtml=function(){1===
this.captionPosition&&this.append('<div class="form-group gx-form-group">')}},formGroupEnd:function(a,b,d,f,c){this.base(a,b,d,f,c);this.type=gx.html.controls.types.formGroupEnd;this.setProperties=function(a){this.captionPosition=a};this._getHtml=function(){1===this.captionPosition&&this.append("</div>")}},specificDomainCtrls:function(a){if(a.domainName==gx.domains.component&&0==a.enabled){var b=a.enabled?";display:none;":"",d=a.id+"_comp_trigger",f=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+
"Resources\\"+gx.theme+"\\Select.png",!1);a.append("<img");a.tagAtt("src",f);a.tagAtt("id",d);a.tagAtt("class","");a.tagAtt("style",b+" margin-left:2px; cursor:pointer;");a.tagAtt("onclick","gx.popup.openUrl('"+a.value+"')");a.append("/>");b=[];b.push(a.column.gxId)}else a.dataType==gx.types.geolocation&&(b=!a.enabled?";display:none;":"",d=a.id+"_geoLocMe",a.append("<img"),a.tagAtt("src",gx.ajax.getImageUrl(gx,"myLocationImage")),a.tagAtt("id",d),a.tagAtt("class","GeoLocOption"),a.tagAtt("style",
b),a.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),a.append(">"),b=[],b.push(a.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,this.htmlControl);gx.lang.inherits(this.imageReadOnly,
this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);
gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.file,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl);gx.lang.inherits(this.divEnd,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell);gx.lang.inherits(this.label,this.htmlControl);
gx.lang.inherits(this.formGroup,this.htmlControl);gx.lang.inherits(this.formGroupEnd,this.htmlControl)}}}()}}(gx.$);
gx.util.Observable=function(){return{observers:[],initialObservers:[],addObserver:function(c,g,k,j){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(c,g,k,j){j=j||{};if(!1===j.unique||0>this.indexOf(c,g,k))this.observers.push({e:c,o:g,f:k,cfg:j}),!0===j.doNotDelete&&this.initialObservers.push({e:c,o:g,f:k,cfg:j})},deleteObserver:function(c,g,k){new gx.thread.Mutex(this,this.deleteObserverSync,[c,g,k])},deleteObserverSync:function(c,g,k){c=this.indexOf(c,g,k);0<=c&&
this.observers.splice(c,1)},removeAll:function(){this.observers=this.initialObservers.slice()},indexOf:function(c,g,k){for(var j=this.observers.length,a=0;a<j;a++){var b=this.observers[a];if(b&&b.e==c&&b.o==g&&b.f==k)return a}return-1},notify:function(c,g){g||(g=[]);for(var k=this.observers.length,j=[],a=0;a<k;a++){var b=this.observers[a];if(b&&b.e==c&&!b.removed)try{b.cfg&&b.cfg.single&&(b.removed=!0,j.push(a)),b.f.apply(b.o,g)}catch(d){gx.dbg.logEx(d,"gxfx.js","gx.obs.notify")}}if(0<j.length)for(a=
j.length-1;0<=a;a--)this.observers.splice(j[a],1)}}};
gx.fx={GX_DATA_SUGGEST_LENGTH:"data-gx-suggest-length",GX_DATA_SUGGEST:"data-gx-suggest",delayedSuggest:function(){gx.$.each(gx.suggestControls,function(c,g){gx.fx.installSuggest(g,!0)})},installSuggest:function(c,g){if(!g&&document.readyState&&"complete"!=document.readyState)gx.suggestControls[c.id]=c;else try{var k=gx.O.getValidStructFld(c.id);if(k&&!gx.lang.emptyObject(k.gxsgprm)){var j=0<k.grid?gx.fn.currentGridRowImpl(k.grid):"main",a=k.gxsgprm;a.installed||(a.installed={});a.installed[j]||(gx.ajax.suggest(gx.O,
a[1],c.id,a[0],a[3],a[2]),a.installed[j]=!0,$(c).attr(gx.fx.GX_DATA_SUGGEST,"true"),$(c).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,$(c).val().length))}}catch(b){gx.dbg.logEx(b,"gxfx.js","installSuggest")}},updateSuggestParms:function(c){if(c)for(var g=c.length,k=0;k<g;k++){var j=gx.fn.validStruct(c[k]);j&&"function"==typeof j.c2v&&j.c2v()}},firesuggest:function(c,g,k,j){this.updateSuggestParms(j);if(c.textbox.value)return g.requestSuggestions(c.sdtParms,function(){g.values?c.autosuggest(g.values,k):c.hideSuggestions();
delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")});if(""===c.textbox.value)gx.evt.onchange_impl(c.textbox);delete gx.fx.delayedValidation;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(c,g,k,j,a,b){this.cur=-1;this.layer=this.IFrameControl=null;this.provider=g;this.textbox=c;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=c.onblur);this.ControlRefresh=k;this.typeahead=j;this.suggestParms=a||[];this.sdtParms=b||[];this.requestSuggestions=function(a,
b,c){gx.fx.delayedValidation=true;var j=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(a,b,c,j)},400)};this.hideSuggestions=function(){$(this.IFrameControl).hide();$(this.layer).hide()};this.highlightSuggestion=function(a){for(var b=this.layer.childNodes.length,c=0;c<b;c++){var j=this.layer.childNodes[c];if(j==a)j.className="current";else if(j.className=="current")j.className=""}};this.init=function(){var a=function(a){if(!a)a=
window.event;this.handleKeyUp(a)};gx.evt.attach(this.textbox,"keyup",a.closure(this));gx.evt.attach(this.textbox,"keydown",function(a){if(!a)a=window.event;this.handleKeyDown(a)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();this.textbox.GXonblur()}.closure(this));gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,"input",a.closure(this));this.createDropDown()};this.nextSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur<a.length-
1?this.cur+1:0;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.previousSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur>0?this.cur-1:a.length-1;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.selectRange=function(a,b){if(this.textbox.createTextRange){var c=this.textbox.createTextRange();c.moveStart("character",a);c.moveEnd("character",b-this.textbox.value.length);c.select()}else this.textbox.setSelectionRange&&
this.textbox.setSelectionRange(a,b);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(a){this.cur=-1;var b=null;this.setupLayer();gx.dom.shouldPurge()&&gx.dom.purge(this.layer,true);this.layer.innerHTML="";if(!this.IFrameControl){b=false;this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame");if(!this.IFrameControl){b=true;this.IFrameControl=document.createElement("IFRAME");this.IFrameControl.src="about:blank";this.IFrameControl.id="gxAutosuggestIFrame"}$(this.IFrameControl).css({zIndex:1,
display:"none",position:"absolute"});this.IFrameControl.frameBorder="0";b&&document.body.appendChild(this.IFrameControl)}for(var c=a.length,j=0;j<c;j++){b=document.createElement("div");b.appendChild(document.createTextNode(a[j].d));b.style.width=this.textbox.offsetWidth;this.layer.appendChild(b)}this.layer.style.left=this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=
this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;$([this.IFrameControl,this.layer]).show()};this.typeAhead=function(a){if(this.textbox.createTextRange||this.textbox.setSelectionRange){var b=this.textbox.value.length;this.pickvalue(a);a=a.length;b<a&&this.selectRange(b,a)}};this.pickvalue=function(a,b){for(var c=this.aSuggestions.length,j=0;j<c;j++)if(this.aSuggestions[j].d==a){this.textbox.value=a;b===true&&gx.evt.fireEvent(this.textbox,
"input");gx.evt.onchange_impl(this.textbox,void 0,true);break}};this.autosuggest=function(a,b){this.aSuggestions=a;var c=this.aSuggestions.length;if(b&&this.aSuggestions!=null&&c==1)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&(this.aSuggestions!=null&&c>0)&&(c==1&&this.aSuggestions[0].d!=this.textbox||c>1)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()};this.createDropDown=function(){var a=false;this.layer=gx.dom.byId("gxAutosuggestElement");
if(!this.layer){a=true;this.layer=document.createElement("div");this.layer.className="suggestions";this.layer.id="gxAutosuggestElement"}this.setupLayer();a&&document.body.appendChild(this.layer)};this.setupLayer=function(){$(this.layer).hide();this.textbox.offsetWidth&&$(this.layer).width(this.textbox.offsetWidth);this.layer.onmousedown=this.layer.onmouseup=this.layer.onmouseover=function(a){var a=a||window.event,b=gx.evt.source(a);if(a.type=="mousedown"){gx.evt.cancel(a,true);this.pickvalue(b.firstChild.nodeValue,
true);this.hideSuggestions();window.setTimeout(function(){gx.fn.setFocus(this.textbox)},100)}else a.type=="mouseover"?this.highlightSuggestion(b):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var a=this.textbox,b=0;a.tagName!="BODY";){b=b+a.offsetLeft;a=a.offsetParent}for(a=this.textbox;a.tagName!="BODY";){b=b-a.scrollLeft;a=a.parentNode}return b};this.getTop=function(){for(var a=this.textbox,b=0;a.tagName!="BODY";){b=b+a.offsetTop;a=a.offsetParent}for(a=this.textbox;a.tagName!=
"BODY";){b=b-a.scrollTop;a=a.parentNode}return b};this.handleKeyDown=function(a){switch(a.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.hideSuggestions()}};this.handleKeyUp=function(a){a=a.keyCode;if(a==9)this.hideSuggestions();else if(a==8||a==46)this.requestSuggestions(this,this.provider,false);else if(a<32||a>=33&&a<46||a>=112&&a<=123){if(a===0){var a=this.textbox.value.length,b=parseInt($(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH)||"0",
10);a!==b&&this.requestSuggestions(this,this.provider,this.typeahead)}}else this.requestSuggestions(this,this.provider,this.typeahead);$(this.textbox).attr(gx.fx.GX_DATA_SUGGEST_LENGTH,this.textbox.value.length)};this.init()},suggestProvider:function(c,g,k,j){this.requestSuggestions=function(a,b,d,f){var l,n=gx.ajax.gxObjectUrl(c)+"?",t="gxajaxSuggest_"+j,o=g.length;for(l=0;l<o;l++)t+=","+encodeURIComponent(gx.fn.evalCtxScope(c,g[l]));t+=","+encodeURIComponent(void 0===f?gx.fn.getControlValue_impl(k):
f);o=a.length;for(l=0;l<o;l++)t+=","+encodeURIComponent(gx.fn.evalCtxScope(c,a[l]));n+=gx.ajax.encryptParms(c,t);gx.http.doCall({method:"GET",url:n,handler:function(a,d){var f=gx.json.evalJSON(d);this.values=gx.fx.returnSuggestValues(this.VarRefresh,f[0]);b()},error:d,obj:this})}},returnSuggestValues:function(c,g){return g},addElement:function(c,g,k){if(!this.elementExists(c,g,k)){var j=g.id;!0===k&&(j+=g.types.sort().join(""));c.splice(0,0,g);c[j]=g}},elementExists:function(c,g,k){var j=g.id;!0===
k&&(j+=g.types.sort().join(""));return c[j]?!0:!1},deleteElement:function(c,g,k){var j=g;k&&(j+=k.sort().join(""));c[j]&&delete c[j];for(var j=c.length,a=0;a<j;a++){var b=c[a];if(b.id==g)if(k){if(this.matchingTypes(k,b.types)){c.splice(a,1);break}}else{c.splice(a,1);break}}return c},matchingTypes:function(c,g){for(var k=g.length,j=0;j<k;j++){for(var a=!1,b=c.length,d=0;d<b;d++)g[j].toLowerCase()==c[d].toLowerCase()&&(a=!0);if(!a)return!1}return!0},findControl:function(c,g,k,j){g=gx.dom.el(k);if(null!=
g&&"none"!==$(g).css("display"))return g;g=gx.fn.getRONode(k,!1);if(j&&null!=g&&$(g).is(":visible"))return g;g=gx.dom.el("gxHTMLWrp"+k);if(null!=g)return g;j&&(!c.id&&"A"===c.tagName)&&(c=c.parentNode);k="(^"+(j?"("+gx.fn.getRONodePrefix()+")?":"")+"v?"+k+"_(?:(?:[0-9]){4})+$)";k=RegExp(k);return null!=c&&k.test(c.id)?c:null},isUnderMouse:function(c){var g=gx.evt.mouse.x,k=gx.evt.mouse.y,j=gx.dom.position(c),a=gx.dom.dimensions(c);return g>=j.x&&g<=j.x+a.w&&k>=j.y&&k<=j.y+a.h||"DIV"==c.tagName&&(0===
a.w&&0===a.h&&c.firstChild)&&(j=gx.dom.position(c.firstChild),a=gx.dom.dimensions(c.firstChild),g>=j.x&&g<=j.x+a.w&&k>=j.y&&k<=j.y+a.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(c){return"dblclick"==c?this.dblclicks:this.generics},addEventHandler:function(c,g,k,j){k=gx.lang.emptyObject(c)?k:c.CmpContext+k;c={id:g+k,cId:k,type:g,obj:c,hdl:j};g=this.getEventHandlers(g);gx.fx.addElement(g,c,!1)},deleteEventHandlers:function(c){for(var g=[this.dblclicks,this.generics],k=g.length,
j=0;j<k;j++){for(var a=[],b=g[j],d=b.length,f=0;f<d;f++){var l=b[f];l.obj==c&&a.push(l)}d=a.length;for(f=0;f<d;f++)gx.fx.deleteElement(b,a[f].id)}},hasEventHandler:function(c,g){for(var k=gx.evt.source(g),j=this.getEventHandlers(c),a=j.length,b=!1,d=0;d<a&&!b;d++){var f=j[d],f=gx.fx.findControl(k,f.obj,f.cId,!0);null!=f&&(b=g.currentTarget===f||gx.fx.isUnderMouse(f))}return b},delayedDispatch:function(c){return gx.fx.dom.hasEventHandler("dblclick",c)},raiseEvent:function(c,g){var k=gx.evt.source(g),
j=$(k),a=gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR;"dblclick"==c&&(clearTimeout(parseInt(j.attr(a),10)),j.removeAttr(a));for(var j=this.getEventHandlers(c),a=j.length,b=0;b<a;b++){var d=j[b],f=gx.fx.findControl(k,d.obj,d.cId,!0);null!=f&&gx.fx.isUnderMouse(f)&&d.hdl.call(d.obj)}},highlight:function(c,g,k){var j=gx.color.fromRGB(g[0],g[1],g[2]),a=gx.dom.getStyle(c,"backgroundColor"),b="transparent"==a||"rgba(0, 0, 0, 0)"==a;return{play:function(){c.style.backgroundColor=j.Html;setTimeout(this.end,
k)},end:function(){var d=a;b&&(d="transparent");c.style.backgroundColor=d}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(c,g,k){k&&(gx.evt.setEventRow(c,this.dragCtrl),this.obj=k.call(c,this.dragCtrl),this.obj.gxDragTypes=g)},drop:function(c,g,k){k&&k.call(g,c,this.dragCtrl,this.obj)},noDrop:function(){var c=this.noDropCtrl;null!=c&&c.gxDndClassName&&(c.className=c.gxDndClassName+"NoAcceptDrag")},
out:function(){var c=this.dropCtrl;c&&c.gxClassName&&(c.className=c.gxClassName);this.dropCtrl=null;c=this.noDropCtrl;null!=c&&c.gxClassName&&(c.className=c.gxClassName);this.noDropCtrl=null},over:function(){var c=this.dropCtrl;null!=c&&c.gxDndClassName&&(c.className=c.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);this.clonCtrl=null},restoreControl:function(){var c=this.clonCtrl;null!=c&&((null==this.toHdl&&(c.dropLeft=parseFloat(c.style.left||
"0"),c.dropTop=parseFloat(c.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored())?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(c=this.nextCoords(),this.moveDragControl(c.X,c.Y)))},nextCoords:function(){var c=this.clonCtrl,g=parseFloat(c.style.left||"0"),k=parseFloat(c.style.top||"0"),j=0,a=0;g>=k?(j=g-1,a=c.dropTop-(c.dropTop-c.originalTop)*(c.dropLeft-j)/(c.dropLeft-c.originalLeft)):(a=k-1,j=c.dropLeft-(c.dropTop-a)*(c.dropLeft-c.originalLeft)/
(c.dropTop-c.originalTop));j<=c.originalLeft&&(j=c.originalLeft);a<=c.originalTop&&(a=c.originalTop);return{X:j,Y:a}},moveControl:function(c){if(null==this.clonCtrl){var g=document.createElement("DIV");g.style.position="absolute";c.gxDndClassName&&(g.className=c.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(g,!0);g.innerHTML=this.dragInfo();gx.fn.setOpacity(50,g);document.body.appendChild(g);g.originalLeft=gx.evt.mouse.x-10;g.originalTop=gx.evt.mouse.y-10;g.diffLeft=10;g.diffTop=10;
this.clonCtrl=g}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var c=this.clonCtrl;if(null==c)return!0;var g=parseFloat(c.style.left||"0"),k=parseFloat(c.style.top||"0")-c.originalTop;return 0>=g-c.originalLeft&&0>=k?!0:!1},moveDragControl:function(c,g){try{var k=this.clonCtrl;null!=k&&(k.style.left=c-k.diffLeft+"px",k.style.top=g-k.diffTop+"px")}catch(j){this.deleteClonControl()}},dragInfo:function(){if(null!=this.obj){var c="",g="",k;for(k in this.obj){if("gxDragTypes"!=
k){var j=[c];if("function"==typeof this.obj[k])continue;g+=k+": "+this.obj[k]+"</br>";c=j[0]}if(5<=c){g+="...";break}c++}return g}return""},deleteHandlers:function(c){gx.thread.Mutex(this,this.deleteHandlersSync,[c])},deleteHandlersSync:function(c){var g=[],k,j=this.sources.length;for(k=0;k<j;k++){var a=this.sources[k];a.obj!=c&&g.push(a)}this.sources=g;g=[];j=this.targets.length;for(k=0;k<j;k++)a=this.targets[k],a.obj!=c&&g.push(a);this.targets=g},addSource:function(c,g,k,j,a){gx.thread.Mutex(this,
this.addSourceSync,[c,g,k,j,a])},addSourceSync:function(c,g,k,j,a){g=gx.lang.emptyObject(c)?g:c.CmpContext+g;gx.fx.addElement(this.sources,{id:g,cssClass:k,types:j,obj:c,hdl:a},!1)},addTarget:function(c,g,k,j,a){gx.thread.Mutex(this,this.addTargetSync,[c,g,k,j,a])},addTargetSync:function(c,g,k,j,a){g=gx.lang.emptyObject(c)?g:c.CmpContext+g;gx.fx.addElement(this.targets,{id:g,cssClass:k,types:j,obj:c,hdl:a},!0)},deleteSource:function(c){gx.thread.Mutex(this,this.deleteSourceSync,[c])},deleteSourceSync:function(c){this.sources=
gx.fx.deleteElement(this.sources,c)},getSource:function(c){for(var c=gx.evt.source(c),g=this.sources.length,k=0;k<g;k++){var j=this.sources[k],a=this.dragCtrl=gx.fx.findControl(c,j.obj,j.id);if(null!=a&&(a.gxClassName=a.className,a.gxDndClassName=j.cssClass,gx.fx.isUnderMouse(a)))return j}return this.obj=this.dragCtrl=null},getTarget:function(c,g){for(var k=gx.evt.source(c),j=this.targets.length,a=0;a<j;a++){var b=this.targets[a],d=gx.fx.findControl(k,b.obj,b.id);if(null!=d&&(d.gxClassName=d.className,
d.gxDndClassName=b.cssClass,gx.fx.isUnderMouse(d))){if(gx.fx.matchingTypes(g,b.types))return this.noDropCtrl=null,this.dropCtrl=d,b;this.out();this.noDropCtrl=d;this.noDrop();return null}}this.out();return null}},notifications:{queuedEvents:[],addTracker:function(c,g,k,j,a,b){c.notifications||(c.notifications=[],gx.fx.obs.addObserver("gx.ws.onMessage.notifications",c,gx.fx.notifications.notify.closure(c),{single:!1,doNotDelete:c.IsMasterPage}),gx.fx.obs.addObserver("gx.onafterevent",c,gx.fx.notifications.fireQueuedEvents.closure(c),
{single:!1,doNotDelete:c.IsMasterPage}));c.notifications[g||""]={gxO:c,handler:a,eventName:k,type:j,noWait:b};this.webSocket||(c.fullAjax||gx.dbg.write('Warning: WebNotifications are not supported with "Web User Experience": "Previous versions". You must use Smooth.'),c={},c.port=gx.fn.getHidden("GX_WEBSOCKET_PORT"),c.clientId=gx.fn.getHidden("GX_WEBSOCKET_ID"),c.wsProtocol="https:"===location.protocol?"wss://":"ws://",c.host=c.port?location.hostname+":"+c.port+"/":location.host+"/",c.resourceUrl=
gx.gen.isDotNet()?"/gxwebsocket.svc?":"/gxwebsocket?",c.wsURL=gx.config.websocket.URL,c.basePath=gx.basePath,c.namespace="notifications",this.webSocket=new gx.webSocket(c))},notify:function(c){var c=gx.json.evalJSON(c),g=this.notifications[c.GroupName||""];g&&(gx.fx.notifications.queuedEvents.push({notifObj:g,data:c}),(g.noWait||gx.isInputEnabled())&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){for(var c=0;c<gx.fx.notifications.queuedEvents.length;c++){var g=gx.fx.notifications.queuedEvents[c];
if(!g.executed){gx.fx.notifications.queuedEvents.splice(c--,1);var k=g.notifObj.gxO;g.executed=!0;if(gx.lang.emptyObject(g.data.Object)||g.data.Object.toUpperCase()==k.ServerClass.toUpperCase()){var j=g.notifObj.type,a=g.notifObj.eventName;if(a){var b=k.isServerEvent(a),d={};d[j[0][0]]=g.data;k.setEventParameters(g.notifObj.type,d);gx.evt.dispatcher.dispatch(k.getServerEventName(a),k,0,0,b,void 0,void 0,!0)}else g.notifObj.handler(g.data)}}}}},ctx:{setters:[],trackers:[],deleteHandlers:function(c){gx.thread.Mutex(this,
this.deleteHandlersSync,[c])},deleteHandlersSync:function(c){var g,k=[],j=this.setters.length;for(g=0;g<j;g++){var a=this.setters[g];a.obj!=c&&k.push(a)}this.setters=k;k=[];j=this.trackers.length;for(g=0;g<j;g++)a=this.trackers[g],a.obj!=c&&k.push(a);this.trackers=k},addSetter:function(c,g,k,j,a){gx.thread.Mutex(this,this.addSetterSync,[c,g,k,j,a])},addSetterSync:function(c,g,k,j,a){g=gx.lang.emptyObject(c)?g:c.CmpContext+g;gx.fx.addElement(this.setters,{id:g,cssClass:k,types:j,obj:c,hdl:a},!1)},
addTracker:function(c,g,k){gx.thread.Mutex(this,this.addTrackerSync,[c,g,k])},addTrackerSync:function(c,g,k){gx.fx.addElement(this.trackers,{id:c.CmpContext+c.IsMasterPage.toString(),cssClass:"",types:g,obj:c,hdl:k},!0)},deleteSetter:function(c){gx.thread.Mutex(this,this.deleteSetterSync,[c])},deleteSetterSync:function(c){this.setters=gx.fx.deleteElement(this.setters,c)},notify:function(c,g,k){gx.thread.Mutex(this,this.notifySync,[c,g,k])},notifySync:function(c,g,k){if(c&&c.forcedFocus)c.forcedFocus=
!1;else{var j,a=gx.lang.emptyObject,b=function(a,b){var d=gx.O;gx.setGxO(a);b();gx.setGxO(d)},d=null;if(a(g)||a(k)){var f=this.setters.length;for(j=0;j<f;j++){var l=this.setters[j];if(a(c)){if(d=gx.fx.findControl(null,l.obj,l.id),null!=d&&a(d.onfocus)&&gx.fx.isUnderMouse(d)){b.apply(this,[l.obj,function(){gx.evt.setEventRow(l.obj,d);g=l.types;k=l.hdl.call(l.obj,d)}]);break}}else if(c.id==l.id){b.apply(this,[l.obj,function(){d=c;gx.evt.setEventRow(l.obj,d);g=l.types;k=l.hdl.call(l.obj,d)}]);break}}}if(!a(g)&&
(k||""===k)){a=this.trackers.length;for(j=0;j<a;j++){var n=this.trackers[j];gx.fx.matchingTypes(g,n.types)&&b.apply(this,[n.obj,function(){n.hdl.call(n.obj,null,d,k)}])}}}}}};
gx.date=function(){var c=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\.?([0-9]{1,3})?\s?(AM|PM)?/i,g=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?[\.:]?([0-9]{1,3})?\s?(AM|PM)?/i,k=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,j=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,a=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(a){return this.getDay()==
a.getDay()&&this.getMonth()==a.getMonth()&&this.getFullYear()==a.getFullYear()?!0:!1},toJson:function(){var a=new gx.date.gxdate("");a.assign_date(this);return a.json()},gxdate:function(b,d){this.json=function(){var a=this.TimeFmt;this.TimeFmt=24;var b=this.HasTimePart,d=this.HasDatePart;this.HasDatePart=this.HasTimePart=!0;var c=this.getStringWithFmt("Y4MD")+" "+(b?this.getTimeString(!0,!0):"00:00:00");this.TimeFmt=a;this.HasTimePart=b;this.HasDatePart=d;return c};this.mapCTODFormatToPattern=function(a){return"ANSI"==
a?"Y4MD":a};this.emptyDateString=function(a){return-1==a.indexOf("Y4")?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==a?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(b){b=this.mapCTODFormatToPattern(b);if(0===this.Value-a)return this.emptyDateString(b);var d=b,c=gx.text.padl(this.Value.getDate().toString(),2,"0"),j=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),g=gx.text.padl(this.Value.getFullYear().toString(),4,"0"),k=this.FormatPos(b),d=d.replace("D",
c+(3>k.DPos?"/":"")),d=d.replace("M",j+(3>k.MPos?"/":""));-1==b.indexOf("Y4")?(g=g.slice(2,4),d=d.replace("Y",g+(3>k.YPos?"/":""))):d=d.replace("Y4",g+(3>k.YPos?"/":""));return d};this.getString=function(a){gx.lang.emptyObject(a)&&(a=gx.dateFormat);return this.getStringWithFmt(a)};this.toString=function(){var a=this.HasTimePart?" "+this.getTimeString(!0,!0):"";return this.getString()+a};this.gxdtoc=function(a,b){return this.getStringWithFmt(this.mapCTODFormatToPattern(a)).replace("/",b)};this.getUrlVal=
function(){var a,b,d;if(gx.date.isNullDate(this))return"";this.HasDatePart?(a=gx.text.padl(this.Value.getDate().toString(),2,"0"),b=gx.text.padl((this.Value.getMonth()+1).toString(),2,"0"),d=gx.text.padl(this.Value.getFullYear().toString(),4,"0")):(b=a="01",d="0001");var c=this.HasTimePart?gx.text.padl(this.Value.getHours().toString(),2,"0"):"",j=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),2,"0"):"",g=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",
k=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";return d+b+a+c+j+g+k};this.getTimeString=function(a,b,d,c){if(gx.date.isNullDate(this)&&gx.blankWhenEmpty){var j="";d&&(j+="  ");a&&(j+="   ");b&&(j+="   ");c&&(j+="    ");return j}var j="",g=this.Value.getHours(),d=d||!0;12==this.TimeFmt&&12<=g?(12<g&&(g-=12),j=" PM"):12==this.TimeFmt&&(j=" AM");var k=this.HasTimePart?gx.text.padl(g.toString(),2,"0"):"",s=this.HasTimePart?gx.text.padl(this.Value.getMinutes().toString(),
2,"0"):"",q=this.HasTimePart?gx.text.padl(this.Value.getSeconds().toString(),2,"0"):"",r=this.HasTimePart?gx.text.padl(this.Value.getMilliseconds().toString(),3,"0"):"";0===g&&""!==j&&(k="12");g="";d&&(g=k);a&&(g=g+":"+s);b&&(g=g+":"+q);c&&(g=g+"."+r);return g+j};this.FormatPos=function(a){var b,d,c;"ANSI"==a?(b=1,d=2,a=3):(c=a.indexOf("Y4"),b=-1==c?a.indexOf("Y")+1:c+1,d=a.indexOf("M"),0!==c&&d++,a=a.indexOf("D"),0!==c&&a++);return{YPos:b,MPos:d,DPos:a}};this.assign_date=function(b){b instanceof
gx.date.gxdate?(this.Value=b.Value,this.HasTimePart=b.HasTimePart,this.HasDatePart=b.HasDatePart):this.Value=void 0===b?a:b};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;a.HasDatePart=this.HasDatePart;return a};this.fromUTC=function(){if(gx.date.isNullDate(this)||"undefined"==
typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;a.HasDatePart=this.HasDatePart;return a};this.assign_string=function(a,b,d,j){var k=c,p=k.exec(a),m=0;if(null!=p){var s=a.indexOf(p[0]);0<s&&"."==gx.text.substring(a,s,1)&&(p=null)}if(null==p)-1!=a.indexOf("  /  /  ")&&(d=!0);else for(var s=p.length,q=1;q<s;q++)gx.lang.emptyObject(p[q])||
m++;var r=this.FormatPos(b),u=q=s=b=0,v=0,x=0,z=0;try{this.HasDatePart=!0;if(6==r.DPos+r.MPos+r.YPos&&null!=p&&3<=m){null!=p[r.YPos]&&(b=parseInt(p[r.YPos],10));if(isNaN(b))throw"InvalidDate";b<this.FYearOfCentury?b+=2E3:100>b?b+=1900:1E3>b&&(b+=1E3);null!=p[r.MPos]&&(s=parseInt(p[r.MPos],10)-1);if(isNaN(s)||0>s||11<s)throw"InvalidDate";null!=p[r.DPos]&&(q=parseInt(p[r.DPos],10));if(isNaN(q)||0>q||q>gx.date.maxDays(s,b))throw"InvalidDate";}else this.HasDatePart=!1;this.HasTimePart=!1;r=0;null==p?
(k=g,p=k.exec(a),null!=p&&(r=1,this.HasTimePart=!0)):3<m&&(r=4,this.HasTimePart=!0);if(this.HasTimePart&&!d){null!=p[r]&&(u=parseInt(p[r],10));if(gx.lang.emptyObject(p[r])||isNaN(u))throw this.HasTimePart=!1,"InvalidHour";null!=p[r+1]&&(v=parseInt(p[r+1],10));isNaN(v)&&(v=0);null!=p[r+2]&&(x=parseInt(p[r+2],10));isNaN(x)&&(x=0);null!=p[r+3]&&(z=parseInt(p[r+3],10));isNaN(z)&&(z=0);if(!this.validTime(-1!=a.toLowerCase().indexOf("m"),u,v,x,z))throw"InvalidHour";if((-1!=a.indexOf("PM")||-1!=a.indexOf("pm"))&&
12>u)u+=12;if((-1!=a.indexOf("AM")||-1!=a.indexOf("am"))&&12==u)u=0}}catch(w){if(j)throw w;"InvalidDate"==w&&(z=x=v=u=q=s=b=0);"InvalidHour"==w&&(z=x=v=u=0)}this.Value=new Date(b,s,q,u,v,x,z);if(0<b+s+q+u+v+x+z&&(!this.HasTimePart||d)&&this.Value.getDate()!=q)this.Value=new Date(Date.UTC(b,s,q,u+12,v,x,z))};this.validTime=function(a,b,d,c,j){return a&&12<b||!a&&(24<b||24==b&&0<d+c)?!1:59>=d||59>=c||999>=j};this.compare=function(a){return"string"==typeof a?this.compare_string(a):this.compare_date(a)};
this.compare_string=function(a){return this.compare_date((new gx.date.gxdate(a)).Value)};this.compare_date=function(a){var b;b=a instanceof gx.date.gxdate?a.Value:a;return this.HasTimePart||a.HasTimePart?this.Value-b:this.Value.getFullYear()>b.getFullYear()?1:this.Value.getFullYear()<b.getFullYear()?-1:this.Value.getMonth()>b.getMonth()?1:this.Value.getMonth()<b.getMonth()?-1:this.Value.getDate()>b.getDate()?1:this.Value.getDate()<b.getDate()?-1:0};this.TimeFmt=gx.timeFormat||12;this.SFmt=d||gx.dateFormat;
this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof b?this.assign_string(b,this.SFmt):this.assign_date(b)},isANSIDateTime:function(a){return"string"==typeof a&&c.test(a)?!0:!1},isANSIDate:function(a){return"string"==typeof a&&k.test(a)?!0:!1},isLeapYear:function(a){return 0===a%400?!0:0===a%100?!1:0===a%4?!0:!1},dateObject:function(a){return a instanceof this.gxdate?a.Value:"string"==typeof a?(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).Value:a instanceof Date?a:new Date},gxdateObject:function(a){if(a instanceof
this.gxdate)return a;if("string"==typeof a)return new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0);if(a instanceof Date){var d=new this.gxdate("");d.assign_date(a);return d}return new this.gxdate("")},clonedDate:function(a,d){var f=new this.gxdate("");f.assign_date(d);a instanceof this.gxdate&&(f.SFmt=a.SFmt,f.HasTimePart=a.HasTimePart,f.HasDatePart=a.HasDatePart);return f},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var a=this.today();a.HasTimePart=!0;a.HasDatePart=!0;
return a},today:function(){var a=new this.gxdate("");a.assign_date(new Date);return a},ctot:function(a,d){return new this.gxdate(a,d)},ctod:function(a,d){var f=new this.gxdate(a,d);f.Value.setHours(0,0,0,0);return f},ymdtod:function(a,d,f){a=new this.gxdate(a+"/"+d+"/"+f,"ANSI");a.Value.setHours(0,0,0,0);return a},ymdhmstot:function(a,d,f,c,j,g){return new this.gxdate(a+"/"+d+"/"+f+" "+c+":"+j+":"+g,"ANSI")},hour:function(a){return(new this.gxdate(a)).Value.getHours()},minute:function(a){return(new this.gxdate(a)).Value.getMinutes()},
second:function(a){return(new this.gxdate(a)).Value.getSeconds()},millisec:function(a){return 864E5*a},day:function(a){return(new this.gxdate(a)).Value.getDate()},month:function(a){return(new this.gxdate(a)).Value.getMonth()+1},year:function(a){return(new this.gxdate(a)).Value.getFullYear()},addDays:function(a,d){return this.addMill(a,this.dayToMillisec(d))},addSec:function(a,d){return this.addMill(a,this.secToMillisec(d))},addMill:function(a,d){var f=this.dateObject(a).clone(),c=new this.gxdate;
c.assign_date(f);var j=f.getMilliseconds();f.setMilliseconds(j+d);return c.getString(this.isANSIDate(a)?"Y4MD":void 0)},secDiff:function(a,d){return this.millisecToSec(this.milliDiff(a,d))},daysDiff:function(a,d){return this.millisecToDay(this.milliDiff(a,d))},milliDiff:function(a,d){var f=this.gxdateObject(a),c=this.gxdateObject(d),a=f.Value.valueOf(),d=c.Value.valueOf();return a-d},dayToMillisec:function(a){return 864E5*a},secToMillisec:function(a){return 1E3*a},millisecToDay:function(a){return a/
24/60/60/1E3},millisecToSec:function(a){return a/1E3},dateParm:function(a){return"string"==typeof a?new this.gxdate(a):a},urlDate:function(a,d){var f=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,d);return!this.isNullDate(f)?f.Value.getFullYear().toString()+gx.text.padl((f.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0"):""},urlDateTime:function(a,d){var f=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,
d);return!f.HasDatePart?"00010101"+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),2,"0")+gx.text.padl(f.Value.getSeconds().toString(),2,"0"):!this.isNullDate(f)?f.Value.getFullYear().toString()+gx.text.padl((f.Value.getMonth()+1).toString(),2,"0")+gx.text.padl(f.Value.getDate().toString(),2,"0")+gx.text.padl(f.Value.getHours().toString(),2,"0")+gx.text.padl(f.Value.getMinutes().toString(),2,"0")+gx.text.padl(f.Value.getSeconds().toString(),2,"0")+(0===
f.Value.getMilliseconds()?"":gx.text.padl(f.Value.getMilliseconds().toString(),3,"0")):""},isNullDate:function(a){a instanceof this.gxdate&&(a=a.Value);var d=this.nullDate();return d.getFullYear()!=a.getFullYear()||d.getMonth()!=a.getMonth()||d.getDate()!=a.getDate()||d.getHours()!=a.getHours()||d.getMinutes()!=a.getMinutes()||d.getSeconds()!=a.getSeconds()||d.getMilliseconds()!=a.getMilliseconds()?!1:!0},dtoc:function(a,d,f){return(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).gxdtoc(d,f)},
dttoc:function(a,d,f){var a=new this.gxdate(a,this.isANSIDateTime(a)?"Y4MD":void 0),c=gx.dateFormat,j="";0<d&&(8<d&&-1==c.indexOf("Y4")&&(c=c.replace("Y","Y4")),j=a.getStringWithFmt(c)+" ");return 0<f?j+a.getTimeString(3<f,8<=f,1<f,12<=f):j},nulldate_toc:function(a,d){var f=new this.gxdate("");f.HasTimePart=!0;f.HasDatePart=!0;var c=gx.dateFormat,j="";0<a&&(8<a&&-1==c.indexOf("Y4")&&(c=c.replace("Y","Y4")),j=f.getStringWithFmt(c)+" ");return 0<d&&!gx.blankWhenEmpty?j+f.getTimeString(3<d,8<=d,1<d,
12<=d):j},addyr:function(a,d){return this.addmth(a,12*d)},addmth:function(a,d){var f=this.gxdateObject(a),a=new Date(this.dateObject(a).getTime()),c=a.getDate();a.setDate(1);a.setMonth(a.getMonth()+1*d);a.setDate(Math.min(c,this.maxDays(a.getMonth(),a.getFullYear())));return this.clonedDate(f,a)},dtadd:function(a,d){var f=this.gxdateObject(a),a=new Date(this.dateObject(a).getTime()),c=a.getMilliseconds();a.setMilliseconds(c+1E3*d);return this.clonedDate(f,a)},dtdiff:function(a,d){a=this.dateObject(a);
d=this.dateObject(d);return(a-d)/1E3},maxDays:function(a,d){return[31,this.isLeapYear(d)?29:28,31,30,31,30,31,31,30,31,30,31][a]},eom:function(a){var d=this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),f=this.maxDays(a.getMonth(),a.getFullYear());a.setDate(f);return this.clonedDate(d,a)},dow:function(a){a=this.dateObject(a);return a.equalsNoTime(this.nullDate())?0:a.getDay()+1},age:function(a,d){var f,c,j;c=this.dateObject(a);f=this.dateObject(d);j=this.nullDate();if(c.equalsNoTime(j)||
f.equalsNoTime(j)||c.equalsNoTime(f))return 0;if(f>=c){j=36E5*f.getUTCHours()+6E4*f.getUTCMinutes()+1E3*f.getUTCSeconds()-(36E5*c.getUTCHours()+6E4*c.getUTCMinutes()+1E3*c.getUTCSeconds());if(f.getUTCDate()>c.getUTCDate()||f.getUTCDate()==c.getUTCDate()&&0<=j)j=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds()));else{j=new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth()-1,c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds()));
f=f.getUTCMonth()-1;for(-1==f&&(f=11);j.getUTCMonth()!=f;)j.setUTCDate(j.getUTCDate()-1)}return c=j.getUTCMonth()>=c.getUTCMonth()?j.getUTCFullYear()-c.getUTCFullYear():j.getUTCFullYear()-1-c.getUTCFullYear()}return 0},valid_date:function(a,d,f,c,g,k,o,p){var m=o||!1,s=!1,k=a.value,q="",o=f,r="",r="^[ ]*(",u=0<d?"GXM_invaliddate":"GXM_invalidtime",q=gx.num.replaceFullWidthNumerals(k),q=q.split("\n")[0],f="YMD"==f?1:0,g=12==g?1:0;if(j.test(q))s=!0,k=q="";else if(0<d&&4===q.length)var v=(new Date).getFullYear().toString().substring(10===
d?0:2),q=1===f?v+q:q+v;r=0<d?8==d?r+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":0===f?m?r+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":r+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":m?r+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":r+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":r+"( )?( )?( )?";0<c&&(r+="(",0<d&&(r+="[ ]*"),r+="([0-9]{1,2})",r=2<c?r+"(:?([0-9]{1,2}))?":r+"(( )?)?",r=5<c?r+"(:?([0-9]{1,2}))?":r+"(( )?)?",r=8<c?r+"(\\.?([0-9]{1,3}))?":r+"(( )?)?",r=(1==g?r+"[ ]*(a|am|p|pm)?":
r+"(( )?)?")+")?");f=RegExp(r+")?[ ]*$","i");if(f.test(q)){f=q.match(f);0<d?(r="/",0<q.indexOf("-")&&(r="-"),f[2]?r=f[2]+r+f[3]+r+f[4]:(r=1==p?"        ":"  "+r+"  "+r+"  ",10==d&&(r+="  "))):r="";0<c&&(0<d&&(r+=" "),1==p&&!f[6]&&!f[8]&&!f[10]&&!f[12]?r+="        ":(f[6]?r+=f[6]:s?(p=q.match(j),r=p[4]?r+p[4]:r+(1==g?"12":"00")):r+=1==g?"12":"00",2<c&&(r=f[8]?r+":"+f[8]:r+":00"),5<c&&(r=f[10]?r+":"+f[10]:r+":00"),8<c&&(r=f[12]?r+"."+f[12]:r+".000"),1==g&&(r="p"==(f[13]?f[13].substr(0,1):"a").toLowerCase()?
r+" PM":r+" AM")));g=new this.gxdate("",o);try{g.assign_string(r,o,0>=c,!0),""!==gx.text.trim(r)&&(r=this.formatDateTime(c,d,o,g))}catch(x){return gx.fn.alert(a,gx.getMessage(u)),gx.csv.setFormatError(a),!1}if(r!=k){a.value=r;if(-1!=navigator.userAgent.indexOf("Firefox/2"))a.onchange();(d=gx.O.getValidStructFld(a))&&gx.O.refreshDependantGrids(d)}gx.csv.setFormatError(a,!1);return!0}gx.fn.alert(a,gx.getMessage(u));gx.csv.setFormatError(a);return!1},formatDateTime:function(a,d,f,c){var j="";0<a&&c.HasTimePart&&
(j=c.getTimeString(4<=a,8<=a,void 0,12<=a));a=f;8<d&&-1==a.indexOf("Y4")&&(a=a.replace("Y","Y4"));return 0<d?c.getStringWithFmt(a)+(c.HasTimePart?" "+j:""):c.HasTimePart?j:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(c){this.capacity=c||10;this.buffer=[];this.append=function(c){this.buffer.push(c);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var c=arguments[0],g=arguments.length,k=1;k<g;k++)c=c.replace("%"+k,gx.text.rtrim(arguments[k].toString()));return c},formatString:function(c,g,k,j){if(k)return gx.text.padl("",
g,"*");if(!gx.lang.emptyObject(j)&&this.startsWith(j,"@")&&0<j.indexOf("!")){g="";k=this.padr("",!c?0:c.length,"!");j=this.replaceAll(k,"!"," ");if(c)for(var a=0,b=0,d;a<j.length&&b<c.length;)d=c[b],this.isSeparator(k[a])?(d==k[a]?(b++,g+=d):g+=j[a],a++):(g+=this.getCaret(k,d,a,g),a++,b++);else g=j;return gx.text.rtrim(g)}return c},getCaret:function(c,g,k,j){switch(c[k]){case "9":if(isNaN(g))break;else return g;case "X":return g;case "A":case "M":case "!":return g.toUpperCase();case "Z":if("1"<=g&&
"9">=g)return g;if("0"==g){c=!0;for(g=0;g<k;g++)if(" "!=j[g]){c=!1;break}if(!c)return"0"}}return" "},isSeparator:function(c){return"9"!=c&&"X"!=c&&"!"!=c&&"Z"!=c&&"A"!=c&&"M"!=c},replaceAll:function(c,g,k){return-1!=c.toString().indexOf(g)?(""+c).split(g).join(k):c},charReplace:function(c,g,k){for(var j="",a=c.length,b=0;b<a;b++){for(var d=!1,f=g.length,l=0;l<f;l++)if(c.charAt(b)==g[l]&&l<k.length){j+=k[l];d=!0;break}!1===d&&(j+=c.charAt(b))}return j},length:function(c){return c.length},upper:function(c){return c.toUpperCase()},
lower:function(c){return c.toLowerCase()},padr:function(c,g,k){g-=c.length;if(1>g)return c;for(var j=0;j<g;j++)c+=k;return c},padl:function(c,g,k){g-=c.length;if(1>g)return c;for(var j="",a=0;a<g;a++)j+=k;return j+c},ltrim:function(c){return c.toString().replace(/^ */,"")},rtrim:function(c){return c.toString().replace(/ *$/,"")},trim:function(c){return this.rtrim(this.ltrim(c))},chr:function(c){return String.fromCharCode(c)},concat:function(c,g,k){return this.rtrim(c)+k+g},space:function(c){for(var g=
"",k=0;k<c;k++)g+=" ";return g},substring:function(c,g,k){return 0>k?c.toString().substring(g-1):c.toString().substring(g-1,g-1+k)},tostring:function(c){return c.toString()},toformattedstring:function(c){return c.toString().replace(".",gx.decimalPoint)},newline:function(){return"\n"},escapeMapping:{"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(c,g){var k=gx.text.escapeMapping[g];if(k)return k;
k=g.charCodeAt();return"\\u00"+Math.floor(k/16).toString(16)+(k%16).toString(16)},escapeString:function(c){return this.escapeRegex.start.test(c)?'"'+c.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+c+'"'},indexOf:function(c,g,k){if(k>c.length)return 0;0>=k&&(k=1);return c.indexOf(g,k-1)+1},lastIndexOf:function(c,g,k){if(k>c.length)return 0;0>=k&&(k=c.length);return c.lastIndexOf(g,k-1)+1},endsWith:function(c,g){return-1!==c.indexOf(g,c.length-g.length)},startsWith:function(c,g){return 1==this.indexOf(c,
g)},contains:function(c,g){return 0<this.indexOf(c,g)},charAt:function(c,g){return c.charAt(g-1)}};
gx.num=function(){var c=/[\uFF10-\uFF19]|[\uFF0C-\uFF0E]|\u2015|\u30FC|\uFF0F/g,g=function(c,j,a,b){var d=gx.lang.instanceOf,f="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,g=gx.thousandSeparator,n=gx.decimalPoint;"string"==typeof a&&(a=gx.num.parseFloat(a,g,n));"string"==typeof b&&(b=gx.num.parseFloat(b,g,n));return d(a,f)&&d(b,Number)?a[c](new f(b.toString())).toString():d(a,Number)&&d(b,f)?(new f(a.toString()))[c](b).toString():d(a,Number)&&d(b,Number)||"undefined"==typeof gx.num.dec?
j(a,b):a[c](b)};return{str:function(c,j,a){if("string"===typeof c)return c;"undefined"==typeof j&&(j=10);if("undefined"==typeof a||j-1<=a)a=0;c=c.toFixed(a);return c.length<=j?gx.text.padl(c,j," "):gx.text.padr("",j,"*")},maxNumericPrecision:function(){return 15},extractValue:function(c,j){j=gx.num.replaceFullWidthNumerals(j);if(gx.lang.instanceOf(j,Number)||this.overflowNumber(j))return j;var a,b=void 0===j?"":j;if(c){a="+"==c.charAt(0)||"-"==c.charAt(0)?c.replace(/[\+\-\d,*\.*Z*\s]+/,""):c.replace(/[\d,*\.*Z*\s]+/g,
"");c.lastIndexOf(".")!=c.indexOf(".")&&(b=gx.text.replaceAll(b,".",""));for(var d=0;d<a.length;d++)b=b.replace(a.charAt(d),"")}return gx.text.trim(b)},formatNumber:function(c,j,a,b,d,f){gx.lang.emptyObject(c)&&(c="0");var g=-1!=a.indexOf(",")?gx.thousandSeparator:"",n=gx.decimalPoint,t=!1;"string"==typeof c&&g&&(c=gx.text.replaceAll(c,g,""));"string"==typeof c&&(c=c.replace(n,"."));if(gx.num.overflowNumber(c))return c;try{c=gx.num.setScale(c,j)}catch(o){c=c.toString()}var p=c.split(".");p[0]||(p[0]=
"0");p[1]||(p[1]="");if(f){if(p[1].length>j&&p[1].replace(/0*$/,"").length>j)throw"InvalidNumber";b=0===j?b:b-j-1;if(d&&"-"==p[0].charAt(0)&&p[0].replace(/0*/,"").length>b||!d&&"-"==p[0].charAt(0)||p[0].replace(/[+]?0*/,"").length>b)throw"InvalidNumber";}0>c&&(d=!0);if(p[1].length<j){b=p[1];for(c=p[1].length+1;c<=j;c++)b+="0";p[1]=b}b="";d&&"-"==p[0].charAt(0)&&(b="-",p[0]=p[0].substring(1));if(g&&3<p[0].length){f=p[0];p[0]="";for(d=3;d<f.length;d+=3)c=f.slice(f.length-d,f.length-d+3),p[0]=g+c+p[0]+
"";d=f.substr(0,0===f.length%3?3:f.length%3);p[0]=d+p[0]}n=!p[1]?"":n;0<j?(d=a.split("."),d[1]==gx.text.padr("",j,"Z")&&(t=!0)):(d=Array(a),0<d.length&&0===gx.text.replaceAll(gx.text.replaceAll(d[0],",",""),"Z","").length&&(t=!0));j=0;a="";if(1<d.length){f=d[1];for(c=0;c<f.length;c++){var m=f.charAt(c);"9"==m||"Z"==m?p[1].length>j?(a+=p[1].charAt(j),j++):a+="0":"."!=m&&","!=m&&(a+=m)}}f="";d=d[0];j=p[0].length-1;for(c=d.length-1;0<=c;c--)m=d.charAt(c),"9"==m||"Z"==m?0<=j?("Z"==m&&"0"===p[0].charAt(j)&&
0===j||(f=p[0].charAt(j)+f),j--):f=("9"==m?"0":"")+f:"Z"!=m&&","!=m?f=m+f:","==m&&p[0].charAt(j)==g&&(f=p[0].charAt(j)+f,j--);return t&&("0"==f||""===f)&&0===a.replace(/0+$/,"").length?"":b+f+(!a?"":n+a)},add:function(c,j){return g("add",function(a,b){return a+b},c,j)},subtract:function(c,j){return g("substract",function(a,b){return a-b},c,j)},multiply:function(c,j){return g("multiply",function(a,b){return a*b},c,j)},divide:function(c,j){return g("divide",function(a,b){return a/b},c,j)},negate:function(c){return gx.lang.instanceOf(c,
Number)||"undefined"==typeof gx.num.dec?-c:c.negate()},pow:function(c,j){return g("pow",function(a,b){return a^b},c,j)},mod:function(c,j){return g("remainder",function(a,b){return a%b},c,j)},setScale:function(c,j){if(gx.lang.instanceOf(c,Number))return c.toFixed(j);"string"==typeof c&&(c=gx.text.trim(c));if(c.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===c.length&&0===j)return"0";var a=c.split("."),b;a[1]||(a[1]="");if(a[1].length<j){var d=a[1];for(b=a[1].length+1;b<=j;b++)d+=
"0";a[1]=d;return a[0]+(""===a[1]?"":".")+a[1]}return Number(parseFloat(c)).toFixed(j)}return(new gx.num.dec.bigDecimal(c)).setScale(j,gx.num.dec.ROUND_UP).toString()},parseFloat:function(c,j,a){if(gx.lang.instanceOf(c,Number)||this.overflowNumber(c))return c;c=this.toInvariant(c,j,a);return c.length>this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(c):parseFloat(c)},toInvariant:function(c,j,a){return"number"==typeof c||"undefined"!=typeof gx.num.dec&&c instanceof
gx.num.dec.bigDecimal?c:gx.text.replaceAll(c,j,"").replace(a,".")},parseInt:function(c,j,a){if("number"==typeof c)return c;var b=c,b=gx.text.replaceAll(c,a,"");return parseInt(b,j)},overflowNumber:function(c){return/\*(\**)/.test(c)},urlDecimal:function(c,j,a){return"undefined"!=typeof c?(c="undefined"!=typeof c.value?c.value:c,c=this.parseFloat(c,j,a),c.toString()):""},random:function(){return Math.random()},intval:function(c){var j=0,c="undefined"!=typeof c?c.toString():"",j=c.length<gx.num.maxNumericPrecision()||
"undefined"==typeof gx.num.dec?parseInt(c,0):(new gx.num.dec.bigDecimal(c)).setScale(0,gx.num.dec.ROUND_UP);isNaN(j)&&(j=0);return j},val:function(c){c=gx.text.trim(c).replace(",",".");c=this.parseFloat(c);isNaN(c)&&(c=0);return c},trunc:function(c,j){var a=c,c=c.toString(),b=c.indexOf(".");if(-1!=b){a=c.substring(0,b);if(0===j)return Number(a);b=c.substring(b+1,b+1+j);a=gx.num.parseFloat(a+"."+b);isNaN(a)&&(a=0)}return a},round:function(c,j){return 0<=j?parseFloat(gx.num.decimalAdjust("round",c,
-j).toFixed(j)):gx.num.roundNeg(c,j)},decimalAdjust:function(c,j,a){if("undefined"===typeof a||0===+a)return Math[c](j);j=+j;a=+a;if(isNaN(j)||!("number"===typeof a&&0===a%1))return NaN;j=j.toString().split("e");j=Math[c](+(j[0]+"e"+(j[1]?+j[1]-a:-a)));j=j.toString().split("e");return+(j[0]+"e"+(j[1]?+j[1]+a:a))},roundNeg:function(c,j){var c=c.toString(),a=c.indexOf("."),b="",d="",d=0,b="."+"0000000000000000000000".substring(1,parseInt(j,0)+1)+"5",d=parseFloat(b);-1==a?(d="0000000000000000000000",
b=""+c):0===a?(b="0",d=0+parseFloat(c)+parseFloat(d),c=d+"0000000000000000000000",d=""+c.substring(1,c.length)):(d=parseFloat(c)+d,b=d.toString().substring(0,a),d=""+(""+d+"0000000000000000000000").substring(a+1,a+1+parseInt(j,0)));d=d.substring(0,parseInt(j,0));a=parseFloat(b+"."+d);isNaN(a)&&(a=0);return a},valid_decimal:function(c,j,a,b){var d=c.value,f=d.lastIndexOf(a),g=!0;","==a&&(-1==f&&d.lastIndexOf(".")==d.indexOf("."))&&(d=d.replace(".",a));var n=gx.O.getValidStructFld(c);gx.lang.emptyObject(n)||
(d=gx.num.extractValue(n.pic,d));f=RegExp("^[ ]*((([+-]{1}[0-9]+)||([0-9]*))(\\"+j+"[0-9]{3})*(\\"+a+"[0-9]*)?)?[ ]*$");if(d)if(f.test(d)){var f=d.lastIndexOf(a),t=d;-1!=f&&(t=d.slice(0,f+parseInt(b,10)+1));try{gx.lang.emptyObject(n)||(t=gx.num.formatNumber(t,n.dec,n.pic,n.len,n.sign,!0)),"."!=a&&"SELECT"==c.tagName&&(t=gx.num.toInvariant(t,j,a))}catch(o){g=!1}if(g&&t!=gx.text.trim(c.value)&&(c.value=t,-1!=navigator.userAgent.indexOf("Firefox/2")))c.onchange()}else g=!1;else g=!0;g?gx.csv.setFormatError(c,
!1):(gx.csv.setFormatError(c),gx.fn.alert(c,gx.getMessage("GXM_badnum")))},valid_integer:function(c,j){var a,b,d,f=gx.O.getValidStructFld(c),g=gx.lang.emptyObject(f);b=c.value;g||(b=gx.num.extractValue(f.pic,b));a=!g&&-1!=f.pic.indexOf(",")?RegExp("^[ ]*([+-]{1}[0-9]+||[0-9]*)(\\"+j+"[0-9]{3})*[ ]*$"):/^[ ]*(([+-]{1}[0-9]+)||([0-9]*))[ ]*$/;d=!0;if(b)if(a.test(b)){try{g||(b=gx.num.formatNumber(b,f.dec,f.pic,f.len,f.sign,!0))}catch(n){d=!1}if(b!=gx.text.trim(c.value)&&(c.value=b,-1!=navigator.userAgent.indexOf("Firefox/2")))c.onchange()}else d=
!1;else d=!0;d?gx.csv.setFormatError(c,!1):(gx.csv.setFormatError(c),gx.fn.alert(c,gx.getMessage("GXM_badnum")))},replaceFullWidthNumerals:function(g){return"string"===typeof g?g.replace(c,function(c){return 8213==c.charCodeAt()||12540==c.charCodeAt()?String.fromCharCode(45):String.fromCharCode(c.charCodeAt()-65248)}):g}}}();
gx.color={rgb:function(c,g,k){return 65536*c+256*g+k},css:function(c){return"rgb"==c.substring(0,3)?eval(c):"#"==c.charAt(0)?parseInt(c.substring(1),16):0},html:function(c){c=this.toHex(c);gx.lang.emptyObject(c)&&(c="000000");var c=gx.text.padl(c,6,"0"),g={};g.Hexa=c;g.Html="#"+c;g.R=parseInt(c.substring(0,2),16);g.G=parseInt(c.substring(2,4),16);g.B=parseInt(c.substring(4,6),16);return g},fromRGB:function(c,g,k){var j={};"undefined"!=typeof c&&("undefined"!=typeof g&&"undefined"!=typeof k)&&(j.Hexa=
this.toHex(c)+this.toHex(g)+this.toHex(k),j.Html="#"+j.Hexa,j.R=c,j.G=g,j.B=k);return j},ARGBToHex:function(c){var g=this.toHex(c>>16&255),k=this.toHex(c>>8&255),c=this.toHex(c&255);return g+k+c},toHex:function(c){if(void 0===c)return"000000";if(0>c)return gx.color.ARGBToHex(c);if(0===c)return c+"0";for(var g=0,k="";0!==c;)g=c%16,c=(c-g)/16,k="0123456789ABCDEF".charAt(g)+k;0!==k.length%2&&(k="0"+k);return k}};
gx.popup=function(c){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.top=this.position=this.height=this.width=0;this.cssClass="";this.left=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};var g=function(k){0===c(this.getEl()).find(k.target).length&&(c(document.body).off("click",g),this.close())}.closure(this);this.open=function(k){this.state=
"opening";this.id=k.id||"gxdialog";this.callbacks=k.callbacks;var j=void 0===k.resizable||k.resizable,a="PopupBorder gx-popup gx-popup-default";this.cssClass&&(a=a.replace("gx-popup-default",""),a+=" "+this.cssClass);gx.popup.ext.window(this,!1,0,0,k.w,k.h,k.contentHtml,"white",k.title,"black","black","black","black",void 0===k.isModal||k.isModal,!0,!0,j,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",a,"PopupShadow",
k.showParentPopups,!1,k.callbacks,k.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened";setTimeout(function(){c(document.body).on("click",g)},1)};this.close=function(){c(document.body).off("click",g);this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};
this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(c,k){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=k?k:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){if(gx.lang.isArray(c))this.url=c[0],this.autoresize=c[1],this.width=c[2],this.height=c[3],this.position=c[4],this.top=
c[5],this.left=c[6],this.OncloseCmds=c[7]||[],this.ReturnParms=c[8]||[],this.cssClass=c[9];else if(c&&c.Url&&(this.url=c.Url,"undefined"!=typeof c.Autoresize&&(this.autoresize=c.Autoresize),"undefined"!=typeof c.Width&&(this.width=c.Width),"undefined"!=typeof c.Height&&(this.height=c.Height),"undefined"!=typeof c.Position&&(this.position=c.Position),"undefined"!=typeof c.Top&&(this.top=c.Top),"undefined"!=typeof c.Left&&(this.left=c.Left),"undefined"!=typeof c.Class&&(this.cssClass=c.Class),"undefined"!=
typeof c.OncloseCmds&&(this.OncloseCmds=c.OncloseCmds),"undefined"!=typeof c.ReturnParms))this.ReturnParms=c.ReturnParms};this.open=function(){this.state="opening";var c=gx.popup.gxOpener();this.lvl=-1;this.lvl=c&&c.gx&&c.gx.popup.ext.win&&c.gx.popup.ext.win.gx?c.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;c=this.url;if(this.IsPrompt){gx.popup.currentPrompt=this;
for(var a="?",b="",d="",f=this.ReturnParms.length,g=0;g<f;g++){b="";if(gx.lang.emptyObject(this.ReturnParms[g].Ctrl))if("string"==typeof this.ReturnParms[g])b=gx.util.urlValue(this.ReturnParms[g])+",";else if("number"==typeof this.ReturnParms[g])b=gx.util.urlValue(this.ReturnParms[g].toString())+",";else if(this.CustomRenderGrid)d=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[g].id),gx.lang.emptyObject(d)||(b=gx.util.urlValue(d+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[g].id))continue;
else d=gx.fn.getHidden(this.ReturnParms[g].id),gx.lang.emptyObject(d)||(b=gx.util.urlValue(d)),b+=",";else b=gx.util.urlValue(this.ReturnParms[g].Ctrl)+",";a="out"==this.ReturnParms[g].IOType?a+",":a+b;this.ReturnParms[g].isLastKey&&(gx.fn.isOutputParm(this.ReturnParms[g])&&!this.PromptIsGet)&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);c+=a}a=document.activeElement;gx.csv.lastControl&&(a&&gx.util.inArray(a.tagName,
["BODY","FORM"]))&&(a=gx.csv.lastControl);a&&(a&&(this.callerActiveElement=a),a.blur&&a.blur());this.InternalPopup=gx.popup.Impl(this,c,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var c=[];if(this.IsPrompt)for(var a=this.ReturnParms.length,b=0;b<a;b++){var d=this.ReturnParms[b];gx.fn.isOutputParm(d)&&c.push(d)}else return this.ReturnParms;return c};this.close=function(c,a,b){a=a||{};this.state="closing";c&&(this.RawReturnedParms=c);var d=
window;gx.popup.ext.win?(d=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var f=function(){var d,f;this.beforeClose&&this.beforeClose(c);if(!this.isPdf&&this.frameWindow&&this.frameWindow.gx){if(this.IsPrompt)this.parentPopup==null?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null;this.frameWindow.gx.evt.onunload.call(this.frameWindow);this.frameWindow=this.frameDocument=
this.frameDocument.gxPopup=null}gx.popup.ext.close(this);var g=this.getOutputParms();if(c!=null&&this.IsPrompt){if(b&&a.parmsMetadata&&a.updateParms){f=a.parmsMetadata.length;for(d=0;d<f;d++){var k=a.parmsMetadata[d];gx.util.inArray(k,a.updateParms)&&(c[d]=b[k])}}f=c.length;var k=gx.popup.assignPromptField,l=gx.popup;if(!gx.lang.emptyObject(this.CustomRenderGrid)){k=this.CustomRenderGrid.grid.setCellValue;l=this.CustomRenderGrid.grid}for(d=0;d<f;d++)k.apply(l,[g[d],c[d]]);k=null;f=g.length;for(d=
0;d<f;d++){l=g[d].Ctrl;gx.fn.isAccepted(l)&&(k=l)}if(k&&gx.TabOnPrompSelect){d=gx.fn.getControlIndex(k);d!=-1&&(k=gx.fn.searchFocus(d+1,true))}gx.fn.setFocus(k);if(this.PromptIsGet)if(this.Opener.fullAjax){var s;(d=gx.csv.ctxControlId(k.id))&&(s=gx.O.getValidStructFld(d));s&&gx.csv.validControls(s.id,s.id+1,true,this.Opener)}else{gx.csv.loadScreen();gx.fn.setFocus(k)}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),
typeof window.GXPkIsDirty=="undefined"?false:window.GXPkIsDirty,null,"eng")}catch(q){gx.dbg.logEx(q,"gxpopup.js","close")}}else c&&g&&(g instanceof Array&&g.length>0)&&gx.fn.setReturnParms(this.Opener,g,c,this.CustomRenderGrid);gx.ajax.dispatchCommands(this.OncloseCmds,void 0,{updateParms:g});this.cleanup();this.state="closed";this.afterClose&&this.afterClose(c);this.parentPopup?this.parentPopup.frameWindow.gx.fx.obs.notify("popup.afterclose",[this]):gx.fx.obs.notify("popup.afterclose",[this])},g=
gx.util.browser;g.isFirefox()||g.isIE()?d.setTimeout(f.closure(this),10):f.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload()};this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null,this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(c){gx.dbg.logEx(c,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},
getWindowIframeElement:function(c){for(var k,c=c.document.getElementsByTagName("iframe"),j=0;j<c.length&&!k;j++){var a=c[j];a.contentWindow===window&&(k=a)}return k},gxOpener:function(){try{parent.gxTestAvailable=1;var g=this.getWindowIframeElement(parent);return g&&void 0!==c(g).attr("data-gx-popup-ct")?parent:window}catch(k){}return null},setFocus:function(){var c=this.getPopup();c&&c.window.frames[0].focus()},ispopup:function(){return null!=this.getPopup()},popupurl:function(){return this.getPopup().url},
waitCallback:function(c){var k=gx.popup.getPopup();k?"opened"==k.state?c():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[c],50):c()},getPopup:function(){var c=this.gxOpener();try{if(!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(c.gx))return c.gx.popup.currentPopup}catch(k){}return null},setPopup:function(c){this.currentPopup=c},open:function(c,k){return this.openPopup(c,k)},openUrlToOpenPopupParms:function(c,k,j){var a=1,b=0,d=0,f=0,l=0,n=0;j&&(a=j[0],b=j[1],d=j[2],f=j[3],l=j[4],n=j[5]);return[c,
a,b,d,f,l,n,[],k]},openUrl:function(){return this.openPopup(this.openUrlToOpenPopupParms.apply(this,arguments))},openPopup:function(c,k){var j=this.getPopup(),a,b,d;if(!j||j.Opener!==gx.O||!gx.lang.isArray(c)){var f=new this.Popup(c,!1);f.Opener=k||gx.O;j=0;for(b=f.ReturnParms.length;j<b;j++)if((d=gx.fn.vStructForVar(f.ReturnParms[j]))&&d.grid)if(a=gx.O.getGridById(d.grid))break;a&&a.isUsercontrol&&(f.CustomRenderGrid=a);f.open();return f}j.OncloseCmds.push({popup:c})},openDialog:function(c){var k=
new this.Dialog;k.Opener=gx.O;k.open(c);return k},openPrompt:function(c,k,j,a,b,d){if(null==gx.popup.currentPrompt){a&&gx.setGxO(a,b);var f=k[0].Ctrl,l=!1,n,t;if(f)n=gx.fn.rowGridId(f),f=gx.fn.controlRowId(f),!gx.lang.emptyObject(n)&&!gx.lang.emptyObject(f)&&(gx.csv.lastGrid=n,gx.fn.setCurrentGridRow(n,f));else{for(var f=0,o=k.length;f<o;f++)if(k[f].IOType){n=k[f].id;break}if(n&&(n=gx.O.getValidStructFld(n),!gx.lang.emptyObject(n)&&(t=gx.O.getGridById(n.grid))))if(l=t.isUsercontrol)n=t.gridId+"",
f=!gx.lang.emptyObject(t.grid.getSelectedRow)?gx.text.padl(t.grid.getSelectedRow()+"",4,"0"):void 0,!gx.lang.emptyObject(n)&&!gx.lang.emptyObject(f)&&(gx.csv.lastGrid=n,gx.fn.setCurrentGridRow(n,f))}if(d||this.outParmsAccepted(k)||l)c=new this.Popup([c,1,0,0,0,0,0,[],k],!0),c.IsMod=j,c.Opener=gx.getObj(a,b),l&&(c.CustomRenderGrid=t),c.open()}},outParmsAccepted:function(c){for(var k=c.length,j=!1,a=0;a<k;a++){var b=c[a];gx.fn.isOutputParm(b)&&(j=!0);if(gx.fn.isOutputParm(b)&&b.Ctrl&&gx.fn.isAccepted(b.Ctrl))return!0}return!j},
gxReturn:function(c){gx.fn.closeWindow(c)},parmId:function(c){c=gx.dom.id(c);0===c.indexOf("span_")&&(c=c.substring(5));return c},popuplvl:function(){var c=gx.popup.getPopup();return!c||!c.window?-1:c.window.gx.popup.lvl},assignPromptField:function(c,k){if(!gx.lang.emptyObject(c)&&(gx.csv.pkDirty=c.isKey,c.Ctrl)){"checkbox"==c.Ctrl.type&&c.Ctrl.value!=k&&(c.Ctrl.checked=!c.Ctrl.checked);c.Ctrl.value!=k&&c.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0);var j=gx.csv.ctxControlId(this.parmId(c.Ctrl)),a=
gx.O.getValidStructFld(j),b;if(!gx.lang.emptyObject(a)&&(b=gx.O.getValidStructId(a.fld)))b>gx.O.toValid&&(gx.O.toValid=b),gx.csv.validateAll();!gx.lang.emptyObject(a)&&!gx.lang.emptyObject(a.v2c)&&("date"==a.type||"dtime"==a.type)?(a.v2v(k),gx.fn.v2c(a,k)):gx.fn.setControlValue(this.parmId(c.Ctrl),k,0);gx.fn.setControlGxValid(c.Ctrl,"0");gx.evt.execOnchange(c.Ctrl);var d=gx.dom.byId("span_"+c.Ctrl.name);null!=d&&(0===d.childNodes.length&&d.appendChild(gx.popup.gxOpener().document.createTextNode("")),
d.childNodes[0].nodeValue=k);a&&a.gxgrid&&a.gxgrid.updateControlValue(a,!1);gx.util.balloon.clear(j);if(b&&(gx.O.toValid=b,gx.csv.validateAll(),!gx.lang.emptyObject(a.rgrid))){j=a.rgrid.length;for(b=0;b<j;b++)a.rgrid[b].filterVarChanged()}}},autofit:function(){var c=this.getPopup();!gx.lang.emptyObject(c)&&"opened"==c.state&&this.ext.autofit(c,null,!1)},Impl:function(c,k,j,a,b,d,f,l){var n="PopupBorder gx-popup gx-popup-default";c.cssClass&&(n=n.replace("gx-popup-default",""),n+=" "+c.cssClass);return new this.ext.popUp(c,
j,d,l,f,a,b,"gxp",k,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey","#00568c","black",!0,!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader gx-popup-header","PopupHeaderButton gx-popup-close","PopupContent gx-popup-content",n,"PopupShadow",void 0)},setZIndex:function(c){c=gx.dom.getStyle(c,"zIndex");isNaN(c)&&(c=999);c++;this.zindex=c;this.ext.zdx=c},ext:{currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,
win:null,doc:null,compatMode:function(){return!gx.runtimeTemplates||gx.util.browser.isIE()&8>=gx.util.browser.ieVersion()},hide:function(c){var k=gx.dom.byId;gx.popup.ext.compatMode()&&(k(c+"_t").style.visibility="hidden",k(c+"_c").style.visibility="hidden",k(c+"_rs").style.visibility="hidden");k(c+"_b").style.visibility="hidden"},show:function(g){var k=gx.dom.byId,j=c("#"+g+"_b");gx.popup.ext.compatMode()?(k(g+"_t").style.visibility="visible",k(g+"_c").style.visibility="visible",k(g+"_rs").style.visibility=
"visible"):c(document.body).toggleClass("gx-popup-opened",!0);j.css("visibility","visible")},close:function(g,k){c(document.body).toggleClass("gx-popup-opened",!1);if(!k||!("function"==typeof k&&!1===k())){gx.popup.ext.iFrame=null;gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=null;gx.popup.ext.currRS=null;var j=g.id,a=document.getElementById(j+"_b"),j=document.getElementById(j+"_ifrm");gx.popup.ext.deinitmodal(g);gx.popup.setPopup(g.parentPopup);var b=g.callerActiveElement;b&&b.focus&&
b.focus();g.parentPopup?g.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[g]):gx.fx.obs.notify("popup.close",[g]);j&&(j.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?a.parentNode.removeChild(a):gx.dom.removeControlSafe(a)}},move:function(g,k,j){g=c("#"+g+"_b");g.toggleClass("gx-popup-centered",!1);void 0!==k?g.css({left:Math.max(k,0)}).toggleClass("gx-popup-horizontal-center",!1):g.toggleClass("gx-popup-horizontal-center",!0);void 0!==j&&g.css({top:Math.max(j,
0)})},resize:function(g,k,j){var a=gx.dom.byId;if(a(g+"_rs").rsEnable){var b=a(g+"_rs"),d=a(g+"_b"),f=a(g+"_t"),a=a(g+"_c");gx.popup.ext.compatMode()?(b.style.left=Math.max(k,92)+"px",b.style.top=Math.max(j,72)+"px",d.style.width=Math.max(k+8,100)+"px",d.style.height=Math.max(j+8,80)+"px",f.style.width=Math.max(k+3,92)+"px",a.style.width=Math.max(k-5,87)+"px",a.style.height=Math.max(j-28,44)+"px"):(g=document.getElementById(g+"_ifrm"),c(g).css({width:k,height:j}));this.resizePopupContent(k,j)}},movepopup:function(){null!=
this.currIDb&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff);null!=this.currRS&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(){gx.popup.ext.currRS=null},startRS:function(g,k){var j=gx.popup.ext,a=g.pageX,b=g.pageY,d=c(k);gx.popup.ext.compatMode()?(j.rsxoff=parseInt(k.style.left,0)-a,j.rsyoff=parseInt(k.style.top,0)-b):(j.rsxoff=d.position().left-a,j.rsyoff=d.position().top-b);j.currRS=k;return!1},changez:function(c){var c=
null!=c?c:this,k=gx.popup.ext,j=gx.dom.byId;c.style.zIndex=++k.zdx;j(c.cid+"_rs").style.zIndex=++k.zdx},stopdrag:function(){gx.popup.ext.currIDb=null},grab_id:function(g,k){var j=gx.popup.ext,a=gx.dom.byId,a=a(k.cid+"_b");gx.evt.mouse.update(g);var b=gx.evt.mouse.x,d=gx.evt.mouse.y;gx.popup.ext.compatMode()?(j.xoff=parseInt(a.style.left,0)-b,j.yoff=parseInt(a.style.top,0)-d):(j.xoff=c(a).position().left-b,j.yoff=c(a).position().top-d);j.currIDb=a;return!1},subBox:function(c,k,j,a,b,d){b=document.createElement("div");
b.setAttribute("id",d);b.style.position="absolute";b.style.left=c+"px";b.style.top=k+"px";b.style.width=j+"px";b.style.height=a+"px";b.style.visibility="visible";b.style.padding="0px";b.style.width=j+"px";return b},window:function(){gx.popup.ext.compatMode()?this.window_compat.apply(this,arguments):this.window_responsive.apply(this,arguments)},window_responsive:function(g,k,j,a,b,d,f,l,n,t,o,p,m,s,q,r,u,v,x,z,w,H,E,J,C,A,B,y){C=void 0!==C?C:gx.popup.showParentPopups;k=g.id;this.win||(this.win=window);
this.doc||(this.doc=this.win.document);j=this.win.gx.dom.byId.closure(this.win.gx.dom);a=c("<div/>",{id:k+"_rs"})[0];u&&(a.className+="gx-popup-resize",a.innerHTML='<img src="'+x+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'">',a.style.cursor="se-resize");a.rsEnable=u;x=c("<div/>",{id:k+"_b",style:!q?"visibility:hidden;":""})[0];c(x).addClass("gx-responsive-popup gx-popup-centered "+E+" gx-popup-initial");E=c("<div/>",{id:k+"_t"})[0];E.className=z;E.innerHTML='<span id="'+k+'_gxtitle" class="PopupTitle">'+
n+'</span><span class="'+w+'"; id="'+k+'_cls"></span>';n=c("<div/>",{id:k+"_c"})[0];n.className=H;"string"==typeof f?n.innerHTML=f:n.appendChild(f);x.appendChild(E);x.appendChild(n);x.appendChild(a);y=gx.dom.byId(y)||this.doc.body;y.appendChild(x);q||this.hide(k);var D=j(k+"_b"),K=c(D),f=j(k+"_rs"),q=j(k+"_cls");D.cid=k;D.isExt=v?!0:!1;var M=j(k+"_t");M.cid=k;u&&(f.cid=k,gx.evt.attach(f,"mousedown",this.startRS.closure(this,[f],!0)),gx.evt.attach(f,"mouseup",this.stopRS.closure(this,[f],!0)));gx.evt.attach(q,
"click",B.close||this.close.closure(this,[g,B.beforeClose]));r&&(gx.evt.attach(M,"mousedown",function(a){this.grab_id(a,M);K.css({top:K.position().top,left:K.position().left});K.toggleClass("gx-popup-centered",false);gx.evt.attach(D,"mouseup",this.stopdrag.closure(this,[M],true),this,{single:true})},this),u&&gx.evt.attach(a.firstChild,"dragstart",function(a){gx.evt.cancel(a,true)},!0));(s||C)&&this.initmodal(g,C,A)},window_compat:function(c,k,j,a,b,d,f,l,n,t,o,p,m,s,q,r,u,v,x,z,w,H,E,J,C,A,B,y){C=
void 0!==C?C:gx.popup.showParentPopups;p=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);m=this.win.gx.dom.byId.closure(this.win.gx.dom);b=Math.max(b,100);d=Math.max(d,80);k=new this.subBox(b-8,d-8,7,7,"",p+"_rs");u&&(k.className+="gx-popup-resize",k.innerHTML='<img src="'+x+'" width="7px" height="7px" alt="'+gx.getMessage("GXM_resize")+'" style="box-sizing:content-box">',k.style.cursor="se-resize");k.rsEnable=u;j=new this.subBox(j,a,b,d,o,p+"_b");j.className=E;j.style.display=
"block";j.style.boxSizing="content-box";j.style.zIndex=++this.zdx;q||(j.style.visibility="hidden");t=new this.subBox(2,2,b-5,20,t,p+"_t");t.style.overflow="hidden";t.style.boxSizing="content-box";t.className=z;t.innerHTML='<span id="'+p+'_gxtitle" class="PopupTitle" style="box-sizing:border-box;white-space:nowrap;position:absolute;padding:2px;">'+n+'</span><span class="'+w+'" style="z-index:'+ ++this.zdx+';" id="'+p+'_cls"></span>';b=new this.subBox(2,24,b-13,d-36,l,p+"_c");b.className=H;"string"==
typeof f?b.innerHTML=f:b.appendChild(f);b.style.overflow="hidden";b.style.boxSizing="content-box";q||(j.style.visibility="hidden",t.style.visibility="hidden",b.style.visibility="hidden");j.appendChild(t);j.appendChild(b);j.appendChild(k);y=gx.dom.byId(y)||this.doc.body;y.appendChild(j);q||this.hide(p);var D=m(p+"_b");D.cid=p;D.isExt=v?!0:!1;var K=m(p+"_t");K.cid=p;u&&(f=m(p+"_rs"),f.cid=p,f.style.boxSizing="content-box",gx.evt.attach(f,"mousedown",this.startRS.closure(this,[f],!0)),gx.evt.attach(f,
"mouseup",this.stopRS.closure(this,[f],!0)));f=m(p+"_cls");gx.evt.attach(f,"click",B.close||this.close.closure(this,[c,B.beforeClose]));r&&(gx.evt.attach(K,"mousedown",function(a){this.grab_id(a,K);gx.evt.attach(D,"mouseup",this.stopdrag.closure(this,[K],true),this,{single:true})},this),u&&gx.evt.attach(k.firstChild,"dragstart",function(a){gx.evt.cancel(a,true)},!0));(s||C)&&this.initmodal(c,C,A)},popUp:function(g,k,j,a,b,d,f,l,n,t,o,p,m,s,q,r,u,v,x,z,w,H,E,J,C,A,B,y,D,K,M,L,X,O,R){o=gx.popup.ext;
null!=g.parentPopup?(p=g.parentPopup.window,o=p.gx.popup.ext,o.win=p,o.doc=p.document,gx.popup.ext=o):(o.win=window,o.doc=o.win.document);o.win.gx.popup.setPopup(g);g.window=o.win;g.document=o.doc;o.win.gx.popup.lvl++;l+=o.win.gx.popup.lvl;g.id=l;!g.IsPrompt&&!gx.util.sameAppUrl(n)?(gx.popup.setPopup(null),g=new Date,g=g.getTime(),l="",1==j&&(l="left="+a+",top="+b),a="",k||(a=",width="+d+",height="+f),window.open(J?n:"","gx"+g,"status=no,menubar=no"+a+",resizable="+(H?"yes":"no")+",scrollbars=yes,"+
l)):(n+=-1!=n.indexOf("?")?",":"?",n+=encodeURIComponent("gxPopupLevel="+o.win.gx.popup.lvl+";"),j="",j=gx.util.getFileName(n),j=j.charAt(0).toUpperCase()+j.slice(1),gx.popup.ext.compatMode()?(p=gx.HTML5?"auto":"100%",j='<iframe id="'+l+'_ifrm" src="'+n+'" width="'+p+'" height="'+p+'" frameborder="0" style="overflow:auto;" title="'+j+'" data-gx-popup-ct=""></iframe>'):(p=!k&&0<d?d:gx.dom.fixes.getPopupMinWidth(),n=c("<iframe/>",{id:l+"_ifrm",src:n,title:j,style:"width:"+gx.dom.addUnits(p)}),n.attr("data-gx-popup-ct",
""),j=n[0].outerHTML),n={close:g.close.closure(g)},o.window(g,k,a,b,d,f,j,t,m,s,r,u,v,x,z,w,H,J,D,K,M,L,X,O,R,!0,n),k=o.win.gx.dom.byId(l+"_ifrm"),o.iFrame=k,gx.lang.doCallTimeout(o.showIfLoaded,o,[g,k,1],50))},initmodal:function(c,k,j){c.showParentPopups=k;null==c.parentPopup?gx.ajax.disableForm(j,!0):k||this.hide(c.parentPopup.id)},deinitmodal:function(c){if(null==c.parentPopup)gx.ajax.enableForm();else{this.show(c.parentPopup.id);var k=c.parentPopup.frameWindow;k&&k.gx&&c.parentPopup.frameWindow.gx.ajax.enableForm()}},
getDocumentContentType:function(g){return g.contentType||c(g.querySelector('meta[http-equiv="content-type"]')).attr("content")},isPDFPopup:function(c,k){if(void 0===k.isPdf){var j=c.src;if(gx.util.getContentTypeFromExt(j)==gx.util.contentTypes.pdf)return k.isPdf=!0;var a=gx.util.contentTypes.html;try{var b=c.contentDocument,b=c.contentWindow.document,a=this.getDocumentContentType(b);if(a==gx.util.contentTypes.pdf)return k.isPdf=!0}catch(d){a=null}if(gx.lang.emptyObject(a)){var f,a={};a.url=j;a.method=
"HEAD";a.sync=!0;a.ajaxHeader=!1;a.handler=function(a,b,d){f=d.getResponseHeader("Content-Type")};a.obj=!0;gx.http.doCall(a);if(f&&0<=f.indexOf(gx.util.contentTypes.pdf))return k.isPdf=!0}return!1}return k.isPdf},showIfLoaded:function(c,k,j){try{if(c.isActive()&&(this.docReady(k,j)||10<j&&this.isPDFPopup(k,c))){var a=gx.dom.iFrameDoc(k),b=!1;try{b=a&&"about:blank"!=a.URL}catch(d){}var f=this.isPDFPopup(k,c);if(b||f){c.state="opened";this.autofit(c,a,!0);return}}}catch(l){gx.dbg.logEx(l,"gxpopup.js",
"showIfLoaded")}j++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[c,k,j],50*j)},docReady:function(c,k){if("complete"==c.readyState)return!0;var j=gx.dom.iFrameDoc(c);if(j){var a;try{a="undefined"!=typeof j.gxReadyState?j.gxReadyState:j.readyState}catch(b){return!0}if("complete"==a)return!0}return!gx.util.browser.isIE()&&50<=k&&j&&j.body&&0!==j.body.childNodes.length?!0:!1},resizePopupContent:function(g,k){if(gx.HTML5&&this.iFrame){var j=gx.dom.iFrameDoc(this.iFrame),a=0<k?k:"100%",
b=0<g?g:"100%",d=c(this.iFrame),f=0<g&&0<k,l=gx.popup.ext.compatMode(),n;if(j){var t=j.documentElement;if(t)if(l)b=a="100%";else{try{n=d[0].contentWindow.gx&&d[0].contentWindow.gx.runtimeTemplates}catch(o){}f?(c(t).width(g),c(t).height(k),c(t).css("min-width",""),d.width(b),d.height(a)):(n||d.width(50),c(t).width(c(t).width()),d.width(c(t).width()));b=Math.max(Math.max(j.body.scrollWidth,j.documentElement.scrollWidth),Math.max(j.body.offsetWidth,j.documentElement.offsetWidth));try{b+=c(window).height()<=
j.body.offsetHeight?c.position.scrollbarWidth():0}catch(p){}a=void 0}}d.width(b);void 0===a&&(a=Math.max(Math.max(j.body.scrollHeight,j.documentElement.scrollHeight),Math.max(j.body.offsetHeight,j.documentElement.offsetHeight)));d.height(a)}},autofit:function(){gx.popup.ext.compatMode()?this.autofit_comp.apply(this,arguments):this.autofit_responsive.apply(this,arguments)},autofit_responsive:function(g,k,j){if(!gx.lang.emptyObject(g)){var a=document,b=g.id,d=g.isPdf,f=c("#"+b+"_c");this.doc||(this.doc=
g.document);var a=this.doc,l=a.getElementById(b+"_ifrm"),n=c(a.getElementById(b+"_gxtitle"));!k&&gx.popup.ispopup()&&(k=gx.dom.iFrameDoc(l));n.text(k&&!d?k.title:"");g.frameDocument=k;g.frameWindow=l.contentWindow;k&&!d&&(k.gxPopup=g);gx.util.browser.isIPad()&&(f.css("overflow-y","auto"),f.css("-webkit-overflow-scrolling","touch"));if(window.self!==window.top){var t=this.getiFrameSizeInfo(a);t.accessParentFrame&&(n=t.scrollTop,l=t.maxHeight+Math.min(window.top.document.body.scrollTop-t.y,0)-50,f.css("max-height",
l).parent().css("margin-top","0px"),t=Math.max(window.top.document.body.scrollTop-t.y,0),k=Math.min(k.body.offsetHeight,l),this.move(b,void 0,t+n+(l-k)/2))}var o,p;d&&(f.addClass("gx-popup-pdf"),o=0.5*a.body.clientWidth,p=0.85*a.body.clientHeight);g.autoresize||(o=g.width,p=g.height);this.resizePopupContent(o,p);j&&(g.position&&(j=parseInt(g.top,0),g=parseInt(g.left,0),this.move(b,g,j)),this.show(b))}},autofit_comp:function(g,k,j){if(!gx.lang.emptyObject(g)){var a=document;g.zindex=null!=a.gxPopup?
this.zdx+a.gxPopup.zindex:this.zdx;var b=g.id,d=g.isPdf;this.doc||(this.doc=g.document);var a=this.doc,f=a.getElementById(b+"_ifrm");!k&&gx.popup.ispopup()&&(k=gx.dom.iFrameDoc(f));g.frameDocument=k;g.frameWindow=f.contentWindow;k&&!d&&(k.gxPopup=g);var f=a.getElementById(b+"_rs"),l=a.getElementById(b+"_t"),n=a.getElementById(b+"_b"),t=a.getElementById(b+"_c"),o=a.getElementById(b+"_gxtitle");o.innerHTML=k&&!d?k.title:"";o.style.width="auto";var p=gx.dom.getComputedStyle(t),m=gx.dom.getComputedStyle(l),
s=gx.dom.getComputedStyle(n),q=gx.dom.getComputedStyle(f),r=parseInt(p.height,0),u=parseInt(p.width,0),v=this.getiFrameSizeInfo(a),x=v.maxWidth,z=v.maxHeight,w=v.scrollTop,H=v.scrollLeft,E=v.x,v=v.y,J=gx.dom.dimensions(n);g.autoresize||(r=g.height-r+J.h,u=g.width-u+J.w);var C=g.width-u,A=g.height-r;g.autoresize&&(!d&&k?(k=gx.HTML5?k.documentElement||k.body:k.body,a=j&&gx.util.browser.isEdge()?c.position.scrollbarWidth():0,k?(k.gxwidth||(k.gxwidth=k.scrollWidth),C=k.gxwidth+a,a=k.gxwidth+30-x,A=k.scrollHeight+
30-z,C=Math.max(C,o.clientWidth+15)-u-(0<a?a:0)+0,A=k.scrollHeight-r-(0<A?A:0)):gx.util.browser.isIE()&&(0>C&&(C=0),0>A&&(A=0))):d&&(C=a.body.clientWidth/2,A=a.body.clientHeight/2));o=parseInt(g.top,0);r=parseInt(g.left,0);if(!g.position&&(o=(z-A)/2-J.h/2+w-v,r=(x-C)/2-J.w/2+H-E,0>o&&(o=5,A-=5),0>r))r=5,C-=5;n.style.top=parseInt(o,0)+"px";n.style.left=parseInt(r,0)+"px";g.autoresize?(g=function(a,b){var d=parseInt(a,0)+b;return d>0?d:a},l.style.width=g(m.width,C)+"px",n.style.height=g(s.height,A)+
"px",n.style.width=g(s.width,C)+"px",t.style.height=g(p.height,A)+"px",t.style.width=g(p.width,C)+"px",g=gx.util.browser.isIE()?4:2,f.style.top=parseInt(s.height,0)-parseInt(q.height,0)-g+"px",f.style.left=parseInt(s.width,0)-parseInt(q.width,0)-g+"px"):(r=g.height,u=g.width,f.style.left=Math.max(u,92)+"px",f.style.top=Math.max(r,72)+"px",n.style.width=Math.max(u+8,100)+"px",n.style.height=Math.max(r+8,80)+"px",l.style.width=Math.max(u+3,92)+"px",t.style.width=Math.max(u-5,87)+"px",t.style.height=
Math.max(r-28,44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(t.style["overflow-y"]="auto",t.style["-webkit-overflow-scrolling"]="touch"):t.style.overflow="hidden";d&&gx.util.browser.isIE()?this.resizePopupContent("100%","100%"):this.resizePopupContent(parseInt(t.offsetWidth,10),parseInt(t.offsetHeight,10));j&&this.show(b)}},getiFrameSizeInfo:function(c){var k=gx.util.getWindowInfo().canAccessFrame,j={x:0,y:0,accessParentFrame:k};!k||window==window.top||gx.lang.emptyObject(window.top)?
(j.maxWidth=window.innerWidth||c.documentElement.clientWidth||c.body.offsetWidth,j.maxHeight=window.innerHeight||c.documentElement.clientHeight||c.body.offsetHeight,j.scrollTop=gx.dom.documentScroll(c).scrollTop,j.scrollLeft=gx.dom.documentScroll(c).scrollLeft):(k=gx.dom.position(window.frameElement),window.top.document.body.clientHeight>c.body.clientHeight?j.maxHeight=c.body.clientHeight:(j.maxHeight=window.top.document.body.clientHeight,j.y=k.y),j.scrollTop=c.body.scrollTop,j.scrollLeft=c.body.scrollLeft,
j.maxWidth=Math.min(window.top.document.body.clientWidth,c.body.clientWidth),window.top.document.body.clientWidth>c.body.clientWidth)?j.maxWidth=c.body.clientWidth:(j.maxWidth=window.top.document.body.clientWidth,j.x=k.x);return j},_init:function(){setInterval(gx.popup.ext.movepopup.closure(gx.popup.ext),40)}},_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();var c=this.getPopup();if(c){try{c.frameDocument&&(c.frameDocument.gxPopup=c)}catch(k){c.frameDocument=c.frameWindow.document,
gx.dbg.logEx(k,"gxpopup.js","_init")}c=c.window.gx.popup;gx.fx.obs.addObserver("gx.onload",c,function(){this.autofit()}.closure(c));gx.fx.obs.addObserver("grid.onafterrefresh",c,function(c,a,b){a<b&&this.autofit()}.closure(c));gx.fx.obs.addObserver("gx.onafterevent",c,function(){this.autofit()}.closure(c))}}}}(gx.$);
gx.ajax=function(c){var g=/\?(.*)/,k=function(c,a,b){gx.dbg.logMsg("Unable to execute external object "+c+" - "+a+"("+b+")")};return{reqHeader:"GxAjaxRequest",resourceProvider:"",dfTimer:null,resolveParmKey:function(c){var a=!1;c.av?a=c.av:c.ctrl&&c.prop?a=c.ctrl+c.prop:c.ctrl&&(a=c.ctrl);return a},serviceUrl:function(c,a){var b=gx.ajax.selfUrl();a&&(b=g.test(b)?b.replace(g,"?"+a+",$1"):b+("?"+a));return b},message:function(j,a,b,d,f,g){var k;return{disableForm:g,gxO:a,grid:b,row:d,methods:[j],addMethod:function(a){this.methods.push(a)},
gridsData:function(){var a=this.gxO.getGridById(this.grid,this.row),b=a,d={};if(a){var f=function(a,b,d,j){c.each(a.childGrids,function(a,c){var g=d.getGridById(c.gridId,j);g?(b[g.gridName]={id:g.gridId,lastRow:g.lastRowId},f(g,b,d,j+g.grid.GridRow)):gx.dbg.write("gx.ajax.gridsData - grid not found for row: "+j,!0)})};f(a,d,this.gxO,this.row)}else for(c.each(this.gxO.Grids,function(a,b){d[b.gridName]={id:b.gridId,lastRow:b.lastRowId}});b;)d[a.gridName]={id:a.gridId,lastRow:a.lastRowId},b=b.parentGrid;
return d},to_json:function(){var a={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,pkgName:this.gxO.PackageName||"",events:this.methods};this.fullPost&&(a.fullPost=this.fullPost);this.addGXStateParms(a);this.grid&&(a.grid=this.grid);a.grids=this.gridsData();this.row&&(a.row=this.row.substring(this.row.length-4));return gx.json.serializeJson(a)},getParmsMetadata:function(a){for(var b=[],d={},c=0,f=this.methods.length;c<f;c++){var j=
this.methods[c];if(this.gxO.EvtParms[j])for(var j=this.gxO.EvtParms[j]["input"==a?0:1],g=0;g<j.length;g++)if(j[g].postForm||j[g].sPrefix||j[g].sSFPrefix||j[g].sCompEvt)b.push(j[g]);else{var k=gx.ajax.resolveParmKey(j[g]);k&&(void 0===d[k]?(d[k]=b.length,b.push(j[g])):void 0===b[d[k]].grid&&void 0!==j[g].grid&&(b[d[k]]=j[g]))}}return b},parmFromHidden:function(a,b){var d=gx.O,c;gx.setGxO(b);!gx.lang.emptyObject(a)&&(!gx.lang.emptyObject(b)&&a.v2v)&&(c=gx.fn.getHidden(this.gxO.IsMasterPage?a.fld+"_MPAGE":
gx.O.CmpContext+a.fld),a.v2v(c),c=b[a.gxvar]);gx.setGxO(d);return c},getInputParms:function(){for(var a=this.getParmsMetadata("input"),b=this.gxO.CmpContext,d=[],f=[],j,g,k,l,n,x=0,z=a.length;x<z;x++)if(j=a[x],j.postForm){l={};l.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(l,gx.http.postDataFormat.JSON);for(var w in gx.http.viewState)this.fullPost[w]||(this.fullPost[w]=gx.http.viewState[w])}else if("Referrer"==j.prop)d.push(gx.referrer?gx.referrer:document.referrer);
else if(j.sPrefix)d.push(this.gxO.sPrefix());else if(j.sSFPrefix)d.push("");else if(j.sCompEvt)d.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),""));else{if(j.ctrl)j.prop?"GridRC"==j.prop?(l=(l=gx.parentGridRow(j.grid,this.gxO))?"_"+l:"",g={gridRC:gx.fn.getHidden(this.gxO.sPrefix()+j.av+l),rowSuffix:l}):g=this.gxO.getCtrlPropertyValue(this.gxO.sPrefix()+j.ctrl,j.prop):(k=this.gxO.getValidStructFld(j.ctrl),null!=k&&gx.html.controls.isMultiSelection(k.ctrltype)&&(l=gx.fn.getControlGridRef(k.fld,
k.grid),(l=gx.dom.comboBoxToObj(l,g))&&(g=l)));else if(void 0!==j.fld&&(k=j.fld?this.gxO.getValidStructFld(j.fld):null)&&("function"==typeof k.c2v&&"function"==typeof k.val&&void 0!==k.val())&&k.c2v(),g="function"==typeof this.gxO[j.av]?this.gxO[j.av](this.row):void 0===this.gxO[j.av]?j.fld?gx.fn.getControlValue(j.fld):"":this.gxO[j.av],void 0!==j.grid){var H=g,E=[];c.each(this.gxO.Grids,function(a,d){if(d.gridId===j.grid){var c=d.parentRow?d.parentRow.gxId:"";if(k){g={pRow:c,c:[],hc:[],hsh:[],v:H};
for(var f=1;f<=d.lastRowId;f++){n=gx.grid.getPaddedRowId(f);var l=k.isuc?gx.fn.getControlValue(k.fld+"_"+n+c):k.val(n+c);g.c.push(l);j.hsh&&g.hsh.push(gx.fn.getHash(b,k.fld,n+c));gx.lang.emptyObject(k.hc)||g.hc.push(gx.fn.getControlValue("GXHC"+k.fld+"_"+n+c))}}else gx.lang.isArray(g)&&(g={pRow:c,c:g,v:g[Number(gx.fn.currentGridRowImpl(j.grid))-1]});E.push(g)}});g=E}else j.hsh&&(k&&k.grid?(n=gx.fn.currentGridRowImpl(k.grid)||"",""===n&&(g=this.parmFromHidden(k,this.gxO))):n="",f.push({hsh:gx.fn.getHash(this.gxO.CmpContext,
j.fld,n),row:n}));d.push(g)}return{input:d,hashed:f}},addGXStateParms:function(a){var b={};gx.notifications&&(gx.notifications.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID"))&&(b.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));gx.lang.emptyObj(b)||(a.gxstate=b)},call:function(){k=c.Deferred();var a=gx.O;gx.setGxO(this.gxO);var b;this.grid&&this.row&&(b=gx.fn.currentGridRowImpl(this.grid),gx.fn.setCurrentGridRow(this.grid,this.row));f&&gx.fn.objectOnpost();var d=this.getInputParms();
f?(this.parms=d.input,this.hashedParms=d.hashed,this.doFullAjaxCall(!1,this.disableForm)):this.doClientSideCall();this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,b);gx.setGxO(a);return k.promise()},doFullAjaxCall:function(a,b){var d=this.to_json();gx.evt.setProcessing(!0);!1!==b&&this.gxO.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[d,a]);var c=gx.ajax.getPostInfo(this.gxO,d,a);c.handler=this.postHandlerFullAjax.closure(this);c.handleAllStatusCodes=!0;c.url=gx.ajax.serviceUrl(gx.pO,
gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));c.reqData=d;c.always=this.callback;c.contentType="application/json";gx.http.doCall(c)},doClientSideCall:function(){this.callback();k.resolve()},postHandlerFullAjax:function(a,b,d){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;gx.http.lastStatus=d.status;var a=!1,c;d.status==gx.http.STATUS_FORBIDDEN?(alert(gx.getMessage("GXM_runtimeappsrv")+" ("+d.status+")"),a=!0):gx.http.checkResponseStatus(d)?a=!0:200>d.status||299<d.status?(gx.dom.writeError(d.responseText,
gx.getMessage("GXM_runtimeappsrv"),d.status),a=!0):gx.http.validJsonResponse(d,b)?(c=gx.json.evalJSON(b),null==c?gx.dom.writeError(b.toString(),gx.getMessage("GXM_runtimeappsrv"),d.status):(gx.csv.lastEvtResponse=c,gx.ajax.setJsonResponse({response:c,isPostBack:!0,gxObject:this.gxO,gridId:this.grid,row:this.row}).done(function(){gx.fx.obs.notify("gx.onafterevent",[c])}))):a=!0;gx.evt.setProcessing(!1);k.resolve();a&&gx.fx.obs.notify("gx.onafterevent",[c])}}},timeoutActions:{ignore:0,warn:1},maxGETLength:function(c){return c.AjaxSecurity?
600:1350},getImageUrl:function(c,a){var b=c[a];if(gx.lang.emptyObject(b))return"";"object"==typeof b&&(c[a]=gx.ajax.resolveImageUrl(b));return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+c[a],!0)},imageGuidToUrl:function(c){try{if(!gx.lang.emptyObject(this.resourceProvider)){var a=gx.ajax.objectUrl(this.resourceProvider)+"?image,"+encodeURIComponent(c)+",,"+encodeURIComponent(gx.theme);gx.http.callBackend_simple(a,!0,!0,"GET",null,!0);return gx.http.lastResponse}}catch(b){gx.dbg.logEx(b,"gxcallrpc.js",
"getImageUrl")}return c},resolveImageUrl:function(c){var a,b;for(a=0;a<c.length;a++)if(b=c[a],b.l==gx.languageCode&&b.t==gx.theme)return(b.i?"Resources/":"")+b.p},sendHeader:function(c){try{if(!gx.lang.emptyObject(this.resourceProvider))return gx.http.callBackend_simple(location.href,!0,!0,"HEAD",null,!0,!0,c),!0}catch(a){}return!1},encryptParms:function(c,a){return c.AjaxSecurity?gx.sec.encrypt(a):a},doPost:function(c,a,b,d){!1!==b&&gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[c,a]);
gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);a=this.getPostInfo(gx.O,c,a);a.url=gx.ajax.serviceUrl(gx.O,c);a.onReady=function(){gx.evt.setProcessing(!1);!1!==b&&!gx.popup.getPopup()&&gx.O.endFeedback()};a.always=d;gx.http.doCall(a)},getPostInfo:function(c,a,b){a={};a.formNode=gx.dom.form();a.method="POST";a.encoding="UTF-8";a.useCash=!1;a.gxO=c;!0===b&&(a.sync=!0);a.handler=gx.http.postHandler;this.multipartInfo(a);return a},multipartInfo:function(c){gx.dom.hasSelectedFile()&&
(c.multipart=!0,c.mimetype="text/html",c.formNode.encoding="multipart/form-data")},dispatchRefreshCommand:function(j,a){var b=void 0!==j.refresh_form,d,f;if("GET"==(j.refresh||j.refresh_form))gx.http.reload(!0);else return d="RFR",a.IsMasterPage&&(d+="_MPAGE"),b=b||!gx.pO.fullAjax?gx.pO:a,f=b.fullAjax,b.executeServerEvent(d,!gx.pO.fullAjax,null,!0,f);return c.Deferred().resolve()},doRefresh:function(c){var a=c.IsMasterPage?"RFR_MPAGE":"RFR",c=!gx.pO.fullAjax?gx.pO:c;c.executeServerEvent(a,!0,null,
!0,c.fullAjax)},dispatchCommands:function(c,a,b,d){var b=b||{},f,g,k=b.ignoreCmds||[],a=a||gx.O;if(c&&0<c.length)for(var t=c.length,o=void 0===d?0:d;o<t;o++)if(d=c[o],f=Object.keys?Object.keys(d)[0]:"",!gx.util.inArray(f,k)){d.set_focus&&gx.fn.usrSetFocus(d.set_focus,!0);d.print&&gx.printing.print(d.print);d.close&&(f=[],d.close.values instanceof Array&&(f=d.close.values),gx.fn.closeWindow(f,{parmsMetadata:d.close.metadata,updateParms:b.updateParms},a));if(void 0!==d.refresh||void 0!==d.refresh_form||
""===d.cmp_refresh){gx.ajax.dispatchRefreshCommand(d,a).then(function(){gx.ajax.dispatchCommands(c,a,b,o+1)});break}d.redirect&&(f=d.redirect,f.url=gx.ajax.removeGXParms(f.url),gx.http.redirect(f.url,f.forceDisableFrm,!1,a));d.calltarget&&gx.nav.callFromServerRedirect(d.calltarget.url,d.calltarget.target);d.callback&&d.callback.apply(d.callback.scope,d.args||[]);d.cmp_refresh&&(f=gx.pO.getWebComponent(d.cmp_refresh),gx.evt.dispatcher.dispatch("REFRESH",f));if(d.popup){a.endFeedback();c.length>o+1&&
(gx.lang.isArray(d.popup)?d.popup[7]=c.slice(o+1):d.popup.OncloseCmds=c.slice(o+1));gx.popup.open(d.popup,a);break}if(d.ucmethod&&(g=gx.getObj(d.ucmethod.CmpContext,d.ucmethod.IsMasterPage))){f=gx.O;gx.setGxO(g);if((g=gx.O.getUserControl(d.ucmethod.Control))&&"function"==typeof g[d.ucmethod.Method])try{g[d.ucmethod.Method].apply(g,d.ucmethod.Parms)}catch(p){gx.dbg.logEx(p,"gxcallrpc.js","Failed to execute usercontrol method: "+d.ucmethod.Method)}gx.setGxO(f)}d.exomethod&&gx.ajax.dispatchExoMethod(d.exomethod);
d.exoprop&&gx.ajax.dispatchExoProperty(d.exoprop)}},resolveExoObject:function(c,a){var b=c[a],d,f,g;if(!b){b=a.split(".");d=window;f=0;for(g=b.length;f<g;f++)if(d=d[b[f]],void 0===d)return;b=d}return b},dispatchExoMethod:function(c){var a=gx.getObj(c.CmpContext,c.IsMasterPage),b,d,f;if(a){b=gx.O;gx.setGxO(a);try{(d=this.resolveExoObject(a,c.ObjectName))&&"GlobalEvents"===c.ObjectName?d.executeMethod(c.Method,c.Parms):c.IsEvent?gx.fx.obs.notify(c.Method,c.Parms):d?(f=d[c.Method])?f.apply(d,c.Parms):
k("method","Method not found",c.Method):"GlobalEvents"===c.ObjectName?d.executeMethod(c.Method,c.Parms):k("method","Object not found",c.ObjectName)}catch(g){gx.dbg.logEx(g,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(b)}}},dispatchExoProperty:function(c){var a=gx.getObj(c.CmpContext,c.IsMasterPage),b,d;if(a){b=gx.O;gx.setGxO(a);try{(d=this.resolveExoObject(a,c.ObjectName))?d[c.PropertyName]=c.Value:k("property","Object not found",c.ObjectName)}catch(f){gx.dbg.logEx(f,"gxcallrpc.js","dispatchCommands")}finally{gx.setGxO(b)}}},
ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(c,a,b,d,f,g,k,t){a=a||gx.O;if(c&&0<c.length){b=c.length;for(g=0;g<b;g++){var o=c[g];if(o.load){if(d=a.getGridById(o.load.grid,t))o.load.props.values=o.load.values,d.loadNewRows(o.load.props)}else o.addlines&&(gx.lang.doCall(gx.fn.setJsonValues,f),gx.lang.doCall(gx.fn.setJsonProperties,k,t),(d=a.getGridById(o.addlines.grid,t))&&d.getNewRows(o.addlines.count))}}},willLeavePage:function(c){if(c)for(var a=c.length,b=0;b<a;b++)if(c[b].close)return!0;
return!1},getRedirectCommand:function(c){if(c)for(var a=c.length,b=0;b<a;b++){var d=c[b];if(d.popup)break;if(d.redirect)return d}return null},saveJsonResponse:function(c){this.lastJsonResponse=c},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){this.lastJsonResponse&&delete this.lastJsonResponse.gxCommands;return this.lastJsonResponse},setPostResponse:function(c,a,b){return this.setJsonResponse({response:c,isPostBack:!0,gxObject:a||gx.O,context:b})},setJsonResponse:function(j){var a=
c.Deferred(),b=j.response,d=j.isPostBack,f=j.afterCmpLoaded,g=j.gxObject,k=j.gridId,t=j.row,o=j.context||{},p=gx.fn,m=gx.lang.doCall,s,q,r=this.willLeavePage(b.gxCommands);g&&(s=gx.O,gx.O=g);k&&t&&(q=gx.fn.currentGridRow(k),gx.fn.setCurrentGridRow(k,t));if(gx.evt.srvCommand)gx.evt.srvCommand=!1,m(gx.ajax.dispatchCommands,b.gxCommands,g),a.resolve(r);else if((j=this.getRedirectCommand(b.gxCommands))&&j.redirect.forceDisableFrm)m(gx.ajax.dispatchCommands,b.gxCommands,g,{ignoreCmds:["refresh","cmp_refresh"]}),
a.resolve(r);else if(r)m(gx.ajax.dispatchCommands,b.gxCommands,g),a.resolve(r);else{m(gx.ajax.dispatchPreCommands,b.gxCommands,g,b.gxComponents,b.gxHiddens,b.gxValues,b.gxGrids,b.gxProps,t);m(p.clearCompontHiddens,b.gxComponents);var u=m(p.setJsonHiddens,g,b.gxHiddens);m(p.setJsonComponents,b.gxComponents,b.DynComponentMap,b.gxHiddens,function(j){gx.http.loadStyles();gx.updateTheme();d&&gx.fn.installComponents(false);typeof f=="function"&&f();if(s)gx.O=s;var x=m(p.setJsonValues,b.gxValues),z=m(p.setJsonProperties,
b.gxProps,t),w=[],H=c.map(j,function(a){a=p.cmpContextFromCtrl(a);if(a=gx.pO.WebComponents[a])return gx.lang.objToArray(a.UserControls).concat(a.getUserControlGrids())});gx.util.balloon.clearAll();p.enableDisableDelete();d&&(w=m(p.loadJsonGrids,b.gxGrids,d));m(p.setErrorViewer,b.gxMessages);if(d){var E;gx.pO.supportAjaxEvents&&(E=gx.lang.arrayUnique(z.concat(x,H,w,u)));p.objectPostback(E,j);p.setFocusAfterLoad(true);gx.dom.indexElements()}o.autoRefreshing||g.endFeedback();m(gx.ajax.dispatchCommands,
b.gxCommands,g);q&&gx.fn.setCurrentGridRow(k,q);a.resolve(r)},d)}return a},swallowKeys:function(c){c.cancel=!0;c.event.preventDefault()},disableForm:function(c,a){c=void 0===c||c;gx.pO.startFeedback(a);c&&gx.fx.obs.addObserver("gx.keypress",this,this.swallowKeys)},enableForm:function(c){c=c||gx.O;gx.pO&&gx.pO.endFeedback();c!=gx.pO&&c.endFeedback();gx.fx.obs.deleteObserver("gx.keypress",this,this.swallowKeys)},isFormEnabled:function(){return gx.pO?!gx.pO.isFeedbackOn()&&!gx.O.isFeedbackOn():!0},saveFormForAutoComplete:function(){if(gx.ajax.formAutocomplete&&
!(gx.grid.drawAtServer||gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||7>=document.documentMode||7>=gx.util.browser.ieVersion()))){var j=gx.dom.form(),a=document.createElement("iframe");a.id="gx_iframe_force_ajax_autocomplete";a.name="gx_iframe_force_ajax_autocomplete";a.style.cssText="display: none";a.src="/content/blank";document.body.appendChild(a);var b=document.createElement("input");b.type="submit";b.style.cssText="display: none";j.appendChild(b);var d=j.target,f=j.action;j.target=
a.name;j.action=a.src;var g=c(b);gx.evt.attach(b,"click",function(a){a.stopPropagation();return!0});g.click();setTimeout(function(){j.target=d;j.action=f;j.removeChild(b);document.body.removeChild(a)})}},suggest:function(c,a,b,d,f,g,k){c=new gx.fx.suggestProvider(c,a,b,d);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(b),c,b,f,g,k)},hideCode:function(c,a,b){for(var d=this.objectUrl()+"?",a="gxajaxHideCode_"+a,f=c.length,g=0;g<f;g++)a+=","+encodeURIComponent(eval(c[g]));d+=gx.ajax.encryptParms(gx.O,
a);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(b,a)},d,!0,gx.http.modes.retval);return this.lastStatus},callCrl:function(c,a,b){var d=b?gx.fn.setGridComboValues:gx.fn.setComboValues,f=b?a:gx.fn.screen_CtrlRef(a).name,b=this.objectUrl()+"?",c="gxajaxCallCrl_"+a+","+this.arrayToUrl(c),b=b+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_impl(function(a){d(f,a)},b,!0,gx.http.modes.retval)},refreshGrid:function(c,a){var b=gx.O;gx.setGxO(c.parentObject);var d="GET",f=gx.ajax.gxObjectUrl(c.parentObject)+
"?",g="gxajaxGridRefresh_"+c.gridName+","+a,k;gx.fx.obs.notify("grid.onbeforerefresh",[c]);c.autoRefreshing=!0;gx.csv.autoRefreshing=c;var t=c.grid.rows.length;c.setPagingVars(0,0);if(g.length>gx.ajax.maxGETLength(gx.O)){d="POST";k=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+c.gridName)];for(var g=a.split(","),o=0,p=g.length;o<p;o++)k.push("GXParm"+o+"="+g[o])}else f+=gx.ajax.encryptParms(gx.O,g);c.grid.mask();gx.http.doCall({method:d,url:f,reqData:k,handler:function(a,b,d){gx.http.postHandler(a,
b,d,{autoRefreshing:!0});gx.fx.obs.notify("grid.onafterrefresh",[c,t,c.grid.rows.length])},always:function(){gx.csv.autoRefreshing=null;c.autoRefreshing=!1;c.grid.unmask();gx.setGxO(b)}})},newRows:function(c,a,b,d,f,g,k,t){var o=this.objectUrl()+"?",p=[],m=gx.O,c=gx.fn.gridObj(c,k?b+"_"+k:b,a);p.push("gxajaxNewRow_"+b);p.push(d);p.push(f);p.push(g);(m.IsComponent||m.IsTypeComponent)&&p.push(m.CmpContext);p=p.concat(c.getParmsValues(!1,c.postingVariables));o+=gx.ajax.encryptParms(m,p.join(","));gx.http.callBackend_simple(o,
!0);if(b=gx.http.lastResponse)b=gx.json.evalJSON(b),t.call(c,b),gx.dom.indexElements(),gx.fx.obs.notify("gx.onafterevent",[b])},loadCrl:function(c,a,b){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var d=this.objectUrl()+"?",c="gxajaxExecAct_"+c+","+this.arrayToUrl(a),d=d+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(b,a)},d,!0,gx.http.modes.retval)}},udp:function(c,a,b){var d=this.objectUrl()+"?",c=c+","+this.arrayToUrl(a),d=d+gx.ajax.encryptParms(gx.O,
c);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(b,a)},d,!0,gx.http.modes.retval)},srvEvt:function(c,a,b,d){var f=this.objectUrl()+"?",c=c+","+a+","+this.arrayToUrl(b),f=f+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend_impl(function(a){gx.fn.setVarValues(d,a)},f,!0,gx.http.modes.full)},validSrvEvt:function(){gx.fx.delayedValidation?gx.fx.obs.addObserver("gx.validation",this,this.validSrvEvt_impl.closure(this,arguments),{single:!0}):this.validSrvEvt_impl.apply(this,arguments)},validSrvEvt_impl:function(c,
a,b,d){var f=function(a){gx.csv.setValidValues(b,d,a)},g=this.objectUrl(),k=c+","+a+","+this.arrayToUrl(b,!0);k.length>this.maxGETLength(gx.O)?this.validAsPost(g,f,c,a,b):(g+="?"+gx.ajax.encryptParms(gx.O,k),gx.http.callBackend_impl(f,g,!0,gx.http.modes.call,!gx.ajax.isFormEnabled()))},validAsPost:function(c,a,b,d,f){b="GXEvent="+gx.ajax.encryptParms(gx.O,b)+"&GXAction="+d;0<f.length&&(b+="&"+this.getParmsPostData(f));gx.http.callBackend_impl(a,c,!0,gx.http.modes.call,!gx.ajax.isFormEnabled(),"POST",
b)},getParmsPostData:function(c){for(var a="",b=0;b<c.length;b++)0<b&&(a+="&"),a+="GXParm"+b+"="+this.parmToUrl(c[b],!0);return a},getCallerUrl:function(c){if(gx.stackSupported()){var c=(c=gx.call_stack_storage.get(gx.stackId(c)))||[],a=1==c.length&&c[0]!=gx.ajax.selfUrl()?c[0]:"";return a=1<c.length?c[c.length-2]:a}return gx.fn.getHidden("sCallerURL")},pushReferer:function(c,a){a="undefined"==typeof a?location.href:gx.ajax.absoluteurl(a);if(gx.stackSupported()){"undefined"==typeof c&&(c=gx.popup.popuplvl());
var b=gx.call_stack_storage.get(gx.stackId(c)),b=b||[];a!=gx.util.lastArray(b)&&b.push(a);gx.call_stack_storage.set(gx.stackId(c),b)}else{var b=this.objectUrl()+"?",d="dyncall,PushReferer,"+encodeURIComponent(a),b=b+gx.ajax.encryptParms(gx.O,d);gx.http.callBackend_simple(b,!0,!0)}},windowClosed:function(c){if(gx.stackSupported())if(-1==c){var a=gx.stackId(gx.popup.popuplvl()),c=(c=gx.call_stack_storage.get(a))||[];c.pop();gx.call_stack_storage.set(a,c)}else gx.call_stack_storage.remove(gx.stackId(c));
else a="",a=-1==c?",PopReferer":",DeleteReferer,"+c.toString(),c=this.objectUrl()+"?",c+=gx.ajax.encryptParms(gx.O,"dyncall"+a),gx.http.callBackend_simple(c,!0,!0)},aggSel:function(c,a,b){var d=this.objectUrl()+"?",c="gxajaxAggSel"+a+"_"+c+","+this.arrayToUrl(b),d=d+gx.ajax.encryptParms(gx.O,c);return gx.http.callBackend_impl(null,d,!1,gx.http.modes.retval)[0]},aggSelDecimal:function(c,a,b,d,f){return gx.num.parseFloat(this.aggSel(c,a,f),b,d)},aggSelInteger:function(c,a,b){return parseInt(this.aggSel(c,
a,b),10)},dynComponent:function(g,a,b,d){var f=c.Deferred(),g=g.toLowerCase();gx.gen.isDotNet()&&(g+=".aspx");g=gx.ajax.objectUrl(g);b="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(b)+"&GXParm0="+encodeURIComponent(d);for(d=0;d<a.length;d++)b+="&GXParm"+(d+1).toString()+"="+encodeURIComponent("function"==typeof a[d].getUrlVal?a[d].getUrlVal():a[d]);gx.http.doCall({method:"POST",url:g,reqData:b,handler:function(a,b){f.resolve(gx.json.evalJSON(b))},error:function(){f.reject()}});
return f.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(c){return c.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},getSecurityToken:function(c){if(c&&c.ajaxSecurityToken){var a="GX_AUTH_"+(c.CmpContext?c.CmpContext:"")+c.ServerClass,a=a.toUpperCase(),c=gx.fn.getHidden(a)||c.InternalParms[a];return{id:a,value:c}}},arrayToUrl:function(c,a){for(var b="",d=c.length,f=0;f<d;f++)b+=this.parmToUrl(c[f],a)+",";return b},parmToUrl:function(c,a){var b=eval(c);
if(b instanceof Array&&2==b.length&&"string"==typeof b[0]&&"string"==typeof b[1]){var d=gx.fn.vStructForVar(b[0]);null!=d&&(b=gx.fn.getGridCtrlProperty(d.grid,d.fld,b[1]))}a&&(d=gx.fn.vStructForVar(gx.unprefixVar(c)),null!=d&&gx.html.controls.isMultiSelection(d.ctrltype)&&(d=gx.fn.getControlGridRef(d.fld,d.grid),(d=gx.dom.comboBoxToObj(d,b))&&(b=d)));"object"==typeof b&&(b=gx.json.serializeJson(b));if("undefined"==typeof b||null==b){d=!1;if(c&&0===c.indexOf("gx.O.")){var c=gx.unprefixVar(c),f=gx.fn.getHidden(gx.O.CmpContext+
c);null!=f&&"undefined"!=typeof f&&(b=f,d=!0)}d||(b="")}return encodeURIComponent(b)},gxObjectUrl:function(c){var a="";c&&c.serviceUrl?a=c.serviceUrl:c.fullAjax&&c&&(a=gx.fn.getControlValue(c.CmpContext+"_CMPPGM")||"");return this.objectUrl(a)},objectUrl:function(c){var a="";c?a=c:(a=gx.csv.cmpCtx?gx.fn.getControlValue(gx.csv.cmpCtx+"_CMPPGM"):gx.ajax.selfUrl(),null!=a&&(a=a.replace(/\?.*/,""),a=a.replace(/#[\s\S]*$/,"")),a=this.objnameFromUrl(a));return this.absoluteurl(this.objToRelativeUrl(a))},
objToRelativeUrl:function(c){if(this.isabsoluteurl(c))return c;var a=location.pathname;if(null!=c){for(var b=location.pathname.split("/"),a="",d=b.length,f=1;f<d-1;f++)a+="/"+b[f];a+="/"+c}return a},isabsoluteurl:function(c){return-1!==c.search("://")},isRelativeToHost:function(c){return"/"==c.substr(0,1)},absoluteurl:function(c){if(!this.isabsoluteurl(c)){if("/"!==c.charAt(0)){for(var a="",b=location.pathname.split("/"),d=1;d<b.length-1;d++)a+="/"+b[d];return location.protocol+"//"+location.host+
a+"/"+c}return location.protocol+"//"+location.host+c}return c},objnameFromUrl:function(c){0<=c.indexOf("?")&&(c=c.split("?")[0]);var a=c.split("/"),b=a.length;return 0===b?c:a[b-1]},_init:function(){this.resourceProvider=gx.fn.getHidden("GX_RES_PROVIDER");if(gx.stackSupported()){var c=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));if(c)for(var a=0;a<c.length;a++)gx.ajax.pushReferer(gx.popup.popuplvl(),c[a]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){function c(c){var k=$("#"+c.id+"_dp_trigger");if(0<k.length)return k.get(0);k=$("[data-gx-attached-ctrl~='"+c.id+"']");if(0<k.length)return k.parent().get(0)}this.init=function(c,k){this.id=c;this.balloonid=c+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.sourceElements=k||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr="";this.active=
!1;this.errorValue=null;gx.util.balloon.lastLbl=null};this.setMessage=function(c){this.hasMessage||(this.messageWar=c,this.hasMessage=!0)};this.setError=function(c){this.hasMessage||(this.messageErr=c,this.hasMessage=this.isError=!0)};this.create=function(g,k,j,a){var b;b=document.createElement("span");b.id=g;b.className=j;g=document.createElement("div");g.style.position="absolute";g.style.zIndex=100;g.style.display="none";a=document.createTextNode(a);b.appendChild(a);g.appendChild(b);"right"==gx.csv.messagePosition||
"bottom"==gx.csv.messagePosition?(a=$(k).closest(".gx-attribute"),!0===gx.csv.overlap&&gx.runtimeTemplates&&0<a.length?a.append(g):(a=c(k))?0<=a.id.indexOf("_dp_trigger")?$(a).closest(".dp_container").append(g):$(a).after(g):$(k).after(g)):!0===gx.csv.overlap?$(k).after(g):$(k).before(g);!0===gx.csv.overlap?(b.style.position="static",b.style.zIndex="1"):(g.style.position="relative",b.style.position="relative");return b};this.getControlValue=function(){for(var c=[gx.fn.getControlValue(this.id)],k=
0,j=this.sourceElements.length;k<j;k++)c.push(gx.fn.getControlValue(this.sourceElements[k]));return c.join(";")};this.groupControl=function(c){(c=gx.dom.el(c))&&("INPUT"===c.nodeName&&"radio"===c.type)&&(c=c.parentNode&&"SPAN"==c.parentNode.tagName?c.parentNode:gx.dom.findParentByTagName(c,"table"));return c};this.hideBalloon=function(c){c=c.parentNode;try{c&&(c.style.display="none")}catch(k){gx.dbg.logEx(k,"gxballoon.js","hideBalloon")}};this.showBalloon=function(g){try{var k=gx.csv.messagePosition,
j=gx.dom.el(this.id),a=g.parentNode,b=$(a),d,f,l=gx.popup.ispopup()?"flipfit":"none",g=j,n=c(j);if(!0===gx.csv.overlap){switch(k){case "top":d="left bottom";f="left top";break;case "right":d="left center";f="right center";g=n||g;break;case "bottom":d="left top";f="left bottom";break;case "left":d="right center",f="left center"}b.fadeIn().css("display","block");b.position({my:d,at:f,of:g,collision:l})}else a.style.display=("top"==k||"bottom"==k)&&!1===gx.csv.overlap?"block":"inline"}catch(t){gx.dbg.logEx(t,
"gxballoon.js","showBalloon")}};this.show=function(c){var k,j,a,b,d,f,l,n,t,o;if(!(void 0!==document.readyState&&"complete"!=document.readyState)){try{if(!1===this.hasMessage)return!0;j=gx.dom.el(this.id);null===j&&null!==gx.csv.validatingUC&&(j=gx.csv.validatingUC.getContainerControl());"hidden"==j.type?(k=gx.dom.byId("span_"+this.id),null!==k&&(j=k)):"INPUT"===j.nodeName&&"radio"===j.type&&(n=gx.dom.byName(gx.dom.id(j)),j.parentNode&&"SPAN"==j.parentNode.tagName?j=j.parentNode:(l=n[0],j=gx.dom.findParentByTagName(j,
"table")));if(n){k=[];t=0;for(o=n.length;t<o;t++)k.push(n[t]);n=k}else{n=[j];t=0;for(o=this.sourceElements.length;t<o;t++)n.push(gx.dom.el(this.sourceElements[t]))}this.active=d=!0;0<this.messageErr.length?(a="Error",b=this.messageErr):0<this.messageWar.length&&(a="Warning",b=gx.html.encode(this.messageWar));""!==a&&(k=a+"Messages",gx.dom.addPrefixClass(j,a),(f=gx.dom.byId(this.balloonid))?(f.innerHTML=b,d=!1):f=this.create(this.balloonid,l?l:j,k,b));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl);
gx.util.balloon.lastLbl=f;!0===c?gx.csv.oneAtAtime||this.showBalloon(f):this.showBalloon(f);if(!1===gx.util.balloon.timerOn&&0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(d){gx.csv.oneAtAtime&&(gx.evt.attach(j,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(j,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this)));o=n.length;for(t=0;t<o;t++)"INPUT"===n[t].nodeName&&
"radio"===n[t].type?gx.evt.attach(n[t],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(n[t],"blur",gx.util.balloon.cvsHide,this)}this.errorValue=this.getControlValue()}catch(p){gx.dbg.logEx(p,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){var c,g,k;try{c=this.groupControl(this.id),k=this.getControlValue(),k!=this.errorValue&&(this.errorValue=k,g=gx.dom.byId(this.balloonid),null!=g&&(c&&(gx.dom.removePrefixClass(c,"Error"),gx.dom.removePrefixClass(c,"Warning")),this.hideBalloon(g),
this.active=!1))}catch(j){}},cvsMouseOutHandler:function(){if(this.active){var c=gx.dom.byId(this.balloonid);null!=c&&(gx.util.balloon.lastLbl?gx.util.balloon.lastLbl.id!=c.id&&this.hideBalloon(c):this.hideBalloon(c))}},cvsMouseOverHandler:function(){if(this.active){var c=gx.dom.byId(this.balloonid);null!=c&&this.showBalloon(c)}},clearAll:function(){var c,g,k;this.timerOn=!1;for(k in this.balloons)c=this.balloons[k],g=gx.util.balloon.cvsHide.closure(c),c.clear(),g()},clear:function(c){var g,k,j;try{g=
gx.csv.ctxControlId(c),this.balloons[g]&&(k=this.balloons[g],j=gx.util.balloon.cvsHide.closure(k),k.clear(),j())}catch(a){gx.dbg.logEx(a,"gxballoon.js","clear")}},getNew:function(c,g,k){var k=k||[],j,a,b,d=k.length;"undefined"!=typeof g&&(c=c+"_"+g);try{j=gx.fn.screen_CtrlRef(c);a=gx.dom.id(j);c=gx.csv.ctxControlId(a);for(b=0;b<d;b++)j=gx.fn.screen_CtrlRef(k[b]),a=gx.dom.id(j),k[b]=gx.csv.ctxControlId(a)}catch(f){gx.dbg.logEx(f,"gxballoon.js","getNew")}this.balloons[c]?(g=this.balloons[c],g.sourceElements=
k||[],g.clear()):(g=new this.impl,this.balloons[c]=g,g.init(c,k));return g}};
gx.grid=function(c){return{drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3,"0":"none",1:"uniform",2:"header",3:"report"},getImplClass:function(c,k){if(k){gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0);gx.lang.inherits(gx.ui.grid,
c.isResponsive?gx.grid.responsiveGrid:gx.grid.impl,!0);gx.lang.inherits(k,gx.ui.grid,!0);var j=new k(gx.$);c&&(j.ParentObject=c.parentObject,j.ControlName=c.gridName,c.parentObject.setUserControl(j));return j}return c.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(c){var k=c,k=void 0!=c?c:1;return 0!=k?k:9999},setActiveGridRow:function(c,k){"string"===typeof c&&(c=(c=gx.O.getGrid(c))?c.grid:null);c&&c.gxAllowSelection&&(gx.csv.currentGridSelection=
c,"undefined"!==typeof k&&(c.toggleRowHoverById(c.gxHoveredRowId,!1),c.gxHoveredRowId=parseInt(k,10)-1,gx.grid.clearActiveGridHandlerInstalled||(gx.fx.obs.addObserver("gx.onclick",this,gx.grid.clearActiveGridHandler),gx.grid.clearActiveGridHandlerInstalled=!0)))},clearActiveGrid:function(c){if(!c||gx.csv.currentGridSelection===c.grid)delete gx.csv.currentGridSelection,delete gx.grid.clearActiveGridHandlerInstalled,gx.fx.obs.deleteObserver("gx.onclick",this,gx.grid.clearActiveGridHandler)},clearActiveGridHandler:function(c){c=
gx.evt.source(c.event);c=gx.fn.rowGridId(c);c=gx.fn.getGridObj(c);(!c||!c.grid.gxAllowSelection)&&gx.grid.clearActiveGrid()},handleKeyUpEvt:function(c){var k=gx.csv.currentGridSelection,j=!1;if(!k||!k.gxAllowSelection||k.gxAllowHovering)return j;switch(c.keyCode){case 38:case 40:k.ownerGrid.setSelection(k.ownerGrid.getSelection(),!0),gx.evt.cancel(c,!0),j=!0}return j},handleKeyPressEvt:function(c){var k=gx.csv.currentGridSelection,j=!1;if(!k||!k.gxAllowHovering&&!k.gxAllowSelection)return j;var a=
k.gxAllowHovering;switch(c.keyCode){case 38:a?j=k.setPreviousRowHovered():k.ownerGrid.setPreviousRowSelected(!1);gx.evt.cancel(c,!0);break;case 40:a?j=k.setNextRowHovered():k.ownerGrid.setNextRowSelected(!1);gx.evt.cancel(c,!0);break;case 13:j=k.ownerGrid.setSelection(k.gxHoveredRowId)&&k.gxOnLineActivate}return j},grid:function(g,k,j,a,b,d,f,l,n,t,o,p,m,s,q,r,u,v,x,z,w,H,E,J,C,A,B,y,D,K,M,L,X,O,R,I,N,Q){var P=function(b){return function(d){d=this.parentObject.getGridById(a,d||gx.fn.currentGridRow(a));
return b.call(this,d||this)}.closure(this)}.closure(this);this.parentObject=g;this.parentObject["sub"+b+"_Rows"]=P(function(a){return a.grid.pageSize/a.grid.gxGridCols});this.parentObject[d.toUpperCase()+(n?"_MPAGE":"")+"_nFirstRecordOnPage"]=P(function(a){return a.grid.firstRecordOnPage});this.parentObject[d.toUpperCase()+(n?"_MPAGE":"")+"_nEOF"]=P(function(a){return a.grid.eof});this.gridLvl=k;this.gridLvlName=j;this.gridId=a;this.gridName=b;this.realGridName=d;this.containerName=f||this.gridName+
"Container";this.parentName=t||"";this.pagingParms=[];this.lvlKey=o||[];this.isFreestyle=p||!1;this.isResponsive=X||!1;this.allowHovering=(this.allowSelection=s||!1)&&q||!1;this.allowCollapsing=M||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=A||!1;this.hasAddlines=B||!1;this.hasForEachLine=y||!1;this.width=void 0!=w?w:0;this.widthUnit=H||"";this.height=void 0!=E?E:0;this.heightUnit=J||"";this.gridCols=void 0!=
m?m:1;this.gridCols=0!=this.gridCols?this.gridCols:9999;this.gridRows=void 0!=r?r:5;this.gridResponsiveCols=O||[1,1,1,1];this.usePaging=(this.usePaging=u||!1)&&!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=v||!1;this.defaultSetsContext=x||!1;this.boundedCollType=z||"";this.boundedCollName=L||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=l;this.isMasterPageGrid=n;this.htmlTags="";this.onLineActivate=K;this.addingRows=!1;
this.deleteMethod=gx.grid.deleteMethod;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.IsValidState=[];this.implClass=D;this.grid=gx.grid.getImplClass(this,D);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=
this.width;this.grid.gxWidthUnit=this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=
this.gxComponentContext;this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=void 0!=C?C:"New Row";this.grid.beforeRenderCallbacks=[];this.grid.isAbstract=N;this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.useUserControlModelValues=function(){return this.isUsercontrol&&
!this.grid.useNativeChildControls};this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.grid.selectedRows=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.grid.useHiddensForControlValues=this.isUsercontrol&&(this.grid.useHiddensForControlValues||"undefined"===this.grid.useHiddensForControlValues);this.gxCreateGridCode=function(a){var b,d=new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+"_"+a,this.gridName,
this.containerName+"_"+a,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaultSetsContext,this.boundedCollType,this.width,this.widthUnit,this.height,this.heightUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing,this.boundedCollName,this.isResponsive,this.gridResponsiveCols,
!1,0,this.grid.isAbstract,this.InverseLoading),c=this.grid,f=d.grid;f.ControlLvl=this.gridLvl;f.GridId=this.gridId;f.GridRow=a;f.GridBaseName=this.gridName;if(c.Properties)for(b in c.Properties)f.setProp(b,c.Properties[b],c[b],c.PropTypes[b]);if(c.DynProperties){a=0;for(len=c.DynProperties.length;a<len;a++)b=c.DynProperties[a],f.setDynProp(b,c.Properties[b],c[b],c.PropTypes[b],!0)}return d}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=this.usePaging;this.grid.eof=this.eof;this.grid.firstRecordOnPage=
this.firstRecordOnPage;this.postingVariables=[];this.InfiniteScrolling=R;this.InverseLoading=Q;this.ScrollType=I;this.isAbstract=N;this.addColumnDinCode=function(a,b){this.gxAddColumnsCode.push(function(){a.apply(this,b)})};this.addSingleLineEdit=function(a,b,d,c,f,g,j,k,l,n,y,m,q,s,r,t,D,p,o,K,u,M,v,L){this.addColumnDinCode(this.addSingleLineEdit,arguments);var w=this.newColumn(c,j,m,k);w.visible=D;w.htmlName=d;w.gxId=b;w.gxAttId=a;w.gxAttName=g;w.gxTooltip=f;w.gxWidthUnit=l;w.gxColSize=y;w.gxSetsContext=
o;w.gxCssClass=u;w.gxColumnClass=v;w.gxColumnHeaderClass=L;w.gxControl=new gx.html.controls.singleLineEdit;w.gxControl.column=w;w.gxControl.isPassword=K;w.gxControl.visible=w.visible;w.gxControl.dataType=w.type;w.gxControl.clickEvent=q;this.grid.addColumn(w)};this.addPostingVar=function(a){this.postingVariables.push(a)};this.addMultipleLineEdit=function(a,b,d,c,f,g,j,k,l,n,y,m,q,s,r,t,D,p){this.addColumnDinCode(this.addMultipleLineEdit,arguments);var o=this.newColumn(c,g,q,j);o.visible=r;o.htmlName=
d;o.gxId=b;o.gxAttId=a;o.gxAttName=f;o.gxWidthUnit=k;o.gxSetsContext=t;o.gxColumnClass=p;o.gxControl=new gx.html.controls.multipleLineEdit;o.gxControl.column=o;o.gxControl.dataType=o.type;o.gxControl.visible=o.visible;o.gxControl.heightUnit=n;o.gxControl.clickEvent=s;this.grid.addColumn(o)};this.addBlob=function(a,b,d,c,f,g,j,k,l,n,y,m,q,s){this.addColumnDinCode(this.addBlob,arguments);var r=this.newColumn(c,g,"left",l);r.visible=m;r.htmlName=d;r.gxId=b;r.gxAttId=a;r.gxAttName=f;r.gxWidthUnit=y;r.gxSetsContext=
q;r.gxColumnClass=s;r.gxControl=new gx.html.controls.blob;r.gxControl.column=r;r.gxControl.dataType=r.type;r.gxControl.visible=r.visible;r.gxControl.height=k;r.gxControl.width=l;this.grid.addColumn(r)};this.addRadioButton=function(a,b,d,c,f,g,j,k,l,n,y){this.addColumnDinCode(this.addRadioButton,arguments);var m=this.newColumn(c,g,"left","");m.visible=l;m.htmlName=d;m.gxId=b;m.gxAttId=a;m.gxAttName=f;m.gxSetsContext=n;m.gxColumnClass=y;m.gxControl=new gx.html.controls.radio;m.gxControl.column=m;m.gxControl.dataType=
m.type;m.gxControl.vertical=k;m.gxControl.visible=m.visible;m.gxControl.clickEvent=j;this.grid.addColumn(m)};this.addComboBox=function(a,b,d,c,f,g,j,k,l,n,y,m,q){this.addColumnDinCode(this.addComboBox,arguments);var r=this.newColumn(c,g,"left",y);r.visible=l;r.htmlName=d;r.gxId=b;r.gxAttId=a;r.gxAttName=f;r.gxSetsContext=n;r.gxWidthUnit=m;r.gxColumnClass=q;r.gxControl=new gx.html.controls.comboBox;r.gxControl.column=r;r.gxControl.dataType=r.type;r.gxControl.rtEnabled=1==k;r.gxControl.visible=r.visible;
r.gxControl.clickEvent=j;this.grid.addColumn(r)};this.addListBox=function(a,b,d,c,f,g,j,k,l,n,y,m,q,r){this.addColumnDinCode(this.addListBox,arguments);var s=this.newColumn(c,g,"left",y);s.visible=l;s.htmlName=d;s.gxId=b;s.gxAttId=a;s.gxAttName=f;s.gxSetsContext=n;s.gxWidthUnit=m;s.gxColumnClass=q;s.gxControl=new gx.html.controls.listBox;s.gxControl.column=s;s.gxControl.dataType=s.type;s.gxControl.rows=void 0!==r?r:4;s.gxControl.rtEnabled=1==k;s.gxControl.visible=s.visible;s.gxControl.clickEvent=
j;this.grid.addColumn(s)};this.addCheckBox=function(a,b,d,c,f,g,j,k,l,n,y,m,q,r,s){this.addColumnDinCode(this.addCheckBox,arguments);var t=this.newColumn(c,j,"left",q);t.visible=y;t.htmlName=d;t.gxId=b;t.gxAttId=a;t.gxAttName=g;t.gxChecked=k;t.gxUnChecked=l;t.gxSetsContext=m;t.gxWidthUnit=r;t.gxColumnClass=s;t.gxControl=new gx.html.controls.checkBox;t.gxControl.column=t;t.gxControl.checkedValue=k;t.gxControl.uncheckedValue=l;t.gxControl.dataType=t.type;t.gxControl.visible=t.visible;t.gxControl.clickEvent=
n;this.grid.addColumn(t)};this.addBitmap=function(a,b,d,c,f,g,j,k,l,n,y,m){this.addColumnDinCode(this.addBitmap,arguments);var q=this.newColumn(n,"","left",c);q.htmlName=b;q.gxId=d;q.gxAttId=a;q.gxWidthUnit=f;q.gxControl=new gx.html.controls.image;q.gxControl.column=q;q.gxControl.dataType=q.type;q.gxControl.width=c;q.gxControl.widthUnit=f;q.gxControl.height=g;q.gxControl.heightUnit=j;q.gxControl.clickEvent=k;q.gxCssClass=y;q.gxColumnClass=m;this.grid.addColumn(q)};this.addVideo=function(a,b,d,c,f,
g,j,k,l,n,y,m){this.addColumnDinCode(this.addVideo,arguments);var q=this.newColumn(n,"","left",c);q.htmlName=b;q.gxId=d;q.gxAttId=a;q.gxWidthUnit=f;q.gxControl=new gx.html.controls.video;q.gxControl.column=q;q.gxControl.dataType=q.type;q.gxControl.width=c;q.gxControl.widthUnit=f;q.gxControl.height=g;q.gxControl.heightUnit=j;q.gxControl.clickEvent=k;q.gxCssClass=y;q.gxColumnClass=m;this.grid.addColumn(q)};this.addAudio=function(a,b,d,c,f,g,j,k,l,n,y,m){this.addColumnDinCode(this.addAudio,arguments);
var q=this.newColumn(n,"","left",c);q.htmlName=b;q.gxId=d;q.gxAttId=a;q.gxWidthUnit=f;q.gxControl=new gx.html.controls.audio;q.gxControl.column=q;q.gxControl.dataType=q.type;q.gxControl.width=c;q.gxControl.widthUnit=f;q.gxControl.height=g;q.gxControl.heightUnit=j;q.gxControl.clickEvent=k;q.gxCssClass=y;q.gxColumnClass=m;this.grid.addColumn(q)};this.addFile=function(a,b,d,c,f,g,j,k,l,n,y,q){this.addColumnDinCode(this.addVideo,arguments);var m=this.newColumn(n,"","left",c);m.htmlName=b;m.gxId=d;m.gxAttId=
a;m.gxWidthUnit=f;m.gxControl=new gx.html.controls.file;m.gxControl.column=m;m.gxControl.dataType=m.type;m.gxControl.width=c;m.gxControl.widthUnit=f;m.gxControl.height=g;m.gxControl.heightUnit=j;m.gxControl.clickEvent=k;m.gxCssClass=y;m.gxColumnClass=q;this.grid.addColumn(m)};this.addTextBlock=function(a,b,d){this.addColumnDinCode(this.addTextBlock,arguments);var c=this.newColumn("","","left");c.gxId=d;c.htmlName=a;c.gxControl=new gx.html.controls.textBlock;c.gxControl.column=c;c.gxControl.dataType=
c.type;c.gxControl.clickEvent=b;this.grid.addColumn(c)};this.addLabel=function(a){this.addColumnDinCode(this.addLabel,arguments);var b=this.newColumn("","","left");b.htmlName=a;b.gxControl=new gx.html.controls.label;b.gxControl.column=b;this.grid.addColumn(b)};this.addButton=function(a,b,d,c,f){this.addColumnDinCode(this.addButton,arguments);var g=this.newColumn("","","left");g.htmlName=b;g.gxId=a;g.gxControl=new gx.html.controls.button;g.gxControl.column=g;g.gxControl.dataType=g.type;this.grid.addColumn(g)};
this.addGrid=function(a){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(a);var b=this.newColumn("","","left");b.htmlName=a.getContainerControlId();b.gxControl=new gx.html.controls.grid;b.gxControl.column=b;this.grid.addColumn(b)};this.addUsercontrol=function(a,b,d,c,f,g,j,k,l,m){this.addColumnDinCode(this.addUsercontrol,arguments);var n="",y=this.parentObject;y.GridUCsProps&&y.GridUCsProps[f]&&(n=y.GridUCsProps[f].title||"");n=this.newColumn(n,"","left");n.gxUCId=a;n.gxUCLastId=
b;n.gxUCClassName=d;n.gxUCContainerName=c;n.gxUCControlName=f;n.gxUCFieldName=g;n.gxShowFunc=j;n.gxC2VFuncs=k;n.gxV2CFuncs=l;n.visible=m;n.gxControl=new gx.html.controls.userControl;n.gxControl.column=n;n.gxControl.dataType=n.type;this.grid.addColumn(n)};this.startContainer=function(){this.addColumnDinCode(this.startContainer,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.userControlContainer;a.gxControl.column=a;a.gxControl.dataType=a.type;this.grid.addColumn(a)};
this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("</div>")};this.addWebComponent=function(a){this.addColumnDinCode(this.addWebComponent,arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.webComponent;b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addEmbeddedPage=function(a){this.addColumnDinCode(this.addEmbeddedPage,arguments);var b=this.newColumn("","","left");b.gxControl=new gx.html.controls.embeddedPage;
b.gxControl.column=b;b.gxControl.dataType=b.type;this.grid.addColumn(b)};this.addHtmlCode=function(a){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(a)};this.startTable=function(a,b,d){this.addColumnDinCode(this.startTable,arguments);var c=this.newColumn("","","left");c.gxId=b;c.htmlName=a+"_"+b;c.gxControl=new gx.html.controls.table;c.gxControl.column=c;c.gxControl.width=d;c.gxControl.dataType=c.type;this.grid.addColumn(c)};this.endTable=function(){this.addColumnDinCode(this.endTable,
arguments);this.currentBuffer.append("</table>")};this.startRow=function(a,b,d,c,f,g){this.addColumnDinCode(this.startRow,arguments);var j=this.newColumn("","","left");j.gxControl=new gx.html.controls.row;j.gxControl.column=j;j.gxControl.title=a;j.gxControl.align=b;j.gxControl.verticalAlign=d;j.gxControl.backColor=c;j.gxControl.borderColor=f;j.gxControl.cssClass=g;j.gxControl.ownCssClass=g;j.gxControl.dataType=j.type;this.grid.addColumn(j)};this.endRow=function(){this.addColumnDinCode(this.endRow,
arguments);this.currentBuffer.append("</tr>")};this.startCell=function(a,b,d,c,f,g,j,k,l,n){this.addColumnDinCode(this.startCell,arguments);var m=this.newColumn("","","left");m.gxControl=new gx.html.controls.cell;m.gxControl.column=m;m.gxControl.title=a;m.gxControl.align=b;m.gxControl.verticalAlign=d;m.gxControl.backColor=c;m.gxControl.borderColor=f;m.gxControl.height=g;m.gxControl.width=j;m.gxControl.colSpan=k;m.gxControl.rowSpan=l;m.gxControl.cssClass=n;m.gxControl.dataType=m.type;this.grid.addColumn(m)};
this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("</div>"):this.currentBuffer.append("</td>")};this.startGroup=function(a,b,d,c,f){this.addColumnDinCode(this.startGroup,arguments);var g=this.newColumn("","","left");g.htmlName=a;g.gxControl=new gx.html.controls.group;g.gxControl.column=g;g.gxControl.id=a;g.gxControl.caption=b;g.gxControl.height=d;g.gxControl.width=c;g.gxControl.cssClass=f;g.gxControl.dataType=g.type;this.grid.addColumn(g)};
this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("</fieldset>")};this.startDiv=function(a,b,d,c){this.addColumnDinCode(this.startDiv,arguments);var f=this.newColumn("","","left");f.gxId=a;f.htmlName=b+"_"+a;f.gxControl=new gx.html.controls.div;f.gxControl.column=f;f.gxControl.width=c;f.gxControl.height=d;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);var a=this.newColumn("","",
"left");a.gxControl=new gx.html.controls.divEnd;a.gxControl.column=a;this.grid.addColumn(a)};this.startFormGroup=function(a,b,d,c){this.addColumnDinCode(this.startFormGroup,arguments);var f=this.newColumn("","","left");f.gxId=a;f.htmlName=b+"_"+a;f.gxControl=new gx.html.controls.formGroup;f.gxControl.column=f;f.gxControl.width=c;f.gxControl.height=d;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.endFormGroup=function(){this.addColumnDinCode(this.endFormGroup,arguments);var a=this.newColumn("",
"","left");a.gxControl=new gx.html.controls.formGroupEnd;a.gxControl.column=a;this.grid.addColumn(a)};this.newColumn=function(a,b,d,c){b=this.getColumnType(b);a=new gx.grid.column(a,b,c,d);this.currentBuffer=a.buffer;a.htmlName="";a.gxId="";a.gxAttId="";a.gxAttName="";return a};this.getColumnType=function(a){switch(a){case "decimal":case "int":a=gx.types.numeric;break;case "date":a=gx.types.date;break;case "dtime":a=gx.types.dateTime;break;case "boolean":a=gx.types.bool;break;case "GeneXus\\Geolocation":a=
gx.types.geolocation;break;default:a=gx.types.character}return a};this.addOldComponent=function(a,b){"undefined"==typeof this.oldCmps[a]&&(this.oldCmps[a]=[]);this.oldCmps[a].push(b)};this.updateOldComponents=function(){for(var a=this.grid.rows.length,b=0;b<a;b++)delete this.oldCmps[this.grid.rows[b].gxId];for(var d in this.oldCmps){for(a=this.oldCmps[d];0<a.length;)b=a.shift(),gx.fn.deleteHidden(b);delete this.oldCmps[d]}};this.addHidden=function(a){this.hiddens.push(a)};this.addHiddenControl=function(a,
b,d){gx.fn.setHidden(a,b);!0!=d&&this.addHidden(a)};this.clearHiddens=function(){for(;0<this.hiddens.length;){var a=this.hiddens.shift();gx.fn.deleteHidden(a)}};var F={};this.setHtmlTags=function(a){gx.lang.apply(F,a);var b;b=' style="'+("0"==F.Visible?"display:none;":"");var a=""+(' class="'+F.Class+'"'),d=gx.lang.emptyObject;b+=!d(F.Background)?"background:"+F.Background+";":"";b+=!d(F.Backcolor)&&"0"!=F.Backcolor?"background-color:"+gx.color.html(F.Backcolor).Html+";":"";b+=!d(F.Bordercolor)&&
"0"!=F.Bordercolor?"border-color:"+gx.color.html(F.Bordercolor).Html+";":"";b+=!d(F.Borderwidth)&&"0"!=F.Borderwidth?" border-width:"+F.Borderwidth+";":"";b+=!d(F.Width)&&"0"!=F.Width?" width:"+gx.dom.addUnits(F.Width,this.width==F.Width?this.widthUnit:"")+";":"";b+=!d(F.Height)&&"0"!=F.Height?"max-height:"+gx.dom.addUnits(F.Height,this.height==F.Height?this.heightUnit:"")+";":"";a+=!d(F.Align)?' align="'+F.Align+'"':"";a+=!d(F.Tooltiptext)?' title="'+F.Tooltiptext+'"':"";a+=!d(F.Cellpadding)?' data-cellpadding="'+
F.Cellpadding+'"':"";a+=!d(F.Cellspacing)?' data-cellspacing="'+F.Cellspacing+'"':"";this.htmlTags=gx.text.trim(a+(b+'"'));this.grid.gxHtmlTags=this.htmlTags;d(F.Width)||(this.grid.gxWidth=F.Width);d(F.Height)||(this.grid.gxHeight=F.Height)};var G={};this.setGridStyles=function(a){gx.lang.apply(G,a);this.grid.header=a.Header;this.visible=void 0!=G.Visible?gx.lang.gxBoolean(G.Visible):!0;this.setSortable(void 0!=G.Sortable?gx.lang.gxBoolean(G.Sortable):!0);this.background=void 0!=G.Background?G.Background:
"";this.cssClass=void 0!=G.Class?G.Class:"";this.titleBackstyle=void 0!=G.Backcolorstyle?G.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=G.Titlefont?G.Titlefont:"";this.linesFont=void 0!=G.Linesfont?G.Linesfont:"";this.borderWidth=void 0!=G.Borderwidth?G.Borderwidth:"";this.toolTipText=void 0!=G.Tooltiptext?G.Tooltiptext:"";try{this.backcolor=void 0!=G.Backcolor?gx.color.html(G.Backcolor).Html:"",this.titleBackcolor=void 0!=G.Titlebackcolor?gx.color.html(G.Titlebackcolor).Html:"",this.titleForecolor=
void 0!=G.Titleforecolor?gx.color.html(G.Titleforecolor).Html:"",this.linesBackcolorOdd=void 0!=G.Backcolorodd?gx.color.html(G.Backcolorodd).Html:"",this.linesBackcolorEven=void 0!=G.Backcoloreven?gx.color.html(G.Backcoloreven).Html:"",this.bordercolor=void 0!=G.Bordercolor?gx.color.html(G.Bordercolor).Html:""}catch(b){gx.dbg.logEx(b,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=G.Borderwidth?G.Borderwidth:"";this.toolTipText=void 0!=G.Tooltiptext?G.Tooltiptext:"";this.grid.gxCssClass="";
this.grid.gxTitleClass="";this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;
this.grid.gxBorderWidth=this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=
this.cssClass+"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};
this.setSortable=function(a){if(this.sortable!=a){this.sortable=a;for(var b=this.grid.columns.length,d=0;d<b;d++)this.grid.columns[d].sortable=a}};this.lastRowId=0;this.addRow=function(a){var b,d,c,f=this.lastRowId++,g=gx.grid.rowId(f+1),g=new gx.grid.row(f,a,g,this.grid.gxParentRowId);g.gxCmpContext=this.gxComponentContext;g.Grids=a.Grids;g.ownerGrid=this;g.gxLvl=this.gridLvl;this.setRowHiddens(a.Hiddens);for(var j=this.grid.columns,k=j.length,l=0;l<k;l++){var n=j[l];if(0!==f){c=this.grid.rows[0].gxProps[l];
b=a.Props[l].length;for(d=this.grid.rowsValues?c.length-1:c.length;b<d;b++)g.gxProps[l].push(c[b])}d=a.Props[l];d=d[d.length-1];if((c=this.grid.rowsValues)&&!this.autoRefreshing)b=c[f],void 0!==b&&0<b.length&&(d=c[f][l]);g.values[l]=d;this.grid.rowsValues&&g.gxProps[l].push(d);this.parentObject.isTransaction()&&(n=this.columnIndexInKey(n.gxAttId),-1!=n&&(g.gxKeyValues[n]=d))}this.isFreestyle&&(g.IsNew=!0,this.installChildGrids(g));this.grid.addRow(g);return g};this.installChildGrids=function(a){for(var b=
this.childGrids.length,d=0;d<b;d++){var c=this.childGrids[d],f=c.gxCreateGridCode(a.gxId);f.grid.parentGxObject=this.parentObject;var g=(!f.isMasterPageGrid?this.grid.gxCmpContext:"MP")+f.realGridName+"Container";f.gxContainerDivName=g+"Div_"+a.gxId;f.gxContainerDataName=g+"Data_"+a.gxId;f.gxContainerValuesName=g+"DataV_"+a.gxId;a.gxGrids.push(f);f.parentGrid=this;f.parentRow=a;this.parentObject.setGrid(f);c.copyPropertiesTo(f);f.grid.gxCmpContext=this.grid.gxCmpContext;f.grid.gxParentRowId=a.gxId;
this.installChildGridColumns(f,c)}};this.installChildGridColumns=function(a,b){for(var d=b.gxAddColumnsCode.length,c=0;c<d;c++)b.gxAddColumnsCode[c].call(a)};this.copyPropertiesTo=function(a){a.cssClass=this.cssClass;a.titleBackstyle=this.titleBackstyle;a.titleBackcolor=this.titleBackcolor;a.linesBackcolorOdd=this.linesBackcolorOdd;a.linesBackcolorEven=this.linesBackcolorEven;a.grid.gxCssClass=this.grid.gxCssClass;a.grid.gxTitleClass=this.grid.gxTitleClass;a.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;
a.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;a.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;a.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(a){if(a&&this.parentObject.isTransaction())for(var b in a)gx.fn.setHidden(b,a[b])};this.executeEvent=function(a,b){gx.evt.setGridEvt(this.gridId.toString(),b);this.instanciateRow(b);this.parentObject[a].call(this.parentObject,b)};this.getHiddenName=function(a){var b="";this.parentRow&&(b="_"+this.parentRow.gxId);return this.grid.gxCmpContext+
this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":"")+"_"+a+b};this.updatePagingVars=function(a,b){void 0==a&&void 0==b?(this.grid.eof=gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):(this.grid.eof=a,this.grid.firstRecordOnPage=b)};this.setPagingVars=function(a,b){this.grid.eof=a;this.grid.firstRecordOnPage=b;gx.fn.setHidden(this.getHiddenName("nEOF"),a);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),
b)};this.clearDefaultEventHandlers=function(){var a=0;if(this.defaultDragable||this.defaultSetsContext)for(var a=this.grid.rows.length,b=0;b<a;b++){var d=this.containerName+"Row_"+this.grid.rows[b].gxId;this.defaultDragable&&gx.fx.dnd.deleteSource(d);this.defaultSetsContext&&gx.fx.ctx.deleteSetter(d)}a=this.grid.columns.length;for(b=0;b<a;b++)if(d=this.grid.columns[b],!0==d.gxSetsContext)for(var c=this.grid.rows.length,f=0;f<c;f++)gx.fx.ctx.deleteSetter(d.htmlName+"_"+this.grid.rows[f].gxId)};this.setDefaultEventHandlers=
function(){var a=0,b=this.additiveResponse?this.firstAdditiveRow:0,d=this.getRowAsTypes();if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType))for(var a=this.grid.rows.length,c=b;c<a;c++){var f=this.gxComponentContext+this.containerName+"Row_"+this.grid.rows[c].gxId,f=gx.dom.byId(f);null!=f&&(f.gxGrid=this.containerName,f.gxGridName=this.gridName,f.gxId=this.grid.rows[c].gxId);f=this.containerName+"Row_"+this.grid.rows[c].gxId;g=function(a){return this.returnRowData(a)}.closure(this);
this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,f,this.cssClass,d,g);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,f,this.cssClass,d,g)}else{var a=this.grid.gxCmpContext+this.containerName+"Div",g=function(){return this.returnGridData()}.closure(this);this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,a,this.cssClass,[this.boundedCollType],g);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,a,this.cssClass,[this.boundedCollType],g)}if(this.parentGrid){g=
gx.fx.ctx.setters[this.gxComponentContext+this.realGridName+"ContainerTbl"];a=this.grid.rows.length;for(c=b;c<a;c++)f=this.containerName+"Row_"+this.grid.rows[c].gxId,g&&g.hdl&&gx.fx.ctx.addSetter(this.parentObject,f,this.cssClass,d,g.hdl)}if(!this.additiveResponse){a=this.grid.columns.length;for(c=0;c<a;c++)if(d=this.grid.columns[c],!0==d.gxSetsContext){f=this.grid.rows.length;for(g=b;g<f;g++){var j=gx.dom.el(this.gxComponentContext+d.htmlName+"_"+this.grid.rows[g].gxId,!0);null!=j&&(j.gxHtmlName=
d.htmlName,gx.fx.ctx.addSetter(this.parentObject,d.htmlName+"_"+this.grid.rows[g].gxId,"",[d.gxAttName],this.returnColumnContext))}}}};this.infinite_scrolling_before_scroll=function(){!0!==this.isScrolling&&(this.mock_element=c('<div class="gx-grid-loading">'+gx.getMessage("GXM_Loading")+"</div>"),this.mock_element.insertAfter(c("#"+(this.gxComponentContext+this.containerName+"Tbl"))),this.isScrolling=!0)};this.remove_loading_message=function(){this.mock_element&&(c(this.mock_element).remove(),this.mock_element=
void 0)};this.infinite_scrolling_after_scroll=function(){c("#"+(this.gxComponentContext+this.containerName+"Tbl"));this.fixColumnsWidth(this.fixedColumnsWidth);this.isScrolling=!1;this.remove_loading_message()};this.fixColumnsWidth=function(a){this.isFreestyle||(rows=c("#"+(this.gxComponentContext+this.containerName+"Tbl")).find("tbody tr[data-gxrendering_row]"),c.each(rows,function(b,d){c(d).children().map(function(b,d){c(d).width(a[b])})}),rows.removeAttr("data-gxrendering_row"))};this.unInstallScrollListener=
function(){this.ScrollingElement&&(c(this.ScrollingElement).scrollTop(0),this.ScrollingElement.removeEventListener("scroll",this.ScrollingHandler,{passive:!0}))};this.installScrollListener=function(a){var b,d,f,g,j=gx.grid.scrollingThreshold||4,k=function(){var d,f,g,k,l;if(this.InverseLoading)return a.scrollTop<=30*a.clientHeight/100;1==this.ScrollType?(g=c(window),d=c(document).height(),f="CSS1Compat"===(document.compatMode||""),f=void 0!==window.pageXOffset?window.pageYOffset:f?document.documentElement.scrollTop:
document.body.scrollTop,g=g.height()):(d=a.scrollHeight,f=a.scrollTop,g=a.clientHeight);k=f;l=b;b=k;return k<l?!1:d-f-g<g*j}.closure(this),l=this;d=!0;g=function(){d=!0;f&&(f=!1,l.ScrollingHandler())};b=0;f=!1;this.ScrollingHandler=function(){gx.lang.requestAnimationFrame(function(){if(d){var a=l.grid;!0!==l.isScrolling&&(!a.isLastPage()&&k())&&(l.infinite_scrolling_before_scroll(),a.changeGridPage("NEXT",!1));d=!1;setTimeout(g,300)}else f=!0})};a.addEventListener("scroll",this.ScrollingHandler,{passive:!0})};
this.installFixedGridHeader=function(){if(!this.usePaging&&!this.InfiniteScrolling&&!this.isFreestyle&&this.grid.gxHeight&&0<this.grid.rows.length){var a=this.getContainerControl();if(a){var b=c(a),d=this,f=this.gxComponentContext+this.containerName+"Tbl",a=c("#"+f),g=a.find("tbody tr:first").children(),j=c("#"+f+"> tbody"),k=c("#"+f+"> thead > tr"),l=c("#"+f+"> thead"),f=gx.util.browser.isOldIE();this.fixedContainerWidth||(this.fixedContainerWidth=a.width());this.fixedColumnsWidth||(this.fixedColumnsWidth=
g.map(function(){return c(this).width()}).get());b.addClass("gx-infinite-scrolling-container");if(!this.width||f)f?(b.addClass("gx-grid-fixed-header-ie7"),b.wrap("<div style='position:relative;'>"),a.css("width",""),b.width(this.fixedContainerWidth+c.position.scrollbarWidth()+2),g=l.position(),k.css("top",g.top),g=k.outerHeight(!0),b.css("paddingTop",gx.dom.addUnits(g,"px")),a.attr("data-bkgstyle",""),g=a.css("background-color"),l=k.css("background-color"),g&&(!l||"transparent"===l)&&k.css("background-color",
g)):a.width(this.fixedContainerWidth+c.position.scrollbarWidth()+2);0<this.fixedColumnsWidth.length&&(a.find("thead tr").children().each(function(a,b){c(b).width(d.fixedColumnsWidth[a])}),this.fixColumnsWidth(this.fixedColumnsWidth));j.addClass("gx-infinite-scrolling-element");b=!f?j:b;a.css("max-height","");b.css({"max-height":gx.dom.addUnits(this.grid.gxHeight,this.grid.gxHeight==this.height?this.heightUnit:"px")})}}};this.handleInfiniteScrolling=function(){if(this.InfiniteScrolling){var a=this.getContainerControl();
if(a){var b=c(a);b.removeClass("gx-infinite-scrolling-container");if(0<this.grid.rows.length){var d=this,f=this.gxComponentContext+this.containerName+"Tbl",g=this.grid.scroll_last_row_selector(this.gridRows),j=this.grid.scroll_first_row_selector(this.gridRows),k;if(1==this.ScrollType)k=window,this.fixedColumnsWidth=[];else{this.ScrollingHeight&&c(k).css({height:this.ScrollingHeight});var l=c("#"+f),n=l.find("tbody tr:first").children(),m=c("#"+f+">tbody"),y=c.grep(this.grid.columns,function(a){return!0==
a.visible}).length;this.fixedColVisibleCount!=y&&(this.fixedColVisibleCount=y,this.isFreestyle||(this.fixedColntainerWidth=l.width(),this.fixedColumnsWidth=n.map(function(){return this.offsetWidth}).get()));b.addClass("gx-infinite-scrolling-container");this.isFreestyle||l.width(this.fixedColntainerWidth+c.position.scrollbarWidth()+2);!this.isFreestyle&&0<this.fixedColumnsWidth.length&&(l.find("thead tr").children().each(function(a,b){c(b).width(d.fixedColumnsWidth[a])}),this.fixColumnsWidth(this.fixedColumnsWidth));
k=0<m.length?m[0]:a;c(k).addClass("gx-infinite-scrolling-element")}this.ScrollingHeight&&1!=this.ScrollType&&c(k).css({height:this.ScrollingHeight});this.ScrollingElement=k;this.infinitScrollingInstalled=!0;this.grid.firstItemSelector="#"+f+j;this.grid.lastItemSelector="#"+f+g;var a=this.InverseLoading?this.grid.firstItemSelector:this.grid.lastItemSelector,q=this.infinite_scrolling_before_scroll.closure(this),r;1!=this.ScrollType&&(r=c(k).height()-2,c(k).css({height:r}));this.ScrollingHeight||(this.ScrollingHeight=
r);if(k){var s=0,t=function(){var a=false;if(s==10){s=0;return false}(a=this.InverseLoading?k.scrollTop==0:this.ScrollType==1?gx.popup.ispopup()?document.body.scrollHeight<document.body.clientHeight:document.body.scrollHeight<=document.body.clientHeight:k.clientHeight==k.scrollHeight)&&s++;return a}.closure(this),D=function(){if(!this.grid.isLastPage()&&t()){q();return this.grid.changeGridPage("NEXT",false).then(function(){if(d.InverseLoading)k.scrollTop=k.scrollHeight;D()})}}.closure(this);gx.lang.requestAnimationFrame(function(a,
b,d,c){D();this.installScrollListener(a,b,d,c)}.closure(this,[this.ScrollingElement,f,m,a]))}}}}};this.returnColumnContext=function(a){var b="",b="SPAN"==a.nodeName?gx.dom.spanValue(a):gx.fn.getControlValue_impl(a.id);return null!=b?b:""};this.returnRowData=function(a){var b={};if(a=this.grid.getRowByGxId(a.gxId))for(var d=this.grid.columns.length,c=0;c<d;c++){var f=this.grid.columns[c].gxAttName;""!=f&&(b[f]=a.values[c])}return b};this.returnGridData=function(){for(var a=[],b=this.grid.rows.length,
d=0;d<b;d++){var c={};a[d]=c;for(var f=this.grid.rows[d],g=this.grid.columns.length,j=0;j<g;j++){var k=this.grid.columns[j].gxAttName;""!=k&&(c[k]=f.values[j])}}return a};this.doDrop=function(a){this.getNewRows(void 0!=a.length?ropObj.length:1,null,function(b){this.addDropedRows(b,a)})};this.addDropedRows=function(a,b){a.gxHiddens&&gx.fn.setJsonHiddens(null,a.gxHiddens);var a=a.gxContainer?a.gxContainer:a,d=b.length;if(void 0!=d)for(var c=0;c<d;c++)this.setDroppedRow(a[c],b[c]);else this.setDroppedRow(a[0],
b);this.setNewRows(a)};this.setDroppedRow=function(a,b){for(var d=this.grid.columns.length,c=0;c<d;c++){var f=a.Props[c],g=this.grid.columns[c].gxAttName,j="";""!=g&&void 0!=b[g]&&(j=b[g]);f.Value=j;f.FormattedValue=j}};this.getRowAsTypes=function(){for(var a=[],b=this.grid.columns.length,d=0;d<b;d++){var c=this.grid.columns[d].gxAttName;""!=c&&a.push(c)}return a};this.addRows=function(a){var b=a.Count;this.grid.rowsValues=a.values;for(var d=0;d<b;d++)this.addRow(a[d])};this.lastRowIsModified=function(){if(0==
this.grid.rows.length)return!1;var a=this.grid.rows[this.grid.rows.length-1];return a.gxExists()||a.gxIsMod()?!0:!1};this.getNewRows=function(a,b,d){var d=void 0!=d?d:this.setNewRows,c=gx.util.browser.isFirefox()?"keypress":"keydown";null==b||(b.type==c&&(32==b.charCode||32==b.keyCode||13==b.keyCode)||"click"==b.type)&&(0==this.grid.rows.length||this.lastRowIsModified())?(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,a+this.lastRowId,this.lastRowId+
1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,d),gx.csv.pkDirty=!1,null!=b&&gx.evt.cancel(b,!0)):null!=b&&(32==b.keyCode||13==b.keyCode)&&gx.evt.cancel(b,!0)};this.setNewRows=function(a){return this.setNewRows_impl(a,function(){this.refreshGrid({loadChildGrids:!1});this.grid.execShowFunction&&this.grid.execShowFunction()})};this.loadNewRows=function(a){a.gxHiddens&&gx.fn.setJsonHiddens(null,a.gxHiddens);a=a.gxContainer?a.gxContainer:a;return this.setNewRows_impl(a,
function(a){this.loadGrid({rowProps:a,isPostback:!0,addRows:!0})})};this.setNewRows_impl=function(a,b){a.gxHiddens&&gx.fn.setJsonHiddens(null,a.gxHiddens);var a=a.gxContainer?a.gxContainer:a,d;if(void 0!=a.Count){var c=0;this.grid.rowsValues||(this.grid.rowsValues=[]);this.grid.rowsValues=this.grid.rowsValues.concat(a.values);for(c=0;c<a.Count;c++)d=this.addRow(a[c]),gx.fn.setCurrentGridRow(this.gridId,d.gxId);0<a.Count&&(this.addingRows=!0,b.call(this,a),this.addingRows=!1,this.setFocusFirstControl(a[0]))}return d};
this.gxNewRowFocused=function(a){a.style.textDecoration="underline";var b=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(a,b,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(a){var b=gx.evt.source(a);void 0!=b&&(a.ctrlKey&&46==a.keyCode)&&(this.setRowDeleted(b),gx.evt.cancel(a,!0))};this.gxHasDuplicateKey=function(){for(var a=[],b=this.grid.rows,d=b.length,c=0;c<d;c++){var f=b[c];if((f.gxExists()||f.gxIsMod())&&!f.gxDeleted()){for(var g="",j=f.gxKeyValues.length,
k=0;k<j;k++)g+=f.gxKeyValues[k].toString();if(void 0!=a[g])return!0;a[g]=1}}return!1};this.columnIndexInKey=function(a){for(var b=this.lvlKey.length,d=0;d<b;d++)if(this.lvlKey[d]==a)return d;return-1};this.refreshVars=[];this.addRefreshingVar=function(a){if(!gx.lang.emptyObject(a)){var b="";this.refreshVars[this.refreshVars.length]=a;if(a.fld){var d=gx.dom.el(this.gxComponentContext+a.fld,!1,!0);if(void 0!=d&&gx.lang.emptyObject(a.hc)&&(b="radio"==d.type||"checkbox"==d.type?"click":"SELECT"==d.tagName?
"change":gx.evt.eachKeyAutorefreshType(a.type)?["keyup","input"]:"blur",""!=b))if("radio"==d.type)for(var a=gx.dom.byName(this.gxComponentContext+a.fld),d=a.length,c=0;c<d;c++)gx.evt.attach(a[c],b,function(){this.filterVarChanged()},this);else"search"==d.type&&(b=[b,"search"]),gx.evt.attach(d,b,function(){this.filterVarChanged()},this)}}};this.doRefresh=function(){this.callAsyncRefresh(this.getRefreshParmsUrl())};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var a=
this.getRefreshParmsUrl();this.lastRefreshParms!=a&&(this.lastRefreshParms=a,this.callAsyncRefresh())}else this.parentObject.conditionsChanged=this.conditionsChanged()};this.conditionsChanged=function(){for(var a=this.refreshVars.length,b=0;b<a;b++){var d=this.refreshVars[b];if("undefined"==typeof d.rfrVar){var c=gx.fn.getHidden(this.gxComponentContext+"GXH_"+d.fld),d=d.val();if(c!=d)return!0}}return!1};this.getRefreshParmsUrl=function(a){a=this.getParmsValues(a,this.refreshVars).join(",");this.pageSizeParm&&
(a=this.grid.pageSize+","+a);return a};this.getParmsValues=function(a,b){var d=gx.O,c,f,g=b.length,j=[];gx.setGxO(this.parentObject);for(var k=0;k<g;k++){var l=b[k];if(l&&("function"==typeof l.c2v&&l.c2v(),"function"==typeof l.v2bc&&l.v2bc.call(gx.O),"undefined"!=typeof l.rfrVar))if(f=gx.fn.vStructForVar(l.rfrVar))c=f.type;else if(f=gx.fn.getVarControlMapForVar(l.rfrVar))c=f.type;if("undefined"!=typeof l.rfrVar){f=ctrlName=colVStruct=void 0;if("undefined"!=typeof l.rfrProp){var n;"undefined"!=typeof l.gxAttId&&
(n=this.grid.getColumnByGxAttId(l.gxAttId));n||(n=this.grid.getColumnForVar(l.rfrVar));if(n){if(l=l.rfrProp.toLowerCase(),f=n[l],"value"==l&&n.gxControl.type==gx.html.controls.types.image&&(f=gx.util.removeBaseUrl(f)),(colVStruct=this.parentObject.getValidStruct(n.gxId))&&"value"==l)c=colVStruct.type}else f=""}else"undefined"!=typeof this.parentObject.VarControlMap[l.rfrVar]&&(ctrlName=this.parentObject.VarControlMap[l.rfrVar].id),gx.lang.emptyObject(this.parentObject[l.rfrVar])?"undefined"==typeof f&&
"undefined"!=typeof ctrlName&&(f=gx.fn.getHidden(this.gxComponentContext+ctrlName)):f=this.parentObject[l.rfrVar],"object"==typeof f&&("date"!=c&&"dtime"!=c)&&(f=gx.json.serializeJson(f));j.push(this.getFormattedParm(f,c))}else gx.lang.emptyObject(l.hc)?j.push(this.getFormattedVStructParm(l)):(f=gx.fn.getHidden(this.gxComponentContext+"GXH_"+l.fld),j.push(encodeURIComponent(a&&"undefined"!==typeof f?f:this.parentObject[l.hc]))),gx.fn.setHidden(this.gxComponentContext+"GXH_"+l.fld,l.val())}this.parentObject.IsComponent&&
j.push(encodeURIComponent(this.parentObject.CmpContext));gx.setGxO(d);return j};this.initRefreshParms=function(){this.parentObject.autoRefresh&&(this.lastRefreshParms=this.getRefreshParmsUrl(!0))};this.getFormattedVStructParm=function(a){var b;"date"==a.type||"dtime"==a.type?(b=gx.dom.el(this.gxComponentContext+a.fld),b="undefined"!=typeof b.value?b.value:gx.dom.spanValue(b)||b):b=a.val();return this.getFormattedParm(b,a.type)};this.getFormattedParm=function(a,b){"date"===b?a=gx.date.urlDate(a,gx.dateFormat):
"dtime"===b&&(a=gx.date.urlDateTime(a,gx.dateFormat));return encodeURIComponent(a)};this.callAsyncRefresh=function(a,b){gx.evt.refreshGridCallback||(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&(window.clearTimeout(this.refreshTimer),this.refreshTimer=null,gx.evt.setReady(!0));gx.evt.setReady(!1);this.refreshTimer=window.setTimeout(function(){if(this.autoRefreshing)this.callAsyncRefresh(a);else{gx.fx.obs.addObserver("grid.onafterrefresh",gx.evt,gx.evt.notifyRefreshGrid,{single:true});typeof a===
"undefined"&&(a=this.getRefreshParmsUrl());gx.ajax.refreshGrid(this,a);gx.evt.setReady(true)}}.closure(this),b||400)};this.updatePropsHidden=function(a){var b=this.getDataHiddenName();gx.fn.setHidden(b,a)};this.updatePagingVarsAfterRefresh=function(a){if(this.usePaging){var b=this.grid.gxGridName.toUpperCase()+"_nEOF",d=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(a[b],a[d])}};this.getSelection=function(){if(this.allowSelection)for(var a=this.grid.rows.length,b=0;b<
a;b++)if(this.grid.rows[b].selected)return b;return-1};this.setNextRowSelected=function(a){var b=Math.min(this.getSelection()+1,this.grid.rows.length);this.setSelection(b,a);this.grid.keepGridItemVisible(b)};this.setPreviousRowSelected=function(a){var b=Math.max(this.getSelection()-1,0);this.setSelection(b,a);this.grid.keepGridItemVisible(b)};this.setProperty=function(a){if(a.Selectedindex)if(a=Number(a.Selectedindex),-1==a)this.setSelection(a);else return this.setSelectionRowCtrl(this.grid.getRowByPos(a));
return!1};this.setSelection=function(a,b){if(this.allowSelection){if(-1==a)return this.grid.setRowSelected(void 0,"",void 0,void 0,b),!0;if(0<=a)return this.setSelectionRowCtrl(this.getRowCtrlByIdx(a),b)}return!1};this.setSelectionRowCtrl=function(a,b){return this.allowSelection&&a?(this.grid.setRowSelected(a,a.getAttribute("data-gxrow"),void 0,void 0,b),!0):!1};this.getRowCtrlByIdx=function(a){return gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+gx.grid.rowId(a+1))};this.blankGridRows=
function(){this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage);if(!this.InfiniteScrolling||!this.additiveResponse)this.lastRowId=0,this.grid.rows=[],delete this.grid.rowsValues};this.setRowDeleted=function(a){var b=null,b="string"==typeof a?this.grid.getRowByGxId(a):void 0==a.gxId?this.getRowFromHtmlCtrl(a):a;b.setDeleted(!b.gxDeleted());this.setRowModified(b.gxId);gx.fn.removeGridRow(b.gxId,this.gridId.toString());this.refreshGrid({loadChildGrids:!1});gx.dom.indexElements()};
this.setFocusFirstControl=function(a){for(var b=0;b<a.Count;b++){var d=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId);if(d&&(d=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[b].htmlName+"_"+d.gxId),void 0!=d&&gx.fn.isAccepted(d))){gx.grid.lastFocusCtrl=this.grid.columns[b].gxId;gx.fn.setFocus(d);break}}};this.instanciateRow=function(a){var b=gx.O,d,c,f,g,j;gx.setGxO(this.parentObject);gx.csv.instanciatedRowGrid=this;try{var k=a;"string"==typeof k&&(k=this.grid.getRowByGxId(a));
if(null!=k){gx.fn.setCurrentGridRow(this.gridId,k.gxId);j=k.values.length;for(g=0;g<j;g++){var l=this.grid.columns[g];if(""!=l.gxId){var n=this.parentObject.getValidStruct(l.gxId);n&&(this.useUserControlModelValues()?n.v2v&&(n.v2v(this.grid.properties[k.id][l.index].value),gx.fn.setHidden(this.grid.properties[k.id][l.index].id,this.grid.properties[k.id][l.index].value)):"function"==typeof n.c2v&&n.c2v())}}}else{gx.fn.setCurrentGridRow(this.gridId,a);j=this.grid.columns.length;for(g=0;g<j;g++)l=this.grid.columns[g],
""!=l.gxId&&(n=this.parentObject.getValidStruct(l.gxId))&&"function"==typeof n.c2v&&n.c2v()}d=this.parentObject.UserControls;for(f in d)if(d.hasOwnProperty(f)&&(c=d[f],c.GridId===this.gridId&&c.GridRow===a)){this.parentObject[c.DesignContainerName]=c;break}}catch(m){gx.dbg.logEx(m,"gxgrid.js","instanciateRow")}gx.setGxO(b);return!0};this.setRenderProp=function(a,b,d,c){this.grid.setProp(a,b,d,c)};this.setRenderDynProp=function(a,b,d,c){this.grid.setDynProp(a,b,d,c)};this.addRenderEventHandler=function(a,
b){this.grid.addEventHandler(a,b)};this.cleanup=function(){gx.grid.clearActiveGrid(this);this.parentGrid=this.parentObject=null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=null;this.grid.columns=null;this.grid.rows=null;this.grid=this.grid.selectedRows=null;this.unInstallScrollListener()};this.loadGrid=function(a){var b;gx.dbg.logPerf("loadGrid_"+this.gridName);var a=a||{},d=a.rowProps,c=a.isPostback,f=a.addRows,a=a.isNestedLoad;
this.isNestedLoad=this.isNestedLoad||a;a=gx.O;gx.setGxO(this.parentObject);this.isLoading=!0;var g=this.parentObject.isTransaction();g&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this));if(void 0!=d){if(g=this.getContainerControl(),null!=g)this.autoRefreshing?this.updatePagingVarsAfterRefresh(d):this.updatePagingVars(d.GRID_nEOF,d.GRID_nFirstRecordOnPage),this.InfiniteScrolling&&(this.additiveResponse=0!=this.grid.firstRecordOnPage),c&&(f||(d.values=this.getValuesFromHidden()),
this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&this.backupComponents()),this.deleteGridData(),this.grid.setContainerDelayed(g),this.clearHiddens(),this.setRowsProperty(),c=this.getSelection(),this.autoRefreshing?this.updatePagingVarsAfterRefresh(d):this.updatePagingVars(d.GRID_nEOF,d.GRID_nFirstRecordOnPage),f||this.blankGridRows(),this.setHtmlTags(d),this.setGridStyles(d),this.setDeleteMethod(d.DeleteMethod),this.setSelectionAndHover(d.Allowselection,d.Selectioncolor,d.Allowhover,d.Hovercolor,
d.Selectedindex),this.setCollapsing(d.Allowcollapsing,d.Collapsed),this.setSflColumns(d.SflColumns),this.setColumnsProperties(d.Columns),f||this.addRows(d),this.updateOldComponents(),this.initRefreshParms(),b=this.refreshGrid({loadChildGrids:null,fromAutoRefresh:this.autoRefreshing}),this.setProperty({Selectedindex:c+1})}else this.clearHiddens(),this.setRowsProperty(),this.grid.pageSize=g||this.isFreestyle?9999:this.gridRows,g=this.getContainerControl(),null!=g?(this.grid.setContainerDelayed(g),b=
this.getRowsFromHidden(),null!=b?(b.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(b),this.setGridStyles(b),this.setDeleteMethod(b.DeleteMethod),this.setSelectionAndHover(b.Allowselection,b.Selectioncolor,b.Allowhover,b.Hovercolor,b.Selectedindex),this.setCollapsing(b.Allowcollapsing,b.Collapsed),this.setSflColumns(b.SflColumns),this.setColumnsProperties(b.Columns),this.updatePagingVars(),this.addRows(b),this.initRefreshParms(),this.addingRows=!0,b=this.refreshGrid(),this.addingRows=
!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),b=this.refreshGrid())):b=this.loadWrappedGridChilds();this.isLoading=!1;gx.setGxO(a);gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded");return b};this.loadWrappedGridChilds=function(){var a=c.Deferred();try{var b=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId);if("undefined"!=typeof b){for(var b=parseInt(b),d=0;d<b;d++)for(var f=this.grid.columns.length,g=0;g<f;g++){var j=this.grid.columns[g];
j.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(d+1),c:j})}this.setupGridUsercontrols(this.GridUserControls)}}catch(k){gx.dbg.logEx(k,"gxgrid.js","loadWrappedGridChilds")}a.resolve();return a};this.getRowsFromHidden=function(){var a=this.getDataHiddenName(),b=gx.fn.getHidden(a);gx.json.setNonSerializable(a);return"string"==typeof b?gx.json.evalJSON(b):"object"==typeof b?b:null};this.deleteGridData=function(){var a=this.getDataHiddenName();gx.json.setNonSerializable(a)};
this.getValuesFromHidden=function(){var a=this.getValuesHiddenName(),b=gx.fn.getHidden(a);gx.lang.emptyObject(b)&&(b=gx.fn.getControlValue(a));gx.json.setNonSerializable(a);a=null;null!=b&&""!=b&&(a=gx.json.evalJSON(b));return a};this.getContainerControlId=function(){return void 0!=this.gxContainerDivName?this.gxContainerDivName:this.grid.gxCmpContext+this.containerName+"Div"};this.getContainerControl=function(){if(!this.gxContainerCtrl){var a=gx.dom.byId(this.getContainerControlId());a&&(this.gxContainerCtrl=
a,a.setAttribute("data-gxgridid",this.gridId.toString()),gx.dom.addClass(a,"gx-grid"),this.isResponsive&&gx.dom.addClass(a,"gx-responsive-grid"),gx.dom.addClass(a,this.isFreestyle?"gx-freestyle-grid":"gx-standard-grid"),a.gxGridName=this.grid.gxGridName)}return this.gxContainerCtrl};this.getHiddenSuffix=function(){return""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId};this.getDataHiddenName=function(){return void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+
this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return void 0!=this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};this.setColumnsProperties=function(a){try{if(!gx.lang.emptyObject(a))for(var b=a.length,d=0;d<b;d++){var c=this.grid.columns[d],f;for(f in a[d]){var g=a[d][f];f=this.fixColumnPropName(f);this.isUsercontrol&&(c[f]=g);c[f.toLowerCase()]=g}this.checkPromptColumn(c)}}catch(j){gx.dbg.logEx(j,
"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(a){try{if(this.isPromptColumn(a)){var b=gx.fn.getAttachedCtrl(a.htmlName);if(b&&b.info&&b.info.controls){for(var d=!1,c=!1,f=b.info.controls.length,g=0;g<f;g++){var j=this.grid.getColumnByGxId(b.info.controls[g]),k=gx.lang.gxBoolean(j.enabled),l=gx.lang.gxBoolean(j.visible);k&&(c=!0);l&&(d=!0)}c||(a.enabled="0");d||(a.visible="0")}}}catch(n){gx.dbg.logEx(n,"gxgrid.js","checkPromptColumn")}};this.fixColumnPropName=function(a){return"Horizontalalignment"==
a?"align":a};this.setDeleteMethod=function(a){if(this.parentObject.isTransaction()){var b="DSP"==this.parentObject.Gx_mode;!b&&(a&&"none"==a)&&(b=!0);this.deleteMethod=b?gx.grid.deleteMethods.none:gx.grid.deleteMethod}};this.setSelectionAndHover=function(a,b,d,c,f){try{"undefined"!=typeof a&&(this.allowSelection=gx.lang.gxBoolean(a));"undefined"!=typeof b&&(this.selectionColor=null);"undefined"!=typeof c&&(this.hoverColor=null);if(this.allowSelection&&"undefined"!=typeof b&&("undefined"!=typeof d&&
(this.allowHovering=gx.lang.gxBoolean(d)),b=eval(b),this.selectionColor="undefined"!=typeof b[0]?gx.color.fromRGB(b[0],b[1],b[2]):gx.color.html(b),this.allowHovering&&"undefined"!=typeof c))c=eval(c),this.hoverColor="undefined"!=typeof c[0]?gx.color.fromRGB(c[0],c[1],c[2]):gx.color.html(c);this.grid.gxAllowSelection=this.allowSelection;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxHoverColor=this.hoverColor;this.grid.selectedRows=[];f=Number(f||
0);0<f&&(this.grid.Selectedindex=f-1)}catch(g){gx.dbg.logEx(g,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(a,b){try{if(void 0!==a&&(this.allowCollapsing=gx.lang.gxBoolean(a),this.grid.gxAllowCollapsing=this.allowCollapsing),void 0!==b)this.collapsed=gx.lang.gxBoolean(b),this.grid.gxCollapsed=this.collapsed}catch(d){gx.dbg.logEx(d,"gxgrid.js","setCollapsing")}};this.setSflColumns=function(a){try{if(!gx.lang.emptyObject(a)||0===a)this.gridCols=gx.grid.validGridColsValue(parseInt(a)),
this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(a){return a.gxAttId.indexOf&&-1!=a.gxAttId.indexOf("prompt_")?!0:!1};this.setRowsProperty=function(){var a=gx.fn.getHidden(this.getHiddenName("Rows"));if(null!=a){try{this.gridRows=parseInt(a,10)}catch(b){gx.dbg.logEx(b,"gxgrid.js","setRowsProperty")}this.grid.pageSize=this.gridRows*
(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var a=this.grid.columns.length,b=0;b<a;b++){var d=this.parentObject.getValidStruct(this.grid.columns[b].gxId);d&&(d.gxsgprm&&d.gxsgprm.installed)&&(d.gxsgprm.installed={})}};this.refreshCollection=function(a){try{this.blankGridRows();this.updatePagingVars();this.initRefreshParms();for(var b=a.length,d=0;d<b;d++){for(var c={Props:[]},f=a[d],g=this.grid.columns.length,j=0;j<g;j++){var k=this.grid.columns[j];c.Props[k.index]=
[f[k.gxAttName]]}this.addRow(c)}this.refreshGrid({loadChildGrids:!1,fromAutoRefresh:!1,fromCollection:!0})}catch(l){gx.dbg.logEx(l,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(a){var b=c.Deferred(),a=a||{},d=a.loadChildGrids,f=a.fromAutoRefresh,g=a.fromCollection,j=a.isNestedLoad,k=a.immediateApplyInfiniteScroll;this.isNestedLoad=this.isNestedLoad||j;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.additiveResponse||this.clearDefaultEventHandlers();
this.clearHiddens();this.crearInstalledSuggests();this.setRowsProperty();void 0!=this.parentRow&&!gx.lang.emptyObj(this.parentRow.Grids)&&(a=this.parentRow.Grids[this.realGridName],null!=a&&(this.setHtmlTags(a),this.setGridStyles(a),this.setColumnsProperties(a.Columns),this.addingRows||this.parentRow.IsNew&&this.addRows(a)));var l=!1,a=function(){this.setupGridControls(this.GridControls);this.setupCellAttributes(this.IsValidState);this.setupFixedColumnProperties();this.setupGridUsercontrols(this.GridUserControls);
this.installFixedGridHeader();var a=this,d=function(d){d=c.map(d,function(a){return a.onLoadDeferred});c.when.apply(c,d).done(function(){k?a.handleInfiniteScrolling():gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",a,a.handleInfiniteScrolling,{single:true}):gx.pO.addObserver("onafterload",a,a.handleInfiniteScrolling,{single:true});b.resolve()})};this.setupGridComponents(this.GridComponents).then(function(){var b=c.map(a.GridComponents,function(a){return gx.pO.getWebComponent(a.p)});
a.isFreestyle&&a.loadRowsGrids(l);gx.fx.obs.notify("grid.onafterrender",[a.grid,a.isNestedLoad]);if(a.isNestedLoad){a.isNestedLoad=false;d(b)}else a.additiveResponse?gx.pendingCmps?gx.fx.obs.addObserver("webcom.all_rendered",a,function(){a.infinite_scrolling_after_scroll()}):a.infinite_scrolling_after_scroll():a.applyTemplateObject().then(function(){d(b)})});this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();this.updateRcdCount();this.setDefaultEventHandlers();this.setSelection(this.grid.Selectedindex)}.closure(this);
this.grid.doSort();!1==d?this.grid.render(l,!1,g,a):(l=!0,this.grid.render(l,f,g,a));return b};this.applyTemplateObject=function(){var a=this.isFreestyle&&!this.parentObject.IsComponent?"."+gx.GxObject.WEBCOMPONENT_CLASS_NAME+" *":"";return gx.plugdesign.applyTemplateObject({selector:"#"+this.getContainerControl().id,excluded:a})};var S="gx-wc-bkp_"+l+"_"+b;this.getComponentsBackupContainer=function(){var a=gx.dom.byId(S);a||(a=document.createElement("div"),a.id=S,a.style.display="none",document.body.appendChild(a));
return a};this.destroyComponentsBackup=function(){var a=gx.dom.byId(S);a&&a.parentNode&&gx.dom.removeControlSafe(a)};this.backupComponents=function(){try{if(!this.additiveResponse)for(var a=this.grid.rows.length,b=0;b<a;b++){for(var d=this.grid.rows[b],c=this.grid.columns.length,f=0;f<c;f++)if(this.grid.columns[f].gxControl.type==gx.html.controls.types.webComponent){var g=this.gxComponentContext+"gxHTMLWrp"+this.parentObject.getComponentPrefix(d.gxProps[f][0])+d.gxId,j=gx.dom.byId(g);j&&(j.parentNode.removeChild(j),
this.getComponentsBackupContainer().appendChild(j))}for(var k=d.gxGrids.length,f=0;f<k;f++){var l=d.gxGrids[f];l&&l.isFreestyle&&l.backupComponents()}}}catch(n){gx.dbg.logEx(n,"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(a){var b=this.getContainerControl();if(!b)return[];var d=b.firstChild,b=[];if(d.querySelectorAll)b=gx.fn.toArray(d.querySelectorAll("td[data-colindex='"+a+"'], th[data-colindex='"+a+"']"));else{for(var c=gx.dom.byTag("TD",d),d=gx.dom.byTag("TH",d),f=0,g=c.length;f<
g;f++)c[f].getAttribute("data-colindex")==a&&b.push(c[f]);f=0;for(g=d.length;f<g;f++)d[f].getAttribute("data-colindex")==a&&b.push(d[f])}return b};this.applyPropEntireColumn=function(a,b,d){for(var a=this.getEntireGridColumn(a),c=0;c<a.length;c++)gx.fn.setCtrlPropertyImpl(a[c],b,d)};this.setupFixedColumnProperties=function(){for(var a=0;a<this.ColumnPropertiesAfterRender.length;a++){var b=this.ColumnPropertiesAfterRender[a];this.applyPropEntireColumn(b.colIndex,b.ptyName,b.ptyValue)}};this.addColPropertyAfterRender=
function(a,b,d){this.ColumnPropertiesAfterRender.push({colIndex:a,ptyName:b,ptyValue:d})};this.setupCellAttributes=function(a){for(var b in a){var d=a[b],c=gx.dom.byId(b);if(c)for(var f in d)c.setAttribute(f,d[f])}};this.setupGridControls=function(a){for(var b=0,d=a.length;b<d;b++){var c=a[b],f=gx.dom.byId(c.hookId),g=f.parentNode;g&&(g.insertBefore(c.el,f),gx.dom.removeControlSafe(f))}};this.setupGridComponents=function(){var a=function(a,b){var d,c=a.length;for(d=0;d<c;d++){var f=a[d];if(!1!==f.create){var g=
gx.createComponent(f.n,f.p);if(null!=g){gx.addComponent(g);g.readServerVars();if(f.load)g.onload(void 0,!0);d==c-1&&b.resolve()}}}},b=function(a){var b,d=a.length;for(b=0;b<d;b++)gx.dom.removeClass(a[b],gx.GxObject.WEBCOMPONENT_LOADING_CLASS_NAME)};return function(d){var f=c.Deferred(),g,j=d.length,k=[];0==j&&f.resolve();var l=[];for(g=0;g<j;g++){var n=d[g];if(!1===n.create){var m=gx.dom.byId(n.existingEl);if(m){var y=m.parentNode,n=gx.dom.byId(n.el);gx.dom.removeControlSafe(m);y.appendChild(n);l.push(n)}g==
j-1&&f.resolve()}else k.push(n.c)}gx.lang.requestAnimationFrame(b.closure(this,[l]));0<k.length&&gx.html.processCode(k.join(""),!1,a.closure(this,[d,f]));this.destroyComponentsBackup();return f.promise()}}();this.setupGridUsercontrols=function(a){var b=a.length;gx.uc.StartRender();for(var d=0;d<b;d++){var c=a[d].r,f=a[d].c,c=gx.uc.getNew(this.parentObject,f.gxUCId,f.gxUCLastId,f.gxUCClassName,f.gxUCContainerName+"_"+c,f.gxUCControlName,f.gxUCFieldName,this.gridLvl,this.gridId,c);c.DesignContainerName=
f.gxUCContainerName;c.setC2ShowFunction(f.gxShowFunc);for(var g=f.gxC2VFuncs.length,j=0;j<g;j++)c.addC2VFunction(f.gxC2VFuncs[j]);g=f.gxV2CFuncs.length;for(j=0;j<g;j++)c.addV2CFunction(f.gxV2CFuncs[j]);c.setGridProperties();c.setGridEventHandlers();this.parentObject.setUserControl(c);c.execV2CFunctions(!0);c.execShowFunction()}gx.uc.EndRender()};this.triggerDatePickersSetup=function(a){for(var b=a.length,d=0;d<b;d++){for(var c=a[d].CtrlId,f=a[d].Grid,g=a[d].Row,j=gx.O,k=null,l=gx.fn.controlIds(),
n=l.length,m=0;m<n&&!(k=gx.fn.validStruct(l[m]),k.grid==f&&j.CmpContext+k.fld+"_"+g==c);m++);null!=k&&void 0!=k.dp&&gx.fn.installDatePicker(c,k.dp.f,k.dp.st,k.dp.wn,k.dp.mf,gx.fn.datePickerFormat(k.dp.pic,k.dp.dec,k.len),k.len,k.dp.dec)}};this.installImageControls=function(){var a=this.gxContainerCtrl,b=this.grid.newAdditiveRows?this.grid.newAdditiveRows.get(0):null;this.additiveResponse&&(b&&b.childNodes[0])&&(a=b);a=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass,"",a);if(a[0])for(var b=0,d=
a.length;b<d;b++)gx.html.multimediaUpload.createControl(a[b])};this.addComponentToDraw=function(a){this.GridComponents.push(a)};this.addUsercontrolToDraw=function(a){this.GridUserControls.push(a)};this.addDatepickerToSetup=function(a){this.DatePickersControls.push(a)};this.addControlToReuse=function(a){a.el.parentNode&&gx.dom.removeControlSafe(a.el);this.GridControls.push(a)};this.loadRowsGrids=function(a){for(var b=this.grid.rows.length,d=this.additiveResponse?this.firstAdditiveRow:0;d<b;d++)this.loadRowGrids(this.grid.rows[d],
a)};this.loadRowGrids=function(a,b){for(var d=a.gxGrids.length,c=0;c<d;c++){var f=a.gxGrids[c];f.grid.setContainerDelayed(gx.dom.byId(f.gxContainerDivName));if(b){if(void 0!=f.parentRow&&!gx.lang.emptyObj(f.parentRow.Grids)){var g=f.getDataHiddenName();gx.fn.setHidden(g,gx.json.serializeJson(f.parentRow.Grids[f.realGridName]))}f.loadGrid({isNestedLoad:!0})}else f.refreshGrid({isNestedLoad:!0});a.IsNew=!1}};this.updateRcdCount=function(){if(this.hasForEachLine||this.parentObject.isTransaction())gx.fn.setHidden(this.grid.gxCmpContext+
"nRC_GXsfl_"+this.gridId+(""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId),this.lastRowId.toString());var a=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+"_ROW");if(0==this.lastRowId||parseInt(a,10)>this.lastRowId)this.grid.instanciateSelectionVars("0000"),gx.fn.setCurrentGridRow(this.gridId,"")};this.updateControlValue=function(a,b,d){try{var c=this,f=d=d||gx.fn.currentGridRow(a.grid).toString(),g=d.length;if(4<g){var j=d.substring(4,g),c=gx.fn.gridObj(this.gxComponentContext,
this.gridName+"_"+j,this.isMasterPageGrid);if(!c)return;f=d.substring(0,4)}var k=parseInt(f,10)-1;!0==b&&c.setRowModified(d);var l=c.getColumnIndexByName(a.fld),n=gx.dom.el(this.gxComponentContext+a.fld+"_"+d);c.updateRowValue(l,k,n);return c}catch(m){gx.dbg.logEx(m,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(a,b,d){var c=a.lastIndexOf("_");if(-1!=c){var f=a.substring(0,c);if(c=this.grid.getRowByGxId(a.substring(c+1)))if(f=this.grid.getColumnByHtmlName(f)){var g=
this.parentObject[d.gxvar];"decimal"==d.type&&gx.lang.instanceOf(g,Number)&&(g=g.toFixed(d.dec));c.values[f.index]=g;c.gxProps[f.index]||(c.gxProps[f.index]={});if((a=gx.dom.el(a))&&"SELECT"==a.tagName)c.gxProps[f.index].Values=gx.dom.comboBoxToObj(a);c.gxProps[f.index].Value=g;c.gxProps[f.index].FormattedValue=b}}};this.getColumnIndexByName=function(a){for(var b=this.grid.columns,d=b.length,c=0;c<d;c++)if(b[c].htmlName==a)return c;return-1};this.setRowModified=function(a){gx.fn.setHidden(this.grid.gxCmpContext+
"nIsMod_"+this.gridLvl.toString()+"_"+a,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(a)};this.validateRow=function(a){if(a)try{var b=a.getAttribute("data-gxgridid");gx.fn.setCurrentGridRow(b,a.gxrow);var d=gx.fn.lastGridControl(b);gx.csv.validControls(gx.csv.lastId,d+1,!0,gx.O)}catch(c){gx.dbg.logEx(c,"gxgrid.js","validateRow")}};this.updateRowValue=function(a,b,d){var b=this.grid.getRowById(b),c=this.grid.columns[a];"checkbox"==d.type&&
(d.value=d.checked?c.gxChecked:c.gxUnChecked);d=this.parentObject.getValidStruct(this.grid.columns[a].gxId).val(b.gxId);b.values[a]=d;gx.lang.emptyObject(b.gxProps[a])||(b.gxProps[a].Value=d,b.gxProps[a].FormattedValue=gx.fn.getControlValue(this.grid.columns[a].htmlName+"_"+b.gxId,"screen"));this.parentObject.isTransaction()&&(a=this.columnIndexInKey(c.gxAttId),-1!=a&&(b.gxKeyValues[a]=d));c.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+c.htmlName+"_"+b.gxId+
"_gxBlob",d)};this.expandCollapse=function(a,b){gx.evt.cancel(b,!0);var d=gx.dom.byId(this.gxComponentContext+this.containerName+"Tbl");null!=d&&(this.collapsed?(c(d).removeAttr("data-gx-sr-only"),a.src=gx.ajax.getImageUrl(gx,"collapseImage")):(c(d).attr("data-gx-sr-only",""),a.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,this.parentGrid?(d=this.gridName.substring(this.gridName.lastIndexOf("_")),d=this.gxComponentContext+this.realGridName.toUpperCase()+
"_Collapsed"+d):d=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(d,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(a){var b=a.gxrow;gx.lang.emptyObject(b)&&(b=a.id.lastIndexOf("_"),b=a.id.substring(b+1));return this.grid.getRowByGxId(b)};this.showContextMenu=function(a,b){this.contextMenu.show(a,b)}},contextMenu:function(c){this.gxgrid=c;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=this.rowClicked=null;
var k=new gx.text.stringBuffer;this.show=function(c,a){this.gxgrid.validateRow(c);this.contextEvent=a;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(a,!0);this.rowClicked=c;this.startMenu();k.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("</div>");this.endMenu()};this.startMenu=function(){k.clear();var c=this.getMenuCoords();k.append('<div onclick="').append(this.gxgrid.grid.gridObject()+
".contextMenu.contextMenuClicked(event);").append('" onmouseover="');k.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');k.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");k.append("top:"+c.top+"; left:"+c.left+";").append('">')};this.endMenu=function(){k.append("</div>");
var c=gx.dom.byId(this.controlName);null==c&&(c=document.createElement("SPAN"),ContextControlShadow=document.createElement("SPAN"),ContextControlShadow2=document.createElement("SPAN"),IFrameControl=document.createElement("IFRAME"),c.id=this.controlName,ContextControlShadow.id=this.controlName+"Shadow",ContextControlShadow2.id=this.controlName+"Shadow2",IFrameControl.id=this.controlName+"GXiFrameIEHack",IFrameControl.src="about:blank",IFrameControl.style.zIndex=1,IFrameControl.style.visibility="hidden",
IFrameControl.style.position="absolute",IFrameControl.frameBorder="0",document.body.appendChild(c),document.body.appendChild(ContextControlShadow),document.body.appendChild(ContextControlShadow2),document.body.appendChild(IFrameControl));gx.dom.shouldPurge()&&gx.dom.purge(c,!0);c.innerHTML=k.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};this.getMenuCoords=function(){var c=0,a=0,b=this.contextEvent;if(b.pageX||b.pageY)c=
b.pageX,a=b.pageY;else if(b.clientX||b.clientY)c=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{left:c,top:a}};this.contextMenuClicked=function(c){this.handleContextMenuAction(gx.evt.source(c).id);this.hide()};this.handleContextMenuAction=function(c){switch(c){case "deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);break;case "undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=
function(){}},getPaddedRowId:function(c){c=""+c;return"0000".substring(0,4-c.length)+c},rowId:function(c){for(c=c.toString();4>c.length;)c="0"+c;return c},_init:function(){this.deleteMethod||(this.deleteMethod=this.deleteMethods.images);this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||
(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||(this.deletePosition=this.deletePositions.left);this.deletePositionFree||(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=
null}}}(gx.$);
gx.grid.impl=function(c){return function(g){var k=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName=
"";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.gxParentRowId="";this.gxHoveredRowId=null;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnAutoHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";
this.pagingButtonNextClass="PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=g;this.container=null;this.setContainerDelayed=function(a){this.container=a};this.addColumn=function(a){if(a.isGxRemove())a.visible=false;
var b=this.columns.length;a.index=b;a.table=this;this.columns[b]=a;typeof a.htmlName!="undefined"&&(this.columnsHtmlName[a.htmlName]=a);typeof a.gxId!="undefined"&&(this.columnsGxId[a.gxId]=a);typeof a.gxAttId!="undefined"&&(this.columnsGxAttId[a.gxAttId]=a);return a};this.getColumnByIndex=function(a){return this.columns[a]};this.getColumnByCtrlType=function(a){return c.map(this.columns,function(b){return b.gxControl.type==a?b:null})};this.addRow=function(a,b){a.table=this;if(a!=null){this.rows[this.rows.length]=
a;typeof a.id!="undefined"&&(this.rowsById[a.id]=a);typeof a.gxId!="undefined"&&(this.rowsByGxId[a.gxId]=a);gx.lang.booleanValue(b)&&this.render();return a}};this.getColumnByHtmlName=function(a){var b,d;b=this.columnsHtmlName[a];if(typeof b=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<a.length){d=a.substring(0,this.gxCmpContext.length);if(d==this.gxCmpContext){a=a.substring(this.gxCmpContext.length,a.length);b=this.columnsHtmlName[a]}}return b};this.getColumnByGxId=
function(a){return this.columnsGxId[a]};this.getColumnByGxAttId=function(a){return this.columnsGxAttId[a]};this.getColumnForVar=function(a){for(var b=0;b<this.columns.length;b++){var d=this.parentGxObject.getValidStruct(this.columns[b].gxId);if(d&&d.gxvar==a)return this.columns[b]}return null};this.getRowById=function(a){return this.rowsById[a]};this.getRowByGxId=function(a){return this.rowsByGxId[a]};this.setSort=function(a,b){if(a==this.sortColumn)this.ascSort=b==null?!this.ascSort:gx.lang.booleanValue(b);
else{this.sortColumn=a;this.ascSort=b==null?true:gx.lang.booleanValue(b)}this.doSort();this.ownerGrid.refreshGrid({immediateApplyInfiniteScroll:true})};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(a,b){return this.gxCmpContext+b.htmlName+"_"+a.gxId};this.getControlId=function(a,b){return this.getControlName(a,b)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};
this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(a){return this.gxCmpContext+"delete"+this.gxGridName+"_"+a};this.showDeleteImage=function(a){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn())if((a=gx.dom.byId(this.deleteImgId(a)))&&!gx.fn.isVisible(a)){a.style.display="inline";if(a.parentNode.nodeName==
"A")a.parentNode.style.display="inline"}};this.appendDeleteHeader=function(a,b){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var d=this.isGxTrn(),c=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(b==gx.grid.deletePositions.left)c=true;else return;else gx.grid.deletePosition==b&&(c=true);if(d&&c){d="&nbsp;";if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)d=gx.grid.deleteTitle;a.append('<th class="'+this.columnAutoHeaderClass+'">'+
d+"</th>")}}};this.appendDeleteImage=function(a,b,d){if(this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none&&this.isGxTrn()){var c=false,g=false;if(this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"){c=b.gxDeleted();g=b.gxIsMod()||b.gxExists()}var j=this.deleteImgId(b.gxId),k=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(d==gx.grid.deletePositions.left)k=true;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==d)k=true;else if(this.gxIsFreestyle){var o=
gx.grid.deletePositionFree;d==gx.grid.deletePositions.left?k=o==gx.grid.deletePositions.topL||o==gx.grid.deletePositions.bottomL:d==gx.grid.deletePositions.right&&(k=o==gx.grid.deletePositions.topR||o==gx.grid.deletePositions.bottomR);d=o}if(k){var p="<"+this.CELL_TAG+' class="gx-remove-row gx-remove-row-'+this.deleteImageAlign(d)+" gx-remove-row-"+this.deleteVerticalAlign(d)+'" style="text-align:'+this.deleteImageAlign(d)+";vertical-align:"+this.deleteVerticalAlign(d)+'">',d="</"+this.CELL_TAG+">",
k="",o=false;if(c&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)k=gx.grid.undeleteImage;else if(g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)k=gx.grid.deleteImage;else if(c&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)k=gx.grid.deleteImage;else{k=gx.grid.deleteImage;o=true}c="";a.append(p);if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images){g=gx.fn.firstGridControl(this.ownerGrid.gridId);c=gx.grid.deleteTooltip;a.append('<a gxfocusable="1" href="javascript:'+
this.gridObject()+".setRowDeleted('"+b.gxId+"');\"");a.append(' onfocus="gx.evt.onfocus(this,'+g+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+b.gxId+"',"+this.ownerGrid.gridId+')"');b="";o&&(b=b+"display:none;");b&&a.append(' style="'+b+'"');a.append(">")}a.append('<img id="'+j+'" src="'+k+'"');c&&a.append(' title="'+c+'"');a.append(' style="border-style: none;');o&&a.append("display:none;");a.append('"');a.append(' class="gx-grid-delete"/>');this.ownerGrid.deleteMethod==
gx.grid.deleteMethods.images&&a.append("</a>");a.append(d)}}};this.deleteVerticalAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var b="top";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.bottomR)b="bottom";return b}return"middle"};this.deleteImageAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var b="right";if(a==gx.grid.deletePositions.bottomL||a==
gx.grid.deletePositions.topL)b="left";return b}return"center"};this.getRowByPos=function(a){return this.container.querySelector(" tbody>tr:nth-child("+a+")")};this.scroll_last_row_selector=function(a){return" tbody tr:nth-last-child("+Math.min(a/2,1)+")"};this.scroll_first_row_selector=function(){return" tbody tr:first-child"};this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(a,b){var d=this.ROW_TAG,c=this.ROW_BASE_CLASS;if(this.gxIsFreestyle)d=this.CELL_TAG;
this.gxIsFreestyle||(c=c+((c?" ":"")+(a?this.evenRowClass:this.oddRowClass)+(b?" RowDeleted":"")));return{cls:c,tag:d}};this.simpleAppendFn=function(a){return function(b){b.append(a)}};this.appendGridStyle=function(a){var b=k.exec(this.gxHtmlTags);b&&b.length>1&&a.append(b[1]);gx.lang.emptyObject(this.gxBackground)||a.append(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,true)+"');");gx.lang.emptyObject(this.gxBorderWidth)||a.append(";border: solid "+this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?
a.append(";"):a.append(this.gxBordercolor+";");this.ownerGrid.width>0&&a.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";")};this.appendGridAttributes=function(a){a.append(this.gxHtmlTags.replace(k,""));this.gxAllowCollapsing&&this.gxCollapsed&&a.append(" data-gx-sr-only ")};this.appendGridClassAttribute=function(a){this.gxHtmlTags.indexOf("class=")==-1&&a.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=function(a){a.append('<div valign="top" ><div>');a.append('<img class="collapse-icon" style="cursor:pointer;" src="');
this.gxCollapsed?a.append(gx.ajax.getImageUrl(gx,"expandImage")):a.append(gx.ajax.getImageUrl(gx,"collapseImage"));a.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></div><div>')};this.appendCollapsingWrapperEnd=function(a){a.append("</div></div>")};this.appendContainerStart=function(a,b){b.append("<table ");this.appendGridClassAttribute(b);b.append(' id="'+a+'" ');gx.lang.emptyObject(this.gxToolTipText)||b.append('title="'+this.gxToolTipText+'" ');b.append('style="');this.appendGridStyle(b);
b.append('" ');this.appendGridAttributes(b);if(!this.isAbstract){b.append('data-bkgstyle="');b.append(gx.grid.styles[this.gxTitleBackstyle]);b.append('" ')}b.append(">");if(!gx.lang.emptyObject(this.header)){b.append("<caption>");b.append(this.header);b.append("</caption>")}};this.appendContainerEnd=this.simpleAppendFn("</table>");this.appendHeaderText=function(a,b){gx.lang.emptyObject(this.headerText)||b.append('<tr><td colspan="'+a+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>")};
this.appendFooterText=function(a,b){gx.lang.emptyObject(this.footerText)||b.append('<tr><td colspan="'+a+'" class="'+this.footerClass+'">'+this.footerText+"</td></tr>")};this.appendHeader=function(a,b){var d=a.length,c=[],g=gx.ajax.getImageUrl(gx,"ascImage"),j=gx.ajax.getImageUrl(gx,"descImage"),k=0,o;b.append("<thead>");b.append("<tr>");this.appendDeleteHeader(b,gx.grid.deletePositions.left);for(var p=0;p<d;p++){var m=a[p];o=[m.gxColumnClass,m.columnheaderclass||"",this.columnAutoHeaderClass].join(" ");
b.append('<th class="'+o+'"');o="white-space:nowrap;";gx.lang.gxBoolean(m.visible)||(o=o+"display:none;");if(m.width){if(!m.gxWidthUnit)m.gxWidthUnit="px";o=o+("width:"+m.width+m.gxWidthUnit+";")}m.align&&(o=o+("text-align:"+m.align+";"));if(!gx.lang.emptyObject(this.gxTitleBackColor)&&(this.gxTitleBackstyle==gx.grid.styles.header||this.gxTitleBackstyle==gx.grid.styles.report)){o=o+("background-color:"+this.gxTitleBackColor+";");this.gxRealTitleBackColor=this.gxTitleBackColor}if(!gx.lang.emptyObject(this.gxBackColor)&&
this.gxTitleBackstyle==gx.grid.styles.uniform){o=o+("background-color:"+this.gxBackColor+";");this.gxRealTitleBackColor=this.gxBackColor}gx.lang.emptyObject(this.gxTitleForeColor)||(o=o+("color:"+this.gxTitleForeColor+";"));gx.lang.emptyObject(this.gxTitleFont)||(o=o+this.gxTitleFont);m.titlefontunderline?o=o+"text-decoration: underline;":m.titlefontstrikethru&&(o=o+"text-decoration: line-through;");m.titlefontbold&&(o=o+"font-weight: bold;");m.titlefontitalic&&(o=o+"font-style: italic;");m.titlebackcolor&&
(o=o+("background-color:"+gx.color.html(m.titlebackcolor).Html+";"));m.titleforecolor&&(o=o+("color:"+gx.color.html(m.titleforecolor).Html+";"));b.append(' style="'+o+';"');b.append(' data-colindex="'+k+'"');b.append(">");k++;if(gx.lang.emptyObject(gx.text.trim(m.title)))b.append("&nbsp;");else{b.append("<span");m.gxTooltip&&b.append(' title="'+m.gxTooltip+'"');m.sortable&&b.append(' onclick="'+this.gridObject()+".grid.setSort("+m.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\"");
b.append(">");b.append(m.title);if(this.ascLabel!=null&&this.descLabel!=null){this.ascLabel.src=g;this.descLabel.src=j;m.sortable&&this.sortColumn==m.index&&b.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,c))}b.append("</span>")}b.append("</th>")}this.appendDeleteHeader(b,gx.grid.deletePositions.right);b.append("</tr>");b.append("</thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("</tbody>");this.appendFooterWrapperStart=
this.simpleAppendFn("<tfoot>");this.appendFooterWrapperEnd=this.simpleAppendFn("</tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("</tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' data-cellspacing='0' data-cellpadding='0'><tbody>");this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</tbody></table></td>");this.appendCellPrefixEnd=this.appendCellPrefixStart=this.appendRowPrefix=gx.emptyFn;this.beforeRender=function(){this.tableClass=
this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnAutoHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;c.each(this.beforeRenderCallbacks,function(a,b){b()});this.beforeRenderCallbacks=[]};this.drawEmptyContent=function(){var a=this.ownerGrid,b=a.gxComponentContext+a.containerName+"Tbl";a.emptyText&&c("#"+b+" + .gx-text-gridnodata").length===
0&&c(document.createElement("div")).addClass("GridNoDataText gx-text-gridnodata").text(a.emptyText).insertAfter(c("#"+b));this.rows.length===0?c("#"+b).attr("data-gx-grid-nodata",""):c("#"+b).removeAttr("data-gx-grid-nodata")};this.purgeGrid=function(){var a,b,d=["onblur","onclick","onfocus","onchange"],c=gx.dom.byTag("input",this.container);b=0;for(a=c.length;b<a;b++)gx.dom.purgeElement(c[b],d);c=gx.dom.byTag("textarea",this.container);b=0;for(a=c.length;b<a;b++)gx.dom.purgeElement(c[b],d);c=gx.dom.byTag("select",
this.container);b=0;for(a=c.length;b<a;b++)gx.dom.purgeElement(c[b],d);c=gx.dom.byTag("span",this.container);b=0;for(a=c.length;b<a;b++)gx.dom.purgeElement(c[b],d);c=gx.dom.byTag("img",this.container);b=0;for(a=c.length;b<a;b++)gx.dom.purgeElement(c[b],d)};this.render=function(a,b,d,c){var a=!!a,g=this.gxCmpContext+this.gxGridObject+"Tbl";this.beforeRender();a=this.drawGrid(g,a,b,d);gx.dom.shouldPurge()&&this.purgeGrid();var j=gx.dom.getActiveElement(),b=j?j.tagName.toUpperCase():"",b=j&&(j.id||j.name)&&
b!="FORM"&&gx.dom.isChildNode(j,this.container),k=gx.dom.getCaretOffset(j);this.setGridHtml(this.container,a);b&&gx.lang.emptyObject(gx.usrFocusControl)&&setTimeout(function(){var a=gx.dom.el(j.id||j.name,false,true);if(a){gx.csv.disableFocus=true;a.offsetWidth>0&&a.offsetHeight>0&&gx.fn.setFocus(a,function(){gx.dom.setCaretOffset(a,k)})}},10);this.drawEmptyContent();this.afterRender(g);c();this.rendered=true};this.setGridHtml=function(a,b){gx.csv.IgnoreBlur=true;var d,f,g=this.ownerGrid.InverseLoading,
j;if(this.ownerGrid.additiveResponse){if(this.gxIsFreestyle){d=document.createElement("div");d.className="gx-sr-only";d.innerHTML=b;d.setAttribute("data-gx-grid-rendering-additive-rows","");f=c(d);d=g?this.firstItemSelector:this.lastItemSelector;g?f.insertBefore(d):f.insertAfter(d)}else g?f=c(b).insertBefore(this.firstItemSelector):d=c(b).insertAfter(this.lastItemSelector);this.newAdditiveRows=f;gx.plugdesign.applyTemplateObject({selector:f,deferred:true}).then(function(){if(this.newAdditiveRows){j=
this.newAdditiveRows.children();g?j.insertBefore(this.newAdditiveRows):j.insertAfter(this.newAdditiveRows);this.newAdditiveRows.trigger("gx-grid:after-additive-rows-render");this.newAdditiveRows.remove();delete this.newAdditiveRows}}.closure(this))}else a.innerHTML=b;gx.csv.IgnoreBlur=false};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.drawGrid=function(a,b,d,c){var g=this.isGxTrn(),j=this.gxIsFreestyle&&this.gxGridCols>1,k=new gx.text.stringBuffer,o=this.columns,d=
o.length,p,m,s,q;!this.gxIsFreestyle&&g&&d++;var r,u,v;if(this.ownerGrid.additiveResponse){r=this.firstRecordOnPage=="0"?0:this.lastRenderedRow;u=this.rows.length;this.ownerGrid.firstAdditiveRow=r}else if(Number(this.pageSize)!==0){v=this.getMaxPage();if(this.currentPage<=0)this.currentPage=1;else if(this.currentPage>v)this.currentPage=v;r=Math.max(this.pageSize*(this.currentPage-1),0);u=Math.min(r+this.pageSize,this.rows.length)}else{r=0;u=this.rows.length}this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(k);
var x=o.length;if(!this.ownerGrid.additiveResponse){this.appendContainerStart(a,k);this.appendHeaderText(d,k);this.gxIsFreestyle||this.appendHeader(o,k);this.appendBodyWrapperStart(k)}var z=true,a=function(){z=!z;var a=this.rows[p];b&&(p===r&&!gx.fn.currentGridRowImpl(this.gxId))&&gx.fn.setCurrentGridRow(this.gxId,a.gxId);var d=a.gxDeleted(),v=new gx.text.stringBuffer,J=this.getRowRenderingProps(z,d,p,r,u);if(j&&this.gxIsFreestyle&&(p>0&&p%this.gxGridCols===0||p===0&&this.gxGridCols>0)){p>0&&this.appendRowEnd(k,
p,r,u);this.appendRowStart(k,p,r,u)}var C="";this.gxTitleBackstyle==gx.grid.styles.report&&(C=z?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);if(this.gxTitleBackstyle==gx.grid.styles.header)C=this.gxLinesBackcolorOdd;if(this.gxTitleBackstyle==gx.grid.styles.uniform)C=this.gxBackColor;if(!this.gxIsFreestyle||this.gxIsFreestyle&&j){this.appendRowPrefix(v,p,r,u);v.append("<"+J.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+a.gxId+"'");this.gxIsFreestyle||v.append(' data-gxrendering_row=""');
if(this.gxIsFreestyle&&j){v.append(' data-gxrow="'+a.gxId.toString()+'"');(q=this.columns[1].gxControl.verticalAlign)&&v.append(' data-cell-valign="'+q+'"')}else v.append(' data-gxrow="'+a.gxId.toString()+'"');v.append(' class="'+J.cls+'"');a.selected&&v.append(' data-selected="1"');var A="";C&&(A="background-color:"+C+";");gx.lang.emptyObject(this.gxLinesFont)||(A=A+this.gxLinesFont);A&&v.append(' style="'+A+'" ');v.append(">");k.append(v.toString())}if(this.gxIsFreestyle){j&&this.appendRowBreaksWrapperStart(k,
a);s=this.gxBuffer.toString();k.append(s)}this.gxIsFreestyle||this.appendDeleteImage(k,a,gx.grid.deletePositions.left);this.appendCellPrefixStart(k,p,r,u,a,J);for(v=0;v<x;v++){m=o[v];var J=gx.lang.gxBoolean(m.visible),B=a.gxProps[m.index],y=a.values[m.index],A=m.gxControl;if(this.gxIsFreestyle&&A.type==gx.html.controls.types.row&&m.index===0)A.isFreestyleRow=true;A.setGridData({grid:this.ownerGrid,row:a,gridId:this.gxId,gridRow:a.gxId});if(c){delete A.formattedValue;A.value=y;A.id=m.htmlName+"_"+
A.gridRow}else A.setProperties.apply(A,B);if(b)delete gx.usrPtys[A.id];else if(gx.usrPtys[A.id]!==void 0)for(var D in gx.usrPtys[A.id]){if(D=="enabled")A.rtEnabled=true;A.setIndividualProp(D,gx.usrPtys[A.id][D])}if(d){A.rtEnabled=true;A.enabled=false}if(typeof B.Value!=="undefined"){y=this.parentGxObject.getValidStruct(m.gxId);A.value=gx.decimalPoint!="."&&y&&y.type=="decimal"&&typeof B.Value=="string"?B.Value.replace(".",gx.decimalPoint):B.Value}if(typeof B.FormattedValue!=="undefined")A.formattedValue=
B.FormattedValue;if(typeof A.formattedValue==="undefined")A.formattedValue=A.value;if(B.Values)A.possibleValues=B.Values.v;if(this.gxIsFreestyle&&A.type==gx.html.controls.types.row&&m.index===0){A.id=this.gxCmpContext+this.gxGridObject+"Row_"+a.gxId;if(g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)A.oncontextmenu=this.gridObject()+".showContextMenu(this, event);";if(C)A.style=A.style+("background-color:"+C+";")}if(!this.gxIsFreestyle){k.append("<"+this.CELL_TAG+' class="gx-attribute '+
(A.columnClass||"")+'" data-cell-valign="'+m.valign+'"');k.append(' data-colindex="'+v+'"');B="";if(!J){B=B+"display:none;";A.visible&&(!m.isGxRemove()&&!this.ownerGrid.isPromptColumn(m))&&this.ownerGrid.addColPropertyAfterRender(v,"Visible",1)}if(m.width){if(!m.gxWidthUnit)m.gxWidthUnit="px";B=B+("width:"+m.width+m.gxWidthUnit+";")}else if(m.gxColSize)A.colSize=m.gxColSize;m.align&&(B=B+("text-align:"+m.align+";"));A.style&&(B=B+A.style);B&&k.append(' style="'+B+'" ');k.append(">")}k.append(A.getHtml());
this.gxIsFreestyle&&(A.type==gx.html.controls.types.row&&m.index===0)&&this.appendDeleteImage(k,a,gx.grid.deletePositions.left);A.persistValue();this.gxIsFreestyle||k.append("</"+this.CELL_TAG+">");if(this.gxIsFreestyle){m.index==this.columns.length-1&&this.appendDeleteImage(k,a,gx.grid.deletePositions.right);s=m.buffer.toString();k.append(s)}}this.appendCellPrefixEnd(k,p,r,u);this.gxIsFreestyle&&j?this.appendRowBreaksWrapperEnd(k):this.appendDeleteImage(k,a,gx.grid.deletePositions.right)};if(this.ownerGrid.InverseLoading)for(p=
u-1;p>=r;p--)a.apply(this);else for(p=r;p<u;p++)a.apply(this);this.gxIsFreestyle&&(this.gxGridCols>0&&j)&&this.appendRowEnd(k);this.lastRenderedRow=u;if(!this.ownerGrid.additiveResponse){this.appendBodyWrapperEnd(k);this.appendFooterWrapperStart(k);!this.ownerGrid.InfiniteScrolling&&(g||this.hasPagingButtons())&&this.appendNavigationBar(d,k);this.appendFooterText(d,k);this.appendFooterWrapperEnd(k);this.appendContainerEnd(k);this.gxAllowCollapsing&&this.appendCollapsingWrapperEnd(k)}a=k.toString();
k.clear();k=null;return a};this.defineEventHandlers=function(){if(!this.gxIsFreestyle){gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this);gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this)}this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[],true),this);gx.evt.attach(this.container,"click",this.clickHandler,
this);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this)};this.isGridRow=function(a){return a&&a.tagName.toLowerCase()==this.ROW_TAG&&a.getAttribute("data-gxrow")!=null&&c(a).closest(".gx-grid")[0]==this.container};this.getTargetRow=function(a,b){for(var d=a;d&&gx.dom.isChildNode(d,this.container);){if(this.isGridRow(d)&&(!b||b=="body"&&d.parentNode.tagName=="TBODY"||b=="header"&&d.parentNode.tagName=="THEAD"))return d;d=gx.dom.findParentByTagName(d,this.ROW_TAG)}};this.mouseOverHandler=
function(a){if(!gx.runtimeTemplates&&this.gxAllowHovering)if((a=this.getTargetRow(gx.evt.source(a)))&&a.getAttribute("data-selected")!="1"){this.toggleRowHoverById(this.gxHoveredRowId,false);this.startRowHover(a);this.gxHoveredRowId=parseInt(a.getAttribute("data-gxrow").substring(0,4),10)-1}};this.mouseOutHandler=function(a){if(!gx.runtimeTemplates&&this.gxAllowHovering)(a=this.getTargetRow(gx.evt.source(a)))&&a.getAttribute("data-selected")!="1"&&this.endRowHover(a)};this.contextMenuHandler=function(a){var b=
this.getTargetRow(gx.evt.source(a));b&&this.ownerGrid.showContextMenu(b,a)};this.mouseDownHandler=function(a,b){var d=this.getTargetRow(gx.evt.source(a));if(d){b=typeof b==="undefined"?this.gxAllowSelection&&!this.gxIsFreestyle:b;this.setRowSelected(d,d.getAttribute("data-gxrow"),true,b)}};this.keyDownHandler=function(a){this.getTargetRow(gx.evt.source(a))&&this.ownerGrid.rowKeyPressed(a)};this.clickHandler=function(a){var b=gx.evt.source(a);b.parentNode&&gx.dom.hasClass(b.parentNode,this.pagingBarClass)&&
gx.evt.waitGridRefresh(function(){this.pagingHandler(b,a)}.closure(this))};this.pagingHandler=function(a,b){var d="";gx.evt.cancel(b,true);if(!gx.dom.hasClass(a,this.pagingButtonDisabled)){gx.dom.hasClass(a,this.pagingButtonFirstClass)?d="FIRST":gx.dom.hasClass(a,this.pagingButtonPreviousClass)?d="PREV":gx.dom.hasClass(a,this.pagingButtonNextClass)?d="NEXT":gx.dom.hasClass(a,this.pagingButtonLastClass)&&(d="LAST");this.changeGridPage(d)}};this.changeGridPage=function(a,b){var d=c.Deferred(),f=this.gxGridName.toUpperCase()+
"PAGING",g=this.ownerGrid,j="",k;if(a){g.InfiniteScrolling||this.mask();if(gx.pO.fullAjax){gx.setGxO(this.parentGxObject);j="E"+g.realGridName.toUpperCase()+"_"+a+"PAGE"+(g.isMasterPageGrid?"_MPAGE":"");if(g.parentGrid)k=g.parentGrid.gridId}else{gx.fn.setHidden(this.gxCmpContext+f,a);j=this.gxCmpContext+"E"+f+"."}gx.evt.execEvt(void 0,void 0,j,gx.evt.dummyCtrl,k,void 0,void 0,false,function(){this.unmask();d.resolve()}.closure(this),b);return d.promise()}};this.setRowSelected=function(a,b,d,f,g){gx.grid.setActiveGridRow(this,
b);var f=f===void 0||f,g=g===void 0||g,j=function(){var d=gx.O;if(!gx.lang.emptyObject(this.parentGxObject)){if(f&&!gx.runtimeTemplates&&a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;this.instanciateSelectionVars(b);var j=this.getRowByGxId(b),k=this.selectedRows||[],m=[];j&&k.push(j);for(j=0;j<k.length;j++){var n=k[j];n.selected=n.gxId==b;if(n.selected){if(f){if(!gx.runtimeTemplates){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;
a.style.backgroundColor=this.gxSelectionColor.Html}gx.dom.addClass(a,this.selectedRowClass);c(a).attr("data-gxselected","")}m.push(n)}else if(f){n=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+n.gxId);if(n!=null&&n.gxSBackcolor!==void 0&&!gx.runtimeTemplates)n.style.backgroundColor=n.gxSBackcolor;gx.dom.removeClass(n,this.selectedRowClass);c(n).removeAttr("data-gxselected")}}for(j=0;j<m.length;j++)this.instanciateSelectedRow(m[j],!g);gx.setGxO(d)}};d&&(f||gx.O.isTransaction())?setTimeout(j.closure(this),
100):j.call(this)};this.instanciateSelectionVars=function(a){gx.setGxO(this.parentGxObject);gx.fn.setCurrentGridRow(this.gxId,a);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",a.substring(0,4))};this.instanciateSelectedRow=function(a,b){this.selectedRows=[a];this.setSelectedRowVars(a);if(this.gxOnLineActivate&&!this.ownerGrid.isLoading){gx.csv.instanciatedRowGrid=this.ownerGrid;b||this.parentGxObject[this.gxOnLineActivate].call(this.parentGxObject,a.gxId)}};this.setSelectedRowVars=
function(a){for(var b=this.parentGxObject,d=this.columns.length,c=0;c<d;c++){var g=this.columns[c],j=b.GXValidFnc[g.gxId];if(j!=null){var k=a.values[c];if(this.ownerGrid.useUserControlModelValues())k=this.properties[a.id][g.index].value;j.v2v&&j.c2v(k)}}};this.scrollIntoView=function(a,b,d){function c(a,b,d,j){return{left:a,top:b,width:d,height:j,right:a+d,bottom:b+j,translate:function(g,k){return c(g+a,k+b,d,j)},relativeFromTo:function(k,n){var t=a,o=b,k=k.offsetParent,n=n.offsetParent;if(k===n)return g;
for(;k;k=k.offsetParent){t=t+(k.offsetLeft+k.clientLeft);o=o+(k.offsetTop+k.clientTop)}for(;n;n=n.offsetParent){t=t-(n.offsetLeft+n.clientLeft);o=o-(n.offsetTop+n.clientTop)}return c(t,o,d,j)}}}var g,j;for(g=c(a.offsetLeft,a.offsetTop,a.offsetWidth,a.offsetHeight);j=a.parentNode;){var k=j.offsetLeft+j.clientLeft,o=j.offsetTop+j.clientTop+d;g=g.relativeFromTo(a,j).translate(-k,-o);j.scrollTop=false===b||g.top<=j.scrollTop+j.clientHeight&&j.scrollTop<=g.bottom-j.clientHeight+d+j.clientHeight?Math.min(g.top,
Math.max(g.bottom-j.clientHeight+d,j.scrollTop)):(g.bottom-j.clientHeight+d+g.top)/2;g=g.translate(k-j.scrollLeft,o-j.scrollTop);a=j}};this.keepGridItemVisible=function(a,b){var d=gx.util.browser.isOldIE(),f=c(this.ownerGrid.getContainerControl()),g=!d?c("#"+this.ownerGrid.getContainerControlId()+" > table > tbody"):f.closest(".gx-grid-fixed-header-ie7");if(g.length>0&&g[0].offsetHeight<g[0].scrollHeight)if(g=this.ownerGrid.getRowCtrlByIdx(a)){d=d?parseInt(f.css("paddingTop"),10):0;this.scrollIntoView(g,
b,d)}};this.setNextRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId+1,true,false)};this.setPreviousRowHovered=function(){return this.toggleRowHoverById(this.gxHoveredRowId-1,true,true)};this.toggleRowHoverById=function(a,b,d){var c=this.ownerGrid.getRowCtrlByIdx(a),g=false;if(c){g=true;if(b){this.toggleRowHoverById(this.gxHoveredRowId,false);this.startRowHover(c);this.gxHoveredRowId=a;this.keepGridItemVisible(a,d)}else this.endRowHover(c)}return g};this.getRowByDOMCtrl=function(a){return this.getRowById(parseInt(a.getAttribute("data-gxrow").substring(0,
4),10)-1)};this.startRowHover=function(a){if(gx.runtimeTemplates)c(a).addClass("gx-row-hovered");else{if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;var b=this.getRowByDOMCtrl(a);if(this.gxAllowHovering&&this.gxHoverColor&&!b.selected){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html}}};this.endRowHover=function(a){if(gx.runtimeTemplates)c(a).removeClass("gx-row-hovered");else{var b=this.getRowByDOMCtrl(a);if(this.gxAllowHovering&&
!b.selected&&a.gxHBackcolor!==void 0)a.style.backgroundColor=a.gxHBackcolor}};this.hasPagingButtons=function(){return this.usePaging&&this.pageSize>0&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(a,b){gx.lang.emptyObject(this.gxRealTitleBackColor)?b.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;">'):b.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+
';">')};this.appendNavBarRowEnd=function(a){a.append("</td></tr>")};this.appendNavigationBar=function(a,b){var d=this.getRowCount(),c=a,d=(d>0||d===0&&!this.isFirstPage())&&this.usePaging,g=this.parentGxObject.Gx_mode,g=this.isGxTrn()&&!this.gxHasAddlines&&!(g=="DSP"||g=="DLT");this.navigationClass=this.gxFooterClass;if(this.gxIsFreestyle&&this.gxGridCols>1)c=this.gxGridCols;(d||g)&&this.appendNavBarRowStart(c,b);if(d){b.append('<div class="'+this.pagingBarClass+'" style="padding-bottom:5px;">');
if(this.currentPage<=0)this.currentPage=1;b.append(this.buildPagingButton(this.pagingButtonFirstClass,!this.isFirstPage(),gx.getMessage("GXM_first")));b.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous")));b.append(this.buildPagingButton(this.pagingButtonNextClass,!this.isLastPage(),gx.getMessage("GXM_next")));b.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),gx.getMessage("GXM_last")));b.append("</div>")}g&&b.append(this.buildLink("["+
this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));(d||g)&&this.appendNavBarRowEnd(b)};this.buildPagingButton=function(a,b,d){return'<button class="'+a+(b?"":" "+this.pagingButtonDisabled)+'"'+('style="padding-left:20px;padding-bottom:5px;'+(b?"":"opacity:.7;cursor:default")+'"')+' title="'+d+'"'+(b?"":" disabled")+"/>"};this.buildLink=function(a,b,d,c,g){var j=this.navigationLinkClass;return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+
g+'" onblur="this.style.textDecoration = \'none\';"><span '+(c!==void 0?'id="'+c+'"':"")+' style="'+("cursor:"+(document.createTextRange?"hand":"pointer")+";")+'" class="'+j+'" onclick="'+b+'" onMouseOver="this.className=\''+this.highlightedNavigationLinkClass+"';window.status='"+d+"';return true;\" onMouseOut=\"this.className='"+j+"';window.status='';return true;\">"+a+"</span></a>"};this.isLastPage=function(){return this.eof!="0"};this.isFirstPage=function(){return(gx.lang.emptyObject(this.firstRecordOnPage)?
"0":this.firstRecordOnPage)=="0"};this.getWebImageTag=function(a){return'<img border="0" src="/'+this.basePath+this.imgsDir+a.toString()+'"/>'};var j=0;this.handleLabel=function(a){if(a.src){var b="img"+j;j++;return"<img name='"+b+"' border='0' src='"+a.src+"'>"}return a};this.sort=function(a,b){if(a.table.isGxTrn()){if(!a.gxExists()&&!b.gxExists()&&!a.gxIsMod()&&!b.gxIsMod())return 0;if(!a.gxExists()&&b.gxExists()||!a.gxIsMod()&&b.gxIsMod())return 1;if(a.gxExists()&&!b.gxExists()||a.gxIsMod()&&!b.gxIsMod())return-1}var d=
a.table,c=d.getColumnByIndex(d.sortColumn),g,j;g=a.values[d.sortColumn];j=b.values[d.sortColumn];gx.lang.instanceOf(g,Array)||(g=[g]);gx.lang.instanceOf(j,Array)||(j=[j]);switch(c.type){case gx.types.numeric:c=function(a){a=gx.num.parseFloat(a,gx.thousandSeparator,gx.decimalPoint);isNaN(a)&&(a=0);return a};break;case gx.types.date:case gx.types.dateTime:c=function(a){try{a=(new gx.date.gxdate(a)).Value}catch(b){gx.dbg.logEx(b,"JSTable.js","sort")}return a.valueOf()};break;case gx.types.bool:c=function(a){return gx.lang.booleanValue(a)?
1:0};break;default:c=function(a){return(""+a).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var k=Math.max(g.length,j.length),o=0,p=0;o===0&&p<k;p++){var m=g[p];m==null&&(o=-1);var s=j[p];s==null&&(o=1);if(o===0){m=c(m);s=c(s);o=typeof m.localeCompare=="function"?m==s?0:m.localeCompare(s):m==s?0:m>s?1:-1}o!==0&&(o=o*(d.ascSort?1:-1))}return o};this.mask=function(){var a=this.container||typeof this.getContainerControl==="function"&&this.getContainerControl();a.firstChild&&gx.dom.mask(a.firstChild)};
this.unmask=function(){var a=this.container||typeof this.getContainerControl==="function"&&this.getContainerControl();a.firstChild&&gx.dom.unmask(a.firstChild)}}}(gx.$);
gx.grid.column=function(c,g,k,j,a){this.table=null;this.index=-1;this.title=c||"";this.type="undefined"!=typeof g?g:gx.types.character;this.width=k||"";this.align=j||"left";this.valign=a||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(c,g,k,j){this.table=null;this.id=c;this.gxParentRowId=j||"";this.gxId=k+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=g.Props||[];this.gxRenderProps=g.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
gx.grid.responsiveGrid=function(c){var g=["xs","sm","md","lg"];return function(k){k=new gx.grid.impl(k);k.appendContainerStart=function(c,a){a.append("<div ");this.appendGridClassAttribute(a);a.append(' id="'+c+'" ');gx.lang.emptyObject(this.gxToolTipText)||a.append('title="'+this.gxToolTipText+'" ');a.append('style="');this.appendGridStyle(a);a.append('" ');this.appendGridAttributes(a);a.append(">")};k.getRowByPos=function(c){return this.container.querySelector((1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:nth-child("+
c+")")};k.scroll_last_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:last"};k.scroll_firt_row_selector=function(){return(1<this.gxGridCols?" >DIV":" ")+">DIV[data-gxrow]:first"};k.ROW_TAG="div";k.CELL_TAG="div";k.ROW_BASE_CLASS="row";k.getRowRenderingProps=function(j,a){var b=this.ROW_TAG,d=this.ROW_BASE_CLASS,f=this.gxGridResponsiveCols;this.gxIsFreestyle&&(b=this.CELL_TAG,d=c.map(g,function(a,b){return["col-",a,"-",Math.floor(12/(f[b]||12))||1].join("")}).join(" "));
this.gxIsFreestyle||(d+=" "+(j?this.evenRowClass:this.oddRowClass)+(a?" RowDeleted":""));return{cls:d,tag:b}};k.appendGridClassAttribute=function(c){c.append(' class="'+this.gxCssClass+'"')};k.appendGridAttributes=function(c){this.gxAllowCollapsing&&this.gxCollapsed&&c.append(" data-gx-sr-only ")};k.appendContainerEnd=k.simpleAppendFn("</div>");k.appendHeaderText=gx.emptyFn;k.appendFooterText=gx.emptyFn;k.appendHeader=gx.emptyFn;k.appendBodyWrapperStart=gx.emptyFn;k.appendBodyWrapperEnd=gx.emptyFn;
k.appendFooterWrapperStart=k.simpleAppendFn("<div>");k.appendFooterWrapperEnd=k.simpleAppendFn("</div>");k.appendRowStart=function(c,a,b){a==b&&!0!==this.ownerGrid.additiveResponse&&c.append('<div class="row">')};k.appendRowEnd=function(c,a,b,d){a==d&&!0!==this.ownerGrid.additiveResponse&&c.append("</div>")};k.appendRowBreaksWrapperStart=function(c,a){c.append("<div>");this.appendDeleteImage(c,a,gx.grid.deletePositions.left)};k.appendRowBreaksWrapperEnd=k.simpleAppendFn("</div></div>");k.appendRowPrefix=
function(j,a,b){if(a!=b){var d=this.gxGridResponsiveCols,f=!1,b=c.map(g,function(b,c){return 1!=d[c]&&0===a%d[c]||0===d[c]&&0===a%12?(f=!0,"visible-"+b):""}).join(" ");f&&j.append('<div class="clearfix '+b+'"></div>')}};k.appendCellPrefixStart=function(c,a,b,d,f){1==this.gxGridCols&&(c.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+f.gxId+'" data-gxrow="'+f.gxId.toString()+'" class="row"><div class="col-xs-12">'),this.appendDeleteImage(c,f,gx.grid.deletePositions.left))};k.appendCellPrefixEnd=
function(c){1==this.gxGridCols&&c.append("</div></div>")};k.appendNavBarRowStart=function(c,a){a.append('<div class="'+this.ROW_BASE_CLASS+'"><div class="col-xs-12 '+this.navigationClass+'">')};k.appendNavBarRowEnd=function(c){c.append("</div></div>")};return k}}(gx.$);
gx.grid.flexGrid=function(c){var g,k=gx.dom;this.useNativeChildControls=!0;this.show=function(){var a;g=c(this.getContainerControl());a=this.drawGrid(this.gxGridObject+"Tbl",!this.IsPostBack);this.setGridHtml(g.get(0),a);this.gxWidth&&g.width(k.addUnits(this.gxWidth,this.gxWidthUnit));this.gxHeight&&g.height(k.addUnits(this.gxHeight,this.gxHeightUnit))};this.destroy=function(){g.hide()};this.appendGridAttributes=function(a){gx.grid.flexGrid.prototype.appendGridAttributes.apply(this,arguments);a.append(" data-gx-flex")};
var j={"flex-direction":"row","flex-wrap":"no-wrap","justify-content":"flex-start","align-items":"flex-start","align-content":"flex-start"},a=function(a,d,c){j[d]!==c&&a.append(d+": "+c+";")};this.appendGridStyle=function(b){gx.grid.flexGrid.prototype.appendGridStyle.apply(this,arguments);a(b,"flex-direction",this.FlexDirection);a(b,"flex-wrap",this.FlexWrap);a(b,"justify-content",this.JustifyContent);a(b,"align-items",this.AlignItems);a(b,"align-content",this.AlignContent)};this.getRowRenderingProps=
function(){return{cls:"",tag:this.ROW_TAG}};this.appendRowPrefix=this.appendRowEnd=this.appendRowStart=gx.emptyFn;this.appendRowBreaksWrapperStart=function(a,d){this.appendDeleteImage(a,d,gx.grid.deletePositions.left)};this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</div>");this.appendCellPrefixStart=function(a,d,c,g,j){1==this.gxGridCols&&(a.append('<div id="'+this.gxCmpContext+this.gxGridObject+"Row_"+j.gxId+'" data-gxrow="'+j.gxId.toString()+'">'),this.appendDeleteImage(a,j,gx.grid.deletePositions.left))};
this.appendCellPrefixEnd=function(a){1==this.gxGridCols&&a.append("</div>")};this.appendNavBarRowStart=function(a,d){d.append('</div></div><div class="'+this.navigationClass+'">')};this.appendNavBarRowEnd=function(a){a.append("</div>")};this.scroll_last_row_selector=function(){return" > DIV[data-gxrow]:last"};this.scroll_firt_row_selector=function(){return" > DIV[data-gxrow]:first"}};gx.lang.inherits(gx.grid.flexGrid,gx.grid.responsiveGrid);
gx.GxObject=function(c){var g=function(){this.onLoadDeferred=c.Deferred();this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.ajax.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.GridsUpper=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings={};this.UCBindingsHiddens={};this.GXValidFnc=
[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls={};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.InternalParms={};this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=gx.GxObject.CONTROL_CMP_REGEX;this.rowPatternRegex=/_([0-9]{4})*$/;this.sPrefix=function(){return this.CmpContext};this.postEventPopupCommands=
[];this.declareDomainHdlr=function(a,b){this.GXValidFnc[a].dom_hdl=b};this.setVCMap=function(a,b,d,c,f,g){this.VarControlMap[a]={id:b,grid:d,type:c,length:f,decimals:g}};this.Initialize=function(){this.InitStandaloneVars();this.initTargets()};this.InitStandaloneVars=function(){var a=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=a&&gx.setGxO(a)};this.getCmpType=function(a){a=this.cmpRegex.exec(a);this.cmpRegex.lastIndex=0;return a};this.getContainer=function(){if(this.containerControl)return gx.dom.byId(this.containerControl);
if(!this.CmpContext&&!this.IsMasterPage)return c(".gx-content-placeholder").get(0)||document.body;var a,b=this.getCmpType(this.CmpContext);b&&(a=gx.dom.byId(b[1]+"gxHTMLWrp"+b[2]+(b[3]||"")));if(a)return a};this.setContainer=function(a){this.containerControl=a};this.setObjectType=function(a){this.ObjectType=a};this.getObjectType=function(){return this.ObjectType};this.isTransaction=function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};this.setAjaxSecurity=function(a){this.AjaxSecurity=
a};this.setOnAjaxSessionTimeout=function(a){switch(a){case "Warn":this.OnSessionTimeout=gx.ajax.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=gx.ajax.timeoutActions.callObj}};this.addKeyListener=function(a,b){gx.evt.addKeyListener(this.CmpContext,a,b)};this.clearMessages=function(){this.MsgList.length=0};this.addMessage=function(a){this.MsgList.push(a)};this.showMessages=function(){for(var a=[],b=this.MsgList.length,d=0;d<b;d++)a.push({att:"",type:2,text:this.MsgList[d]});b={};b[""==
this.CmpContext?"MAIN":this.CmpContext]=a;gx.fn.setErrorViewer(b);this.clearMessages()};this.setPrompt=function(a,b){gx.fn.attachCtrl(this.CmpContext+a,{id:a,isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:b,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[a]=function(b){if((b=(b||gx.dom.el(a)).parentNode)&&b.href)if((b=b.href.match("javascript:(.+)"))&&b.length>1){b=decodeURIComponent(b[1]);try{eval(b)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setPrompt")}}}};
this.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var a=[],b=gx.csv.lastEvtResponse.gxValues,d=b.length,c=0;c<d;c++){var f=b[c];if(f.CmpContext==this.CmpContext&&gx.lang.booleanValue(f.IsMasterPage)==this.IsMasterPage){a.push(f);break}}gx.fn.setJsonValues(a)}};this.call=function(a,b,d){gx.nav.willRedirect(a)?this.postEventRedirect={url:gx.http.formatLink(a,b),forceDisableFrm:!1}:gx.nav.call.apply(gx.nav,arguments)};this.callUrl=function(a,b){gx.nav.willRedirectByUrl(a)?
this.postEventRedirect={url:a,forceDisableFrm:!1}:gx.nav.callUrl.apply(gx.nav,arguments)};this.popupOpen=function(a){this.postEventPopupCommands.push({popup:gx.lang.clone(a)})};this.popupOpenUrl=function(a,b){this.postEventPopupCommands.push({popup:gx.popup.openUrlToOpenPopupParms(a,b)})};this.refreshInputs=function(a){for(var b=a.length,d=0;d<b;d++){var c=this.getValidStructFld(a[d][1]);null!=c&&"function"==typeof c.c2v&&c.c2v()}};this.refreshOutputs_impl=function(a){for(var b=[],d=0,c=a.length;d<
c;d++){var f=a[d];if(f.fld){var g=this.getValidStructFld(f.fld);if(null!=g)gx.fn.v2c(g),f=gx.fn.getControlGridRef(g.fld,g.grid),gx.csv.invalidateGXCtrl(f),gx.fn.setControlOldValue(f,g.val());else{g=this.getVariable(f.av);if(null!=g&&"object"==typeof g){var j=this.getFormBCForVar(f.av);null!=j&&this.bcToScreen(j,g);(j=this.getGridForColl(f.av))&&j.refreshCollection(g)}gx.fn.setHidden(gx.csv.ctxControlId(f.fld,this),g)}}else f.ctrl&&b.push(f)}gx.uc.StartRender();d=0;for(c=b.length;d<c;d++)f=b[d],gx.uc.isUserControl(f.ctrl)&&
(f.ctrl.execV2CFunctions(!1),f.ctrl.execShowFunction());gx.uc.EndRender()};this.refreshOutputs=function(a){var b=this.postEventPopupCommands;this.postEventPopupCommands=[];this.postEventRedirect&&(b.push({redirect:this.postEventRedirect}),delete this.postEventRedirect);0<b.length&&gx.ajax.dispatchCommands(b);this.refreshOutputs_impl(a);this.showMessages()};this.refreshRowOutputs=function(a){this.refreshOutputs_impl(a)};this.refreshServerOutputs=function(a){for(var b=a.length,d=0;d<b;d++){var c=a[d],
f=gx.fn.getHidden(this.CmpContext+c.fld);void 0!=f&&((c=this.getValidStructFld(c.fld))&&c.v2v?(c.v2v(f),gx.fn.v2c(c,f)):this.setVariable(a[d].av,f))}};this.getContextObject=function(a){return null!=this.getValidStructFld(a)&&(a=gx.fn.getControlValue_impl(this.CmpContext+a),null!=a)?a:""};this.getValidStructId=function(a){if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),d=0;d<b.length;d++)if(this.isSameField(this.getValidStruct(b[d]),a))return b[d];return-1};this.getValidStructFld=function(a){if("function"==
typeof a||"object"==typeof a&&a.tagName)a="object"==typeof a&&"radio"===a.type&&a.name?a.name:gx.dom.id(a);var b=this.getValidStructFld_cache[a];if(b)return b;if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),d=b.length,c=0;c<d;c++){var f=this.getValidStruct(b[c]);if(this.isSameField(f,a))return this.getValidStructFld_cache[a]=f}return this.getValidStructFld_cache[a]=null};this.isSameField=function(a,b){var d=a.fld;if(d==b)return!0;this.IsComponent&&0==b.indexOf(this.CmpContext)&&(b=b.substring(this.CmpContext.length));
0!=a.grid&&(b=b.replace(this.rowPatternRegex,""));this.IsMasterPage&&(d=d.replace(/_MPAGE$/,""),b=b.replace(/_MPAGE$/,""));return d==b};this.getUserFocus=function(){var a=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(a)&&"notset"!=a){var b=gx.dom.byId(a);if(!gx.lang.emptyObject(b)&&!gx.fn.isAccepted(b)){a=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var d=gx.O;gx.O=this;b=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=d;gx.csv.cmpCtx=a;a=gx.lang.emptyObject(b)?"":
b.id}}if(gx.lang.emptyObject(a)){if(this.hasMasterPage()&&(a=this.MasterPage.getUserFocus(),!gx.lang.emptyObject(a)))return a;b=[];for(d=0;d<this.WebComponents.length;d++)if(0==this.WebComponents[d].CmpContext.indexOf("MP"))b.push(this.WebComponents[d]);else if(a=this.WebComponents[d].getUserFocus(),!gx.lang.emptyObject(a))return a;for(d=0;d<b.length&&!(a=b[d].getUserFocus(),!gx.lang.emptyObject(a));d++);}return a};this.getGridColumn=function(a,b){var d=null,c=null,c=gx.fn.controlGridId(a);0!=c&&
(c=gx.O.getGridById(c,b))&&(d=c.grid.getColumnByHtmlName(a));return d};this.hasMasterPage=function(){return null!=this.MasterPage};this.setComponent=function(a){this.CmpControls[a.id.toLowerCase()]=a};this.getComponentByPrefix=function(a){var b=c.map(this.CmpControls,function(b){return b.Prefix==a?b:null});return 1==b.length?b[0]:null};this.refreshGrid=function(a){(a=this.getGrid(a))&&a.doRefresh()};this.refreshComponent=function(a){var b=this.getWebComponent(this.CmpContext+this.getComponentData(a).Prefix);
b?gx.evt.dispatcher.dispatch("REFRESH",b):(b=gx.fn.controlGridId(a),0!==b&&(b=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(a).Prefix+gx.fn.currentGridRow(b)))&&gx.evt.dispatcher.dispatch("REFRESH",b))};this.getComponentPrefix=function(a){return(a=this.getComponentData(a))?a.Prefix||"":""};this.getComponentData=function(a){return this.CmpControls[a.toLowerCase()]};this.createWebComponent=function(a,b,d,c,f,g,j){g=g||this.getComponentPrefix(a);c||(a=gx.fn.controlGridId(a),c=0!==a?gx.fn.currentGridRow(a):
"");var f=f||this.CmpContext+"gxHTMLWrp"+g+c,g=this.CmpContext+g,k=gx.getObj(g,!1);k?k.startFeedback():(a=gx.dom.byId(f),a.firstChild&&gx.dom.mask(f));a=gx.gen.isJava()&&gx.pO.PackageName?gx.pO.PackageName+".":"";gx.ajax.dynComponent(a+b,d,g,c).done(function(a){if(!a.DynComponentMap)a.DynComponentMap={};a.DynComponentMap[g+c]=f;gx.ajax.setJsonResponse({response:a,isPostBack:true,gxObject:k||gx.O,afterCmpLoaded:function(){j&&j(g)}});k?k.endFeedback():gx.dom.unmask(f)})};this.registerComponent=function(a){this.WebComponents[a.CmpContext]=
a;this.WebComponents.push(a)};this.setWebComponent=function(a,b){this.deleteComponent(a.CmpContext,a,!1);b&&this.restoreComponentHiddens(a.CmpContext,b);this.registerComponent(a);a.JustCreated=!0;gx.fn.setHidden(a.CmpContext,a.ServerClass);gx.fx.obs.notify("webcom.render",[a])};this.getWebComponent=function(a){return this.WebComponents[a]};this.deleteComponent=function(a,b,d){var d="undefined"==typeof d?!0:d,c=this.getWebComponent(a);if(c){var f=gx.gen.isJava()&&c.PackageName?c.PackageName+".":"";
gx.cache.deleteInlineCode(a+f+c.ServerClass.toLowerCase());d&&this.deleteComponentHiddens(a);gx.lang.emptyObject(b)||gx.fn.setHidden(b.CmpContext,b.ServerClass);c.ondestroy();delete this.WebComponents[a];b=this.WebComponents.length;for(d=0;d<b;d++)if(this.WebComponents[d].CmpContext==a){this.WebComponents.splice(d,1);break}var b=this.WebComponents,g;for(g in b)isNaN(parseInt(g))&&0===g.indexOf(a)&&this.deleteComponent(g)}};this.deleteComponentHiddens=function(a){if(gx.lang.isArray(a)){if(0==a.length)return;
a=gx.fn.getCmpRegex("("+a.join("|")+")")}else a=gx.fn.getCmpRegex(a);var a=gx.fn.filterHiddens(a,gx.http.viewState),b;for(b in a)b&&gx.fn.deleteHidden(b)};this.restoreComponentHiddens=function(a,b){var d=gx.fn.getCmpRegex(a),d=gx.fn.filterHiddens(d,b),c;for(c in d)c&&gx.fn.setHidden(c,d[c])};this.setCmpContext=function(a){void 0!=a&&(this.IsTypeComponent=!0,""!==a&&(this.IsComponent=!0),this.CmpContext=a)};this.getOldLvl=function(a){for(var b in this.LvlOlds)for(var d=this.LvlOlds[b],c=d.length,f=
0;f<c;f++)if(d[f]==a)return b;return-1};this.refreshDependantGrids=function(a){for(var b=this.Grids.length,d=0;d<b;d++)for(var c=this.Grids[d],f=c.refreshVars,g=f.length,j=0;j<g;j++)if(f[j].fld==a.fld){c.filterVarChanged();break}};this.getCtrlPropertyValue=function(a,b){var d=gx.fn.getCtrlProperty(a,b);void 0===d&&(d=gx.fn.getHidden(a+"_"+b));return d};this.setGrid=function(a){this.Grids[a.gridName]=a;this.GridsUpper[a.gridName.toUpperCase()]=a;var b=this.getGridIdxByName(a.gridName);-1!=b?this.Grids[b]=
a:this.Grids.push(a)};this.getGrid=function(a){a=a||"";return this.Grids[a]||this.GridsUpper[a.toUpperCase()]};this.getGridIdxByName=function(a){for(var b=this.Grids.length,d=0;d<b;d++)if(this.Grids[d].gridName==a)return d;return-1};this.getGridIdx=function(a){for(var b=this.Grids.length,d=0;d<b;d++)if(this.Grids[d].gridId==a)return d;return-1};this.getGridById=function(a,b){for(var b=b||"",d=this.Grids.length,c=0;c<d;c++){var f=this.Grids[c];if(f.gridId==a&&(!f.parentRow||gx.text.endsWith(b,f.parentRow.gxId)))return f}return null};
this.getGridForColl=function(a){for(var b=this.Grids.length,d=0;d<b;d++){var c=this.Grids[d];if(c.boundedCollName==a)return c}return null};this.getFormBCForVar=function(a){for(var b in this.FormBCs){var d=this.FormBCs[b];if(d&&d.gxvar==a)return d}return null};this.getGridBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=a.substring(this.CmpContext.length));return this.GridBCs[b]};this.getFormBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=a.substring(this.CmpContext.length));
return this.FormBCs[b]};this.addGridBCProperty=function(a,b,d,c){var f=this.getGridBC(a);"undefined"==typeof f&&(f={},f.gxvar=c,this.GridBCs[a]=f);this.addBCProperties(f,b,d,c)};this.addBCProperty=function(a,b,d,c){var f=this.getFormBC(a);"undefined"==typeof f&&(f={},f.gxvar=c,this.FormBCs[a]=f);this.addBCProperties(f,b,d,c)};this.addBCProperties=function(a,b,d,f){if(a)if(b instanceof Array)for(var g=b.length,j=function(){var a=this[d.gxvar];gx.lang.emptyObject(d.hc)||(a=this[d.hc]);if("date"==d.type)a=
(new gx.date.gxdate(a)).getString("Y4MD");else if("bitstr"===d.type&&gx.pO.fullAjax){var g=gx.fn.getControlGridRef(d.fld,d.grid);g&&c(g).val()&&(a="gxformdataref:"+g.id)}this.valueToBCProp(this[f],b,d,a)},k=0;k<g;k++){if("undefined"==typeof a[b[k]])if(k<g-1)a[b[k]]={};else{a[b[k]]=d;"object"==typeof this[f]&&(d.v2bc=j);break}a=a[b[k]]}else"string"==typeof b&&(a[b]=d)};this.valueToBCProp=function(a,b,d,c){try{if(a)for(var f=b.length,g=0;g<f;g++){if(gx.lang.isArray(a)&&d&&d.grid){if(0==a.length)continue;
var j=gx.fn.getGridObj(d.grid),k=j&&j.grid?j.grid.firstRecordOnPage:0,l=gx.fn.currentGridRow(d.grid);4<l.length&&(l=l.substr(l.length-4*(g+1),4));a=a[Number(k||0)+Number(l)-1]}1<f&&(g<f-1&&void 0===a[b[g]])&&(a[b[g]]={});if("object"==typeof a[b[g]]&&g<f-1)a=a[b[g]];else{a[b[g]]=c;void 0!==a[b[g]+"_N"]&&(a[b[g]+"_N"]=0);break}}}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","valueToBCProp")}};this.bcToScreen=function(a,b){for(var d in a)if("gxvar"!=d)try{if("object"==typeof b[d])this.bcToScreen(a[d],b[d]);
else{var c=a[d];if((0==c.grid||gx.csv.validatingGrid&&c.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(c.hc)&&void 0!=b[d]&&c.v2v)c.v2v(b[d]),gx.fn.v2c(c,b[d])}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","bcToScreen")}};this.addGridUCEventHandler=function(a,b,d){gx.lang.emptyObject(this.GridUCsEvts[a])&&(this.GridUCsEvts[a]=[]);this.GridUCsEvts[a].push({e:b,h:d})};this.getGridUCEventHandlers=function(a){a=this.GridUCsEvts[a];return gx.lang.emptyObject(a)?[]:a};this.setGridUCDynProp=function(a,
b,d,c,f){this.setGridUCProp(a,b,d,void 0,f)};this.setGridUCProp=function(a,b,d,c,f){gx.lang.emptyObject(this.GridUCsProps[a])&&(this.GridUCsProps[a]=[]);this.GridUCsProps[a].push({p:b,h:d,v:c,t:f});"InternalTitle"==b&&(this.GridUCsProps[a].title=c)};this.getGridUCProperties=function(a){a=this.GridUCsProps[a];return gx.lang.emptyObject(a)?[]:a};this.addUsercontrolBinding=function(a,b,d){this.UCBindings[a]||(this.UCBindings[a]={fld:b,uc:[]},this.UCBindingsHiddens[b]=this.UCBindings[a]);gx.util.inArray(d,
this.UCBindings[a].uc)||this.UCBindings[a].uc.push(d)};this.setUserControl=function(a){a.ContainerName&&(this.UserControls[a.ContainerName]=a)};this.getUserControl=function(a){var b=this.UserControls[a];!b&&""!=this.CmpContext&&(b=this.UserControls[this.CmpContext+a]);return b};this.getUserControlGrids=function(){return c.map(this.Grids,function(a){if(a.grid&&a.isUsercontrol)return a.grid})};this.execV2CFunctions=function(a,b){b||(b=this.UserControls);var d=this;gx.uc.StartRender();c.each(b,function(b,
c){c&&d==c.ParentObject&&c.updateAndShow(a)});gx.uc.EndRender()};this.execC2VFunctions=function(){c.each(this.UserControls,function(a,b){try{b.execC2VFunctions()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execC2VFunctions")}try{b.saveProperties()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execC2VFunctions")}})};this.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};this.setVariable=function(a,b){var d=this[a]=b;0!=a.indexOf(this.CmpContext)&&
gx.fn.setHidden(this.CmpContext+a,b);if(void 0!=this.VarControlMap[a]){var c=this.VarControlMap[a].type;if("date"==c||"dtime"==c)("string"==typeof b&&(b=new gx.date.gxdate(b),this[a]=b),"date"==c)?d=b.getStringWithFmt("Y4MD"):(d=this.VarControlMap[a].decimals,d=b.getStringWithFmt("Y4MD")+" "+b.getTimeString(!0,!0,1<d,12<=d));"decimal"==c&&"."!=gx.decimalPoint?(d=b.toString().replace(".",gx.decimalPoint),"string"==typeof b&&(this[a]=gx.num.parseFloat(b))):"int"==c&&"string"==typeof b&&(this[a]=gx.num.parseInt(b));
gx.fn.setHidden(this.CmpContext+this.VarControlMap[a].id,d)}"Gx_mode"==a&&this.setMode();void 0!=this.UCBindings[a]&&gx.fn.setHidden(this.CmpContext+this.UCBindings[a].fld,b)};this.getVariable=function(a){return this[a]};this.isServerEvent=function(a){return this.Events[a][1]||!1};this.getServerEventName=function(a){return this.Events[a][0]||""};this.getClientEventName=function(a){for(var b in this.Events)if(this.Events[b][0]==a)return b;return""};var g={RFR:"REFRESH",RFR_MPAGE:"REFRESH"};this.cleanEventName=
function(a){var a=a.replace(RegExp("^"+this.CmpContext),""),b=/^E('?(\w+)\.?([^\.]*)'?)/.exec(a),a=b&&b.length&&1<b.length?b[1].replace(/\.\d*$/,""):a;return g[a]||a};this.inputHasFormatErrors=function(a,b,d){var c,f;c=this.cleanEventName(a);var g,j,a=!1,k=gx.csv.anyFormatError(),l;if(!k||!this.EvtParms[c])return!1;f=this.EvtParms[c][0];var m=this,n=function(a){if(a)if(b&&d&&a.grid==b){if((g=gx.fn.getControlGridRef(a.fld,b,d))&&g.id&&gx.csv.gxFormatErrors[g.id])return!0}else if((g=gx.fn.getControlGridRef(a.fld,
a.grid))&&g.id)for(l in gx.csv.gxFormatErrors)if(a==m.getValidStructFld(l))return!0;return!1};c=0;for(len=f.length;c<len&&!a;c++){var q=f[c];if(q.postForm)return k;if(q.fld)if(j=this.getValidStructFld(q.fld))a=a||n(j);else if(q=this.getFormBCForVar(q.av),null!=q)for(var r in q)j=q[r],"object"===typeof j&&(a=a||n(j))}return a};this.setEventParameters=function(a,b){gx.csv.lastEvtRow=null;gx.O=this;var d=!0,c=-1;gx.csv.cmpCtx=this.CmpContext;for(var f=a.length,g=0;g<f;g++){var j=a[g][0],k=a[g][1],l=
a[g][2],m=!1;if(b instanceof v)this.setVariable(l,b.parms[g]),m=!0;else for(var n in b)if(n.toLowerCase()==j.toLowerCase()){this.setVariable(l,b[n]);m=!0;break}m||this.setVariable(l,b);j=this.getValidStructFld(k);null!=j?(0!=j.grid&&-1==c?c=j.grid:0!=j.grid&&j.grid!=c&&(d=!1),gx.fn.v2c(j)):gx.fn.setHidden(this.CmpContext+k,this.getVariable(l))}d&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(c))};this.executeEvent=function(a,b,d,c,f){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var g=this.getClientEventName(a);
(g?this.isServerEvent(g):1)?(f?(f=this.getGrid(f))&&d?f.instanciateRow(d):gx.csv.instanciatedRowGrid=null:gx.csv.instanciatedRowGrid=null,this.executeServerEvent(a,b,d,c)):gx.evt.execCliEvt(this.CmpContext,this.IsMasterPage,g,f,d,"");gx.csv.instanciatedRowGrid=null};this.executeServerEvent=function(a,b,d,f,g){var j=c.Deferred();gx.O=this;gx.csv.cmpCtx=this.CmpContext;var k=!0;void 0!=b&&!1==b&&(k=!1);b="string"==typeof d?d:"";gx.lang.emptyObject(gx.csv.lastEvtRow)||(b=gx.csv.lastEvtRow);(d=gx.csv.validatingGrid||
gx.csv.instanciatedRowGrid)&&d.parentObject!=this&&(d=null);var l=!gx.lang.emptyObject(d)?d.gridId:!1;g?b="":(""==b&&l&&(b=gx.csv.lastRow[l]),"undefined"==typeof b&&(b=gx.fn.currentGridRowImpl(d.gridId)));gx.evt.execEvt(this.CmpContext,this.IsMasterPage,this.CmpContext+"E"+a+"."+(b||""),gx.evt.dummyCtrl,l,k,null,null,function(){j.resolve()}.closure(this),f);return j.promise()};this.executeEnterEvent=function(a,b,d){var c=!1;if(b&&b.onblur)b.onblur();if((gx.pO.fullAjax||null==f)&&gx.evt.cancelAndRefresh(a)){if(!this.refreshAndEnter)return;
c=!0}gx.dom.hasSubmitControl()&&gx.evt.cancel(a,!0);b&&("INPUT"==b.nodeName&&gx.dom.isEditControl(b))&&gx.evt.cancel(a,!0);var f=this.gxOWithEnter(b);if(null!=f){gx.evt.enter=!0;var g="ENTER";f.IsMasterPage&&(g+="_MPAGE");var g=f.CmpContext+"E"+g+".",j;if(gx.evt.isEnterEvtCtrl(b)){var k=gx.fn.controlRowId(b);j=gx.fn.controlGridId(b.id);k&&(g+=k)}gx.evt.execEvt(f.CmpContext,f.IsMasterPage,g,gx.evt.dummyCtrl,j,!1,null,d,null,c);gx.evt.enter=!1;gx.evt.cancel(a,!0)}};this.gxOWithEnter=function(a){if(a&&
(a=gx.json.evalJSON(c(a).attr(d)||"{}"))&&1<a.length)if((a=gx.getObj(a[0],a[1]))&&a.hasEnterEvent)return a;if(this.hasEnterEvent)return this;if(this.IsComponent){var a=this.getCmpType(this.CmpContext),b=""==a[1]&&0==a[0].indexOf("MP"),a=gx.getObj(a[1],b);if(!gx.lang.emptyObject(a))return a.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();return null};this.getLastControlId=function(){return this.GXLastCtrlId};this.getValidStruct=function(a){return this.GXValidFnc[a]};
this.getControlIds=function(){return this.GXCtrlIds};this.getControlIdsh=function(){return this.GXCtrlIdsh};this.getUsercontrolFromChild=function(a){c.each(this.UserControls,function(b,d){var c=d.getContainerControl();if(gx.dom.isChildNode(a,c))return d});return null};this.installFlatLevelDatePickers=function(){for(var a=null,b=this.getControlIds(),d=b.length,c=0;c<d;c++)a=this.getValidStruct(b[c]),void 0!=a&&(0==a.grid&&void 0!=a.dp)&&gx.fn.installDatePicker(this.CmpContext+a.fld,a.dp.f,a.dp.st,
a.dp.wn,a.dp.mf,gx.fn.datePickerFormat(a.dp.pic,a.dp.dec,a.len),a.len,a.dp.dec)};this.installImageControls=function(){for(var a=gx.dom.byClass(gx.html.multimediaUpload.gxCssClass),b=0,d=a.length;b<d;b++)gx.html.multimediaUpload.createControl(a[b]);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue)};this.initControlsEnabledFlag=function(a){if("bits"!=a.type&&("audio"!=a.type&&"video"!=a.type)&&(a=gx.fn.getControlRef(a.fld))){var b=gx.http.viewState[gx.dom.id(a)+"_Enabled"];
void 0!==b&&gx.fn.setEnabledProperty(a,gx.lang.gxBoolean(b),!1)}};this.initControlsBehaviour=function(){var a=this;c.each(gx.O.GXValidFnc,function(b,d){if(d&&d.fld&&(a.initControlsEnabledFlag(d),d.gxsgprm)){var c=gx.fn.getControlRef(d.fld);c&&gx.fx.installSuggest(c)}})};var t={},o=!1,p=function(a){try{var b=new Function("return "+a);if(b)return b()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","evaluateCode")}return!1},m=function(){var a={select:!0,textarea:!0},b=gx.lang.apply({radio:!0,checkbox:!0,file:!0},
gx.dom.editControls);return function(d){if(!d)return!1;var c=d.tagName.toLowerCase();return"input"==c?b[d.type.toLowerCase()]:a[c]}}(),s=function(b){if(!("keypress"===b.type&&13!==b.keyCode)){var f=b.target,g=c(f),j=c(b.currentTarget),l=gx.json.evalJSON(j.attr(d)),n=j.attr(k),s;if(!f||!("A"===f.tagName.toUpperCase()&&void 0===c(f).attr(a)&&f.href))if(l&&1<l.length&&(s=gx.getObj(l[0],l[1])),s){if(!j.hasClass("gx-disabled")){if(!(l=m(f)))a:{if(f&&"label"==f.tagName.toLowerCase()&&(l=f.getAttribute("for"))){l=
gx.dom.el(l);l=m(l)&&gx.fn.isVisible(l,0);break a}l=!1}if(!l||c(f).is(j))gx.util.browser.isOldIE()&&!gx.util.browser.isWinCE()?r.apply(this,[b,g,s,n]):q.apply(this,[b,g,s,n])}}else b.preventDefault()}},q=function(a,b,d,c){var f=function(){b.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);d.handleControlEvent(a,c,this)}.closure(this);gx.fx.dom.delayedDispatch(a)?b.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)?gx.fx.dom.raiseEvent("dblclick",a):(f=setTimeout(f,gx.config.evt.dblclick.delay),
b.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,f)):f.call()},r=function(a,b,d,c){if(!b.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR)){var f=function(){b.removeAttr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR);d.handleControlEvent(a,c,this)}.closure(this);gx.fx.dom.delayedDispatch(a)?(f=setTimeout(f,gx.config.evt.dblclick.delay),b.attr(gx.GxObject.GX_EVENT_CONTROL_DELAYED_ATTR,f)):f.call()}},u=function(a,b,d){try{d&&a.preventDefault(),b&&a.stopPropagation()}catch(c){}};this.handleControlEvent=function(d,
f,g){if(t[f]){var k=t[f],l=t[f].evt,f=this.Events[l]?this.Events[l][0]:t[f].std,m=c(g).is("SPAN"),l=c(g).attr(a)||(m?c(g).find("> a").first().attr(a):""),m=c(g).attr(b)||(m?c(g).find("> a").first().attr(b):""),n;n="img"==g.tagName.toLowerCase()?c(g).attr(j):c("a["+j+"]",g).attr(j);var q=this.getGridById(k.grid),r=0<k.grid?gx.fn.controlRowId(d.currentTarget):null,s,o=!0,v=!1;c(d.target);if("combo"!=k.ctrltype)switch(l){case "1":u(d,!0,!0);gx.fn.closeWindow();break;case "3":case "4":u(d,!0,!0);m&&p(m);
break;case "8":gx.ajax.doRefresh(this);break;default:if(!n||p(n))if(q&&(s=q.gridName),"checkbox"===k.ctrltype&&(gx.fn.checkboxClick(k,g,k.values[0],k.values[1]),o=!1,v=!0),f&&this.executeEvent(f,!1,r,!1,s),v)gx.evt.onchange(g);u(d,!0,o)}}};this.registerCtrlsEventHandlers=function(){var a,b,g=this.GXCtrlIds,j=this.GXValidFnc,l,m=this.IsMasterPage,n=this.CmpContext,q=m?"_MPAGE":"",r="["+k+"]",p,u,v=!n&&!m,w,x=f;a=0;for(b=g.length;a<b;a++)if(l=j[g[a]],u=(w=l.evt||l.evt2)||this.hasEnterEvent&&!gx.lang.emptyObject(l.ctrltype),
!gx.util.inArray(l.ctrltype,x)&&(w||u))w&&(t[l.fld]=l),0===l.grid&&(p=n+l.fld+(l.gxvar?"":q),u="#span_"+p,p="#"+p,u=l.gxvar&&0<c(u).length?c(u):c(p),w&&(u.attr(k,l.fld),u.is("img")&&u.attr("tabindex","0")),u.attr(d,gx.json.serializeJson([n,m])));v&&!o&&(o=!0,c(document.body).on("click keypress",r,s))};this.unregisterCtrlsEventHandlers=function(){o&&c(document.body).off("click keypress",s);o=!1};this.clearMultimediaValue=function(a){a=gx.html.multimediaUpload.getElements(a);a.fileField.onchange(a.fileField);
gx.fn.setHidden(a.fileField.id,"");gx.fn.setHidden(a.uriField.id,"");gx.fn.setHidden(a.fileField.id+"_gxBlob","")};this.refreshOlds=function(){for(var a in this.LvlOlds){var b=this.LvlOlds[a];if("function"!=typeof b){var d=gx.fn.lvlGrid(parseInt(a,10)),c;0!=d&&(c=gx.fn.currentGridRow(d));for(var d=b.length,f=0;f<d;f++){var g=b[f],j=g,k="",l=gx.fn.vStructForOld(j);if(l){if(!l.gxgrid||0<l.gxgrid.grid.rows.length)k=gx.typedOld(l.fld,j,l.type)}else gx.lang.emptyObject(c)||(g+="_"+c),k=gx.fn.getHidden(this.CmpContext+
g);"undefined"!=typeof k&&(l||(window[j]=k),this[j]=k)}}}};var v=function(a){this.parms=a;return this},x={};this.addExoEventHandler=function(a,b){var d=function(){var a=gx.O;gx.setGxO(this);b.call(this,null,null,new v(Array.prototype.slice.call(arguments,0)));gx.setGxO(a)};gx.fx.obs.addObserver(a,this,d);x[a]=d};this.deleteExoEventHandlers=function(){for(var a in x)x.hasOwnProperty(a)&&gx.fx.obs.deleteObserver(a,this,x[a])};this.restoreExoEventHandlers=function(){for(var a in x)gx.fx.obs.addObserver(a,
this,x[a])};this.deleteEventHandlers=function(){try{this.unregisterCtrlsEventHandlers(),gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this),this.deleteExoEventHandlers(),gx.fx.dom.deleteEventHandlers(this)}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","deleteEventHandlers")}};this.ondestroy=function(){try{this.endFeedback(),this.deleteEventHandlers(),c.each(this.UserControls,function(a,b){if(!gx.lang.emptyObject(b.destroy))try{b.destroy()}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","ondestroy")}}),this.UserControls=
[],delete this.containerControl}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","ondestroy")}};this.onpost=function(){var a=gx.O;gx.setGxO(this);if(this.hasMasterPage())this.MasterPage.onpost();for(var b=this.WebComponents.length,d=0;d<b;d++)this.WebComponents[d].onpost();this.ReadonlyForm&&(this.IsComponent&&a!=this)&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(a)};this.roControlsAsHidden=function(){for(var a=this.getControlIds(),b=a.length,d=0;d<b;d++){var c=this.getValidStruct(a[d]);if(0==
c.grid&&"function"==typeof c.val){var c=this.CmpContext+c.fld,f=gx.dom.el(c);f&&!gx.fn.isAccepted(f)&&gx.fn.setHidden(c,gx.fn.getControlValue(c))}}};this.onload=function(a,b){c.Deferred();var d=[];gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.screenToVars();this.hasMasterPage()&&(this.MasterPage.onload(),gx.setGxO(this));var f=this.Grids.length;if(!1!==a)for(var g=0;g<f;g++)d.push(this.Grids[g].loadGrid());f=this.WebComponents.length;for(g=0;g<f;g++)d.push(this.WebComponents[g].onload(a));
b?this.afterLoad():gx.fx.obs.addObserver("gx.onready",this,this.afterLoad.closure(this),{single:!0});gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);var j=this;c.when.apply(c,d).done(function(){j.onLoadDeferred.resolve()})};this.afterLoad=function(){gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsBehaviour();this.execV2CFunctions(!0);this.JustCreated=
!1;this.registerCtrlsEventHandlers();this===gx.pO&&(gx.ui.controls.actionGroup.init(),gx.dom.indexElements(),gx.fn.doAttachs());gx.dbg.logPerf("objectAfterLoad_"+this.CmpContext+this.ServerClass);this.notify("onafterload")};this.onunload=function(a){if(this.hasMasterPage()&&!1!==a)this.MasterPage.onunload();a=this.Grids.length;for(a-=1;0<=a;a--)delete this.Grids[this.Grids[a].gridName],this.Grids[a].cleanup(),this.Grids.splice(a,1);a=this.WebComponents.length;for(a-=1;0<=a;a--)delete this.WebComponents[this.WebComponents[a].CmpContext],
this.WebComponents[a].onunload(),this.WebComponents.splice(a,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};this.clean=function(a){this.cleanHiddens();this.onunload(a)};this.cleanHiddens=function(){gx.http.clearState();gx.http.clearMultipartHidden()};this.screenToVars=function(){try{for(var a=this.getControlIds(),b=a.length,d=0;d<b;d++){var c=this.getValidStruct(a[d]);c&&(0==c.lvl&&"function"==typeof c.c2v)&&c.c2v()}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","screenToVars")}};
this.postbackLoad=function(a,b){var d=this.IsComponent&&this.JustCreated;this.hasMasterPage()&&this.MasterPage.postbackLoad(a);for(var c=this.WebComponents.length,f=0;f<c;f++)this.WebComponents[f].postbackLoad(a);d&&(this.installImageControls(),this.installFlatLevelDatePickers(),this.registerCtrlsEventHandlers());this.execV2CFunctions(!0,d?!1:a);this.conditionsChanged=this.JustCreated=!1;this===gx.pO&&gx.fn.doAttachs(b);this.notify("onafterload");this.onLoadDeferred.resolve()};this.addDragSource=
function(a,b,d,c){gx.fx.dnd.addSource(this,a,b,d,c)};this.addDropTarget=function(a,b,d,c){gx.fx.dnd.addTarget(this,a,b,d,c)};this.addContextSetter=function(a,b,d,c){gx.fx.ctx.addSetter(this,a,b,d,c)};this.addContextTracker=function(a,b,d,c){gx.fx.ctx.addTracker(this,d,c)};this.addOnMessage=function(a,b,d,c,f){gx.fx.notifications.addTracker(this,a,b,d,c,f)};this.addEventHandler=function(a,b,d){gx.fx.dom.addEventHandler(this,a,b,d)};this.updateBitmapValue=function(a,b,d,c){a=gx.html.multimediaUpload.getContainer(a);
"file"==gx.html.multimediaUpload.getOptionValue(a)?this[b]=c:this[d]=c};var z,w=0,H=void 0===gx.NotificationDelay?200:gx.NotificationDelay;this.getFeedbackContainer=function(){return gx.pO&&!gx.pO.fullAjax||this==gx.pO?document.body:this.getContainer()};this.startFeedback=function(a){w++;var b=!0===a?0:H,d=function(){var a=this.getFeedbackContainer();a&&gx.dom.mask(a)};1==w&&(0===b?d.call(this):z||(b=gx.lang.doCallTimeout(d,this,arguments,b),z=b.t))};this.endFeedback=function(){0<w&&w--;if(0==w){z&&
(clearTimeout(z),z=!1);var a=this.getFeedbackContainer();a&&gx.dom.unmask(a)}};this.isFeedbackOn=function(){return 0<w};var E=function(){var a=9996,b=this;return function(d){var f="MPW"+a++,g=b.CmpContext+"gxHTMLWrp"+f;b.setComponent({id:"GX-"+d.toUpperCase()+"-TARGET",GXClass:null,Prefix:f,lvl:1});return c('<div class="gx-call-target '+d+' off empty"><div class="'+l+'" id="'+g+'"></div></div>')}}.call(this);this.initTargets=function(){var a,b,d,f,g;gx.pO&&(gx.pO.fullAjax&&this.IsMasterPage)&&(a=
c(gx.dom.form()),b=a.children("[data-abstract-form]").first(),b.length||(b=c("<div></div>"),b.append(a.children()),a.append(b)),a=b.addClass("gx-center-target"),b=E("top"),d=E("right"),f=E("bottom"),g=E("left"),c('<div id="gx-column-targets"></div>').insertBefore(a).append(g).append(a).append(d).before(b).after(f))};var J={};this.createObjectInTarget=function(a,b,d){var a=a.toLowerCase(),f=C(a);this.createWebComponent("GX-"+a.toUpperCase()+"-TARGET",b,d,void 0,void 0,void 0,function(b){(b=gx.pO.getWebComponent(b))&&
(J[a]=b)});c(f.selector).removeClass("empty")};this.restoreTargetComponents=function(){for(var a in J)J.hasOwnProperty(a)&&gx.pO.registerComponent(J[a])};var C=function(a){return{selector:".gx-call-target."+a,centerSelector:".gx-center-target"}},A,B={useCapture:!0};this.showTarget=function(a,b){var a=a.toLowerCase(),d=C(a),f=d.selector,g=d.centerSelector,j;c(d.selector).removeClass("empty");c(f).removeClass("off");c(g).addClass("slideout "+a);c(document.documentElement).addClass("gx-blocking");gx.fx.obs.notify("gx.targetshown",
[a]);!1!==b&&(A=function(a){!c(a.target).closest(f).length&&!c(a.target).is(f)&&c(f).is(":visible")&&(j.call(this),a.stopImmediatePropagation(),a.preventDefault())}.closure(this),j=function(){this.hideTarget(a)},gx.evt.attach(document,"click",A,!1,B),gx.spa.addObserver("onnavigate",this,j))};this.hideTarget=function(a){var a=a.toLowerCase(),b=C(a),d=b.centerSelector;c(b.selector).addClass("off");c(d).removeClass("slideout "+a);c(document.documentElement).removeClass("gx-blocking");gx.evt.detach(document,
"click",A,B);gx.fx.obs.notify("gx.targethidden",[a])};this.collapseTarget=function(a){var a=a.toLowerCase(),b=C(a),d=b.selector,b=b.centerSelector;this.showTarget(a,!1);c(d).addClass("collapsed");c(b).addClass("collapsed");gx.fx.obs.notify("gx.targetcollapsed",[a])};this.expandTarget=function(a){var a=a.toLowerCase(),b=C(a),d=b.selector,b=b.centerSelector;this.showTarget(a,!1);c(d).removeClass("collapsed");c(b).removeClass("collapsed");gx.fx.obs.notify("gx.targetexpanded",[a])};gx.lang.apply(this,
new gx.util.Observable)},k="data-gx-evt-control",j="data-gx-evt-condition",a="data-gx-evt",b="data-gx-evt-code",d="data-gx-context",f=["dyncombo","combo"],l="gxwebcomponent";g.GX_EVENT_CONTROL_DATA_ATTR=k;g.GX_EVENT_CONDITION_DATA_ATTR=j;g.GX_EVENT_DATA_ATTR=a;g.GX_EVENT_CODE_DATA_ATTR=b;g.GX_EVENT_CONTEXT_DATA_ATTR=d;g.GX_EVENT_CONTROL_DELAYED_ATTR="data-gx-click-delay";g.GX_EVENT_EXCLUDED_CTRLTYPES=f;g.WEBCOMPONENT_CLASS_NAME=l;g.WEBCOMPONENT_LOADING_CLASS_NAME="gxwebcomponent-loading";g.WEBCOMPONENT_BODY_CLASS_NAME=
"gxwebcomponent-body";g.CONTROL_CMP_REGEX=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})([0-9]{4})?/;return g}(gx.$);
gx.uc=function(c){return{PostRenderScripts:{},gxCssClass:"gx_usercontrol",getNew:function(g,k,j,a,b,d,f,l,n,t){a=eval(a);gx.lang.inherits(a,gx.uc.UserControl,!0);a=new a(c);a.ContainerName=b;a.DesignContainerName=b;a.setupControl(g,d,f,k,j,l,n,t);return a},fromChild:function(c){var k=gx.pO.getUsercontrolFromChild(c);if(null!=k||gx.pO.hasMasterPage()&&(k=gx.pO.MasterPage.getUsercontrolFromChild(c),null!=k))return k;for(var j=gx.pO.WebComponents.length,a=0;a<j;a++)if(k=gx.pO.WebComponents[a].getUsercontrolFromChild(c),
null!=k)return k;return null},getUserControlObj:function(c){var k=gx.O.getUserControl(c);if(gx.lang.emptyObject(k)){if(gx.pO.hasMasterPage()&&(k=gx.pO.MasterPage.getUserControl(c),!gx.lang.emptyObject(k)))return k;for(var j=gx.pO.WebComponents.length,a=0;a<j&&!(k=gx.pO.WebComponents[a].getUserControl(c),!gx.lang.emptyObject(k));a++);}return k},CtrlId:function(c){return c.replace(/Container$/,"")},userControlContainerId:function(c){var k=c.lastIndexOf("_");return-1!=k&&(k=c.substring(0,k)+"Container"+
c.substring(k),null!=gx.dom.byId(k))?k:0<=c.indexOf("ContainerDiv")?c:c+"Container"},setProperties:function(c,k){var j=gx.uc.getUserControlObj(gx.uc.userControlContainerId(c));if(null!=j)if(void 0!=k.length)for(var a=k.length,b=0;b<a;b++)for(var d in k[b]){var f=k[b][d];j[d]=f}else for(d in k)f=k[d],j[d]=f},isUserControl:function(c,k){var k=k||gx.O,j;if(gx.lang.emptyObj(k.UserControls))return!1;if(c instanceof gx.uc.UserControl)return!0;j=gx.dom.byId(gx.uc.userControlContainerId(c));return null!=
j&&"DIV"==j.tagName?!0:!1},StartRender:function(){PostRenderScripts={}},pushPostRenderScripts:function(g){c.each(g&&g.Scripts||[],function(c,g){PostRenderScripts[g]=g})},EndRender:function(){var c=gx.lang.objToArray(PostRenderScripts);gx.http.loadScripts(c,function(){},0,!0)},UserControl:function(){this.ParentObject=null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];
this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.RealControl=this.C2ShowFunction=null;this.IsPostBack=!1;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(c){return gx.dom.byId(this.DesignContainerName+c+(""!=this.GridRow?
"_"+this.GridRow:""))};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(c,k,j,a,b,d,f,l){this.ParentObject=c;this.ControlName=k;this.ControlId=a;this.LastIdBefore=b;this.ControlLvl=void 0!=d?d:0;this.GridId=void 0!=f?f:0;this.GridRow=void 0!=l?l:"";gx.util.pushOnce(this.ControlId,this.ParentObject.GXCtrlIds);this.ParentObject.GXValidFnc[this.ControlId]=
{id:this.ControlId,lvl:this.ControlLvl,fld:j,grid:this.GridId,op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl}};this.addValidFunction=function(c,k,j){this.ValidFunctions.push(c);this.ParentObject.addUsercontrolBinding(k,j+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;for(var c=this.ValidFunctions.length,k=0;k<c;k++)if(!this.ValidFunctions[k].call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;gx.csv.validatingUC=null;return!0};
this.attachEvents=function(){try{var c=this.getContainerControl();if(gx.lang.emptyObject(document.frames))c.onfocus=this.onfocus,this.RealControl=c;else{var k=document.frames.length;if(0<k)for(var j=0,j=0;j<k;j++){var a=document.frames[j];if(!0==gx.dom.isChildNode(a,c)){a.frameElement.onfocus=this.onfocus;this.RealControl=a.frameElement;break}}}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,
this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=this.ControlId;gx.csv.anyError||this.setFocusBase()};this.onchange=function(){0<this.GridId&&gx.fn.getGridObj(this.GridId).setRowModified(gx.fn.currentGridRow(this.GridId))};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(c){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=c};this.createWebComponent=function(c,k,j,a,b){this.ParentObject.createWebComponent(c,
k,j,this.GridRow,a,b)};this.deleteWebComponent=function(c){this.ParentObject.deleteComponent(gx.fn.cmpContextFromCtrl(c))};this.notifyContext=function(c,k){gx.fx.ctx.notify(null,c,k)};this.addV2CFunction=function(){if(1==arguments.length&&"function"==typeof arguments[0])this.V2CFunctions.push(arguments[0]);else{var c=arguments[0],k=arguments[1],j=arguments[2],a=arguments[3];this.ParentObject.addUsercontrolBinding(c,k,this);this.V2CFunctions.push(function(b,d,f){var l=k;f&&(d&&(l=k+"_"+d),a?b.ParentObject[c][a]=
gx.fn.getControlValue(l):b.ParentObject[c]=gx.fn.getControlValue(l));b[j](b.ParentObject[c])})}};this.addC2VFunction=function(c){this.C2VFunctions.push(c)};this.setC2ShowFunction=function(c){this.C2ShowFunction=c};this.execV2CFunctions=function(c){var k=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var j=0,a=this.V2CFunctions,b=a.length,j=0;j<b;j++)try{a[j](this,this.GridRow,c)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=k};this.execC2VFunctions=function(){var c=
gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var k=0,j=this.C2VFunctions,a=j.length,k=0;k<a;k++)try{j[k](this,this.GridRow)}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=c};this.sdtV2c=function(c,k,j,a,b){if(null!==k){if(k=parseInt(k,10)-1,void 0!==this.ParentObject[c][k])this[b](this.ParentObject[c][k][j])}else this.ParentObject[c]=gx.fn.getControlValue(a,null,this.ParentObject),this[b](this.ParentObject[c][j])};this.sdtC2v=function(c,k,j,a,b){null!==k?(k=
parseInt(k,10)-1,this.ParentObject[c][k][j]=this[b]()):this.ParentObject[c][j]=this[b]();gx.fn.setControlValue(a,this.ParentObject[c])};this.execShowFunction=function(){var c=this.getContainerControl();try{null!=this.C2ShowFunction&&c&&this.C2ShowFunction(this)}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","execShowFunction")}this.IsPostBack=!0;c&&gx.plugdesign.applyTemplateObject({selector:"#"+c.id,templateSelector:function(c){return!0===c.onDemandInvoke}});gx.uc.pushPostRenderScripts(this)};this.updateAndShow=
function(c){try{this.execV2CFunctions(c)}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","updateAndShow")}c&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};this.isServerEvent=function(c){var k=this.ParentObject,j=k.IsMasterPage?"_MPAGE":"",c=this.ControlName.toUpperCase()+j+"."+c.toUpperCase()+j;if(c=k.getClientEventName(c))return k.isServerEvent(c);gx.dbg.logDebug("Client event name couldn't be resolved.");return!1};this.eventHandler=function(c,k,j){gx.evt.setReady(!1);var a=gx.O;
gx.setGxO(this.ParentObject);if(0<c){var b=this.DesignContainerName,d=RegExp("^(?:"+this.ParentObject.CmpContext+")?(.+)$").exec(this.DesignContainerName);d&&d[1]&&(b=d[1]);this.ParentObject[b]=this;(c=this.ParentObject.getGridById(c))&&c.instanciateRow(k)}this.execC2VFunctions();j.call(this.ParentObject,this.getEventRow()).always(function(a){gx.setGxO(a)}.closure(this,[a]));gx.evt.setReady(!0);gx.csv.instanciatedRowGrid=null};this.addEventHandler=function(c,k){this[c]=function(j){var a=this.isServerEvent(c);
a&&"function"===typeof j&&gx.fx.obs.addObserver("gx.onafterevent",this,j,{single:!0});this.eventHandler(this.GridId,this.GridRow,k);!a&&"function"===typeof j&&j.call(this)}.closure(this)};this.addProperty=function(c,k){this.Properties[c]=k};this.setProp=function(c,k,j,a){this.addProperty(c,k);this.PropTypes[c]=a;gx.lang.isBooleanType(a)?this[c]=gx.lang.gxBoolean(j):"color"==a?gx.lang.emptyObject(j)||(this[c]="number"==typeof j||"string"==typeof j?gx.color.html(j):j):gx.lang.isNumericType(a)?gx.lang.emptyObject(j)||
(this[c]=gx.num.parseFloat(j)):this[c]=j};this.setDynProp=function(c,k,j,a,b){this.addProperty(c,k);this.DynProperties.push(c);this.PropTypes[c]=a;var d=function(){var b=this.getDynPropertyValueFromHidden(c,k);void 0===b&&(b=j);this.setProp(c,k,b,a)};b?d.call(this):this.ParentObject.CmpContext?gx.fx.obs.addObserver("webcom.render",this,function(a){a===this.ParentObject&&d.call(this)}):gx.fx.obs.addObserver("gx.onready",this,d,{single:!0})};this.refreshDynProperties=function(){for(var c=0,k=this.DynProperties.length;c<
k;c++){var j=this.DynProperties[c];this[j]=this.getDynPropertyValueFromHidden(j,this.Properties[j])}};this.getDynPropertyValueFromHidden=function(c,k){var j=gx.fn.getHidden(this.getHiddenName(k));void 0===j&&(j=gx.fn.getHidden(this.getHiddenName(c)));return j};this.setGridProperties=function(){for(var c=this.ParentObject.getGridUCProperties(this.ControlName),k=c.length,j=0;j<k;j++){var a=c[j],b=a.v;"undefined"==typeof b&&(b=this.getHiddenName(a.h),b=gx.fn.getHidden(b),"color"==a.t&&(b=gx.color.html(b)));
this.setProp(a.p,a.h,b,a.t)}};this.setGridEventHandlers=function(){for(var c=this.ParentObject.getGridUCEventHandlers(this.ControlName),k=c.length,j=0;j<k;j++){var a=c[j];this.addEventHandler(a.e,a.h)}};this.getHiddenName=function(c){var k="",j=this.ControlName.toUpperCase();""!=this.GridRow&&(k="_"+this.GridRow,this.ownerGrid&&(j=this.ownerGrid.realGridName.toUpperCase()));return this.ParentObject.CmpContext+j+(this.ParentObject.IsMasterPage?"_MPAGE":"")+"_"+c+k};this.saveProperties=function(){for(var c in this.Properties){var k=
this[c];"function"!=typeof this.Properties[c]&&("undefined"!=typeof k&&("undefined"!=typeof k.R&&"undefined"!=typeof k.G&&"undefined"!=typeof k.B)&&(k=gx.color.rgb(k.R,k.G,k.B)),gx.lang.isBooleanType(this.PropTypes[c])&&(k=k?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[c]),k))}}}}}(gx.$);
gx.printing={loaded:!1,tries:0,waitInterval:100,IFrameId:"gxprintHelper_Iframe",print:function(c){if(gx.printing.avoidPrintingApplet)this.printDirect(c);else{if(!this.loaded){var g='<applet name="GeneXusPrintAppletForWindows" archive="'+gx.util.resourceUrl("printingappletsigned.jar",!0)+'" code="com/genexus/printing/Printer.class" width="0" height="0">',g=g+('<param name="path" value="'+gx.util.resourceUrl(gx.basePath,!0)+'">');document.body.appendChild(gx.html.nodesFromText(g+'<p>No java plugin detected. Click <a href="http://java.com/en/download/" target="new">here</a> to download it.</p></applet>')[0]);
this.loaded=!0}0==this.tries?this.printWhenReady(c):gx.dbg.logMsg("Already trying to print a document.")}},printDirect:function(c){c&&(gx.printing._deinit(),$iframe=$("<iframe>"),$iframe.attr("id",gx.printing.IFrameId).css({visibility:"hidden",position:"absolute",top:"-1000px",left:"-1000px"}),$(document.body).append($iframe),$iframe[0].onload=function(){this.contentWindow.print()},$iframe.attr("src",c.reportFile))},printWhenReady:function(c){this.tries>=60*this.waitInterval?(this.tries=0,gx.dbg.logMsg("The printing applet was not loaded.")):
(this.tries++,this.isReady()?(document.GeneXusPrintAppletForWindows.printReport(c.reportFile,c.printerRule,"GXPRN.INI"),this.tries=0):setTimeout(function(){gx.printing.printWhenReady(c)},this.waitInterval))},isReady:function(){var c=document.GeneXusPrintAppletForWindows;return c&&("function"==typeof c.isReady||"unknown"==typeof c.isReady)?c.isReady():!1},_deinit:function(){$("#"+gx.printing.IFrameId).remove()}};
gx.fn=function(c){var g=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,k=function(a){a=a.replace(/\\/g,".");return gx.gen.isDotNet()?a.replace(/\.aspx$/,""):a},j=function(){var a=function(a,d){return a.gxIndex<d.gxIndex?-1:a.gxIndex>d.gxIndex?1:0};return function(b){return Array.prototype.slice.call(b,0).sort(a)}}();return{attachedControls:function(){return gx.attachedControls},cancelWindow:function(a){this.closeWindow(a,{ignoreCmds:gx.config.popup.ignoreCmdsOnCancel})},closeWindow:function(a,
b,d){b=b||{};d=d||gx.O;if("string"==typeof a){if(this.closeFromServer(a,b.parmsMetadata))return;a=[]}a||(a=[]);if(gx.popup.ispopup()){var c=gx.popup.getPopup(),g=c.url?gx.util.noParmsUrl(c.url):"";if(!c.frameWindow||-1!=c.frameWindow.location.href.search(g+"(\\?.*)?$")||gx.grid.drawAtServer){c.close(a,b,d);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():(a=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(a)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),
a=gx.ajax.absoluteurl(a),gx.spa.started?(gx.spa.redirect(a),gx.ajax.enableForm(d)):location.href=a))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},closeFromServer:function(a,b){try{if(window.parent&&window.parent.gx)return gx.popup.ispopup()&&!gx.grid.drawAtServer&&!window.parent.gx.grid.drawAtServer?gx.fn.closeWindow(gx.json.evalJSON(a,!0),{parmsMetadata:gx.json.evalJSON(b,!0)}):window.parent.gx.fn.closeWindow(gx.json.evalJSON(a,
!0),{parmsMetadata:gx.json.evalJSON(b,!0)}),!0}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(a,b,d){gx.evt.execLoad=!1;d&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));this.closeWindow(a,{parmsMetadata:b})},invalidEmptyValue:function(a){if(gx.lang.emptyObject(a.s)){for(var b=a.v.length,d=0;d<b;d++)if(a.v[d][0]===a.s)return!1;return!0}return!1},trimSelectValue:function(a,b){return"int"==b?gx.text.trim(a):gx.text.rtrim(a)},selectedDescription:function(a,
b){for(var d=a.v.length,c=0;c<d;c++)if(this.trimSelectValue(a.v[c][0],b)===a.s)return a.v[c][1];return null},setGridCheckBoxValue:function(a,b,d,c){this.setCheckBoxValue(a+"_"+b,d,c)},setGridDecimalValue:function(a,b,d){return this.setGridControlValue(a,b,d)},setGridControlValue:function(a,b,d,c){if(void 0!==b)return this.setControlValue(a+"_"+b,d,c)},setVarValues:function(a,b){for(var d=a.length,c=0;c<d;c++){var g=gx.fn.vStructForVar(a[c]);g&&g.v2v?g.v2v(b[c]):eval(a[c]+'="'+b[c]+'"')}},setControlOldValue:function(a,
b){if(a){var d=a.id,c=gx.O.getValidStructFld(d),b=gx.applyPicture(c,b);c&&c.gxgrid&&(c.gxgrid.IsValidState[d]?c.gxgrid.IsValidState[d].gxOldValue=b:c.gxgrid.IsValidState[d]={gxOldValue:b});if("radio"==a.type)for(var d=gx.dom.byName(a.name),c=d.length,g=0;g<c;g++)d[g].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b);else a.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,b)}},setControlGxValid:function(a,b){if(a&&a.id){var d=a.id,c=gx.O.getValidStructFld(d);c&&c.gxgrid&&(c.gxgrid.IsValidState[d]?c.gxgrid.IsValidState[d].gxvalid=
b:c.gxgrid.IsValidState[d]={gxvalid:b});a.setAttribute(gx.csv.GX_VALID_ATTRIBUTE,b)}},setControlValue:function(a,b,d){a=gx.csv.ctxControlId(a);this.setControlValueAny(a,b,d)},setControlValueAny:function(a,b,d){var c=gx.O.getValidStructFld(a),g,j=!1;g=gx.dom.el(a,c&&("edit"==c.ctrltype||"checkbox"==c.ctrltype||"combo"==c.ctrltype));c&&("dtime"==c.type||"date"==c.type?""===b?b=gx.date.nulldate_toc(c.len,c.dec):"string"==typeof b&&(b=new gx.date.gxdate(b)):gx.lang.isCharacterType(c.type)&&(b=gx.text.rtrim(b)));
b instanceof gx.date.gxdate?gx.lang.emptyObject(c)||(b=gx.date.formatDateTime(c.dec,c.len,gx.dateFormat,b)):gx.lang.instanceOf(b,Number)||"undefined"!=typeof gx.num.dec&&b instanceof gx.num.dec.bigDecimal?!gx.lang.emptyObject(c)&&void 0!=c.pic&&(b=gx.num.formatNumber(b,c.dec,c.pic,c.len,c.sign,!1)):"string"==typeof b&&!gx.lang.emptyObject(c)&&((j=void 0!=c.isPwd)?null!=g&&"SPAN"==g.nodeName&&(b=gx.text.formatString(b,c.len,c.isPwd)):b=gx.text.formatString(b,c.len,c.isPwd,c.pic));this.persistGridControlValue(a,
b);null!=g&&"SPAN"!=g.nodeName?this.setControlValue_impl(g,b,d):gx.fn.setHidden(a,b);null!=g&&"SPAN"==g.nodeName&&(a=g);var k=!1,k=c?c.multiline:null!=g&&"TEXTAREA"==g.tagName;j?this.setControlValue_span_safe(a,gx.text.formatString(b,c.len,c.isPwd,c.pic),d,k):this.setControlValue_span_safe(a,b,d,k)},setDecimalValue:function(a,b){this.setControlValue(a,b)},toDecimalValue:function(a,b,d){return gx.num.parseFloat(a,b,d)},toDatetimeValue:function(a,b){return new gx.date.gxdate(a,b)},setCheckBoxValue:function(a,
b,d){try{var a=gx.csv.ctxControlId(a),c=gx.dom.byId(a);c||(c=gx.dom.form()[a]);c&&(c.checked=b.toString()==d.toString(),c.value=b)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(a,b,d){var c=a.lastIndexOf("_");if(-1!=c&&(d=d?d:gx.O.getValidStructFld(a.substring(0,c)))&&d.gxgrid)c=a.substring(c+1),4<c.length?(c=c.substring(4,c.length),(c=gx.O.getGrid(d.gxgrid.gridName+"_"+c))&&c.persistControlValue(a,b,d)):d.gxgrid.persistControlValue(a,b,d)},setControlValue_span_safe:function(a,
b,d,f){"string"==typeof a&&(a=gx.dom.byId("span_"+a));if(a&&"SPAN"!==a.nodeName)var g="span_",g="string"==typeof a?g+a:g+gx.dom.id(a),a=gx.dom.byId(g);null!=a&&(g=gx.dom.bySelector('[data-name="'+a.id+'"]'),2>g.length&&(g=[a]),c.each(g,function(a,c){gx.fn.setControlValue_fmt(c,b,d,f)}))},setControlValue_fmt:function(a,b,d,c){try{if(null!=a)if(1==d){var g=a.getAttribute("gxlink");!gx.lang.emptyObject(g)&&(null!=a.firstChild&&"A"==a.firstChild.nodeName)&&(a=a.firstChild);gx.html.setInnerHtml(a,b,!0)}else{0==
d&&"string"==typeof b&&(b=b.replace(/ +/g," "));for(g=a;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;0==d&&(null==a.firstChild||"#text"!=a.firstChild.nodeName)&&"A"!=a.nodeName?gx.html.setInnerText(g,b,d,c):gx.html.setInnerText(a,b,d,c)}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(a,b,d){"string"==typeof a&&(a=gx.dom.el(a));b instanceof gx.date.gxdate&&(b=b.getString());if(null!=a){var f=gx.dom.byName(a.id);if(2>f.length||"radio"===
a.type)f=[a];c.each(f,function(a,c){if("radio"===c.type)gx.fn.setRadioValue(c.name,b);else if(gx.dom.isEditControl(c)||"textarea"==c.type){var f=c.value!==b&&gx.dom.getActiveElement()===c&&c.selectionStart!==c.selectionEnd&&0<c.selectionEnd;c.value=gx.lang.decodeValue(b);f&&gx.fn.setSelection(c)}else void 0!=c.value?c.value=b:gx.fn.setControlValue_span_safe(c,b,d)})}},setGridComboBoxValue:function(a,b,d){this.setComboBoxValue(a+"_"+b,d)},setComboBoxValue:function(a,b){var d=gx.util.browser.isIE(),
a=gx.csv.ctxControlId(a),c=gx.dom.byId(a);if(c){var g="",j=gx.O.getValidStructFld(a);gx.lang.emptyObject(j)||(g=j.type);"int"==g?b=gx.text.trim(b):"date"==g&&b instanceof gx.date.gxdate?b=b.getStringWithFmt("Y4MD"):"decimal"!=g&&(b=gx.text.rtrim(b));var k=b,o=!1;try{for(var p=c.options.length,m,s=0;s<p;s++){var q=c.options[s];if(gx.lang.isNumericType(g)?Number(q.value)==Number(b):gx.text.trim(q.value)==gx.text.trim(b)){if(k="undefined"!=typeof q.innerText?q.innerText:q.text,c.selectedIndex=s,o=!0,
q.setAttribute("selected","selected"),m=q,d)break}else d||q.removeAttribute("selected")}m&&(m.value!=c.value&&gx.util.browser.isFirefox())&&gx.dom.redrawControl(c);o||(c.selectedIndex=0);0<j.grid&&this.persistGridControlValue(a,b,j)}catch(r){gx.dbg.logEx(r,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(a,k,0)}},loadRadioButton:function(a,b,d){var f=c(a).parent().closest(".gx-radio-button"),g=c(a),b=c(gx.html.controls.applyTemplate("radio",{id:a.name,className:f.attr("class"),style:f.attr("style"),
title:a.title,isDisabled:a.disabled,gxoch0:g.attr("data-gxoch0"),values:c.map(b,function(b,c){return{itemId:a.name+"_"+c,itemValue:b[0],itemDesc:b[1],isSelected:gx.text.trim(d.toString())==gx.text.trim(b[0].toString())}})}));f.replaceWith(b);gx.plugdesign.applyTemplateObject(b)},loadComboBox:function(a,b){this.setComboValues(a,b)},setGridComboValues:function(a,b){if(0==this.controlGridId(a))this.setComboValues(a,b);else for(var d=1;999>d;d++){var c=gx.text.padl(d.toString(),4,"0"),c=gx.dom.el(a+"_"+
c);if(null==c)break;this.setComboValues(c.name,b)}},setComboValues:function(a,b){var d=gx.dom.el(a),c=gx.util.browser;if(null!=d){var g="";-1!=d.selectedIndex&&(g=d.options[d.selectedIndex].value);for(;d.options.length>b.length;)d.remove(d.options.length-1);for(;b.length>d.options.length;){var j=document.createElement("OPTION");d.options.add(j)}for(var k=b.length,o=0;o<k;o++)if(j=d.options[o],j.value=b[o][0],c.isIE()&&9<=c.ieVersion()?j.innerText!=b[o][1]&&(j.innerText=b[o][1]):j.text!=b[o][1]&&(j.text=
b[o][1]),Number(j.value)?Number(j.value)==Number(g):gx.text.trim(j.value)==gx.text.trim(g))d.selectedIndex=o;if(0==d.options.length)d.selectedIndex=-1;else if(-1==d.selectedIndex||d.selectedIndex>d.options.length-1)d.options[0].selected=!0}},getControlRefById:function(a){return(a=this.validStruct(a))?0==a.grid?this.getControlRef(a.fld,!1):this.getControlGridRef(a.fld,a.grid):null},getControlRef:function(a,b){b||(a=gx.csv.ctxControlId(a));if("FORM"==a)return document;var d=gx.dom.el(a);return null!=
d?d:null},getControlRef_list:function(a){var b=gx.dom.byName(a);if(null!=b)return b;a=gx.dom.byId(a);return null!=a?[a]:null},screen_CtrlRef:function(a){a=this.getControlGridRef(a,this.controlGridId(a));return!gx.lang.emptyObject(a)?("hidden"==a.type&&(a=gx.dom.byId("span_"+gx.dom.id(a))),a):null},screen_CtrlId:function(a){return this.getControlGridId(a,this.controlGridId(a))},getControlGridId:function(a,b,d){a=gx.csv.ctxControlId(a);if(gx.dom.el(a))return a;try{if(0==b)return a;void 0==d&&(d=this.currentGridRow(b));
return a+"_"+d}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(a,b,d){var c,a=gx.csv.ctxControlId(a);if(0==b||-1!==a.search(gx.csv.CTRL_ROW_INDEX_REGEXP))if(c=gx.dom.el(a))return c;try{if(0==b)return null;void 0==d&&(d=this.currentGridRow(b));if(c=gx.dom.el(a+"_"+d))return c;var g=gx.O.getComponentData(a);if(g)return gx.dom.el("gxHTMLWrp"+g.Prefix+d)}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRow:function(a,b){if("0000"!=b)try{return gx.currentRows[a]=
b}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(a){try{return gx.currentRows[a]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(a){a=this.currentGridRowImpl(a);return void 0==a?"0001":a},gridDuplicateKey:function(a){a=gx.fn.validStruct(a);if(void 0!=a){var b=a.gxgrid;if(null!=b&&(b=b.updateControlValue(a,!0)))return b.gxHasDuplicateKey()}return!1},firstGridControl:function(a,b){var d=gx.fn.controlIds(),c=d.length;for(i=
0;i<c;i++){var g=gx.fn.validStruct(d[i],b);if(void 0!=g&&g.grid==a)return d[i]}return-1},lastGridControl:function(a,b){var d=gx.fn.controlIds();for(i=d.length-1;0<=i;i--){var c=gx.fn.validStruct(d[i],b);if(void 0!=c&&c.grid==a)return d[i]}return-1},getGridDateTimeValue:function(a,b){var d=this.getControlValue(a+"_"+b);return new gx.date.gxdate(d,gx.dateFormat)},getGridDecimalValue:function(a,b,d,c){return this.getDecimalValue(a+"_"+b,d,c)},getGridIntegerValue:function(a,b,d){return this.getIntegerValue(a+
"_"+b,d)},getGridControlValue:function(a,b){return this.getControlValue(a+"_"+b)},getControlValue:function(a,b,d,c){return this.getControlValue_impl(gx.csv.ctxControlId(a,d),b,d,c)},getControlValue_impl:function(){var a=/_CMPPGM$/g;return function(b,d,c,g){if("hidden_only"==d)return gx.fn.getHidden(b);if(0<=b.search(a))return"nohidden"===d?null:gx.fn.getHidden(b);var c=c||gx.O,j;if((g=g||(c?c.getValidStructFld(b):null))&&g.gxgrid&&!g.gxgrid.grid.useHiddensForControlValues||!g||!g.gxgrid){var k;k=
g&&("edit"==g.ctrltype||"checkbox"==g.ctrltype||"combo"==g.ctrltype)?gx.dom.byId(b):gx.dom.el(b,!1,!0);if(null!=k&&c){g&&!k.gxtype&&(k.gxtype={type:g.type,len:g.len,dec:g.dec});if("checkbox"==k.type&&g.values&&g.values.length&&1<g.values.length)j=k.checked?g.values[0]:g.values[1];else if("hidden"==k.type||"text"==k.type||"textarea"==k.type||"checkbox"==k.type)j=k.value;else if("radio"==k.type)j=gx.fn.getRadioValue(gx.dom.byName(b));else if("SELECT"==k.nodeName&&0<k.options.length?j=-1!=k.selectedIndex?
"screen"==d?k.options[k.selectedIndex].text:k.options[k.selectedIndex].value:"screen"==d?k.options[0].text:k.options[0].value:g&&("date"!=g.type&&"dtime"!=g.type&&"bits"!=g.type&&"audio"!=g.type&&"video"!=g.type&&"binaryfile"!=g.type)&&(j=k.value),"IMG"==k.nodeName||"INPUT"==k.nodeName&&"image"==k.type)j=k.getAttribute("src");if(void 0!==j)return g&&"boolean"==g.type?gx.lang.gxBoolean(j):j}k=gx.dom.byId("span_"+b);if(null!=k)return b=gx.fn.getHidden(b),k=gx.fn.getControlValue_span(k),"screen"==d?
void 0!=k?k:b:void 0!=b?b:k;k=gx.dom.form()[b];if(null!=k)return this.getControlValueInt(k);ControlList=gx.dom.byName(b);if(null!=ControlList){c=ControlList.length;for(g=0;g<c;g++)if(k=ControlList[g],null!=k)return this.getControlValueInt(k);if(k=ControlList[0])return k.value}}return null==k?"nohidden"===d?null:gx.fn.getHidden(b):""}}(),setRadioValue:function(a,b){var a=gx.csv.ctxControlId(a),d=gx.dom.byName(a);if(null!=d)for(var f=d.length,g=0;g<f;g++){var j=c(d[g]);if(gx.text.ltrim(d[g].value)==
gx.text.ltrim(b)){j.attr("checked","");j.prop("checked",!0);break}}},getRadioValue:function(a){for(var b=a.length,d=0;d<b;d++)if(a[d].checked)return a[d].value;return""},getRadioSelected:function(a){for(var a=gx.dom.byName(a),b=a.length,d=0;d<b;d++)if(a[d].checked)return a[d];return null},getControlValueInt:function(a){if(void 0!=a.length&&"SELECT"!=a.tagName&&"undefined"!=typeof a[0]&&"radio"==a[0].type)return this.getRadioValue(a);if("checkbox"==a.type)return a.checked;if("SPAN"==a.tagName){var b=
gx.fn.getHidden(gx.dom.id(a));return void 0!=b?b:gx.fn.getControlValue_span(a)}if("INPUT"==a.tagName&&"text"==a.type&&(b=gx.dom.id(a),gx.O)){var d=gx.O.getValidStructFld(b);if(d&&"undefined"!=typeof d.pic){if("int"==d.type)return this.getIntegerValue(b,-1!=d.pic.indexOf(",")?gx.thousandSeparator:"");if("decimal"==d.type)return this.getDecimalValue(b,-1!=d.pic.indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return a.value},getControlValue_span:function(a){for(;a&&!a.nodeValue;)a=a.childNodes[0];
return a&&a.nodeValue?a.nodeValue:""},getDateTimeArrayValue:function(a){try{var b,d=function(a,b){gx.lang.emptyObject(a)||c.each(a,function(d,c){a[d]=new gx.date.gxdate(c,b)});return""},f=this.getControlValue(a,"nohidden");b=d(f,gx.dateFormat);b||(f=gx.fn.getHidden(gx.csv.ctxControlId(a)),b=d(f,"Y4MD"));return b}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","getDateTimeArrayValue")}return""},getDateValue:function(a){return this.getDateTimeValue(a)},getDateTimeValue:function(a){try{var b=this.getControlValue(a,
"nohidden");if(!gx.lang.emptyObject(b))return new gx.date.gxdate(b,gx.dateFormat);b=gx.fn.getHidden(gx.csv.ctxControlId(a));return new gx.date.gxdate(b,"Y4MD")}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(a,b,d){var c=0,c=gx.O?gx.O.getValidStructFld(a):null,a=this.getControlValue(a,d,void 0,c);c&&a&&(a=gx.num.extractValue(c.pic,a));if(gx.lang.isArray(a))return a;a="undefined"!=typeof a?a.toString():"";c=a.length<gx.num.maxNumericPrecision()||"undefined"==
typeof gx.num.dec?gx.num.parseInt(a,10,b):(new gx.num.dec.bigDecimal(gx.text.replaceAll(a,b,""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(c)?0:c},getDecimalValue:function(a,b,d,c){var g=gx.O?gx.O.getValidStructFld(a):null,a=this.getControlValue(a,c,void 0,g);g&&a&&(a=gx.num.extractValue(g.pic,a));if(gx.lang.isArray(a))return a;b=gx.num.parseFloat(a||"",b,d);return isNaN(b)?0:b},getBlobValue:function(a){var b=gx.dom.byId("Object_"+a);if(null!=b){if(b.data&&!gx.text.endsWith(b.data,
"about:blank"))return b.data}else if(b=gx.dom.byId("Link_"+a),null!=b)return b.getAttribute("href");return""},getVarControlMap:function(a,b){if(a=a||gx.O)for(var d in a.VarControlMap)if("function"!=typeof d){var c=a.VarControlMap[d];if(c.id==b||a.CmpContext+c.id==b)return d}return null},getVarControlMapForVar:function(a){for(var b in gx.O.VarControlMap)if("string"==typeof b&&b==a)return gx.O.VarControlMap[b];return null},v2c:function(a,b,d){a.v2c();"undefined"===typeof b&&(b=a.val());a=gx.fn.getControlGridRef(a.fld,
a.grid);gx.plugdesign.controlValueChanged(a,b);d&&(a.value="")},v2cMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var d="";"number"==typeof b.grid&&0!=b.grid&&(d="_"+gx.fn.currentGridRowImpl(b.grid));gx.fn.setHidden(gx.O.CmpContext+b.id+d,gx.O[a])}},c2vMap:function(a){var b=this.getVarControlMapForVar(a);if(null!=b){var d="";"number"==typeof b.grid&&0!=b.grid&&(d="_"+gx.fn.currentGridRowImpl(b.grid));gx.O[a]=gx.fn.getHidden(gx.O.CmpContext+b.id+d)}},depsToVars:function(a){for(var b=
0;b<a.length;b++){var d=a[b],c=gx.fn.vStructForVar(d);!gx.lang.emptyObject(c)&&"function"==typeof c.c2v?c.c2v():this.c2vMap(d)}},verticalFormula:function(a,b,d,c,g,j){var k=gx.fn.vStructForVar(a);gx.lang.emptyObject(k)?this.v2cMap(a):k.v2c();for(var o=gx.fn.currentGridRowImpl(d),p=gx.fn.getGridObj(d),m=0,s=!1,q=p.grid.rows.length,r=0;r<q;r++){var u=p.grid.rows[r],v=u.gxDeleted(),x=u.gxExists(),z=u.gxIsMod();if(!v&&(x||z))gx.fn.setCurrentGridRow(d,u.gxId),j&&0<j.length?this.depsToVars(j):!gx.lang.emptyObject(k)&&
"function"==typeof k.c2v?k.c2v():this.c2vMap(a),c.call(gx.O)&&(s=!0,m=g(r,m))}gx.fn.setCurrentGridRow(d,o);j&&0<j.length?this.depsToVars(j):!gx.lang.emptyObject(k)&&"function"==typeof k.c2v?k.c2v():this.c2vMap(a);s||(m=b);return m},rowValueHandler:function(a,b,d,c,g,j,k){try{var o=gx.fn.vStructForVar(a)||gx.fn.getVarControlMapForVar(a),p=o?o.type:"decimal";switch(p){case "boolean":return c(a,b,d);case "int":case "decimal":var m=gx.num.parseFloat(gx.O[a],j,k);return 0==b?m:g(a,b,d,m);default:gx.dbg.write("Warning: Forumula not supported for: ",
a,p)}}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","Formula could not be calculated for Field: "+a)}},maxFrm:function(a,b,d,c,g,j,k){var o=function(a,b,d){return d||gx.O[a]},p=function(a,b,d,c){return c>d?c:d};return gx.fn.verticalFormula(a,b,g,j,function(b,g){return gx.fn.rowValueHandler(a,b,g,o,p,d,c)},k)},sumFrm:function(a,b,d,c,g,j,k){var o=function(a,b,d){return d||gx.O[a]},p=function(a,b,d,c){return c+d};return gx.fn.verticalFormula(a,b,g,j,function(b,g){return gx.fn.rowValueHandler(a,b,g,o,p,d,c)},
k)},minFrm:function(a,b,d,c,g,j,k){var o=function(a,b,d){return d&&gx.O[a]},p=function(a,b,d,c){return c<d?c:d};return gx.fn.verticalFormula(a,b,g,j,function(b,g){return gx.fn.rowValueHandler(a,b,g,o,p,d,c)},k)},averageFrm:function(a,b,d,c,g,j,k){return gx.fn.verticalFormula(a,b,g,j,function(b,g){var j=gx.num.parseFloat(gx.O[a],d,c);return 0==b?j:(g*b+j)/(b+1)},k)},countFrm:function(a,b,d,c,g){return gx.fn.verticalFormula(a,b,d,c,function(a,b){return 0==a?1:b+1},g)},serialRule:function(a,b,d,c,g){g=
g||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(d),d))return g[a];gx.lang.emptyObject(g[b])&&(g[b]=g[a]+c,(d=gx.fn.vStructForVar(b))&&d.v2c(),(d=g.VarControlMap[a])&&gx.fn.setControlValue(d.id,g[b]));b=g[b]||0;a=g[a]||0;return 0<c?Math.max(b,a):Math.min(b,a)},setReturnParms:function(a,b,d,c){try{var g,j,k;if(c){j=d.length;for(g=0;g<j;g++)k=gx.fn.vStructForVar(b[g]),c.grid.setCellValue.apply(c.grid,[k,d[g]])}else if(a&&(b&&d)&&(j=b.length,j==d.length)){gx.setGxO(a);c=null;for(g=0;g<j;g++){var o=
b[g];if(o){var p=d[g];k=gx.fn.vStructForVar(o);gx.lang.emptyObject(k)&&(k=gx.fn.vStructForHC(o));if(k){var m=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(k.fld));gx.fn.isAccepted(m)&&(c=m,gx.evt.execOnchange(m));k.v2v&&(k.v2v(p),gx.fn.v2c(k,p));"function"===typeof k.v2bc&&k.v2bc.call(a);a.refreshDependantGrids(k)}else a.setVariable(o,p)}}c&&gx.fn.setFocus(c)}}catch(s){gx.dbg.logEx(s,"gxfrmutl.js","setReturnParms")}},isOutputParm:function(a){return a&&a.IOType&&("out"==a.IOType||"inout"==a.IOType)?!0:
!1},checkPopupFocus:function(a){if(gx.popup.ispopup()){var b=gx.popup.getPopup();if(b&&b.frameDocument&&(a.ownerDocument?a.ownerDocument:a.document).URL!=b.frameWindow.location.href)return b.setFocusFirst(),!1}return!0},persistControlProperty:function(a,b,d){a=gx.fn.screen_CtrlId(gx.csv.ctxControlId(a));gx.usrPtys[a]||(gx.usrPtys[a]={});gx.usrPtys[a][b.toLowerCase()]=d},setCtrlProperty:function(a,b,d){if(gx.O){var c=null,c="FORM"==a?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(a));null!=c&&(this.persistControlProperty(a,
b,d),this.setCtrlPropertyImpl(c,b,d))}else gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(a,b,d){var f=gx.fn.screen_CtrlRef(a);if(null!=f){this.setCtrlPropertyImpl(f,b,d);var g=gx.fn.controlGridId(a);if(g&&(f=c(f).parent().closest("TD",c("[data-gxgridid="+g+"]").get(0)).get(0)))this.persistControlProperty(a,b,d),this.setCtrlPropertyImpl(f,b,d)}},getControls:function(a){var b=[a];(a=this.getRONode(a.id,!1))&&b.push(a);
return c(b)},setCtrlPropertyImpl:function(a,b,d){if(null!=a){a==document&&"Backcolor"==b&&(a=document.body,this.setCtrlPropertyImpl(gx.dom.form(),b,d));var f=gx.O.getValidStructFld(a.id);if(!("Enabled"===b||"Visible"===b)||!f||!(0<f.grid&&gx.fn.rowIsRemoved(f.grid,gx.fn.controlRowId(a)))){var g=a,f={control:g,property:b,value:d};gx.fx.obs.notify("gx.control.onbeforepropertychange",[f]);if(!f.cancel){var j;switch(b){case "Caption":this.setCtrlCaption(a,d);break;case "Tooltiptext":a.title=d;break;case "Invitemessage":a.placeholder=
d;break;case "Visible":if("INPUT"==a.nodeName&&"button"==a.type)this.setButtonVisibility(a,!this.propertyValueFalse(d));else{"INPUT"==a.nodeName&&("checkbox"==a.type?a=a.parentNode:"radio"==a.type&&(f=c(a).parent().closest(".gx-radio-button"),0<f.length&&(a=f[0])),(f=gx.html.multimediaUpload.getContainer(a))&&(a=f));f=this.propertyValueFalse(d);j=a.gxusrdisabled?a.gxusrdisabled:!1;if(f){var k=gx.dom.byId("span_"+a.id);this.setVisible(a,!f);k&&this.setVisible(k,!f)}else(k=this.getRONode(a.id,j))&&
this.setVisible(k,j),this.setVisible(a,!j);gx.fn.setDateCtrlProperties(a,!j,!f)}gx.fn.checkAttachedProperty(a.id,b,gx.lang.gxBoolean(d));break;case "Enabled":f=this.propertyValueFalse(d);if("hidden"===a.type||"SPAN"===a.tagName&&f)return;if("INPUT"===a.nodeName&&"radio"===a.type){j=gx.dom.byName(a.name);for(var k=j.length,o=0;o<k;o++)this.setEnabledProperty(j[o],!f)}else(gx.dom.isEditControl(a)||"textarea"===a.type||"file"===a.type||"SELECT"===a.tagName)&&"password"!==a.type?(k=this.getRONode(a.id,
f),gx.fn.isVisible(a,0)||k&&gx.fn.isVisible(k,0)?(k&&this.setVisible(k,f),this.setEnabledProperty(a,!f),this.setVisible(a,!f),gx.fn.setDateCtrlProperties(a,!f,!0),gx.fn.checkAttachedProperty(a.id,b,!f),gx.fn.checkAttachedProperty(a.id,"Visible",!f)):(this.setEnabledProperty(a,!f),gx.fn.setDateCtrlProperties(a,!f,!1),gx.fn.checkAttachedProperty(a.id,b,!f))):this.setEnabledProperty(a,!f);break;case "Class":a==document?(f=c(gx.dom.form()),j=c(document.body),k=f.attr("data-gx-class")||"",j.removeClass(k).attr("class",
d+" "+j.attr("class")),f.removeClass(k).attr({"class":d+" "+f.attr("class"),"data-gx-class":d})):(j=this.getControls(a),j.attr("class",d));break;case "Columnclass":(f=a.parentNode)&&"TD"==f.tagName&&this.setCtrlClass(f,"gx-attribute "+d);break;case "Columnheaderclass":if((f=a.parentNode)&&"TD"==f.tagName)(f=c(f).closest("table").find("th:nth-child("+(f.cellIndex+1)+")").get(0))&&this.setCtrlClass(f,d);break;case "Link":this.setCtrlLink(this.getRONode(a.id,!1)||a,d);break;case "Linktarget":this.setCtrlLinkTarget(this.getRONode(a.id,
!1)||a,d);break;case "Backcolor":if((f=gx.color.html(d))&&void 0==a.gxGridName)j=this.getControls(a),j.css("background-color",f.Html);break;case "Background":j=this.getControls(a);j.css("background-image","url("+d+")");break;case "Forecolor":if(f=gx.color.html(d))j=this.getControls(a),j.css("color",f.Html);break;case "Fontbold":f=this.propertyValueFalse(d);j=this.getControls(a);j.css("fontWeight",f?"normal":"bold");break;case "Fontitalic":f=this.propertyValueFalse(d);j=this.getControls(a);j.css("fontStyle",
f?"normal":"italic");break;case "Fontunderline":f=this.propertyValueFalse(d);j=this.getControls(a);j.css("textDecoration",f?"none":"underline");break;case "Fontstrikethru":f=this.propertyValueFalse(d);j=this.getControls(a);j.css("textDecoration",f?"none":"line-through");break;case "Fontname":j=this.getControls(a);j.css("fontFamily",d);break;case "Fontsize":j=this.getControls(a);j.css("fontSize",d+"pt");break;case "Filename":this.setBlobFilename(a,d);break;case "Filetype":this.setBlobFiletype(a,d);
break;case "URL":this.setBlobUrl(a,d);break;case "IsBlob":this.setMultimediaType(a,d);break;case "Bitmap":a.src=d;break;case "SrcSet":void 0!==d&&(a.srcset=d);break;case "Multimedia":this.setMultimediaValue(a.id,d);break;case "Jsonclick":a.jsevent=d;break;case "Source":f=d;j=f.indexOf("?");0<j&&(f=f.substring(0,j));a.src=-1==f.indexOf(":")&&-1==f.indexOf("/")?gx.ajax.objectUrl(d):gx.util.resourceUrl(d,!0);gx.evt.attach(a,"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==a.tagName||gx.dom.isRadio(a)||
"SPAN"==a.tagName)d=gx.json.evalJSON(d),"SELECT"==a.tagName?!1!=d.isset&&(gx.fn.loadComboBox(a.id,d.v),gx.fn.setComboBoxValue(a.id,d.s)):gx.dom.isRadio(a)?!1!=d.isset&&gx.fn.loadRadioButton(a,d.v,d.s):(j=a.id.substring(5),k="",o=d.s,f=gx.O.getValidStructFld(j),gx.lang.emptyObject(f)||(k=f.type),o=gx.fn.trimSelectValue(o,k),d.s=o,gx.fn.setControlValue_span_safe(j,gx.fn.selectedDescription(d,k)));break;case "Width":a.width&&(a.width=d);a.style.width=gx.dom.addUnits(d);break;case "Height":a.height&&
(a.height=d);a.style.height=gx.dom.addUnits(d);break;case "Ispassword":a.type=gx.lang.gxBoolean(d)?"password":"text"}if(a=gx.dom.id(a))a=a+"_"+b,gx.fn.isHidden(a)&&gx.fn.setHidden(a,d);gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:g,property:b,value:d}])}}}},setEnabledProperty:function(a,b,d){var c=gx.dom.id(a);if(gx.lang.gxBoolean(b)){if(delete gx.disabledControls[c],gx.fn.isAccepted(a,!1))return}else gx.util.addOnce(gx.disabledControls,a,c);!0==gx.csv.validating&&(b&&null==gx.csv.validActivatedControl&&
a!=gx.csv.lastControl)&&(c=gx.O.getValidStructId(c),c>gx.O.fromValid&&c<=gx.O.toValid&&(gx.csv.validActivatedControl=a));a.gxusrdisabled=!b;a.disabled=a.gxdisabled?!0==a.gxdisabled?!0:a.gxusrdisabled:a.gxusrdisabled;(void 0===d||d)&&this.setEnabled(a,b)},setEnabled:function(a,b){gx.lang.booleanValue(b)?gx.dom.removeClass(a,"gx-disabled"):gx.dom.addClass(a,"gx-disabled");if(this.disabledAsSpan(a)){var d;try{"checkbox"==a.type&&(d=a.parentNode),"radio"==a.type&&(d=c(a).parent().closest(".gx-radio-button")[0])}catch(f){}if(gx.lang.booleanValue(b)){if(d&&
0==d.className.indexOf("Readonly")&&(d.className=d.className.substring(8)),this.isVisible(a))this.setVisible(a,1),(d=this.getRONode(a.id,!0))&&this.setVisible(d,0)}else if(d&&0>d.className.indexOf("Readonly")&&(d.className="Readonly"+d.className),this.isVisible(a)&&"password"!=a.type&&"image"!=a.type&&"checkbox"!=a.type&&"radio"!==a.type)if(d=this.getRONode(a.id,!0)){this.setVisible(a,0);this.setVisible(d,1);var g=gx.O.getValidStructFld(a),j=0;!gx.lang.emptyObject(g)&&g.format&&(j=g.format);this.setControlValue_span_safe(d,
gx.fn.getControlValue(gx.dom.id(a),"screen",void 0,g),j,"textarea"==a.type)}}},disabledAsSpan:function(a){var b=a.tagName.toUpperCase();return"IMG"!=b&&!("INPUT"==b&&"button"==a.type)},setVisible:function(a,b){c(a).toggleClass("gx-invisible",!gx.lang.booleanValue(b));a.style.display=0==b?"none":this.displayByType(a.nodeName);var d=gx.O.getValidStructFld(a),f=a.parentNode;b&&d&&d.gxgrid&&!d.gxgrid.grid.gxIsFreestyle&&null!=f.getAttribute("data-colindex")?d.gxgrid.applyPropEntireColumn(f.getAttribute("data-colindex"),
"Visible",b):gx.fn.rowGridId(a)&&(d=c(a).find("table")[0])&&this.setVisible(d,b)},getRONodePrefix:function(){return"span_"},getRONode:function(a,b){if(gx.lang.emptyObject(a))return null;var d=gx.dom.byId(a),c=this.getRONodePrefix()+a,g=gx.dom.byId(c);if(null!=g)return g;if(!b||null==d)return null;g=document.createElement("SPAN");g.setAttribute("id",c);this.setVisible(g,!1);g.className="Readonly"+d.className;g.appendChild(document.createTextNode(gx.fn.getControlValue(gx.dom.id(d),"screen")||""));d.parentNode.insertBefore(g,
d);return g},setDateCtrlProperties:function(a,b,d){var f=gx.dom.byId(gx.dom.id(a)+"_dp_trigger");f&&c(f).toggle(b);if(f=c(gx.dom.byId(gx.dom.id(a)+"_dp_container")))a.Flat&&c(a).hide(),a=c(".calendar",f),f.toggle(b&&d||!b&&d),a&&a.toggle(b&&d)},getGridCtrlProperty:function(a,b,c){try{if(0!=a){var f=this.getGridObj(a);if(f){var g=f.grid.getColumnByHtmlName(b);if(g)return g[c.toLowerCase()]}}else return this.getCtrlProperty(b,c)}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","getGridCtrlProperty")}return""},
getCtrlProperty:function(a,b){var c=gx.O.getValidStructFld(a),f=c&&0<c.grid?"_"+gx.fn.currentGridRowImpl(c.grid):"",f=gx.uc.getUserControlObj(gx.uc.userControlContainerId(a+f));if(null!=f)return f[b];if(f=this.screen_CtrlRef(a))return"Text"===b?this.getControlValue(a,"screen",void 0,c):"Visible"==b&&gx.fn.getRONode(a)?this.getCtrlProperty_impl(f,b)||this.getCtrlProperty_impl(gx.fn.getRONode(a),b):"Enabled"==b&&gx.fn.getRONode(f.id)?!this.getCtrlProperty_impl(gx.fn.getRONode(f.id),"Visible"):this.getCtrlProperty_impl(f,
b)},getCtrlProperty_impl:function(a,b){if(null==a)return"";switch(b){case "Tooltiptext":return a.title;case "Invitemessage":return a.placeholder;case "Visible":return"none"!=a.style.display;case "Enabled":return void 0===a.disabled?c(a).hasClass("gx-disabled")?!1:!0:!a.disabled;case "Class":return a.className;case "Backcolor":return gx.color.css(a.style.backgroundColor);case "Forecolor":return gx.color.css(a.style.color);case "Width":return gx.dom.dimensions(a).w;case "Height":return gx.dom.dimensions(a).h;
case "Caption":return this.getCtrlCaption(a);case "Fontbold":return"bold"==a.style.fontWeight;case "Fontitalic":return"italic"==a.style.fontStyle;case "Fontunderline":return"underline"==a.style.textDecoration;case "Fontstrikethru":return"line-through"==a.style.textDecoration;case "Fontname":return a.style.fontFamily;case "Filename":return a.value.split(/(\\|\/)/g).pop();case "Fontsize":var d=parseInt(a.style.fontSize);return isNaN(d)?12:d;case "Ispassword":return"password"==a.type}},displayByType:function(a){switch(a){case "TABLE":return!gx.util.browser.isIE()||
8<=gx.util.browser.ieVersion()?"table":"block";case "P":case "DIV":return"block"}return""},setCtrlCaption:function(a,b){try{var c=gx.html.getFieldLabel(a);if(c)gx.fn.setControlValue_fmt(c,b,0,!1);else{switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":var f=a.getAttribute("data-gxformat"),g=gx.O.getValidStructFld(a);null==f&&(f=!gx.lang.emptyObject(g)&&g.format?g.format:0);c=!1;g&&(c=g.ctrltype?g.multiline:!0);gx.fn.setControlValue_fmt(a,b,f,c);return;case "INPUT":"checkbox"!=a.type&&(a.value=
b);return}"#document"==a.nodeName&&(a.title=b)}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(a){var b=gx.html.getFieldLabel(a);if(b)return c(b).text();switch(a.tagName){case "SPAN":case "DIV":case "FIELDSET":b=a.getAttribute("data-gxformat");if(null!=b&&"1"==b)return a.innerHTML;for(;null!=a.firstChild&&"#text"!=a.firstChild.nodeName;)a=a.firstChild;return"undefined"!=typeof a.innerText?a.innerText:a.textContent||a.text;case "INPUT":if("checkbox"!=a.type)return a.value;
break;default:return""}},propertyValueFalse:function(a){return"string"==typeof a&&(a=a.toLowerCase(),"false"==a||0==gx.num.parseFloat(a))?!0:0==a},setButtonVisibility:function(a,b){var c=b?"":"none",f=a.parentNode;!gx.lang.emptyObject(f)&&"SPAN"==f.nodeName&&(f.style.display=c,f=f.parentNode,!gx.lang.emptyObject(f)&&"SPAN"==f.nodeName&&(f.style.display=c,f=f.parentNode,!gx.lang.emptyObject(f)&&"SPAN"==f.nodeName&&(f.style.display=c,f=f.parentNode,!gx.lang.emptyObject(f)&&"SPAN"==f.nodeName&&(f.style.display=
c))));a.style.display=c},setBlobValue:function(a,b){this.setBlobUrl(gx.dom.byId(a)||gx.dom.byId("Object_"+a),b)},setBlobFilename:function(a,b){if(null!=a){var c=gx.O.getValidStructFld(a);c&&gx.fn.setHidden(c.fld+"_Filename",gx.text.trim(b))}},setBlobFiletype:function(a,b){if(null!=a){var c=gx.O.getValidStructFld(a);c&&gx.fn.setHidden(c.fld+"_Filetype",gx.text.trim(b));c=a;"INPUT"==c.nodeName&&"file"==c.type&&(c=gx.dom.byId("Object_"+a.id));null!=c&&(b=gx.util.getContentType(b),this.setObjectCtrlType(c,
b),gx.fn.setVisible(c,!0))}},resolveResourceUrl:function(a,b){if(""==a)return b?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.ajax.isabsoluteurl(a))if(gx.ajax.isRelativeToHost(a)){if(0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+a,!1)}else return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1);return a},setBlobUrl:function(a,b){var d=gx.html.multimediaUpload.getContainer(a);if(d){var f=this.resolveResourceUrl(b,!1);gx.html.multimediaUpload.setPreviewImage(d,
f);gx.html.multimediaUpload.setPreviewLink(d,f)}else if(!b.match(/^[a-z]:[\S]*/i)&&null!=a){d=a;f="INPUT"==d.nodeName&&"file"==d.type;if(""===b&&""===b){var g=c(d);g.wrap("<form>").closest("form").get(0).reset();g.unwrap()}f&&(d=gx.dom.byId("Object_"+a.id));null!=d&&(f=gx.util.getContentTypeFromExt(b),d=this.setObjectCtrlType(d,f));null!=d?"IMG"==d.tagName?(b=this.resolveResourceUrl(b,!0),d.src=b):(d.data=b||"about:blank",gx.fn.setVisible(d,!0),this.resizeObject(d),gx.dom.redrawControl(d)):(d=gx.dom.byId("Link_"+
a.id),null!=d&&(d.style.display=""!=b?"block":"none",d.href=b))}},setGridMultimediaValue:function(a,b,c,f){if(void 0!==b)return this.setMultimediaValue(a+"_"+b,c,f)},setMultimediaValue:function(a,b,c){var f=gx.dom.byId(gx.csv.ctxControlId(a));if(f){var g=gx.html.multimediaUpload.getContainer(f),j=this.resolveResourceUrl(c||b||"",!1);if(g){0<=gx.util.Url.parseWithAnchor(b).protocol.search(/^https?:/)&&gx.html.multimediaUpload.setPreviewImage(g,j);var k=""==b&&""==c||""!=b;if(!k){var o=gx.dom.byId(f.id+
"_GXI");o&&(o.value=c)}if((a=gx.dom.byId(a))&&""==b)a.value="";this.setMultimediaType(f,k);gx.html.multimediaUpload.setPreviewLink(g,j)}else{if("IMG"==f.tagName||"INPUT"==f.tagName&&"image"==f.type)f.src=j;if((b=f.parentNode)&&"A"==b.tagName&&gx.dom.isMultimediaElement(f))j?b.href=j:b.removeAttribute("href")}}},setMultimediaType:function(a,b){if(a){var c=gx.html.multimediaUpload.getContainer(a);c&&gx.html.multimediaUpload.setType(c,gx.lang.gxBoolean(b))}},setObjectCtrlType:function(a,b){var c=a;if("IMG"==
a.nodeName&&(!b||0==b.indexOf("image/")))return c;if(a.type!=b||"OBJECT"==a.nodeName&&0==b.indexOf("image/"))if(c=0==b.indexOf("image/")?gx.html.nodesFromText('<img id="'+a.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+a.id+'" type="'+b+'">')[0]){try{for(var f in a.attributes)if("id"!=f&&("type"!=f&&"implementation"!=f)&&a[f])try{c[f]=a[f]}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","setObjectCtrlType")}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","setObjectCtrlType")}if(f=a.parentNode){var k=
null,o=f.childNodes.length;for(i=0;i<o;i++)if(f.childNodes[i]==a){i<o-1&&(k=f.childNodes[i+1]);break}gx.dom.removeControlSafe(a);null!=k?f.insertBefore(c,k):f.appendChild(c)}}return c},resizeObject:function(a){var b=gx.lang.emptyObject;!b(a.data)&&"about:blank"!=a.data&&(b(a.width)&&b(a.height)&&b(a.style.width)&&b(a.style.height))&&(a.style.width="200px",a.style.height="200px")},restoreLostCtrlOnGridRefresh:function(a,b,c){if(null==b.form){var f=gx.dom.id(b);if((f=gx.O.getValidStructFld(f))&&"checkbox"==
b.type&&(!f.gxgrid||parseInt(a||0,10)===parseInt(f.gxgrid.grid.firstRecordOnPage||0,10)))b=gx.dom.el(b.id)||gx.dom.el(b.name),b.checked=c}return b},checkboxClick:function(a,b,c,f){var g=b.checked,j="object"===typeof a?a:gx.fn.validStruct(a),k=j&&j.gxgrid?j.gxgrid.grid.firstRecordOnPage:0,o=j&&j.grid?j.grid:0,a=function(a){if(a||gx.csv.validatingGrid===o)b=this.restoreLostCtrlOnGridRefresh(k,b,g),gx.fn.setControlOldValue(b,b.value),b.value=b.checked?c:f,j&&"function"==typeof j.c2v&&j.c2v(),"function"==
typeof j.v2bc&&j.v2bc.call(gx.O)};gx.pO.supportAjaxEvents&&gx.fx.obs.addObserver("gx.onaftervalidate",this,a,{single:!0});gx.fx.obs.notify("gx.validation");if(gx.evt.fixWebKitOnFocus())b.onfocus();a.call(this,!0)},setCtrlClass:function(a,b){null!=a&&(a.className=b)},setCtrlLink:function(a,b){if(null!=a)if(""==b)this.unsetCtrlLink(a);else if("A"==a.tagName)a.href=b;else{var d=a.firstChild;if(d&&"A"==d.tagName)d.href=b;else{var f=a.parentNode;if("A"==f.tagName)f.href=b;else{var g=document.createElement("A");
g.href=b;d&&"#text"==d.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(g,!0),g.innerHTML=d.nodeValue,a.replaceChild(g,d)):(f.replaceChild(g,a),g.appendChild(a));(d=c(a).attr("data-gx-link-target"))&&c(g).attr("target",d)}}}},unsetCtrlLink:function(a){if(null!=a&&(a=a.parentNode,"A"==a.tagName)){var b=a.firstChild;ParentTag2=a.parentNode;if(null!=ParentTag2){for(;null!=b;)ParentTag2.insertBefore(b,a),b=a.firstChild;gx.dom.removeControlSafe(a)}}},setCtrlLinkTarget:function(a,b){if(null!=a){var d=c(a);
d.is("a")||(d=d.children());d.is("a")&&d.attr("target",b);c(a).attr("data-gx-link-target",b)}},isVisible:function(a,b){if(gx.dom.hasClass(a,"gx-invisible")||"INPUT"==a.tagName.toUpperCase()&&"hidden"==a.type||"none"==a.style.display)return!1;try{for(var c;a&&("undefined"==typeof b||0<=b);){if((c=gx.dom.getComputedStyle(a))&&("hidden"==c.visibility||"none"==c.display))return!1;a=a.parentNode;"undefined"!=typeof b&&b--}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(a,
b){var c=this.gridObjByLvl(a),f=null;if(c)return c=gx.O.getGridById(c.gridId,b)||c,(f=c.grid.getRowByGxId(b))?f.gxIsMod():!0;c=!1;try{c=1==this.getControlValue("nIsMod_"+a+"_"+b)}catch(g){c=!1}return c},gridObjByLvl:function(a){for(var b=gx.O.Grids,c=b.length,f=0;f<c;f++)if(b[f].gridLvl==a)return b[f];return null},forceEnableControls:function(a){for(var b in gx.disabledControls){b=this.getControlRef_list(b);for(var c=b.length,f=0;f<c;f++)try{"button"!=b[f].type&&"submit"!=b[f].type&&(b[f].disabled=
a)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","forceEnableControls")}}},alert:function(a,b){try{var c=gx.util.balloon.getNew(a.id);c.setError(b);c.show();gx.csv.invalidForcedCtrl=a}catch(f){alert(b)}},getGridRowMode:function(a,b){var c=this.currentGridRow(b),f=this.rowIsRemoved(b,c),c=this.getControlValue("nRcdExists_"+a+"_"+c);return"1"==f?"DLT":"0"==c?"INS":"UPD"},rowIsRemoved:function(a,b){var c=this.getGridObj(a);return null!=c&&(c=c.grid.getRowByGxId(b))?c.gxDeleted():!1},getGridObj:function(a){return gx.O.getGridById(a)},
changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","changeCmpContext")}},initOld:function(a){void 0==gx.oldValues[a.id]&&(gx.oldValues[a.id]=a.value)},setFocusOnError:function(a){var b=gx.fn.controlGridId(a),a=gx.csv.ctxControlId(a),c=null,c=0==b?gx.dom.el(a):gx.fn.getControlGridRef(a,b);null!=c&&(gx.O.AnyError=1,gx.csv.anyError=!0,c.setAttribute("data-gxvalid","0"),gx.csv.stopOnError&&gx.fn.setFocus(c))},usrSetFocus:function(a,b){void 0===b&&(b=!0);var c=
gx.fn.screen_CtrlRef(a);null==c?gx.grid.setActiveGridRow(a,0):(a=gx.dom.id(c),!0==gx.csv.validating?b?gx.fx.obs.addObserver("gx.onaftervalidate",this,gx.fn.usrSetFocus.closure(gx.fn,[a,!1]),{single:!0}):gx.usrFocusControl=a:(gx.fn.setFocus(c),delete gx.usrFocusControl))},setFocus:function(a,b){if(a){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(c){gx.dbg.logEx(c,
"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(a.id)&&(a=gx.dom.byId(a.id),!a))return;gx.fn.setFocusSafe(a,function(a){gx.fn.setSelection(a);a.forcedFocus=!0;b&&b()})}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(a,b){if(a){var d=function(a,b){try{f&&b&&gx.fx.obs.addObserver("gx.onafterfocus",this,b.closure(this,[a]),{single:!0}),c(a).focus()}catch(d){}!f&&b&&b(a)},f=gx.csv.setFocusOnload;f||!gx.util.browser.isIE()?gx.spa.isNavigating()?gx.spa.addObserver("onnavigatecomplete",
window,function(){d.call(this,a,b)}):gx.lang.doCallTimeout(d,this,[a,b],f?500:0):d(a,b)}},setFocusInit:function(){try{gx.csv.lastActiveControl=window.document.activeElement}catch(a){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},arrayCtrlFocus:function(a){a&&"radio"==a.type&&(a=gx.fn.getRadioSelected(a.name)||a);return a},setFocusOnload:function(){if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){var a=null,a=gx.pO.getUserFocus();if(!gx.lang.emptyObject(a)){if("notset"==
a)return;var b=gx.pO.getUserControl(gx.uc.userControlContainerId(a));if(gx.lang.emptyObject(b))gx.csv.userFocus=gx.fn.getControlRef(a);else{b.setFocusBase();return}}if("notset"!=gx.csv.userFocus){a=gx.csv.userFocus;gx.fn.isAccepted(a)||(gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?a=gx.csv.lastActiveControl:(a=gx.fn.firstAcceptedControl(gx.popup.ispopup()),a=gx.fn.arrayCtrlFocus(a)));try{a?(b=function(){gx.csv.setFocusOnload=false},gx.csv.lastControl=a,gx.csv.setFocusOnload=
!0,gx.fn.isAccepted(a)?gx.fn.setFocus(a,b):(gx.popup.setFocus(),b())):gx.popup.setFocus()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setFocusOnload")}}}},setSelection:function(a){if(a&&gx.fn.isVisible(a))try{if(gx.csv.lastControl=a,(gx.dom.isEditControl(a)||"file"==a.type)&&a.select)a.select();else if("TEXTAREA"==a.nodeName||"SELECT"==a.nodeName)a.focus(),a.select&&a.select()}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","setSelection")}},isAccepted:function(a,b,c){var b=void 0==b||b,f=!0,c=c||gx.O,g=["FIELDSET"];
null!=a&&void 0!=a.type&&!gx.util.inArray(a.nodeName,g)&&"hidden"!=a.type&&gx.fn.isVisible(a)&&!1==a.disabled&&(null==a.readOnly||!1==a.readOnly)?b&&(f=gx.dom.id(a),f=c.getValidStructFld(f),a=c.getVariable("Gx_mode"),0<gx.csv.lastGrid&&c.setVariable("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)),f=!gx.lang.emptyObject(f)&&f.nac?!1==f.nac.call(c):!0,c.setVariable("Gx_mode",a)):f=!1;return f},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},
skipFocus:function(a){var b=gx.csv.lastControl,c=gx.fn.getControlIndex(b),f=c,g=this.controlGridId(b.id||b.name),j=!1;a&&gx.dom.hasClass(b,"gx_newrow")&&(f=b.gxControlIdx,j=!0);if(-1==f)return!0;b=null;for(b=gx.fn.searchFocus(++f,!0);;b=gx.fn.searchFocus(++f,!0))if(null==b||f==gx.dom.form().elements.length)f=-1;else{if(a)break;if(gx.evt.isEnterEvtCtrl(b))break;if("INPUT"==b.nodeName&&"submit"!=b.type&&"button"!=b.type&&"image"!=b.type)break}if(!j&&(g&&gx.O.isTransaction())&&this.controlGridId(b.id||
b.name)!=g)a=gx.O.getGridById(g),b=gx.dom.byId(a.containerName+"_NewRow").parentNode,b.gxControlIdx=c;gx.fn.setFocus(b)},getControlIndex:function(a){var b=gx.dom.form().elements.length-1;return el=this.controlIndex(a,0,b)},controlIndex:function(a,b,c){if(document.all){var f=gx.dom.form(),g=f.elements[b].sourceIndex,j=f.elements[c].sourceIndex,k=parseInt(b+(c-b)/2)+1,f=f.elements[k].sourceIndex;if(b==c&&a.sourceIndex==g&&a.sourceIndex==j||a.sourceIndex==g)return b;if(a.sourceIndex==j)return c;if(a.sourceIndex==
f)return k;if(a.sourceIndex>f&&a.sourceIndex<j)return this.controlIndex(a,k+1,c-1);if(a.sourceIndex>g&&a.sourceIndex<f)return this.controlIndex(a,b+1,k-1)}else return a.gxIndex},searchFocus:function(a,b){return b?this.searchFocusFwd(a):this.searchFocusBack(a)},searchFocusBack:function(a){for(var b=j(gx.dom.form().elements);0<=a;a--)if(gx.fn.isAccepted(b))return b[a];return null},searchFocusFwd:function(a){for(var b=j(gx.dom.form().elements),c=b.length;a<c;a++)if(gx.fn.isAccepted(b[a]))return b[a];
return null},rowGridId:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("data-gxgridid");return null!=b?b:gx.fn.rowGridId(a.parentNode)},controlRowId:function(a){if(!a||!a.getAttribute)return null;var b=a.getAttribute("data-gxrow");return null!=b?b:gx.fn.controlRowId(a.parentNode)},controlGridId:function(a){try{var b,c,f=gx.O.Grids;if(f){c=0;for(len=f.length;c<len;c++)if(f[c].grid.columnsHtmlName[a])return f[c].gridId}b=gx.fn.controlIds();c=0;for(len=b.length;c<len;c++){var g=gx.fn.validStruct(b[c]);
if(gx.O.isSameField(g,a))return g.grid}var j=gx.O.getComponentData(a);if(j){var k=gx.fn.gridObjByLvl(j.lvl);if(k)return k.gridId}}catch(o){}return 0},oldGridId:function(a){try{var b=gx.fn.controlIds(),c=b.length;for(i=0;i<c;i++){var f=gx.fn.validStruct(b[i]);if(void 0!=f&&f.gxold==a)return f.grid}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(a,b){var c="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,a)&&(c=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),
gx.csv.lastGrid)):this.isLvlParmOld(0,a)&&(c=gx.O.Gx_mode);return"no_mode"==c?!0:"UPD"==c||null==gx.csv.validatingGrid?(window[a]=b,!0):!1},isLvlParmOld:function(a,b){try{var c=gx.O.getOldLvl(b);if(0<=c){if(0<a){var f=gx.fn.gridLvl(a);return c<f}return!0}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(a){try{var b=gx.fn.controlIds(),c=b.length;for(i=0;i<c;i++){var f=gx.fn.validStruct(b[i]);if(void 0!=f&&void 0!=f.lvl&&f.grid==a)return f.lvl}}catch(g){gx.dbg.logEx(g,
"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(a){try{var b=gx.fn.controlIds(),c=b.length;for(i=0;i<c;i++){var f=gx.fn.validStruct(b[i]);if(void 0!=f&&f.lvl==a)return f.grid}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(a){try{var b=gx.fn.controlIds();for(i=0;i<b.length;i++){var c=gx.fn.validStruct(b[i]);if(void 0!=c&&c.fld==a)return b[i]}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(a,b){try{var c=null;b&&(c=[]);var f=gx.fn.controlIds(),
g=f.length;for(i=0;i<g;i++){var j=gx.fn.validStruct(f[i]);if(void 0!=j&&a(j))if(j.id=f[i],b)c.push(j);else return j}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","getVStruct")}return c},vStructForOld:function(a){return gx.fn.getVStruct(function(b){return b.gxold==a})},vStructForVar:function(a){return gx.fn.getVStruct(function(b){return b.gxvar==a})},vStructForVarWId:function(a,b){var c=gx.fn.getVStruct(function(b){return b.gxvar==a},!0),f=c[0],g=c.length;if(1<g)for(var j=0;j<g&&!(f=c[j],f.id==b);j++);return f},
vStructForHC:function(a){return gx.fn.getVStruct(function(b){return b.hc==a})},firstCtrlAfterGrid:function(a,b){for(var c=gx.fn.lastCtrlId(),f=a;f<c;f++){var g=gx.fn.validStruct(f);if(void 0!=g&&g.grid!=b)return f}return c},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(a){try{return gx.oldKeyValues[a]}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","oldKey")}return""},oldGridKey:function(a,b){try{return gx.oldKeyValues[a+gx.fn.currentGridRow(b)]}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","oldGridKey")}return""},
setKey:function(a,b){null!=a&&(gx.oldKeyValues[a]=b)},unsetKey:function(a){null!=a&&(gx.oldKeyValues[a]=void 0)},setGridKey:function(a,b,c){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=c)},unsetGridKey:function(a,b){null!=a&&(gx.oldKeyValues[a+gx.fn.currentGridRow(b)]=void 0)},removeGridRow:function(a,b){var c=gx.fn.rowIsRemoved(b,a);try{var f=gx.fn.controlIds(),g=f.length;for(i=0;i<g;i++){var j=gx.fn.validStruct(f[i]);if(void 0!=j&&j.grid==b){var k=gx.dom.el(j.fld+"_"+a);null!=k&&(k.gxdisabled=
c,k.disabled=c)}}}catch(o){gx.dbg.logEx(o,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(b,a)},controlFiresEvent:function(a){return a&&(a.evt||a.evt2)},controlIds:function(){return gx.O.getControlIds()},validStruct:function(a,b){b=b||gx.O;return b.getValidStruct(a)},lastCtrlId:function(a){if(!0===a)for(var a=this.controlIds(),b=a.length-1;0<=b;b--){var c=this.validStruct(a[b]);if(c.v2v&&(void 0===c.isacc||1==c.isacc))return a[b]}else return gx.O.getLastControlId()},lastMainLevelCtrlId:function(a,
b){return 0==b&&a==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(a){try{for(var b=gx.fn.vStructsArray(),c=gx.fn.controlIds(),f=c.length,g=0;g<f;g++){var j=b[c[g]];if(null!=j){var k=gx.fn.getControlGridRef(j.fld,j.grid);if(k&&gx.fn.isAccepted(k)&&(a||"submit"!=k.type&&"image"!=k.type&&"button"!=k.type&&"fieldset"!=k.type))return k}}}catch(o){gx.dbg.logEx(o,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(){var a=gx.dom.byId(gx.csv.cmpCtx+
"BTN_DELETE");null!=a&&gx.fn.setCtrlPropertyImpl(a,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(a){!0!=gx.csv.validating&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(a&&gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.O.fromValid=gx.csv.lastId,gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(a){var b=function(a){try{for(var b=a.length,c=0;c<b;c++)gx.fn.setCtrlPropertyImpl(a[c],
"Enabled",0)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","disableCtrl")}},a=gx.fn.getControlRef_list(a);if(null!=a)if("complete"==document.gxReadyState)b(a);else gx.evt.on_ready(this,b.closure(this,[a]))},refreshGridRowBC:function(a,b){try{var c=gx.O.getGridBC(a);if(c){var f=gx.pO.getGridForColl(c.gxvar);if(gx.csv.validatingGrid&&f&&gx.csv.validatingGrid.gridId==f.gridId)return gx.fn.setGridHidden(a,b),b=b[parseInt(gx.fn.currentGridRow(f.gridId))-1],gx.O.bcToScreen(c,b),!0}}catch(g){gx.dbg.logEx(g,"gxfrmutl.js",
"refreshGridRowBC")}return!1},refreshBC:function(a,b){return this.refreshFormBC(a,b)||this.refreshGridRowBC(a,b)},refreshFormBC:function(a,b){try{var c=gx.O.getFormBC(a)||gx.O.getFormBCForVar(a);if(c)return gx.setVar(a,b),gx.fn.setGridHidden(a,b),gx.O.bcToScreen(c,b),!0}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[a]},GX_HASH_PREFIX:"gxhash_",getHash:function(a,b,c){return gx.fn.getHidden(a+
gx.fn.GX_HASH_PREFIX+b+(c?"_"+c:""))||gx.fn.getHidden(a+gx.fn.GX_HASH_PREFIX+b)},getHidden:function(a){gx.http.viewStateLoaded||gx.http.loadState();return gx.http.viewState[a]},setHidden:function(a,b){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[a]=b},setGridHidden:function(a,b){var c=a,f=gx.fn.oldGridId(a);0<f&&(c=a+"_"+gx.fn.currentGridRowImpl(f));gx.fn.setHidden(c,b)},deleteHidden:function(a){gx.http.viewState&&delete gx.http.viewState[a]},setJsonHiddens:function(a,b,c){var f=
[],c=void 0===c||c,g;for(g in b){c?gx.fn.setGridHidden(g,b[g]):gx.fn.setHidden(g,b[g]);var j=gx.fn.getVarControlMap(a,g);if(!gx.lang.emptyObject(j)){var k=b[g],o=a.VarControlMap[j];if("date"==o.type||"dtime"==o.type)k=new gx.date.gxdate(k,"Y4MD");gx.setVar(j,k)}a&&a.UCBindingsHiddens[g]&&(f=f.concat(gx.O.UCBindingsHiddens[g].uc))}return f},filterHiddens:function(a,b){var c={},f;for(f in b)f&&0==f.search(a)&&(c[f]=b[f]);return c},autoRefreshingControl:function(a,b){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&
null!=gx.csv.lastControl&&gx.csv.lastControl.id==b+a},setJsonValues:function(a){if(!a)return[];for(var b=gx.O,c=a.length,f=[],g,j=0;j<c;j++){var k=a[j],o=k.CmpContext,p=gx.lang.booleanValue(k.IsMasterPage);gx.setGxO(o,p);if(!gx.lang.emptyObject(gx.O))for(var m in k)if(!("CmpContext"==m||"IsMasterPage"==m)&&!("object"==typeof k[m]&&gx.fn.refreshBC(m,k[m]))&&"function"!=typeof k[m]){var s=gx.fn.vStructForVar(m)||gx.O.getValidStructFld(m);if(s){if(s.v2v&&!gx.fn.autoRefreshingControl(s.fld,o)){var q=
gx.O.getGridById(s.grid),q=q&&q.InfiniteScrolling;0!=s.grid&&(g="edit"==s.ctrltype||"checkbox"==s.ctrltype||"combo"==s.ctrltype?gx.dom.byId(m):gx.dom.el(m,!1,!0),g=gx.fn.controlRowId(g)||gx.fn.currentGridRowImpl(s.grid));q||(s.v2v(k[m]),s.v2c(g))}}else"GX_FocusControl"==m?b.CmpContext==o&&b.IsMasterPage==p&&(gx.usrFocusControl=k[m]):(s=gx.fn.getVarControlMap(gx.O,m),gx.lang.emptyObject(s)?gx.setVar(m,k[m]):gx.setVar(s,k[m]),gx.fn.setGridHidden(m,k[m]),gx.O.UCBindings[m]&&(f=f.concat(gx.O.UCBindings[m].uc)))}}gx.setGxO(b);
return f},getPropertyControlRef:function(a,b,c){var f=gx.fn.getControlRef(a,!0),f=null==f&&!c?gx.dom.byId("Object_"+a):f;null==f&&(f=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(a)));null==f&&b&&(f=gx.dom.el(a+"_"+b));return f},setJsonProperties:function(a,b){var c,f;if(!a)return[];for(var g=gx.O,j=a.length,k=[],o=0;o<j;o++){var p=a[o],m=p.CmpContext,s=gx.lang.booleanValue(p.IsMasterPage),m=gx.setGxO(m,s);if(!gx.lang.emptyObject(gx.O))for(var q in p){var r;if(!("CmpContext"===q||"IsMasterPage"===q||""===
q))if(s=p[q],"function"!=typeof s)if(c=m.getValidStructFld(q),"FORM"==q||c||0<=q.indexOf("gxHTMLWrp")?(c=c&&("bits"==c.type||"bitstr"==c.type||"audio"==c.type||"video"==c.type||"binaryfile"==c.type),c=gx.fn.getPropertyControlRef(q,b,!c)):c=gx.fn.getPropertyControlRef(q,b),f=!1,c&&c.gxGridName&&(r=gx.fn.gridObjFromGxO(c.gxGridName),f=r.setProperty(s)),!f)if(f=m.getGridColumn(q,b),(null==c||r)&&gx.uc.isUserControl(q,m))gx.uc.setProperties(q,s),k.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(q)));
else if(!(null==c&&null==f))for(var u in s){var v="object"===typeof s[u];f&&!v&&(f[u.toLowerCase()]=s[u]);if(c)if(c.parentElement||(c=gx.fn.getPropertyControlRef(q,b)),v)for(var x in s[u])gx.fn.setCtrlPropertyImpl(c,x,s[u][x]);else gx.fn.setCtrlPropertyImpl(c,u,s[u])}}}gx.setGxO(g);return k},loadJsonGrids:function(a,b){var c=function(a){for(var b=0;b<a.length;b++)if("string"===typeof a[b])return a[b];return""},f=function(a){var b="",c=a.lastIndexOf("_");-1!==c&&(b=(a=a.substring(c+5))?"_"+a:"");return b},
g=[];if(a)for(var j=a.length,k,o=0;o<j;o++)try{var p=a[o];if(void 0!=p.Count){var m=p.CmpContext,s=p.GridName,q=gx.csv.validatingGrid;if(gx.pO.fullAjax||gx.lang.emptyObject(q)||q.gxComponentContext!=m&&q.gridName!=s||!gx.lang.emptyObject(q.boundedCollType)){var r="true"==p.InMasterPage?!0:!1,u="",v="";p[0]&&(p[0].Props&&p[0].Props[0]&&gx.lang.isArray(p[0].Props[0]))&&(v=c(p[0].Props[0]));u=f(v);if(k=gx.fn.gridObj(m,s+u,r))k.isUsercontrol&&g.push(k.grid),b?k.loadGrid({rowProps:p,isPostback:b}):k.updatePropsHidden(p)}}}catch(x){gx.dbg.logEx(x,
"gxfrmutl.js","loadJsonGrids")}return g},getErrorViewerCtrls:function(){var a=gx.dom.byName("gxErrorViewer");if(0==a.length)for(var a=[],b=gx.dom.byTag("span"),c=b.length,f=0;f<c;f++)"gxErrorViewer"==b[f].name&&a.push(b[f]);return a},setErrorViewer:function(a){gx.O.AnyError=0;if(a)try{gx.fx.obs.notify("gx.onmessages",[a]);var b=gx.dom.byClass("gx_ev"),c=b.length,f;for(f in a){var g,j=a[f];gx.lang.isArray(j)||(g=j.fields,j=j.msgs);var k=[];if(g)for(var o=0,p=g.length;o<p;o++)if(!gx.lang.isArray(g[o])){var m=
gx.fn.vStructForVar(g[o].replace(/^gx\.O\./,""));m&&k.push(m.fld)}"MAIN"==f&&(f="");if("undefined"!=typeof j){for(o=0;o<c;o++){var s=b[o];if(s&&s.id==f+"gxErrorViewer"){var q=gx.csv.setFocusOnload?s.innerHTML:"";break}}var r={},u;for(u in j){var v=j[u];v&&1==v.type&&(gx.O.AnyError=1);if(!gx.lang.emptyObject(v.text)&&"function"!=typeof v)if(""!=v.att&&gx.fn.isVisible(gx.fn.screen_CtrlRef(v.att))){var x=r[v.att];x||(x=gx.util.balloon.getNew(v.att,void 0,k),r[v.att]=x);1==v.type?x.setError(v.text):x.setMessage(v.text)}else q+=
'<div class="'+(1==v.type?"gx-error-message":"gx-warning-message")+'">'+gx.html.encode(v.text)+"</div>"}var k=!1,z;for(z in r)if(x=r[z],!1==x.show()&&!k&&(k=!0,gx.fn.setFocusOnError(z)),gx.csv.oneAtAtime)break;for(o=0;o<c;o++)if((s=b[o])&&s.id==f+"gxErrorViewer"&&s.innerHTML!=q)if(gx.dom.shouldPurge()&&gx.dom.purge(s,!0),s.innerHTML=q,""!=q){var w=gx.fx.dom.highlight(s,[255,255,165],2500);w.play();s.effect=w}}}gx.plugdesign.applyTemplateObject({templateSelector:function(a){return"errorviewer"===a.name},
classMapSelector:function(){return!1}})}catch(H){gx.dbg.logEx(H,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(a){var b=g.exec(a);return b?b[1]+b[2]:a},clearCompontHiddens:function(a){var b=[],c;for(c in a)"function"!=typeof a[c]&&b.push(gx.fn.cmpContextFromCtrl(c));try{gx.O.deleteComponentHiddens(b)}catch(f){except=!0,gx.dbg.logEx(f,"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(a,b,d,f,g){try{var j=[],t=!1;gx.gen.isDotNet();var o=[],p;for(p in a)if(o.push(p),"function"!=
typeof a[p])try{var m=a[p];if(m){var s=gx.dom.byId(p);!s&&b&&(s=gx.dom.byId(b[p]));gx.lang.emptyObject(s)&&(c(document.body).append("<div id='"+p+"'></div>"),s=gx.dom.byId(p));if(!gx.lang.emptyObject(s)){gx.html.setInnerHtml(s,m,!1,g);var q=gx.fn.cmpContextFromCtrl(p),r=k(gx.fn.getHidden(q+"_CMPPGM"));j.push({type:q,name:r,html:m,container:s})}}}catch(u){t=!0,gx.dbg.logEx(u,"gxfrmutl.js","setJsonComponents")}}catch(v){t=!0,gx.dbg.logEx(v,"gxfrmutl.js","setJsonComponents")}(0==j.length||t)&&"function"==
typeof f?f(o):(a=c.map(j,function(a){return gx.fn.createComponentAsync(a,d)}),c.when.apply(c,a).done(function(){f(o)}))},cmpRegexCache:{},getCmpRegex:function(a){var b=this.cmpRegexCache[a];this.cmpRegexCache[a]||(b=RegExp("^"+a),this.cmpRegexCache[a]=b);return b},processCodeCallback:function(a,b,c,f,g,j){gx.fn.createComponentObj(a,b,f);gx.fn.setJsonHiddens(g,c);j.resolve()},createComponentAsync:function(a,b){var d=c.Deferred(),f=a.type,g=a.name,j=a.html,k=a.container;d.then(function(){gx.fx.obs.notify("gx.onafterevent",
[gx.csv.lastEvtResponse])});try{var o=gx.O,p=gx.fn.filterHiddens(gx.fn.getCmpRegex(f),b);gx.cache.codeLoaded(f+g)?(gx.fn.createComponentObj(g,f,k),gx.fn.setJsonHiddens(o,p),d.resolve()):(gx.cache.addInlineCode(f+g),gx.html.processCode(j,!1,gx.fn.processCodeCallback,[g,f,p,k,o,d],g))}catch(m){gx.dbg.logEx(m,"gxfrmutl.js","createComponentAsync"),d.resolve()}return d},createComponentObj:function(a,b,c){a=gx.createComponent(a,b,c);null!=a&&gx.addComponent(a)},cleanAttachedCtrls:function(){gx.attachedControls=
[]},getAttachedCtrl:function(a){for(var b=gx.attachedControls.length,c=0;c<b;c++){var f=gx.attachedControls[c];if(f.id==a)return f}return null},attachCtrl:function(a,b){null==gx.fn.getAttachedCtrl(a)&&gx.attachedControls.push({id:a,info:b})},doAttachs:function(a){var b=gx.fn.attachedControls(),d=b.length,f=gx.O,g,a=a&&a.length?c.map(a,gx.fn.cmpContextFromCtrl):void 0,j,k,o,p,m,s;for(s=0;s<d;s++)if(j=b[s],!a||0<=c.inArray(j.info.wc,a))if(g=gx.setGxO(j.info.wc,j.info.mp),j.info.isPrompt&&g.isTransaction()&&
"DSP"==g.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(j.info.wc+j.info.id),"Visible",!1);else if(!j.attached){g=j.info.controls;k=g.length;p=[];for(m=0;m<k;m++)gx.fn.addAttach(g[m],j),o=gx.fn.validStruct(g[m]),gx.fn.checkAttachedPropertyVS(o,"Visible",!1),gx.fn.checkAttachedPropertyVS(o,"Enabled",!1),p.push(o.fld);j.attached=!0;c("#"+j.id).attr("data-gx-attached-ctrl",p.join(" "))}gx.setGxO(f)},addAttach:function(a,b){var c=gx.fn.validStruct(a);void 0==c.attachedCtrls&&(c.attachedCtrls=[]);c.attachedCtrls.push(b)},
checkAttachedProperty:function(a,b,c){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(a),b,c)},checkAttachedPropertyVS:function(a,b,c){if(void 0!=a&&(a=a.attachedCtrls,void 0!=a))for(var f=a.length,g=0;g<f;g++)gx.fn.checkAttachedControlProperty(a[g],b,c)},checkAttachedControlProperty:function(a,b,c){for(var f=a.info.id,a=a.info,g=!0,j=a.controls,a=a.wc,k=j.length,o=0;o<k;o++){var p=gx.fn.getCtrlProperty(a+gx.fn.validStruct(j[o]).fld,b),g=c?p==c:g&&p==c;if(c&&g)break}g&&gx.fn.setCtrlPropertyImpl(gx.dom.el(a+
f),b,c)},changeControlOpacity:function(a,b,c,f){var g=Math.round(f),j="",j="string"==typeof a?a:a.id;b>c?(gx.fn.setOpacity(b,j),setTimeout(function(){gx.fn.changeControlOpacity(a,b-10,c,f)},g)):b<c?(gx.fn.setOpacity(b,j),setTimeout(function(){gx.fn.changeControlOpacity(a,b+10,c,f)},g)):gx.fn.setOpacity(c,j)},setOpacity:function(a,b){var c=b;"string"==typeof b&&(c="body"==b?document.body:gx.dom.el(b));if(null!=c){var c=c.style,f="reset"==a?"":a/100;c.opacity=f;c.MozOpacity=f;c.filter="alpha(opacity="+
("reset"==a?100:a)+")"}},fadeControl:function(a,b,c){"in"==b?gx.fn.changeControlOpacity(a,0,100,c):gx.fn.changeControlOpacity(a,100,0,c)},fadeIn:function(a,b){gx.fn.fadeControl(a,"in",b)},statusMsg:function(a){window.status=a},objectOnload:function(a,b){var d=c(document.body),f="true"===d.attr("data-HasEnter"),g="true"===d.attr("data-Skiponenter");c(document).keydown(function(){gx.evt.onkeypress(null,f,g)});c(document).keypress(function(a){gx.evt.onkeypress(a,f,g)});c(document).keyup(function(a){gx.evt.onkeyup(a)});
c(document).on("keyup",'input[type="text"], input[type="password"], input[type="email"], input[type="number"], input[type="search"], input[type="url"], textarea',function(a){gx.evt.oncontrolvaluechanging(a)});null!=gx.pO&&(gx.pO.onload(a,b),gx.setGxO(gx.pO))},objectOnUnload:function(a){if(null!=gx.pO)gx.pO.onunload(a)},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},objectPostback:function(a,b){null!=gx.pO&&(gx.pO.postbackLoad(a,b),gx.fx.obs.notify("gx.onobjectpostback",arguments))},gridObjFromGxO:function(a){return gx.fn.gridObj(gx.O.CmpContext,
a,gx.O.IsMasterPage)},gridObj:function(a,b,c){return(a=gx.getObj(a,c))?a.getGrid(b):null},installComponents:function(a,b){var c=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=c){gx.gen.isDotNet();for(var f in c)if(a||!gx.pO.getWebComponent(f)){var g=k(c[f].toLowerCase()),g=gx.createComponent(g,f);null!=g&&(gx.addComponent(g,b),setTimeout(function(a){this.addComponentRemoteFiles(a)}.closure(this,[g]),1))}}},addComponentRemoteFiles:function(a){if(a=a.getContainer())gx.html.processCode(a.innerHTML,!0),gx.dom.fitToParent(a)},
datePickerFormat:function(a,b,c){var f=gx.dateFormat,g=f.substr(0,1),j=f.substr(1,1),f=f.substr(2,1),g=gx.fn.datePickerDateFormat(g,a),j=gx.fn.datePickerDateFormat(j,a),a=gx.fn.datePickerDateFormat(f,a),f=gx.fn.datePickerTimeFormat(b);return 0<c&&0<b?g+"/"+j+"/"+a+" "+f:0<c?g+"/"+j+"/"+a:f},datePickerDateFormat:function(a,b){return"Y"==a&&"99/99/9999"==b.substr(0,10)?"%Y":"Y"==a?"%y":"M"==a?"%m":"D"==a?"%d":""},datePickerTimeFormat:function(a){var b=gx.timeFormat,c;12==b?(b="%I",c=" %p"):(b=24==b?
"%H":"",c="");if(2==a)a="";else if(5==a)a=":%M";else if(8==a)a=":%M:%S";else return"";return b+a+c},installDatePicker:function(a,b,c,f,g,j,k,o){(new gx.ui.controls.datePicker({inputId:a,triggerId:a+"_dp_trigger",inline:b,inputType:!c?"date":"datetime",weeksNumbers:f,mondayFirst:g,format:j,datePartLength:k,timePartLength:o,afterChange:gx.fn.datePickerChanged})).render()},datePickerChanged:function(a,b,c){if(!a||a.dateClicked){var f=gx.O,g=null,j=gx.fn.controlIds(),k=j.length;for(i=0;i<k;i++){var g=
gx.fn.validStruct(j[i]),o=0!=g.grid?"_"+gx.fn.currentGridRow(g.grid):"";if(c.id==f.CmpContext+g.fld+o)break}null!=g&&void 0!=g.dp&&(b=gx.date.isNullDate(b)?gx.date.nulldate_toc(g.len,g.dec):b.print(gx.fn.datePickerFormat(g.dp.pic,g.dp.dec,g.len)),b!=c.value&&(c.setAttribute("data-gxvalid","0"),c.value=b,c.onchange(),a&&a.callCloseHandler(),0<g.grid&&(gx.fn.getGridObj(g.grid)||g.gxgrid).setRowModified(gx.fn.currentGridRow(g.grid)),f.refreshDependantGrids(g)))}},toArray:function(a){if(gx.util.browser.isIE()&&
8>=gx.util.browser.ieVersion()){for(var b=[],c=0,f=a.length;c<f;c++)b[c]=a[c];return b}return Array.prototype.slice.call(a)},evalCtxScope:function(a,b){var c=gx.O;gx.setGxO(a);var f=eval(b);f instanceof Object&&(f=gx.json.serializeJson(f));gx.setGxO(c);return f}}}(gx.$);
gx.thread={Map:function(){this.map={};this.add=function(c,g){this.map[c]=g};this.remove=function(c){delete this.map[c]};this.get=function(c){return null==c?null:this.map[c]};this.first=function(){return this.get(this.nextKey())};this.next=function(c){return this.get(this.nextKey(c))};this.nextKey=function(c){for(i in this.map){if(!c)return i;c==i&&(c=null)}return null}},Command:function(c,g,k){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){g.apply(c,
k)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(c,g,k,j){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(b){gx.dbg.logEx(b,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if(typeof j=="function")try{j.call(c,retVal)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(c,g,k);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,keyName:"GX_AJAX_KEY",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var c=gx.fn.getHidden(this.keyName);this.key=gx.lang.emptyObject(c)?null:c;null!=this.key&&this.loadSecToken()},loadSecToken:function(){var c=gx.fn.getHidden(this.secTokenName);this.secToken=gx.lang.emptyObject(c)?null:c},encrypt:function(c,g){try{if(g=null==g?this.key:g,null!=g){var k=this.rijndael,g=k.hexToByteArray(g),j=k.rijndaelEncrypt(c,g);return k.byteArrayToHex(j)}}catch(a){gx.dbg.logEx(a,
"gxfrmutl.js","encrypt")}return c},decrypt:function(c,g){try{if(g=null==g?this.key:g,null!=g){var k=this.rijndael,g=k.hexToByteArray(g),j=k.hexToByteArray(c),a=k.rijndaelDecrypt(j,g);return k.byteArrayToString(a)}}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","decrypt")}return c},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(c,g){return c<<g|c>>>32-g},AddUnsigned:function(c,g){var k,j,a,b,d;a=c&2147483648;b=g&2147483648;k=c&1073741824;j=g&1073741824;d=(c&1073741823)+(g&1073741823);return k&j?d^2147483648^a^b:k|j?d&1073741824?d^3221225472^a^b:d^1073741824^a^b:d^a^b},F:function(c,g,k){return c&g|~c&k},G:function(c,g,k){return c&k|g&~k},H:function(c,g,k){return c^g^k},I:function(c,g,k){return g^(c|~k)},FF:function(c,g,k,j,a,b,d){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(g,
k,j),a),d));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,b),g)},GG:function(c,g,k,j,a,b,d){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(g,k,j),a),d));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,b),g)},HH:function(c,g,k,j,a,b,d){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(g,k,j),a),d));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,b),g)},II:function(c,g,k,j,a,b,d){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(g,k,j),a),d));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,b),g)},ConvertToWordArray:function(c){var g,k=c.length;g=k+8;for(var j=16*((g-g%64)/64+1),a=Array(j-1),b=0,d=0;d<k;)g=(d-d%4)/4,b=8*(d%4),a[g]|=c.charCodeAt(d)<<b,d++;g=(d-d%4)/4;a[g]|=128<<8*(d%4);a[j-2]=k<<3;a[j-1]=k>>>29;return a},WordToHex:function(c){var g="",k="",j;for(j=0;3>=j;j++)k=c>>>8*j&255,k="0"+k.toString(16),g+=k.substr(k.length-2,2);return g},Utf8Encode:function(c){for(var c=c.replace(/\r\n/g,"\n"),g="",k=0;k<c.length;k++){var j=c.charCodeAt(k);
128>j?g+=String.fromCharCode(j):(127<j&&2048>j?g+=String.fromCharCode(j>>6|192):(g+=String.fromCharCode(j>>12|224),g+=String.fromCharCode(j>>6&63|128)),g+=String.fromCharCode(j&63|128))}return g},getHsh:function(c){var g=[],k,j,a,b,d,f,l,n,c=gx.MD5.Utf8Encode(c),g=gx.MD5.ConvertToWordArray(c);d=1732584193;f=4023233417;l=2562383102;n=271733878;for(c=0;c<g.length;c+=16)k=d,j=f,a=l,b=n,d=gx.MD5.FF(d,f,l,n,g[c+0],7,3614090360),n=gx.MD5.FF(n,d,f,l,g[c+1],12,3905402710),l=gx.MD5.FF(l,n,d,f,g[c+2],17,606105819),
f=gx.MD5.FF(f,l,n,d,g[c+3],22,3250441966),d=gx.MD5.FF(d,f,l,n,g[c+4],7,4118548399),n=gx.MD5.FF(n,d,f,l,g[c+5],12,1200080426),l=gx.MD5.FF(l,n,d,f,g[c+6],17,2821735955),f=gx.MD5.FF(f,l,n,d,g[c+7],22,4249261313),d=gx.MD5.FF(d,f,l,n,g[c+8],7,1770035416),n=gx.MD5.FF(n,d,f,l,g[c+9],12,2336552879),l=gx.MD5.FF(l,n,d,f,g[c+10],17,4294925233),f=gx.MD5.FF(f,l,n,d,g[c+11],22,2304563134),d=gx.MD5.FF(d,f,l,n,g[c+12],7,1804603682),n=gx.MD5.FF(n,d,f,l,g[c+13],12,4254626195),l=gx.MD5.FF(l,n,d,f,g[c+14],17,2792965006),
f=gx.MD5.FF(f,l,n,d,g[c+15],22,1236535329),d=gx.MD5.GG(d,f,l,n,g[c+1],5,4129170786),n=gx.MD5.GG(n,d,f,l,g[c+6],9,3225465664),l=gx.MD5.GG(l,n,d,f,g[c+11],14,643717713),f=gx.MD5.GG(f,l,n,d,g[c+0],20,3921069994),d=gx.MD5.GG(d,f,l,n,g[c+5],5,3593408605),n=gx.MD5.GG(n,d,f,l,g[c+10],9,38016083),l=gx.MD5.GG(l,n,d,f,g[c+15],14,3634488961),f=gx.MD5.GG(f,l,n,d,g[c+4],20,3889429448),d=gx.MD5.GG(d,f,l,n,g[c+9],5,568446438),n=gx.MD5.GG(n,d,f,l,g[c+14],9,3275163606),l=gx.MD5.GG(l,n,d,f,g[c+3],14,4107603335),f=
gx.MD5.GG(f,l,n,d,g[c+8],20,1163531501),d=gx.MD5.GG(d,f,l,n,g[c+13],5,2850285829),n=gx.MD5.GG(n,d,f,l,g[c+2],9,4243563512),l=gx.MD5.GG(l,n,d,f,g[c+7],14,1735328473),f=gx.MD5.GG(f,l,n,d,g[c+12],20,2368359562),d=gx.MD5.HH(d,f,l,n,g[c+5],4,4294588738),n=gx.MD5.HH(n,d,f,l,g[c+8],11,2272392833),l=gx.MD5.HH(l,n,d,f,g[c+11],16,1839030562),f=gx.MD5.HH(f,l,n,d,g[c+14],23,4259657740),d=gx.MD5.HH(d,f,l,n,g[c+1],4,2763975236),n=gx.MD5.HH(n,d,f,l,g[c+4],11,1272893353),l=gx.MD5.HH(l,n,d,f,g[c+7],16,4139469664),
f=gx.MD5.HH(f,l,n,d,g[c+10],23,3200236656),d=gx.MD5.HH(d,f,l,n,g[c+13],4,681279174),n=gx.MD5.HH(n,d,f,l,g[c+0],11,3936430074),l=gx.MD5.HH(l,n,d,f,g[c+3],16,3572445317),f=gx.MD5.HH(f,l,n,d,g[c+6],23,76029189),d=gx.MD5.HH(d,f,l,n,g[c+9],4,3654602809),n=gx.MD5.HH(n,d,f,l,g[c+12],11,3873151461),l=gx.MD5.HH(l,n,d,f,g[c+15],16,530742520),f=gx.MD5.HH(f,l,n,d,g[c+2],23,3299628645),d=gx.MD5.II(d,f,l,n,g[c+0],6,4096336452),n=gx.MD5.II(n,d,f,l,g[c+7],10,1126891415),l=gx.MD5.II(l,n,d,f,g[c+14],15,2878612391),
f=gx.MD5.II(f,l,n,d,g[c+5],21,4237533241),d=gx.MD5.II(d,f,l,n,g[c+12],6,1700485571),n=gx.MD5.II(n,d,f,l,g[c+3],10,2399980690),l=gx.MD5.II(l,n,d,f,g[c+10],15,4293915773),f=gx.MD5.II(f,l,n,d,g[c+1],21,2240044497),d=gx.MD5.II(d,f,l,n,g[c+8],6,1873313359),n=gx.MD5.II(n,d,f,l,g[c+15],10,4264355552),l=gx.MD5.II(l,n,d,f,g[c+6],15,2734768916),f=gx.MD5.II(f,l,n,d,g[c+13],21,1309151649),d=gx.MD5.II(d,f,l,n,g[c+4],6,4149444226),n=gx.MD5.II(n,d,f,l,g[c+11],10,3174756917),l=gx.MD5.II(l,n,d,f,g[c+2],15,718787259),
f=gx.MD5.II(f,l,n,d,g[c+9],21,3951481745),d=gx.MD5.AddUnsigned(d,k),f=gx.MD5.AddUnsigned(f,j),l=gx.MD5.AddUnsigned(l,a),n=gx.MD5.AddUnsigned(n,b);return(gx.MD5.WordToHex(d)+gx.MD5.WordToHex(f)+gx.MD5.WordToHex(l)+gx.MD5.WordToHex(n)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(c){return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(c)))},encode:function(c){return this.encodeImpl(this.UTF8BytesFromString(c))},bytesFromUTF8Bytes:function(c){for(var g=[],k=0,j=c1=c2=0,a=c.length;k<a;)j=c[k],128>j?(g.push(j),k++):191<j&&224>j?(c2=c[k+1],g.push((j&31)<<6|c2&63),k+=2):(c2=c[k+1],c3=c[k+2],g.push((j&15)<<12|(c2&63)<<6|c3&63),k+=3);return g},UTF8BytesFromString:function(c){for(var c=c.replace(/\r\n/g,"\n"),g=[],k=c.length,j=
0;j<k;j++){var a=c.charCodeAt(j);128>a?g.push(a):(127<a&&2048>a?g.push(a>>6|192):(g.push(a>>12|224),g.push(a>>6&63|128)),g.push(a&63|128))}return g},bytesToString:function(c){for(var g=gx.util.browser.isChrome()?32765:5E4,k=[];c.length>=g;)k.push(eval("String.fromCharCode("+c.slice(0,g).join(",")+");")),c=c.slice(g);0!=c.length&&k.push(eval("String.fromCharCode("+c.join(",")+");"));return k.join("")},decodeImpl:function(c){for(var g=this.f64,k=[],j=0,c=c.replace(/\n|\r/g,""),c=c.replace(/=/g,""),
a=c.length;j<a;)k[k.length]=g[c.charAt(j)]<<2|g[c.charAt(j+1)]>>4,k[k.length]=(g[c.charAt(j+1)]&15)<<4|g[c.charAt(j+2)]>>2,k[k.length]=(g[c.charAt(j+2)]&3)<<6|g[c.charAt(j+3)],j+=4;2==c.length%4&&(k=k.slice(0,k.length-2));3==c.length%4&&(k=k.slice(0,k.length-1));return k},encodeImpl:function(c){var g=this.b64,k=[],j=0,a=c.length;1==a%3&&(c[c.length]=0,c[c.length]=0);2==a%3&&(c[c.length]=0);for(var b=c.length;j<b;)k[k.length]=g[c[j]>>2],k[k.length]=g[(c[j]&3)<<4|c[j+1]>>4],k[k.length]=g[(c[j+1]&15)<<
2|c[j+2]>>6],k[k.length]=g[c[j+2]&63],j+=3;1==a%3&&(k[k.length-1]=k[k.length-2]="=");2==a%3&&(k[k.length-1]="=");return k.join("")},_init:function(){for(var c=0;64>c;c++){var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c);this.b64[c]=g;this.f64[g]=c}}};
gx.webSocket=function(c){this.reconnect=!0;this.initialized=this.opened=!1;this.retryCount=0;this.maxRetries=c.maxRetries||3;this.retryDelay=c.retryDelay||1E4;this._init=function(c){if(!this.initialized&&"WebSocket"in window){c=c||{};c.clientId=c.clientId||"";c.basePath=c.basePath||"";this.namespace="."+c.namespace;try{var a=c.wsProtocol+c.host+c.basePath+c.resourceUrl+c.clientId;this.create(c.wsURL||a);this.initialized=!0;this.wsOpts=c}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","Could not initialize WebSocket")}}};
var g=this,k=function(){this.initialized=this.opened=!1;if(this.reconnect&&(-1==this.maxRetries||this.retryCount<this.maxRetries))this.retryCount++,gx.lang.doCallTimeout(this._init,this,[this.wsOpts],1E4)};this.create=function(c){try{this.ws=new WebSocket(c),this.ws.onopen=function(){g.opened=!0;g.retryCount=0;gx.fx.obs.notify("gx.ws.onOpen"+g.namespace,[])},this.ws.onerror=function(a){gx.dbg.logDebug("gx.webSocket - Error: "+a.data);gx.fx.obs.notify("gx.ws.onError"+g.namespace,[a.data])},this.ws.onmessage=
function(a){gx.dbg.logDebug("gx.webSocket - New Message: "+a.data);gx.fx.obs.notify("gx.ws.onMessage"+g.namespace,[a.data])},this.ws.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");g.opened&&(g.retryCount=0,k.apply(g))}}catch(a){gx.lang.doCallTimeout(gx.fx.obs.notify,gx.fx.obs,["gx.ws.onCtxError"+g.namespace,[a]],100)}};window.onbeforeunload=function(){g.opened&&g.ws.close()};this.close=function(){g.opened&&(g.opened=!1,g.ws.close())};this.send=function(c){this.ws?this.ws.send(c):gx.dbg.logDebug("gx.webSocket - ws is not initialized")};
this._init(c)};
gx.util.alert=function(c){var g=!1,k=!1,j=function(b){var b=b||{},d=b.message||"",f=b.cssClass||"",j=b.cssDisBtnClass||"",n=b.dataDisAtt,b=b.dismissmitAt;if(!g||0==c("#gx-main-error").length)c(gx.dom.form()).prepend("<div id='gx-main-error' style='display:none;'></div>"),g=!0;a();var t=c("#gx-main-error");t.html('<div class="'+f+'"><button type="button" class="'+j+'" data-dismiss="'+n+'" onclick=\'$(this).parent().hide();\' aria-hidden="true">&times;</button><span>'+d+"</span></div>");t.slideDown();
k=!0;b&&window.setTimeout(function(){a()},b)},a=function(){k&&(c("#gx-main-error").fadeOut(500,function(){c(this).empty()}),k=!1)};return{showMessage:function(a,d){c("#gx-main-error");j(c.extend({message:a,cssClass:"alert alert-warning alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},d))},showError:function(a,d){c("#gx-main-error");j(c.extend({message:a,cssClass:"alert alert-danger alert-dismissable gx-ajax-error",cssDisBtnClass:"close",dataDisAtt:"alert"},d))},hide:a}}(gx.$);
gx.geolocation=function(c){return{attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(g){g.attachedCtrl=c("#"+g.id.replace(/_geoLocMe$/,""))[0];attachedCtrls.push(g);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(c){var k=attachedCtrls.shift(),j=gx.fn.validStruct(gx.O.getValidStructId(k.attachedCtrl.id)),
c=c.coords.latitude+","+c.coords.longitude;gx.evt.setEventRow(gx.pO,k.attachedCtrl);j.v2v&&(j.v2v(c),j.v2c());j.gxgrid&&j.gxgrid.updateControlValue(j,!0)},handle_errors:function(c){attachedCtrls.shift();switch(c.code){case c.PERMISSION_DENIED:c="user did not share geolocation data";break;case c.POSITION_UNAVAILABLE:c="could not detect current position";break;case c.TIMEOUT:c="retrieving position timed out";break;default:c="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(c);gx.pO.refreshOutputs([])}}}(gx.$);
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(c,g){var k=c.slice(0,g);return c=c.slice(g).concat(k)},xtime:function(c){c<<=1;return c&256?c^283:c},mult_GF256:function(c,g){var k,j=0;for(k=1;256>k;k*=2,g=this.xtime(g))c&k&&(j^=g);return j},byteSub:function(c,g){var k;k="encrypt"==g?this.SBox:this.SBoxInverse;for(var j=0;4>j;j++)for(var a=0;a<this.Nb;a++)c[j][a]=k[c[j][a]]},shiftRow:function(c,g){for(var k=
1;4>k;k++)c[k]="encrypt"==g?this.cyclicShiftLeft(c[k],this.shiftOffsets[this.Nb][k]):this.cyclicShiftLeft(c[k],this.Nb-this.shiftOffsets[this.Nb][k])},mixColumn:function(c,g){for(var k=[],j=0;j<this.Nb;j++){for(var a=0;4>a;a++)k[a]="encrypt"==g?this.mult_GF256(c[a][j],2)^this.mult_GF256(c[(a+1)%4][j],3)^c[(a+2)%4][j]^c[(a+3)%4][j]:this.mult_GF256(c[a][j],14)^this.mult_GF256(c[(a+1)%4][j],11)^this.mult_GF256(c[(a+2)%4][j],13)^this.mult_GF256(c[(a+3)%4][j],9);for(a=0;4>a;a++)c[a][j]=k[a]}},addRoundKey:function(c,
g){for(var k=0;k<this.Nb;k++)c[0][k]^=g[k]&255,c[1][k]^=g[k]>>8&255,c[2][k]^=g[k]>>16&255,c[3][k]^=g[k]>>24&255},keyExpansion:function(c){var g=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var k=0;k<this.Nk;k++)g[k]=c[4*k]|c[4*k+1]<<8|c[4*k+2]<<16|c[4*k+3]<<24;for(k=this.Nk;k<this.Nb*(this.Nr+1);k++)c=g[k-1],0==k%this.Nk?c=(this.SBox[c>>8&255]|this.SBox[c>>16&255]<<8|this.SBox[c>>24&255]<<16|this.SBox[c&255]<<24)^this.Rcon[Math.floor(k/
this.Nk)-1]:6<this.Nk&&4==k%this.Nk&&(c=this.SBox[c>>24&255]<<24|this.SBox[c>>16&255]<<16|this.SBox[c>>8&255]<<8|this.SBox[c&255]),g[k]=g[k-this.Nk]^c;return g},Round:function(c,g){this.byteSub(c,"encrypt");this.shiftRow(c,"encrypt");this.mixColumn(c,"encrypt");this.addRoundKey(c,g)},InverseRound:function(c,g){this.addRoundKey(c,g);this.mixColumn(c,"decrypt");this.shiftRow(c,"decrypt");this.byteSub(c,"decrypt")},FinalRound:function(c,g){this.byteSub(c,"encrypt");this.shiftRow(c,"encrypt");this.addRoundKey(c,
g)},InverseFinalRound:function(c,g){this.addRoundKey(c,g);this.shiftRow(c,"decrypt");this.byteSub(c,"decrypt")},encrypt:function(c,g){var k;if(c&&8*c.length==this.blockSizeInBits&&g){c=this.packBytes(c);this.addRoundKey(c,g);for(k=1;k<this.Nr;k++)this.Round(c,g.slice(this.Nb*k,this.Nb*(k+1)));this.FinalRound(c,g.slice(this.Nb*this.Nr));return this.unpackBytes(c)}},decrypt:function(c,g){var k;if(c&&8*c.length==this.blockSizeInBits&&g){c=this.packBytes(c);this.InverseFinalRound(c,g.slice(this.Nb*this.Nr));
for(k=this.Nr-1;0<k;k--)this.InverseRound(c,g.slice(this.Nb*k,this.Nb*(k+1)));this.addRoundKey(c,g);return this.unpackBytes(c)}},byteArrayToString:function(c){for(var g="",k=c.length,j=0;j<k;j++)0!=c[j]&&(g+=String.fromCharCode(c[j]));return g},stringToByteArray:function(c){for(var g=[],k=c.length,j=0;j<k;j++)g[g.length]=c.charCodeAt();return g},byteArrayToHex:function(c){var g="";if(c){for(var k=c.length,j=0;j<k;j++)g+=(16>c[j]?"0":"")+c[j].toString(16);return g}},hexToByteArray:function(c){var g=
[];if(!(c.length%2)){if(0==c.indexOf("0x")||0==c.indexOf("0X"))c=c.substring(2);for(var k=c.length,j=0;j<k;j+=2)g[Math.floor(j/2)]=parseInt(c.slice(j,j+2),16);return g}},packBytes:function(c){var g=[];if(c&&!(c.length%4)){g[0]=[];g[1]=[];g[2]=[];g[3]=[];for(var k=c.length,j=0;j<k;j+=4)g[0][j/4]=c[j],g[1][j/4]=c[j+1],g[2][j/4]=c[j+2],g[3][j/4]=c[j+3];return g}},unpackBytes:function(c){for(var g=[],k=c[0].length,j=0;j<k;j++)g[g.length]=c[0][j],g[g.length]=c[1][j],g[g.length]=c[2][j],g[g.length]=c[3][j];
return g},formatPlaintext:function(c){var g=this.blockSizeInBits/8,k;if("string"==typeof c||c.indexOf){var c=c.split(""),j=c.length;for(k=0;k<j;k++)c[k]=c[k].charCodeAt(0)&255}for(k=g-c.length%g;0<k&&k<g;k--)c[c.length]=0;return c},rijndaelEncrypt:function(c,g){var k,j,a,b=this.blockSizeInBits/8,d;if(c&&g&&8*g.length==this.keySizeInBits){mode="ECB";d=[];c=this.formatPlaintext(c);k=this.keyExpansion(g);for(var f=0;f<c.length/b;f++){a=c.slice(f*b,(f+1)*b);if("CBC"==mode)for(j=0;j<b;j++)a[j]^=d[f*b+
j];d=d.concat(this.encrypt(a,k))}return d}},rijndaelDecrypt:function(c,g,k){var j=this.blockSizeInBits/8,a=[],b,d;if(c&&(g&&"string"!=typeof c)&&8*g.length==this.keySizeInBits){k||(k="ECB");g=this.keyExpansion(g);for(d=c.length/j-1;0<d;d--)if(b=this.decrypt(c.slice(d*j,(d+1)*j),g),"CBC"==k)for(var f=0;f<j;f++)a[(d-1)*j+f]=b[f]^c[(d-1)*j+f];else a=b.concat(a);"ECB"==k&&(a=this.decrypt(c.slice(0,j),g).concat(a));return a}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/
32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.ui=function(c){return{grid:function(){this.gridContainer=null;this.firstTime=!0;this.loadingCollection=this.autoRefreshing=!1;this.properties=[];this.setContainerDelayed=function(c){this.gridContainer=c;this.DesignContainerName=this.ContainerName=gx.dom.id(c);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(c,g,a,b){this.clearFunctions();this.refreshDynProperties();this.properties=
[];for(var d=0;d<this.rows.length;d++){this.properties[d]=[];for(var f=this.rows[d],l=0;l<this.columns.length;l++){var n=this.columns[l],t=f.gxProps[n.index],o=n.gxControl;o.grid=this.ownerGrid;o.row=f;o.gridId=this.gxId;o.gridRow=f.gxId;a?o.value=t[0]:o.setProperties.apply(o,t);this.setRenderProperties(f.gxRenderProps[l],o);!o.enabled&&o.type<=gx.html.controls.types.checkBox&&(""!==o.cssClass&&0!==o.cssClass.indexOf("Readonly"))&&(o.cssClass="Readonly"+o.cssClass);this.properties[d][l]=gx.lang.clone(o);
this.addC2V(n,this.properties[d][l])}}this.firstTime=c;this.autoRefreshing=g?!0:!1;this.loadingCollection=a?!0:!1;this.show&&(this.setC2ShowFunction(function(a){a.show();b()}),this.autoRefreshing&&(this.show(),b()));this.autoRefreshing=!1};this.addC2V=function(c,g){this.addC2VFunction(function(a){if(""!==c.gxAttName){var b=a.ParentObject.getValidStruct(c.gxId);b&&(a.ParentObject[b.gxvar]=g.value);gx.fn.setHidden(g.id,g.value)}})};this.setRenderProperties=function(c,g){if(c)for(var a in c)g[a]=c[a]};
this.selectRow=function(c){if(c=this.rows[c])this.instanciateSelectionVars(c.gxId),this.instanciateSelectedRow(c)};this.getEventRow=function(){return!gx.lang.emptyObject(this.GridRow)?this.GridRow:"0001"};this.executeEvent=function(c,g){if(c<this.columns.length&&g<this.rows.length){var a=this.properties[g][c],b=gx.html.controls.eventJSCode(a.jsScrCode,a.eventName,a.jsDynCode,a.grid,a.row);if(""!==b)gx.lang.emptyObject(a.usrOnclick)||(b="if("+a.usrOnclick+") { "+b+" }"),a=new Function(b),"function"==
typeof a&&a();else if(a.clickEvent){var b=this.parentGxObject,d=a.row.gxId;this.ownerGrid.instanciateRow(d);b[a.clickEvent].call(b,d)}}};this.executeIsValid=function(c,g){if(c<this.columns.length&&g<this.rows.length){var a=this.parentGxObject,b=this.properties[g][c],d=b.vStruct||a.GXValidFnc[b.column.gxId],b=b.row.gxId;d&&d.isvalid&&(this.ownerGrid.instanciateRow(b),a[d.isvalid].call(a))}};this.addEventHandler=function(c,g){this[c]=function(a){var b=this.isServerEvent(c);b&&a&&gx.fx.obs.addObserver("gx.onafterevent",
this,a,{single:!0});this.eventHandler(this.GridId,gx.fn.currentGridRow(this.GridId),g);!b&&a&&a.call(this)}.closure(this)};var g={};this.requestSuggest=function(k,j,a){var b=c.Deferred();if(k<this.columns.length&&j<this.rows.length){var d=this.parentGxObject,j=this.properties[j][k],k=j.vStruct||d.GXValidFnc[j.column.gxId],j=j.row.gxId,f=g[j+"_"+k.id];!f&&(k&&k.gxsgprm)&&(this.ownerGrid.instanciateRow(j),f=new gx.fx.suggestProvider(d,k.gxsgprm[1],null,k.gxsgprm[0]),g[j+"_"+k.id]=f);f?(gx.fx.updateSuggestParms(k.gxsgprm[2]),
f.requestSuggestions([],function(){b.resolve(f.values)},function(){b.reject()},a)):b.reject()}else b.reject();return b.promise()};this.executeValidate=function(c,g){if(c<this.columns.length&&g<this.rows.length){var a=this.parentGxObject,b=this.properties[g][c],d=b.vStruct||a.GXValidFnc[b.column.gxId],b=b.row.gxId;d&&d.fnc&&(this.ownerGrid.instanciateRow(b),d.fnc.call(a))}}}}}(gx.$);gx._init();window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));
!window.$.fn||!window.$.fn.jquery?gx.dbg.write("Warning: $ is not a jQuery object instance"):gx.dbg.write("global $ is jquery"+window.$.fn.jquery);
window.Modernizr=function(c,g,k){function j(a,b){for(var c in a){var d=a[c];if(!~(""+d).indexOf("-")&&f[d]!==k)return b=="pfx"?d:true}return false}function a(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+l.join(d+" ")+d).split(" ");if(typeof b==="string"||typeof b==="undefined")return j(f,b);f=(a+" "+n.join(d+" ")+d).split(" ");a:{var a=f,g;for(g in a){d=b[a[g]];if(d!==k){if(c===false){b=a[g];break a}if(typeof d==="function"){b=d.bind(c||b);break a}b=d;break a}}b=false}return b}var b=
{},d=g.documentElement,g=g.createElement("modernizr"),f=g.style,l=["Webkit","Moz","O","ms"],n=["webkit","moz","o","ms"],g={},t=[],o=t.slice,p,m={}.hasOwnProperty,s;s=typeof m!=="undefined"&&typeof m.call!=="undefined"?function(a,b){return m.call(a,b)}:function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};if(!Function.prototype.bind)Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var c=o.call(arguments,1),d=function(){if(this instanceof
d){var f=function(){};f.prototype=b.prototype;var f=new f,g=b.apply(f,c.concat(o.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(o.call(arguments)))};return d};g.flexbox=function(){return a("flexWrap")};g.history=function(){return!(!c.history||!history.pushState)};g.csstransitions=function(){return a("transition")};for(var q in g)if(s(g,q)){p=q.toLowerCase();b[p]=g[q]();t.push((b[p]?"":"no-")+p)}b.addTest=function(a,c){if(typeof a=="object")for(var f in a)s(a,f)&&b.addTest(f,
a[f]);else{a=a.toLowerCase();if(b[a]!==k)return b;c=typeof c=="function"?c():c;if(typeof enableClasses!=="undefined"&&enableClasses)d.className=d.className+(" "+(c?"":"no-")+a);b[a]=c}return b};f.cssText="";g=null;b._version="2.8.3";b._domPrefixes=n;b._cssomPrefixes=l;b.testProp=function(a){return j([a])};b.testAllProps=a;return b}(this,this.document);
gx.spa=function(c){var g=/<head[^>]*>([\s\S]*?)<\/head>/i,k=/(<body[^>]*>[\s\S]*?<\/body>)/i,j=/<title[^>]*>([\s\S]*?)<\/title>/i,a=/#.*/,b=/#/,d=false,f=false,l=window.location.href,n=true,t={},o,p;"state"in window.history&&(n=false);gx.fx.obs.addObserver("gx.onload",this,function(){if(gx.pO.fullAjax)gx.cache.exceptionsRegEx=/messages\..+\.js/},{single:true});var m=function(){!d&&!f&&this.notify("onnavigatecomplete")};return{timeout:5E3,setTimeout:function(a){this.timeout=a},isSameApp:function(a,
b){var c=a.port===b.port,c=(c=c||a.port===""&&a.protocol==="http:"&&b.port==="80")||a.port===""&&a.protocol==="https:"&&b.port==="443";return a.protocol===b.protocol&&a.hostname===b.hostname&&c},handleClick:function(d){var f=this.getTarget(d),g,j;if(f&&f.tagName.toUpperCase()==="A"&&!(f.getAttribute("href")===null||f.getAttribute("href")===void 0))if(!f.target||!(f.target=="_blank"||f.target=="_parent"&&window.parent!=window||f.target=="_top"&&window.top!=window||f.target.substr(0,1)!="_"&&window.name!=
f.target))if(!(d.which>1||d.metaKey||d.ctrlKey)){j=this.parseUrl(f.href);if(this.isSameApp(location,j)){var k=j.pathname.charAt(0)=="/"?j.pathname:"/"+j.pathname;if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))===k.substring(0,k.lastIndexOf("/"))&&!(j.href.search(b)>=0&&j.href.replace(a,"")===location.href.replace(a,""))&&f.getAttribute("href")!==""&&f.href.indexOf("javascript:")!==0)if(this.ignoreClick)this.ignoreClick=false;else{j=c(f);for(g in t)if(t.hasOwnProperty(g)&&j.is(g))return;
this.navigate({url:f.href,push:true,scrollTo:true,direction:"forward"});d.preventDefault()}}}},redirect:function(a,b){delete gx.referrer;var b=b===void 0||b,c=this.parseUrl(a),d=c.pathname.charAt(0)=="/"?c.pathname:"/"+c.pathname;if(this.isSameApp(location,c))if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==d.substring(0,d.lastIndexOf("/")))window.location=a;else{gx.referrer=location.href;this.navigate({url:a,push:b,scrollTo:true,direction:"forward"})}else window.location=a},
setLocation:function(a){if(gx.util.browser.isFirefox())setTimeout(function(){d=false;window.location.href=a},100);else{d=false;window.location=a}},canNavigate:function(){return!d&&!f},isNavigating:function(){return!this.canNavigate()},navigate:function(a){var b,c,f=a.url;if(this.canNavigate()){d=true;this.notify("onbeforenavigate",[f]);if((c=this.request)&&c.readyState<4){c.onreadystatechange=gx.emptyFn;gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+c.readyState);c.abort()}this.request=
c=gx.http.doCall({method:"GET",url:f,handler:function(g,j,k){var g=k.getResponseHeader("X-SPA-REDIRECT-URL"),l=k.getResponseHeader("X-GXOBJECT");b&&clearTimeout(b);if(k.status==530)this.setLocation(f);else if(g){d=false;setTimeout(gx.spa.redirect.closure(gx.spa,[g]),100)}else{if(a.push&&c.readyState>0&&l){this.updateState();this.state=this.createState(a);window.history.pushState(null,"",f)}this.processResponse.call(this,j,k,a)}},beforeSend:function(a){this.notify("onbeforesend",[this.createEvent(a,
f),"X-SPA-REQUEST","X-SPA-MP"]);b=setTimeout(this.timeoutHandler.closure(this,[a,f]),this.timeout);a.setRequestHeader("X-SPA-REQUEST","1")},error:function(a){a=this.createEvent(a,f);a.cancel=true;this.notify("onerror",[a]);a.cancel&&this.setLocation(f)},ajaxHeader:false,avoidCache:false,handleAllStatusCodes:true,obj:this});this.notify("onnavigatestart",[f])}else this.setLocation(f)},processResponse:function(a,b,c){var d;try{d=c.url;var g=this.parseUrl(d).hash,j=c.direction,k=b.getResponseHeader("X-GXOBJECT"),
l=b.getResponseHeader("X-SPA-RETURN"),m=b.getResponseHeader("X-SPA-RETURN-MD"),n=this.createEvent(b,d),o=gx.pO.MasterPage,p=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",t=b.getResponseHeader("X-SPA-MP")||"",B=!(p===""||p.toLowerCase()!=t.toLowerCase()),y=this.getContentPlaceholder();if(l!==null)gx.fn.closeWindowServerScript(l,m,true);else if(k){this.notify("onbeforeprocessresponse",[n,a,k,p,t,B]);var D=this.extractContents(b,!B),K=B?y.firstChild:document.body,M=D.body;if(D.body){this.state=this.createState(c);
c.push&&window.history.replaceState(this.state,"",d);if(D.title)document.title=D.title;this.notify("onbeforecontentreplace",[b,d,D]);gx.cache.removeRemoteFile(gx.getThemeElement().href);gx.dom.replaceWithFx(K,M,{domRemove:false,domAdd:B,enteringClass:j=="forward"?"entering":"leaving",leavingClass:j=="forward"?"leaving":"entering",enterDurationClass:j=="forward"?"enter-fx-duration":"leave-fx-duration",leaveDurationClass:j=="forward"?"leave-fx-duration":"enter-fx-duration",transitionTimeout:800,transitionEndCallback:function(){M=
this.replaceContentCallback(b,d,g,a,y,D,K,M,c,k,o,p,t,B);B||gx.html.processCode(D.head.innerHTML+D.body.innerHTML,false,this.processCodeCallback.closure(this,[b,d,g,a,y,D,K,M,c,k,o,p,t,B]),null,null,false,true);f=false;this.notify("ontransitionend",[n,o,p,t,B]);this.recoverScrollPosition(c);return M}.closure(this),beforeTransitionStart:function(j){f=true;if(B){gx.html.processCode(a,false,function(){j&&j();this.processCodeCallback(b,d,g,a,y,D,K,M,c,k,o,p,t,B)}.closure(this),null,null,false);return true}}.closure(this)})}else this.setLocation(d)}else this.setLocation(d)}catch(L){gx.dbg.logEx(L,
"gxspa.js","processResponse");this.setLocation(d)}},replaceContentCallback:function(a,b,d,f,g,j,k,l,m,n,o,p,t,B){if(B){if(k.parentNode){this.dettachContent(k);k.parentNode.removeChild(k)}}else{if(gx.util.browser.isWebkit()||gx.util.browser.isFirefox()){this.dettachContent(document.body);c(document.body).remove();var y=document.createElement("body"),a=c(l).prop("attributes");c.each(a,function(){c(y).attr(this.name,this.value)});document.documentElement.appendChild(y);y.innerHTML=l.innerHTML;l=y}else{document.body=
l;l=document.body}document.head=j.head}return l},processCodeCallback:function(a,b,c,f,g,j,k,l,m,n,o,p,t,B){a=this.createEvent(a,b);try{this.notify("oncontentreplace",[a,f,j,n,o,p,t,B])}catch(y){gx.dbg.logEx(y,"gxspa.js","processCodeCallback");this.setLocation(b)}f=true;if(m.scrollTo){window.scrollTo(0,0);f=false}m.push&&window._gaq&&_gaq.push(["_trackPageview"]);m.push&&window.ga&&window.ga("send","pageview",location.pathname);if(c!==""){j=this.parseUrl(b);j.hash=c;window.history.replaceState(this.state,
"",j.href);if(c=gx.dom.el(j.hash)){c.scrollIntoView(true);f=false}}d=false;this.notify("onnavigate",[b]);f&&this.recoverScrollPosition(m)},timeoutHandler:function(a,b){var c=this.createEvent(a,b);c.cancel=true;this.notify("ontimeout",[c]);if(c.cancel){a.abort();gx.dbg.logMsg("Request cancelled - timeout expired: "+a.readyState);this.setLocation(b)}},getContentPlaceholder:function(){return gx.dom.byClass("gx-content-placeholder")[0]},extractContents:function(a,b){var d=document.createElement("div"),
f={},l,m,n;if(b){d=document.createElement("iframe");d.src="about:blank";d.style.display="none";document.body.appendChild(d);var o=a.responseText.match(g);o.length>1&&(l=o[1]);o=a.responseText.match(k);o.length>0&&(m=o[0]);o=a.responseText.match(j);if(o.length>1)f.title=o[1];d.contentDocument&&d.contentDocument.body==null&&d.contentDocument.write("<body></body>");d.contentDocument.body.outerHTML=m;n=d.contentDocument.head;n.innerHTML=l;c("head script").each(function(a,b){c(n).find("script").each(function(a,
d){b.getAttribute("data-gx-external-script")===null?b.src==d.src&&n.removeChild(d):c(b).remove()})});f.body=d.contentDocument.body;f.head=n}else{gx.html.setInnerHtml(d,a.responseText,false,false,false);l=gx.dom.byClass("gx-content-placeholder","div",d);if(l.length===0)return f;f.body=l[0].firstChild;l=gx.dom.byTag("title",d);if(l.length>0)f.title=l[0].innerText||l[0].textContent}return f},handlePopState:function(a){var a=a.state,b=this.getContentPlaceholder();if(a&&a.source=="gx-spa"&&!(n&&l==a.url)){this.navigate({id:a.id,
url:a.url,push:false,scrollPosition:a.scrollPosition,direction:this.state.id<a.id?"forward":"back"});b&&void 0}},parseUrl:function(a){var b=document.createElement("a");b.href=a;return b},createEvent:function(a,b){return{req:a,url:b,cancel:false}},addIgnoredSelector:function(a){t[a]=true},removeIgnoredSelector:function(a){delete t[a]},recoverScrollPosition:function(a){var b=a.scrollPosition;this.canNavigate()&&(!a.scrollTo&&b)&&window.scrollTo(b.x,b.y)},dettachContent:function(a){var b=gx.dom.getActiveElement();
b&&c.contains(a,b)&&gx.dom.purgeElement(b)},updateState:function(){var a=this.state;a.url=location.href;a.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(a,"",a.url)},createState:function(a){a=a||{};return{id:a.id||(new Date).getTime(),source:"gx-spa",url:a.url}},getTarget:function(a){return a.target&&a.target.tagName=="A"?a.target:gx.dom.findParentByTagName(a.target,"A")},applyConfig:function(a){if(a&&a.listeners)for(var b in a.listeners){var c=a.listeners[b];typeof c==
"function"&&this.addObserver(b,a.listeners.scope||this,c)}},setBodyClass:function(){var a="Form",b=document.body;b.className&&(a=b.className.split(" ")[0]);gx.dom.hasClass(b,a+"-fx")||gx.dom.addClass(b,a+"-fx")},isSupported:function(){return gx.pO.fullAjax&&Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(a){if(this.isSupported()&&!this.started){this.applyConfig(a);o=this.handleClick.closure(this);p=this.handlePopState.closure(this);document.addEventListener("click",
o,false);window.addEventListener("popstate",p,false);this.state=this.createState({url:location.href});window.history.replaceState(this.state,document.title);this.setBodyClass();this.started=true;this.addObserver("onnavigate",this,m);this.addObserver("ontransitionend",this,m)}},stop:function(){if(this.started){document.removeEventListener("click",o,false);window.removeEventListener("popstate",p,false);this.started=false}}}}(gx.$);gx.lang.apply(gx.spa,new gx.util.Observable);
gx.livePrev=function(){gx.ajax.getPostInfo("",false);postInfo=gx.ajax.getPostInfo("",false);return{}}(gx.$);
gx.livePrevWS={FIRST_PORT:30100,LAST_PORT:30120,MAX_RETRY:3,retry_count:0,onError:function(){if(gx.livePrevWS.IPNamesIdx<gx.livePrevWS.IPNames.length-1){gx.livePrevWS.IPNamesIdx=gx.livePrevWS.IPNamesIdx+1;gx.livePrevWS.host=gx.livePrevWS.IPNames[gx.livePrevWS.IPNamesIdx];gx.livePrev.port=gx.livePrevWS.FIRST_PORT;gx.livePrevWS.Connect()}else if(gx.livePrev.port<gx.livePrevWS.LAST_PORT){gx.livePrevWS.IPNamesIdx=0;gx.livePrev.port=gx.livePrev.port+1;gx.livePrevWS.Connect()}else gx.util.alert.showMessage("Can not Connect to LivePreview",
{dismissmitAt:5E3})},onMessage:function(c){var g=function(a){var c=$.map(document.styleSheets,function(c){return c.href==a?c:null});return c.length>0?c[0]:void 0},k=function(a,c,f){return f((a||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase(),(c||"").replace(/(\r\n|\r|\n| )/gm,"").toLowerCase())},j=function(a,c,f){var g=a.cssRules,j=g.length,t=false,o=false;$.each(g,function(f,g){if(g&&g.selectorText&&k(g.selectorText,c.replace(":","::"),function(a,b){return a==b})){a.deleteRule(f);j=f;t=true}});
t||$.each(g,function(g,l){if(l&&l.selectorText&&k(l.selectorText,c.replace(":","::")+",",function(a,b){return a.indexOf(b)==0})){a.deleteRule(g);j=g;a.insertRule(l.selectorText+f.replace(/.*{/,"{"),j);o=true}});o||a.insertRule(f,j)},a=function(a){var c=gx.getThemeElement();if(c=g(c.href))for(var f=a.indexOf("@media",0)==0,l=a.split(/{|}/),n=0;n<l.length-1;n=n+2){var t=l[n].replace(/(\r\n|\r|\n| *$)/gm,"");gx.lang.emptyObject(t)||(f?$.each(c.cssRules,function(a,b){if(f&&!b.selectorText){var c=b.cssText.split(/{/)[0];
if(k(c.replace(/ all and/gm,""),t)){t=l[n+1].replace(/(\r\n|\r|\n| )/gm,"");j(b,t,t+" {"+l[n+2]+"}")}}}):j(c,t,t+" {"+l[n+1]+"}"))}},c=gx.json.evalJSON(c);if(c.Type==="KBOK")gx.util.alert.showMessage("Connected to LivePreview at "+gx.livePrevWS.host+" on port "+gx.livePrev.port,{dismissmitAt:2E3});else if(c.Type==="KBDoesNotMatchGUID")gx.livePrevWS.onError();else c.Type==="ThemeStyleChanged"&&a(c.Data)},onOpen:function(){gx.livePrevWS.timeOutHdlr&&clearTimeout(gx.livePrevWS.timeOutHdlr);gx.livePrevWS.retry_count=
0;gx.livePrevWS.SocketConnect()},onTimeout:function(){gx.livePrevWS.webSocket.close();gx.livePrevWS.onError()},SocketConnect:function(){objData={KBUUID:gx.livePrevWS.KBUUID,Language:gx.languageCode,KBName:"TestWS",DeviceName:"Web Simulator",DeviceId:gx.livePrevWS.clientGUID,DeviceType:0,DeviceOSName:"Web",Theme:gx.theme,Type:"Connect",Data:{Name:gx.livePrevWS.KBName,UUID:gx.livePrevWS.KBUUID}};gx.livePrevWS.webSocket.send(gx.json.serializeJson(objData))},Connect:function(){var c={};gx.livePrev.port=
gx.livePrev.port||gx.livePrevWS.FIRST_PORT;c.port=gx.livePrev.port;c.wsProtocol=location.protocol==="https:"?"wss://":"ws://";c.host=gx.livePrevWS.host+":"+c.port;c.resourceUrl="/live/";c.namespace="livepreview";c.maxRetries=10;c.retryDelay=50;gx.livePrevWS.webSocket&&gx.livePrevWS.webSocket.close();gx.livePrevWS.webSocket=new gx.webSocket(c);gx.livePrevWS.timeOutHdlr=setTimeout(gx.livePrevWS.onTimeout,3E3)},_init:function(){if(!gx.lang.emptyObject(gx.livePreviewUri)){gx.fx.obs.addObserver("gx.ws.onOpen.livepreview",
gx.livePrevWS,gx.livePrevWS.onOpen,{single:false});gx.fx.obs.addObserver("gx.ws.onMessage.livepreview",gx.livePrevWS,gx.livePrevWS.onMessage,{single:false});gx.fx.obs.addObserver("gx.ws.onError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:false});gx.fx.obs.addObserver("gx.ws.onCtxError.livepreview",gx.livePrevWS,gx.livePrevWS.onError,{single:false});if(!gx.livePrevWS.clientGUID){var c=gx.livePrevWS,g=gx.http.getCookie("GXClientID"),g=g||gx.guid.generate();gx.http.setCookie("GXClientID",
g,1);c.clientGUID=g}var c="",g=[],k=gx.livePreviewUri.split("?");if(k.length>0){k=k[1];k=k.split(":");if(k.length>2){c=k[1];g=k[2].substring(1,k[2].length-1).split(",");k=k[0]}}gx.livePrevWS.IPNamesIdx=0;gx.livePrevWS.IPNames=g;gx.livePrevWS.KBName=c;gx.livePrevWS.KBUUID=k;gx.livePrevWS.host=gx.livePrevWS.IPNames[0];gx.http.loadScript(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"html2canvas.js?"+gx.gxBuild,false),gx.livePrevWS.Connect)}}};
gx.nav=function(){var c=function(){var a={top:true,right:true,bottom:true,left:true};return function(b){return!!a[b.toLowerCase()]}}(),g=function(a){var b=a;gx.gen.isDotNet()&&(b=a.replace(/\.aspx$/,""));gx.gen.isJava()&&(gx.pO.PackageName&&gx.text.startsWith(a,gx.pO.PackageName))&&(b=a.substring(gx.pO.PackageName.length+1));return b},k=function(a){var a=a.split("?"),b,c,f;if(a.length>0){b=a.length==2?a[1].split(","):[];c=0;for(f=b.length;c<f;c++)b[c]=decodeURIComponent(b[c]);return{obj:a[0],args:b}}return false},
j={};return{setCallTarget:function(a,b){j[a.toLowerCase()]=b.toLowerCase()},willRedirect:function(a){return gx.pO&&!gx.pO.fullAjax?true:!c(j[g(a).toLowerCase()]||"")},willRedirectByUrl:function(a){a=k(a);return this.willRedirect(a.obj,a.args)},call:function(a,b,d){var f=g(a),k=gx.pO.MasterPage,d=d||j[f.toLowerCase()]||"";delete j[f.toLowerCase()];gx.pO&&!gx.pO.fullAjax?gx.http.redirect(gx.http.formatLink(a,b),false,false,gx.pO):c(d)?k&&k.createObjectInTarget(d,f,b):gx.http.redirect(gx.http.formatLink(a,
b),false,false,gx.pO)},callUrl:function(a,b){var c=k(a);c&&this.call(c.obj,c.args,b)},callFromServerRedirect:function(a,b){this.callUrl(a,b)}}}(gx.$);
gx.ui.controls=function(c){var g=function(){var c=["render","selectTabPageByIndex","hideTabPageByIndex","showTabPageByIndex","getTabPageIndexByControlName","getTabPageControlNameByIndex"];return{show:function(){for(var g=this.ActivePage,a=0;a<c.length;a++)this[c[a]]||console.error("Missing required method",c[a],this);if(this.IsPostBack)this.update&&this.update();else{this.HistoryManagement&&HistoryManager.Initialize(this);this.beforeRender&&this.beforeRender();this.render();this.ActivePageControlName&&
(g=parseInt(this.getTabPageIndexByControlName(this.ActivePageControlName),10));g||(g=1);this.selectTabPageByIndex(g);this.tabPageSelected(g,true,false);this.afterRender&&this.afterRender()}this.allways&&this.allways()},destroy:function(){HistoryManager.RemoveListener(this)},tabPageSelected:function(c,a,b){if(this.ActivePage!==c){this.ActivePage=c||1;this.ActivePageControlName=this.getTabPageControlNameByIndex(c)||"";this.HistoryManagement&&b!==false&&HistoryManager.AddHistoryPoint(this.ActivePageControlName,
true,null,false);!a&&this.TabChanged&&this.TabChanged()}},getId:function(){return(this.ParentObject?this.ParentObject.CmpContext||"-"+this.ParentObject.ServerClass||"":"")+"-"+this.ControlName},urlListener:function(){var c;if(!gx.grid.drawAtServer){c=(c=document.location.hash.length>0?document.location.hash.substr(1):"")?this.getTabPageIndexByControlName(c):1;this.selectTabPageByIndex(c);this.tabPageSelected(c,false,false)}},SelectTab:function(c){this.selectTabPageByIndex(c);this.tabPageSelected(c,
false,void 0)},HideTab:function(c){this.hideTabPageByIndex(c)},ShowTab:function(c){this.showTabPageByIndex(c)}}}();return{datePicker:function(g){this.$input=c("#"+g.inputId);this.$trigger=c("#"+g.triggerId);this.showInLine=g.inline;this.inputType=g.inputType;this.format=g.format;this.datePartLength=g.datePartLength;this.timePartLength=g.timePartLength;this.nativeSupport=gx.HTML5&&(gx.util.browser.isIPhone()||gx.util.browser.isIPad()||gx.util.browser.isAndroid()&&gx.util.browser.isChrome());this.afterChange=
g.afterChange;this.opts=g;this.getInputType=function(){return this.timePartLength>0&&this.datePartLength===0?"time":this.datePartLength>0&&this.timePartLength===0?"date":"datetime-local"};this.getTimeStep=function(){return this.timePartLength>6?1:60};this.resolveValue=function(c,a){var b;gx.date.isNullDate(a)&&c!=="time"&&(a=new Date);if(c=="date")b=a.toISOString().slice(0,10);else{a.setMinutes(a.getMinutes()-a.getTimezoneOffset());b=0;var d=19;if(c=="time"){b=11;d=this.getTimeStep()==60?16:19}b=
(new gx.date.gxdate(a)).Value.toISOString().slice(b,d)}return b};this.render=function(){if(this.nativeSupport){var g=this.$input,a=this.getInputType(),b=c("<input>");b.attr("type",a);(a==="time"||a==="datetime-local")&&b.attr("step",this.getTimeStep());b.css("position","absolute");b.css("top","0");b.css("left","0");b.css("opacity","0");b.attr("id",g.attr("id")+"-picker");this.dtPicker=b;g.parent().append(b);var d=this,f=function(a){var a=a.val(),b=new gx.date.gxdate(a,"Y4MD"),a=a!==""?b.Value:gx.date.nullDate();
d.afterChange&&d.afterChange(null,a,g[0])};this.$trigger.on("click",function(){var c=gx.date.dateObject(g.val());if(!gx.date.isNullDate(c)){c=d.resolveValue(a,c);b.val(c);f(b)}b.click().focus()});gx.evt.attach(b[0],"change",function(){var a=c(this);f(a)})}else gx.html.onTypeAvailable("Calendar",this.installCalendar,[this.opts.inputId,this.opts.inline,this.opts.inputType!=="date",this.opts.weeksNumbers,this.opts.mondayFirst,this.opts.format])};this.installCalendar=function(g,a,b,d,f,k){var n=gx.dom.byId(g),
t=c(n);if(gx.lang.emptyObject(n)||n.nodeName!="SELECT")if(a===0){a=g+"_dp_trigger";if((n=gx.dom.byId(a))&&t.css("display")!=="none"&&t.css("visibility")!=="hidden"&&t.css("display")==="none"||t.css("visibility")==="hidden"||!n)a=g;t=t.parent().closest(".dp_container")[0];Calendar.setup({inputField:g,parentNode:t,showsTime:b,weekNumbers:d,mondayFirst:f,ifFormat:k,button:a,onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:true,displayRight:false})}else{gx.lang.emptyObject(n)||t.css("display",
"none");Calendar.setup({inputField:g,showsTime:b,weekNumbers:d,mondayFirst:f,ifFormat:k,flat:g+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:true})}}},actionGroup:function(){return{init:function(){c("[data-gx-base-lib='none']").length>0&&gx.fx.obs.addObserver("gx.onclick",this,function(g){var g=g.event,j=g.target;if(c(j).is(".gx-navbar .dropdown>a")){g.preventDefault();var g=j.getAttribute("aria-expanded"),a=function(b){var d=c(j).next(".gx-dropdown-menu"),b=b.event.target;
if(!c(b).closest(d).length&&b!=j&&j.getAttribute("aria-expanded")==="true"){j.setAttribute("aria-expanded","false");gx.fx.obs.deleteObserver("gx.onclick",this,a)}};if(g==="false"){gx.fx.obs.addObserver("gx.onclick",this,a);j.setAttribute("aria-expanded","true")}else{gx.fx.obs.deleteObserver("gx.onclick",this,a);j.setAttribute("aria-expanded","false")}}})},dynamicItems:function(){return function(c){this.preProcessItems=function(c){var a,b;a=0;for(b=c.length;a<b;a++)c[a].Children?this.preProcessItems(c[a].Children):
c[a].Children=[]};this.getItems=function(){return this.items};this.setItems=function(c){this.preProcessItems(c);this.items=c||[]};this.getType=function(g){var a;return function(){a||(a=c(g.getContainerControl()).closest("[data-gx-actiongroup-type]").attr("data-gx-actiongroup-type"));return a}}(this);this.renderMenu=function(g){var a="";this.IsPostBack?c('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove():c(this.getContainerControl()).after('<li data-gx-dynitem-hook="'+this.ContainerName+
'"></li>').css("display","none").appendTo(gx.dom.form());if(g.length){a=Mustache.render("{{#Children}}{{> navbarItemTemplate}}{{/Children}}",{containerName:this.ContainerName,Children:g},{navbarItemTemplate:'<li data-gx-dynitem-source="{{containerName}}">{{#Link}}<a href="{{Link}}" class="gx-navbar-textblock {{Class}}" data-gx-tpl-applied-navbar-textblock-link title="{{TooltipText}}">{{Caption}}</a>{{/Link}}{{^Link}}{{#Children.length}}{{> navbarDropDowntemplate}}{{/Children.length}}{{^Children.length}}<span class="gx-navbar-textblock {{Class}} navbar-text" data-gx-tpl-applied-navbar-textblock-text title="{{TooltipText}}">{{Caption}}</a>{{/Children.length}}{{/Link}}</li>',
navbarDropDowntemplate:'<li class="dropdown" data-gx-dynitem-source="{{containerName}}"><a href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle" title="{{TooltipText}}">{{Caption}}<span class="caret"></span></a><ul class="gx-dropdown-menu dropdown-menu {{Class}}">{{#Children}}{{> navbarItemTemplate}}{{/Children}}</ul></li>'});c('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(a)}};this.renderToolbar=function(g){var a="";g.length&&
(a=Mustache.render('{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{Caption}}</span>{{/Children.length}}{{/Link}}{{/Children}}',{containerName:this.ContainerName,Children:g},{toolbarItemTemplate:'{{#Children}}{{#Link}}<span class="{{Class}}" title="{{TooltipText}}"><a href="{{Link}}">{{Caption}}</a></span>{{/Link}}{{^Link}}{{#Children.length}}<div class="btn-group">{{> toolbarItemTemplate}}</div>{{/Children.length}}{{^Children.length}}<span class="{{Class}}" title="{{TooltipText}}">{{Caption}}</span>{{/Children.length}}{{/Link}}{{/Children}}'}));
c(this.getContainerControl()).attr("data-gx-dynitem-container","").html(a)};this.show=function(){var c=this.getType(),a=gx.lang.isArray(this.items)?this.items:[this.items];c=="menu"?this.renderMenu(a):c=="toolbar"&&this.renderToolbar(a)};this.destroy=function(){var g=this.getType();if(g=="menu"){c('li[data-gx-dynitem-source="'+this.ContainerName+'"]').remove();c('li[data-gx-dynitem-hook="'+this.ContainerName+'"]').after(this.getContainerControl()).remove()}else g=="toolbar"&&c(this.getContainerControl()).html("")}}}()}}(),
defineTabControl:function(c){gx.lang.apply(c.prototype,g);return c}}}(gx.$);
(function(c){typeof define==="function"&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){(function(){function g(a,b,c){return[parseFloat(a[0])*(m.test(a[0])?b/100:1),parseFloat(a[1])*(m.test(a[1])?c/100:1)]}function k(a,b){return parseInt(c.css(a,b),10)||0}function j(a){var b=a[0];return b.nodeType===9?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:c.isWindow(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,
offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}c.ui=c.ui||{};var a,b,d=Math.max,f=Math.abs,l=Math.round,n=/left|center|right/,t=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,p=/^\w+/,m=/%$/,s=c.fn.position;c.position={scrollbarWidth:function(){if(a!==void 0)return a;var b,d,f=c("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");d=f.children()[0];c("body").append(f);
b=d.offsetWidth;f.css("overflow","scroll");d=d.offsetWidth;if(b===d)d=f[0].clientWidth;f.remove();return a=b-d},getScrollInfo:function(a){var b=a.isWindow||a.isDocument?"":a.element.css("overflow-x"),d=a.isWindow||a.isDocument?"":a.element.css("overflow-y"),b=b==="scroll"||b==="auto"&&a.width<a.element[0].scrollWidth;return{width:d==="scroll"||d==="auto"&&a.height<a.element[0].scrollHeight?c.position.scrollbarWidth():0,height:b?c.position.scrollbarWidth():0}},getWithinInfo:function(a){var a=c(a||
window),b=c.isWindow(a[0]),d=!!a[0]&&a[0].nodeType===9;return{element:a,isWindow:b,isDocument:d,offset:a.offset()||{left:0,top:0},scrollLeft:a.scrollLeft(),scrollTop:a.scrollTop(),width:b||d?a.width():a.outerWidth(),height:b||d?a.height():a.outerHeight()}}};c.fn.position=function(a){if(!a||!a.of)return s.apply(this,arguments);var a=c.extend({},a),m,u,v,x,z,w,H=c(a.of),E=c.position.getWithinInfo(a.within),J=c.position.getScrollInfo(E),C=(a.collision||"flip").split(" "),A={};w=j(H);if(H[0].preventDefault)a.at=
"left top";u=w.width;v=w.height;x=w.offset;z=c.extend({},x);c.each(["my","at"],function(){var b=(a[this]||"").split(" "),c,d;b.length===1&&(b=n.test(b[0])?b.concat(["center"]):t.test(b[0])?["center"].concat(b):["center","center"]);b[0]=n.test(b[0])?b[0]:"center";b[1]=t.test(b[1])?b[1]:"center";c=o.exec(b[0]);d=o.exec(b[1]);A[this]=[c?c[0]:0,d?d[0]:0];a[this]=[p.exec(b[0])[0],p.exec(b[1])[0]]});C.length===1&&(C[1]=C[0]);if(a.at[0]==="right")z.left=z.left+u;else if(a.at[0]==="center")z.left=z.left+
u/2;if(a.at[1]==="bottom")z.top=z.top+v;else if(a.at[1]==="center")z.top=z.top+v/2;m=g(A.at,u,v);z.left=z.left+m[0];z.top=z.top+m[1];return this.each(function(){var j,n,s=c(this),o=s.outerWidth(),p=s.outerHeight(),t=k(this,"marginLeft"),w=k(this,"marginTop"),O=o+t+k(this,"marginRight")+J.width,R=p+w+k(this,"marginBottom")+J.height,I=c.extend({},z),N=g(A.my,s.outerWidth(),s.outerHeight());if(a.my[0]==="right")I.left=I.left-o;else if(a.my[0]==="center")I.left=I.left-o/2;if(a.my[1]==="bottom")I.top=
I.top-p;else if(a.my[1]==="center")I.top=I.top-p/2;I.left=I.left+N[0];I.top=I.top+N[1];if(!b){I.left=l(I.left);I.top=l(I.top)}j={marginLeft:t,marginTop:w};c.each(["left","top"],function(b,d){if(c.ui.position[C[b]])c.ui.position[C[b]][d](I,{targetWidth:u,targetHeight:v,elemWidth:o,elemHeight:p,collisionPosition:j,collisionWidth:O,collisionHeight:R,offset:[m[0]+N[0],m[1]+N[1]],my:a.my,at:a.at,within:E,elem:s})});a.using&&(n=function(b){var c=x.left-I.left,g=c+u-o,j=x.top-I.top,k=j+v-p,l={target:{element:H,
left:x.left,top:x.top,width:u,height:v},element:{element:s,left:I.left,top:I.top,width:o,height:p},horizontal:g<0?"left":c>0?"right":"center",vertical:k<0?"top":j>0?"bottom":"middle"};if(u<o&&f(c+g)<u)l.horizontal="center";if(v<p&&f(j+k)<v)l.vertical="middle";l.important=d(f(c),f(g))>d(f(j),f(k))?"horizontal":"vertical";a.using.call(this,b,l)});s.offset(c.extend(I,{using:n}))})};c.ui.position={fit:{left:function(a,b){var c=b.within,f=c.isWindow?c.scrollLeft:c.offset.left,g=c.width,j=a.left-b.collisionPosition.marginLeft,
c=f-j,k=j+b.collisionWidth-g-f;if(b.collisionWidth>g)if(c>0&&k<=0){f=a.left+c+b.collisionWidth-g-f;a.left=a.left+(c-f)}else a.left=k>0&&c<=0?f:c>k?f+g-b.collisionWidth:f;else a.left=c>0?a.left+c:k>0?a.left-k:d(a.left-j,a.left)},top:function(a,b){var c=b.within,f=c.isWindow?c.scrollTop:c.offset.top,g=b.within.height,j=a.top-b.collisionPosition.marginTop,c=f-j,k=j+b.collisionHeight-g-f;if(b.collisionHeight>g)if(c>0&&k<=0){f=a.top+c+b.collisionHeight-g-f;a.top=a.top+(c-f)}else a.top=k>0&&c<=0?f:c>k?
f+g-b.collisionHeight:f;else a.top=c>0?a.top+c:k>0?a.top-k:d(a.top-j,a.top)}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,g=c.width,j=c.isWindow?c.scrollLeft:c.offset.left,k=a.left-b.collisionPosition.marginLeft,c=k-j,l=k+b.collisionWidth-g-j,k=b.my[0]==="left"?-b.elemWidth:b.my[0]==="right"?b.elemWidth:0,m=b.at[0]==="left"?b.targetWidth:b.at[0]==="right"?-b.targetWidth:0,n=-2*b.offset[0];if(c<0){d=a.left+k+m+n+b.collisionWidth-g-d;if(d<0||d<f(c))a.left=a.left+(k+m+n)}else if(l>
0){d=a.left-b.collisionPosition.marginLeft+k+m+n-j;if(d>0||f(d)<l)a.left=a.left+(k+m+n)}},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,g=c.height,j=c.isWindow?c.scrollTop:c.offset.top,k=a.top-b.collisionPosition.marginTop,c=k-j,l=k+b.collisionHeight-g-j,k=b.my[1]==="top"?-b.elemHeight:b.my[1]==="bottom"?b.elemHeight:0,m=b.at[1]==="top"?b.targetHeight:b.at[1]==="bottom"?-b.targetHeight:0,n=-2*b.offset[1];if(c<0){d=a.top+k+m+n+b.collisionHeight-g-d;if(d<0||d<f(c))a.top=a.top+(k+m+n)}else if(l>
0){d=a.top-b.collisionPosition.marginTop+k+m+n-j;if(d>0||f(d)<l)a.top=a.top+(k+m+n)}}},flipfit:{left:function(){c.ui.position.flip.left.apply(this,arguments);c.ui.position.fit.left.apply(this,arguments)},top:function(){c.ui.position.flip.top.apply(this,arguments);c.ui.position.fit.top.apply(this,arguments)}}};(function(){var a,d,f,g,j=document.getElementsByTagName("body")[0];f=document.createElement("div");a=document.createElement(j?"div":"body");d={visibility:"hidden",width:0,height:0,border:0,margin:0,
background:"none"};j&&c.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(g in d)a.style[g]=d[g];a.appendChild(f);d=j||document.documentElement;d.insertBefore(a,d.firstChild);f.style.cssText="position: absolute; left: 10.7432222px;";f=c(f).offset().left;b=f>10&&f<11;a.innerHTML="";d.removeChild(a)})()})()});gx.core={};
gx.core.analytics=function(){return{supported:function(){if(typeof window.ga==="undefined"){console.log("Google Analytics - GA not enabled on this webpage");return false}return true},trackView:function(c){this.supported()&&window.ga("send","pageview",c)},trackEvent:function(c,g,k,j){this.supported()&&window.ga("send",{hitType:"event",eventCategory:c,eventAction:g,eventLabel:k,eventValue:j})},trackPurchase:function(c){var g=function(a,c,f,g,j){if(g&&gx.lang.emptyObject(f)&&j==null){console.log("Google Analytics ECommerce - Warning: Property value must be assigned: ",
c);return false}gx.lang.emptyObject(f)&&g&&(f=j);if(!gx.lang.emptyObject(f)){a[c]=f;return true}return false};if(this.supported()){window.ga("require","ecommerce");var k={},j=0;if(g(k,"id",c.TransactionId,true)){g(k,"affiliation",c.Affiliation);g(k,"revenue",c.Revenue);g(k,"shipping",c.Shipping);g(k,"tax",c.Tax);g(k,"currency",c.CurrencyCode);window.ga("ecommerce:addTransaction",k);for(j=0;j<c.Items.length;j++){var k=c.Items[j],a={};if(g(a,"id",c.TransactionId,true)&&g(a,"name",k.Name,true)){g(a,
"sku",k.Id);g(a,"category",k.Category);g(a,"price",k.Price);g(a,"quantity",k.Quantity);g(a,"currency",k.CurrencyCode);window.ga("ecommerce:addItem",a)}}window.ga("ecommerce:send")}}},setUserId:function(c){this.supported()&&window.ga("set","userId",c)}}}(gx.$);
gx.core.audio=function(c){var g,k=[],j=[];return{supported:function(){return!(gx.util.browser.isIE()&&gx.util.browser.ieVersion()<=8)},getSoundVar:function(a){return a==2?j:k[a]},playBackground:function(a){this.play(a,1)},play:function(a,b){g=true;b!=2&&this.stop(b);if(b==3){this.stop(2);this.pauseSound(this.getSoundVar(1))}b==2&&this.stop(3);this.playSound(b,a).always(function(){b==3&&this.resumeSound(this.getSoundVar(1))}.closure(this,[]))},playSound:function(a,b){var d=c.Deferred(),f;if(this.supported()){f=
new Howl({src:[b],html5:true,onplay:function(){},onend:function(){d.resolve()},onstop:function(){d.resolve()},onpause:function(){d.resolve()}});f.play()}else{f=c("<bgsound/>").attr({id:"gxIE7AudioSound_"+a,loop:"0",src:b});c("body").append(f)}k[a]=f;a==2&&j.push(f);return d.promise()},stop:function(a){if(a){this.stopSound(this.getSoundVar(a));k[a]=null}else{this.stopSound(this.getSoundVar(3));this.stopSound(this.getSoundVar(2));this.stopSound(this.getSoundVar(1))}},stopSound:function(a){var b=this.supported(),
a=gx.lang.isArray(a)?a:[a];c.map(a,function(d,f){d=a[f];if(!b&&d){c(d).attr("src","");c(d).remove();d=void 0}d&&d.stop&&d.stop()})},pauseSound:function(a){this.supported()&&a&&a.pause&&a.pause()},resumeSound:function(a){this.supported()&&a&&a.play&&a.play()},isPlaying:function(a){if(this.supported())return!a?this.isPlaying_impl(this.getSoundVar(3))||this.isPlaying_impl(this.getSoundVar(2))||this.isPlaying_impl(this.getSoundVar(1)):this.isPlaying_impl(this.getSoundVar(a))},isPlaying_impl:function(a){for(var b,
c=false,a=gx.lang.isArray(a)?a:[a],f=0;f<a.length;f++)(b=a[f])&&(c=c||b.playing())},_deinit:function(){if(g){this.stop(3);this.stop(2)}g=false}}}(gx.$);
(function(c){var g=/(col-(?:xs|sm|md|lg)-\d{1,2})/g,k=function(a){gx.plugdesign.registerTemplate(new gx.plugdesign.Template(a))},j=function(a,b){var d=c(a).parent().find("span");if(gx.lang.gxBoolean(b))d.parent("p").hide();else{d.removeClass("form-control");var f=d.parent("p");f.length===0?gx.plugdesign.applyTemplateOnElement("readonly-atts-vars",d[0],true):f.show()}},a=function(a,b){var d=c(".gx-form-group[data-gx-for='"+gx.dom.id(a)+"']");gx.lang.gxBoolean(b)?d.show():d.hide()};k({name:"labels",
selector:"div.gx-attribute:has(label.gx-label:not([data-gx-sr-only]))",excluded:"div:has(.gx_usercontrol)",setContext:function(a,b){var d=c(b).find("label.gx-label").addClass("control-label");a.labelEl=d[0];return a},listeners:{control:function(a){return c(a.labelEl).attr("for")},after:{Class:function(a,b){var b=b.trim(),c=gx.html.getFieldLabel(a),d=b.split(" ").join("Label ")+(b?"Label":""),f;if(c){f=(f=c.className.match(g))?f.join(" ")||"":"";c.className=["gx-label",f,d,"control-label"].join(" ")}}}}});
k({name:"atts-vars",selector:".gx-attribute > input, .gx-attribute > select, .gx-attribute > textarea, .gx-attribute > img:first-child",listeners:{control:function(a){return a.id},after:{Enabled:j,Visible:a}}});k({name:"readonly-atts-vars",selector:'.gx-attribute span[class^="Readonly"]:not(:has(input[type="checkbox"]))',template:'<p class="form-control-static">{{{outerHTML}}}</p>',outerHTML:true,listeners:{control:function(a){return a.id},after:{Visible:function(b,d){var f=c(b).parent("p");gx.lang.gxBoolean(d)?
f.show():f.hide();a(b,d)}}}});k({name:"password-atts-vars",selector:'.gx-attribute input[type="password"][data-gx-password-reveal]',template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn gx-pwd-reveal-btn"><button class="btn btn-default" type="button" title="'+gx.getMessage("GXM_revealpassword")+'"><span class="glyphicon glyphicon-eye-open"></span></button></span></div>',setContext:function(a,b){a.inputEl=b;return a},initialize:function(a){var b=c("#"+a.id),d=c("#"+a.id)[0];
b.next().click(function(){gx.fn.setCtrlProperty(d.id,"Ispassword",d.type!="password")})},listeners:{control:function(a){return a.id},after:{Visible:function(b,d){gx.lang.gxBoolean(d)&&gx.fn.isVisible(b,0)?c(b).next().show():c(b).next().hide();a(b,d)},Enabled:function(a,b){gx.lang.gxBoolean(b)?c(a).next().children().first().removeAttr("disabled"):c(a).next().children().first().attr("disabled","")},Ispassword:function(a,b){c("button",c(a).next()).attr("title",gx.getMessage(gx.lang.gxBoolean(b)?"GXM_revealpassword":
"GXM_hidepassword")).children().first().toggleClass("glyphicon-eye-open").toggleClass("glyphicon-eye-close")}}}});k({name:"checkbox",selector:'.gx-attribute > input[type="checkbox"], .gx-attribute label > input[type="checkbox"]',setContext:function(a,b){a.id=c(b)[0].id;return a},initialize:function(a){a=c("#"+a.id).get(0);c(a).closest("label").wrap("<div class='checkbox'></div>")},listeners:{control:function(a){return a.id},after:{Visible:function(b,d){var f=c(b).parent().closest(".checkbox");if(gx.lang.gxBoolean(d)){f.show();
f.children().show()}else f.hide();a(b,d)}}}});k({name:"usercontrol",onDemandInvoke:true,selector:".gx_usercontrol",setContext:function(a,b){a.id=c(b)[0].id;return a},listeners:{control:function(a){return a.id},after:{Visible:a}}});var b=function(b,d,f){this.visible=d;var g=c(b).parent().find(".input-group-btn");gx.lang.gxBoolean(d)&&gx.fn.isVisible(b,0)?(this.enabled||this.enabled===void 0)&&g.show():g.hide();f||a(b,d)};k({name:"datepicker",selector:".dp_container:has(img):has(input)",template:'<div class="dp_container {{alignClass}}" id="{{datePickerCt.id}}"><div class="input-group">{{$inputEl$}}{{$spaneEl$}}<span class="input-group-btn"><a class="btn btn-default">{{$imgEl$}}</a></span></div></div>',
outerHTML:true,setContext:function(a,b){var d=c(b),f=d.attr("data-align");a.datePickerCt=b;a.inputEl=d.find("input")[0];a.imgEl=d.find("img")[0];a.inputElId=a.inputEl.id;a.alignClass=f?"pull-"+f:"";a.nativeEl=d.find("#"+a.inputEl.id+"-picker")[0];d=c("#span_"+a.inputEl.id);if(d.length>0){f=d.parent("p")[0];a.spaneEl=f?f:d;f&&c(f).remove()}return a},initialize:function(a){var d=c("#"+a.inputElId),f=d.parent().closest(".dp_container");a.nativeEl&&f.append(a.nativeEl);f.find("a").click(function(a){try{if(a.target.nodeName!=
"IMG"){f.find("img")[0].click();return false}}catch(b){return false}});var g=gx.fn.isVisible(d[0],0),a=c("#span_"+a.inputEl.id);a.length>0&&(g=g||gx.fn.isVisible(a[0],0));b.call(this,d[0],g,true)},listeners:{control:function(a){return a.inputEl.id},after:{Enabled:function(a,b){this.enabled=gx.lang.gxBoolean(b);var d=c(a).parent().find(".input-group-btn");gx.lang.gxBoolean(b)?(this.visible||this.visible===void 0)&&d.show():d.hide();j(a,b)},Visible:b}}});var d=function(a){return c(a).parent().closest("span")},
f=function(a){a.find(":checked").parent("label").button("toggle")},l=function(a,b){var c=a.find("label");if(b){c.removeAttr("disabled");c.removeClass("disabled")}else{c.attr("disabled","disabled");a.find("input, label").css("pointer-events","none");c.addClass("disabled")}};k({name:"radio-button",selector:".gx-radio-button label",setContext:function(a,b){var g=d(b);a.name=c(b).children("input").attr("name");a.spanEl=g;if(!c(g).prop("initialized")){g.children("label").addClass("gx-radio-label btn btn-default");
var j=c(b).children().prop("disabled");f(g);l(g,!(j===true||j==="disabled"));g.find("script").remove();g.attr("data-toggle","buttons");j=g.hasClass("gx-radio-button-vertical")?"-vertical":"";g.addClass("btn-group"+j).removeClass("gx-radio-button-vertical").css("vertical-align","baseline")}return a},initialize:function(a){if(!c(a.spanEl).prop("initialized")){a.spanEl.prop("initialized",true);a.spanEl.children("label").on("click",function(){var a=c(this).children("input");a.focus();a.attr("checked",
"");a.prop("checked",true);gx.evt.onchange(a.get(0))})}},listeners:{control:function(a){return a.name},after:{Visible:a,Enabled:function(a,b){l(d(a),b)},Value:function(a){f(d(a))}}}});k({name:"prompt",selector:function(a){return c('a:has(img[id*="PROMPT"])',a).prevUntil("","input, select")},template:'<div class="input-group">{{$inputEl$}}<span class="input-group-btn">{{$promptEl$}}</span></div>',setContext:function(a,b){a.inputEl=b;a.promptEl=c(b).nextUntil("",'a:has(img[id*="PROMPT"])').addClass("btn btn-default");
return a},listeners:{control:function(a){return a.inputEl.id},before:{Visible:function(a,b){var d=c(a).parent();gx.lang.gxBoolean(b)?d.show():d.hide()},Enabled:function(a,b){var d=c(a).parent().find(".input-group-btn");gx.lang.gxBoolean(b)?d.show():d.hide()}}}});k({name:"prompt-trigger",selector:'img[id*="PROMPT"].gx-prompt',setContext:function(a,b){a.imgEl=b;return a},listeners:{control:function(a){return a.imgEl.id},before:{Enabled:function(a,b){var d=c(a).closest(".input-group-btn");gx.lang.gxBoolean(b)?
d.show():d.hide()}}}});var n=function(a,b){var d=c(a).parent(),d=d.add(d.find("img"));gx.lang.gxBoolean(b)?d.show():d.hide()};k({name:"geolocation",selector:"input + img.GeoLocOption",template:'<div class="input-group"><div id="{{inputEl.id}}_hook"></div><span class="input-group-btn"><a class="btn btn-default"><div id="{{inputEl.id}}_trigger_hook"></div></a></span></div>',setContext:function(a,b){a.inputEl=c(b).prev()[0];a.triggerEl=c(b)[0];return a},initialize:function(a){gx.evt.attach(a.el,"click",
function(){gx.geolocation.getMyPosition(this)});c("#"+a.inputEl.id+"_hook").replaceWith(a.inputEl);c("#"+a.inputEl.id+"_trigger_hook").replaceWith(a.triggerEl);n.call(this,a.inputEl,gx.fn.isVisible(a.inputEl,0))},listeners:{control:function(a){return a.inputEl.id},before:{Visible:n,Enabled:function(a,b){var d=c(a).parent().find(".input-group-btn");gx.lang.gxBoolean(b)?d.show():d.hide()}}}});k({name:"multimedia-upload",selector:".gx-multimedia-upload .fields-ct",template:'<div class="row"><div class="col-sm-4"><div class="row"><div class="col-sm-12">{{$fileOptionLbl$}}</div><div class="col-sm-12">{{$uriOptionLbl$}}</div></div></div><div class="col-sm-8">{{$uriField$}}{{$fileField$}}</div></div><div class="row"><div class="col-sm-12">{{$button$}}</div></div>',
applyTo:"inner",setContext:function(a,b){var d=c(b).parent().closest(".gx-multimedia-upload")[0],f=gx.html.multimediaUpload.getElements(d);f.fileOptionLbl=f.fileOption.parentNode;f.uriOptionLbl=f.uriOption.parentNode;gx.lang.apply(a,f);a.container=d;return a},initialize:function(a){c(a.button).addClass("btn btn-default Button");c(a.uriField).addClass("form-control")},listeners:{control:function(a){return gx.html.multimediaUpload.CtrlId(a.container.id)},after:{Visible:function(b,c){a(b,c,7)}}}});k({name:"navbar",
selector:".gx-navbar",setContext:function(a,b){a.toggleBtn=c(b).find(".gx-navbar-toggle");a.navBarInner=c(b).find(".gx-navbar-inner");return a},initialize:function(a){a.toggleBtn.attr("data-target","#"+a.navBarInner.attr("id"))}});gx.spa.addObserver("onnavigatecomplete",window,function(){var a=c(".navbar-collapse");a.collapse&&a.collapse("hide")});var t=function(a){a.anchor.get(0).href==location.href?a.anchor.parent().addClass("active"):a.anchor.parent().removeClass("active")};k({name:"navbar-textblock-link",
selector:"a.gx-navbar-textblock, .gx-navbar-textblock:has(a)",template:"{{$anchor$}}",setContext:function(a,b){var d=c(b);a.anchor=d.children("a");if(a.anchor.length===0&&d.is("a"))a.anchor=d;a.anchor.attr("id",d.attr("id"));a.anchor.attr("class",d.attr("class"));a.anchor.attr("style",d.attr("style"));return a},reDraw:t,initialize:t,listeners:{control:function(a){return a.id},before:{Caption:function(a,b){c(a).text(b);return true},Link:function(a,b){c(a).attr("href",b);return true}}}});k({name:"navbar-textblock-text",
selector:"span.gx-navbar-textblock:not(:has(a))",initialize:function(a){c(a.el).addClass("navbar-text")},listeners:{control:function(a){return a.id},after:{Link:function(a,b){var d=c(a);if(b&&d.hasClass("navbar-text")){d.removeClass("navbar-text");gx.plugdesign.applyTemplateOnElement("navbar-textblock-link",a)}}}}});k({name:"errorviewer",selector:".gx_ev div",initialize:function(a){var a=c(a.el),b=a.parent(".gx_ev"),d=b.css("position");if(d==="fixed"||d==="absolute"){b[0].effect&&b[0].effect.end();
a.addClass("alert alert-dismissible fade in").attr("style","").attr("role","alert").prepend(c('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'))}}});k({name:"textarea-auto-expand",selector:".gx-attribute > textarea[data-gx-text-maxlines]",setContext:function(a,b){a.el=c(b);return a},initialize:function(a){var b=a.el,a=b[0],d=c(window),f=parseInt(b.attr("rows"),10),g=parseInt(b.attr("data-gx-text-maxlines"),10);b.css("overflow-x",
"hidden");var j=function(a,b,c){b=b+c;a.attr("rows",b);return b},b=function(){for(var a=d.scrollTop(),b=parseInt(c(this).attr("rows"),10),k=c(this);b>f&&this.scrollHeight>=this.clientHeight;)b=j(k,b,-1);for(;c(this).val()!==""&&b<g&&this.scrollHeight>this.clientHeight;)b=j(k,b,1);d.scrollTop(a)};gx.evt.attach(a,["input","keyup"],b.closure(a,[]));gx.evt.on_ready(a,b.closure(a,[]))}});var o=function(a){return a.css("box-sizing")==="border-box"&&a.css("display")==="block"&&(a.css("background-size")===
"contain"||a.css("background-size")==="cover"||a.css("background-size")==="100% 100%"||a.css("background-repeat")==="repeat")},p=function(a){var b=a;if(o(a)){a.parent("a").length>0&&(b=a.parent("a"));b.parent("div[data-align-inner]").parent().parent().attr("data-align-image","")}};k({name:"image",selector:"img[data-gx-image]",setContext:function(a,b){a.el=c(b);return a},initialize:function(a){var a=a.el,b=a.get(0).currentSrc||a.attr("src");b&&o(a)&&a.css("background-image","url("+b+")");p(a)},listeners:{control:function(a){return a.id},
after:{Bitmap:function(a,b){var d=c(a);b&&o(d)?d.css("background-image","url("+b+")"):d.css("background-image","none")},Class:function(a){var b=c(a);a.src&&o(b)?b.css("background-image","url("+a.src+")"):b.css("background-image","none");p(b)}}}})})(gx.$);
